const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-CNqRT5Zi.js","assets/webworkerAll-DuguPJgB.js","assets/colorToUniform-BXaCBwVl.js","assets/WebGPURenderer-B4I60VvR.js","assets/SharedSystems-BAH-xjfT.js","assets/WebGLRenderer-Dopi2San.js"])))=>i.map(i=>d[i]);
var Q1=Object.defineProperty;var K1=(n,t,e)=>t in n?Q1(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var dt=(n,t,e)=>K1(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=e(o);fetch(o.href,a)}})();function ud(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ou={exports:{}},ho={},zu={exports:{}},Ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sm;function Z1(){if(Sm)return Ft;Sm=1;var n=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.iterator;function x(M){return M===null||typeof M!="object"?null:(M=g&&M[g]||M["@@iterator"],typeof M=="function"?M:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,b={};function w(M,O,G){this.props=M,this.context=O,this.refs=b,this.updater=G||v}w.prototype.isReactComponent={},w.prototype.setState=function(M,O){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,O,"setState")},w.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function C(){}C.prototype=w.prototype;function A(M,O,G){this.props=M,this.context=O,this.refs=b,this.updater=G||v}var T=A.prototype=new C;T.constructor=A,_(T,w.prototype),T.isPureReactComponent=!0;var k=Array.isArray,L=Object.prototype.hasOwnProperty,R={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function q(M,O,G){var Z,st={},W=null,j=null;if(O!=null)for(Z in O.ref!==void 0&&(j=O.ref),O.key!==void 0&&(W=""+O.key),O)L.call(O,Z)&&!F.hasOwnProperty(Z)&&(st[Z]=O[Z]);var H=arguments.length-2;if(H===1)st.children=G;else if(1<H){for(var Y=Array(H),at=0;at<H;at++)Y[at]=arguments[at+2];st.children=Y}if(M&&M.defaultProps)for(Z in H=M.defaultProps,H)st[Z]===void 0&&(st[Z]=H[Z]);return{$$typeof:n,type:M,key:W,ref:j,props:st,_owner:R.current}}function $(M,O){return{$$typeof:n,type:M.type,key:O,ref:M.ref,props:M.props,_owner:M._owner}}function N(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function V(M){var O={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(G){return O[G]})}var rt=/\/+/g;function ct(M,O){return typeof M=="object"&&M!==null&&M.key!=null?V(""+M.key):O.toString(36)}function lt(M,O,G,Z,st){var W=typeof M;(W==="undefined"||W==="boolean")&&(M=null);var j=!1;if(M===null)j=!0;else switch(W){case"string":case"number":j=!0;break;case"object":switch(M.$$typeof){case n:case t:j=!0}}if(j)return j=M,st=st(j),M=Z===""?"."+ct(j,0):Z,k(st)?(G="",M!=null&&(G=M.replace(rt,"$&/")+"/"),lt(st,O,G,"",function(at){return at})):st!=null&&(N(st)&&(st=$(st,G+(!st.key||j&&j.key===st.key?"":(""+st.key).replace(rt,"$&/")+"/")+M)),O.push(st)),1;if(j=0,Z=Z===""?".":Z+":",k(M))for(var H=0;H<M.length;H++){W=M[H];var Y=Z+ct(W,H);j+=lt(W,O,G,Y,st)}else if(Y=x(M),typeof Y=="function")for(M=Y.call(M),H=0;!(W=M.next()).done;)W=W.value,Y=Z+ct(W,H++),j+=lt(W,O,G,Y,st);else if(W==="object")throw O=String(M),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return j}function kt(M,O,G){if(M==null)return M;var Z=[],st=0;return lt(M,Z,"","",function(W){return O.call(G,W,st++)}),Z}function Q(M){if(M._status===-1){var O=M._result;O=O(),O.then(function(G){(M._status===0||M._status===-1)&&(M._status=1,M._result=G)},function(G){(M._status===0||M._status===-1)&&(M._status=2,M._result=G)}),M._status===-1&&(M._status=0,M._result=O)}if(M._status===1)return M._result.default;throw M._result}var K={current:null},J={transition:null},X={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:J,ReactCurrentOwner:R};function et(){throw Error("act(...) is not supported in production builds of React.")}return Ft.Children={map:kt,forEach:function(M,O,G){kt(M,function(){O.apply(this,arguments)},G)},count:function(M){var O=0;return kt(M,function(){O++}),O},toArray:function(M){return kt(M,function(O){return O})||[]},only:function(M){if(!N(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Ft.Component=w,Ft.Fragment=e,Ft.Profiler=o,Ft.PureComponent=A,Ft.StrictMode=s,Ft.Suspense=d,Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,Ft.act=et,Ft.cloneElement=function(M,O,G){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var Z=_({},M.props),st=M.key,W=M.ref,j=M._owner;if(O!=null){if(O.ref!==void 0&&(W=O.ref,j=R.current),O.key!==void 0&&(st=""+O.key),M.type&&M.type.defaultProps)var H=M.type.defaultProps;for(Y in O)L.call(O,Y)&&!F.hasOwnProperty(Y)&&(Z[Y]=O[Y]===void 0&&H!==void 0?H[Y]:O[Y])}var Y=arguments.length-2;if(Y===1)Z.children=G;else if(1<Y){H=Array(Y);for(var at=0;at<Y;at++)H[at]=arguments[at+2];Z.children=H}return{$$typeof:n,type:M.type,key:st,ref:W,props:Z,_owner:j}},Ft.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:a,_context:M},M.Consumer=M},Ft.createElement=q,Ft.createFactory=function(M){var O=q.bind(null,M);return O.type=M,O},Ft.createRef=function(){return{current:null}},Ft.forwardRef=function(M){return{$$typeof:u,render:M}},Ft.isValidElement=N,Ft.lazy=function(M){return{$$typeof:f,_payload:{_status:-1,_result:M},_init:Q}},Ft.memo=function(M,O){return{$$typeof:p,type:M,compare:O===void 0?null:O}},Ft.startTransition=function(M){var O=J.transition;J.transition={};try{M()}finally{J.transition=O}},Ft.unstable_act=et,Ft.useCallback=function(M,O){return K.current.useCallback(M,O)},Ft.useContext=function(M){return K.current.useContext(M)},Ft.useDebugValue=function(){},Ft.useDeferredValue=function(M){return K.current.useDeferredValue(M)},Ft.useEffect=function(M,O){return K.current.useEffect(M,O)},Ft.useId=function(){return K.current.useId()},Ft.useImperativeHandle=function(M,O,G){return K.current.useImperativeHandle(M,O,G)},Ft.useInsertionEffect=function(M,O){return K.current.useInsertionEffect(M,O)},Ft.useLayoutEffect=function(M,O){return K.current.useLayoutEffect(M,O)},Ft.useMemo=function(M,O){return K.current.useMemo(M,O)},Ft.useReducer=function(M,O,G){return K.current.useReducer(M,O,G)},Ft.useRef=function(M){return K.current.useRef(M)},Ft.useState=function(M){return K.current.useState(M)},Ft.useSyncExternalStore=function(M,O,G){return K.current.useSyncExternalStore(M,O,G)},Ft.useTransition=function(){return K.current.useTransition()},Ft.version="18.3.1",Ft}var bm;function hd(){return bm||(bm=1,zu.exports=Z1()),zu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var km;function J1(){if(km)return ho;km=1;var n=hd(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(u,d,p){var f,g={},x=null,v=null;p!==void 0&&(x=""+p),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(v=d.ref);for(f in d)s.call(d,f)&&!a.hasOwnProperty(f)&&(g[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)g[f]===void 0&&(g[f]=d[f]);return{$$typeof:t,type:u,key:x,ref:v,props:g,_owner:o.current}}return ho.Fragment=e,ho.jsx=c,ho.jsxs=c,ho}var Cm;function tw(){return Cm||(Cm=1,Ou.exports=J1()),Ou.exports}var z=tw(),tl={},Du={exports:{}},Je={},ju={exports:{}},Gu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Am;function ew(){return Am||(Am=1,(function(n){function t(J,X){var et=J.length;J.push(X);t:for(;0<et;){var M=et-1>>>1,O=J[M];if(0<o(O,X))J[M]=X,J[et]=O,et=M;else break t}}function e(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var X=J[0],et=J.pop();if(et!==X){J[0]=et;t:for(var M=0,O=J.length,G=O>>>1;M<G;){var Z=2*(M+1)-1,st=J[Z],W=Z+1,j=J[W];if(0>o(st,et))W<O&&0>o(j,st)?(J[M]=j,J[W]=et,M=W):(J[M]=st,J[Z]=et,M=Z);else if(W<O&&0>o(j,et))J[M]=j,J[W]=et,M=W;else break t}}return X}function o(J,X){var et=J.sortIndex-X.sortIndex;return et!==0?et:J.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var d=[],p=[],f=1,g=null,x=3,v=!1,_=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(J){for(var X=e(p);X!==null;){if(X.callback===null)s(p);else if(X.startTime<=J)s(p),X.sortIndex=X.expirationTime,t(d,X);else break;X=e(p)}}function k(J){if(b=!1,T(J),!_)if(e(d)!==null)_=!0,Q(L);else{var X=e(p);X!==null&&K(k,X.startTime-J)}}function L(J,X){_=!1,b&&(b=!1,C(q),q=-1),v=!0;var et=x;try{for(T(X),g=e(d);g!==null&&(!(g.expirationTime>X)||J&&!V());){var M=g.callback;if(typeof M=="function"){g.callback=null,x=g.priorityLevel;var O=M(g.expirationTime<=X);X=n.unstable_now(),typeof O=="function"?g.callback=O:g===e(d)&&s(d),T(X)}else s(d);g=e(d)}if(g!==null)var G=!0;else{var Z=e(p);Z!==null&&K(k,Z.startTime-X),G=!1}return G}finally{g=null,x=et,v=!1}}var R=!1,F=null,q=-1,$=5,N=-1;function V(){return!(n.unstable_now()-N<$)}function rt(){if(F!==null){var J=n.unstable_now();N=J;var X=!0;try{X=F(!0,J)}finally{X?ct():(R=!1,F=null)}}else R=!1}var ct;if(typeof A=="function")ct=function(){A(rt)};else if(typeof MessageChannel<"u"){var lt=new MessageChannel,kt=lt.port2;lt.port1.onmessage=rt,ct=function(){kt.postMessage(null)}}else ct=function(){w(rt,0)};function Q(J){F=J,R||(R=!0,ct())}function K(J,X){q=w(function(){J(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_continueExecution=function(){_||v||(_=!0,Q(L))},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return e(d)},n.unstable_next=function(J){switch(x){case 1:case 2:case 3:var X=3;break;default:X=x}var et=x;x=X;try{return J()}finally{x=et}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(J,X){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var et=x;x=J;try{return X()}finally{x=et}},n.unstable_scheduleCallback=function(J,X,et){var M=n.unstable_now();switch(typeof et=="object"&&et!==null?(et=et.delay,et=typeof et=="number"&&0<et?M+et:M):et=M,J){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=et+O,J={id:f++,callback:X,priorityLevel:J,startTime:et,expirationTime:O,sortIndex:-1},et>M?(J.sortIndex=et,t(p,J),e(d)===null&&J===e(p)&&(b?(C(q),q=-1):b=!0,K(k,et-M))):(J.sortIndex=O,t(d,J),_||v||(_=!0,Q(L))),J},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(J){var X=x;return function(){var et=x;x=X;try{return J.apply(this,arguments)}finally{x=et}}}})(Gu)),Gu}var Pm;function nw(){return Pm||(Pm=1,ju.exports=ew()),ju.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tm;function rw(){if(Tm)return Je;Tm=1;var n=hd(),t=nw();function e(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function a(r,i){c(r,i),c(r+"Capture",i)}function c(r,i){for(o[r]=i,r=0;r<i.length;r++)s.add(i[r])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},g={};function x(r){return d.call(g,r)?!0:d.call(f,r)?!1:p.test(r)?g[r]=!0:(f[r]=!0,!1)}function v(r,i,l,h){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function _(r,i,l,h){if(i===null||typeof i>"u"||v(r,i,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function b(r,i,l,h,m,y,S){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=m,this.mustUseProperty=l,this.propertyName=r,this.type=i,this.sanitizeURL=y,this.removeEmptyString=S}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){w[r]=new b(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];w[i]=new b(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){w[r]=new b(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){w[r]=new b(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){w[r]=new b(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){w[r]=new b(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){w[r]=new b(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){w[r]=new b(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){w[r]=new b(r,5,!1,r.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function A(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(C,A);w[i]=new b(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(C,A);w[i]=new b(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(C,A);w[i]=new b(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){w[r]=new b(r,1,!1,r.toLowerCase(),null,!1,!1)}),w.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){w[r]=new b(r,1,!1,r.toLowerCase(),null,!0,!0)});function T(r,i,l,h){var m=w.hasOwnProperty(i)?w[i]:null;(m!==null?m.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(_(i,l,m,h)&&(l=null),h||m===null?x(i)&&(l===null?r.removeAttribute(i):r.setAttribute(i,""+l)):m.mustUseProperty?r[m.propertyName]=l===null?m.type===3?!1:"":l:(i=m.attributeName,h=m.attributeNamespace,l===null?r.removeAttribute(i):(m=m.type,l=m===3||m===4&&l===!0?"":""+l,h?r.setAttributeNS(h,i,l):r.setAttribute(i,l))))}var k=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),R=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),V=Symbol.for("react.context"),rt=Symbol.for("react.forward_ref"),ct=Symbol.for("react.suspense"),lt=Symbol.for("react.suspense_list"),kt=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),J=Symbol.iterator;function X(r){return r===null||typeof r!="object"?null:(r=J&&r[J]||r["@@iterator"],typeof r=="function"?r:null)}var et=Object.assign,M;function O(r){if(M===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);M=i&&i[1]||""}return`
`+M+r}var G=!1;function Z(r,i){if(!r||G)return"";G=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(U){var h=U}Reflect.construct(r,[],i)}else{try{i.call()}catch(U){h=U}r.call(i.prototype)}else{try{throw Error()}catch(U){h=U}r()}}catch(U){if(U&&h&&typeof U.stack=="string"){for(var m=U.stack.split(`
`),y=h.stack.split(`
`),S=m.length-1,P=y.length-1;1<=S&&0<=P&&m[S]!==y[P];)P--;for(;1<=S&&0<=P;S--,P--)if(m[S]!==y[P]){if(S!==1||P!==1)do if(S--,P--,0>P||m[S]!==y[P]){var E=`
`+m[S].replace(" at new "," at ");return r.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",r.displayName)),E}while(1<=S&&0<=P);break}}}finally{G=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?O(r):""}function st(r){switch(r.tag){case 5:return O(r.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return r=Z(r.type,!1),r;case 11:return r=Z(r.type.render,!1),r;case 1:return r=Z(r.type,!0),r;default:return""}}function W(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case F:return"Fragment";case R:return"Portal";case $:return"Profiler";case q:return"StrictMode";case ct:return"Suspense";case lt:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case V:return(r.displayName||"Context")+".Consumer";case N:return(r._context.displayName||"Context")+".Provider";case rt:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case kt:return i=r.displayName||null,i!==null?i:W(r.type)||"Memo";case Q:i=r._payload,r=r._init;try{return W(r(i))}catch{}}return null}function j(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(i);case 8:return i===q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function H(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Y(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function at(r){var i=Y(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),h=""+r[i];if(!r.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,y=l.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return m.call(this)},set:function(S){h=""+S,y.call(this,S)}}),Object.defineProperty(r,i,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(S){h=""+S},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function St(r){r._valueTracker||(r._valueTracker=at(r))}function yt(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var l=i.getValue(),h="";return r&&(h=Y(r)?r.checked?"true":"false":r.value),r=h,r!==l?(i.setValue(r),!0):!1}function wt(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function pt(r,i){var l=i.checked;return et({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function It(r,i){var l=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;l=H(i.value!=null?i.value:l),r._wrapperState={initialChecked:h,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Rt(r,i){i=i.checked,i!=null&&T(r,"checked",i,!1)}function Gt(r,i){Rt(r,i);var l=H(i.value),h=i.type;if(l!=null)h==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?qt(r,i.type,l):i.hasOwnProperty("defaultValue")&&qt(r,i.type,H(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function ce(r,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,l||i===r.value||(r.value=i),r.defaultValue=i}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function qt(r,i,l){(i!=="number"||wt(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var Yt=Array.isArray;function Nt(r,i,l,h){if(r=r.options,i){i={};for(var m=0;m<l.length;m++)i["$"+l[m]]=!0;for(l=0;l<r.length;l++)m=i.hasOwnProperty("$"+r[l].value),r[l].selected!==m&&(r[l].selected=m),m&&h&&(r[l].defaultSelected=!0)}else{for(l=""+H(l),i=null,m=0;m<r.length;m++){if(r[m].value===l){r[m].selected=!0,h&&(r[m].defaultSelected=!0);return}i!==null||r[m].disabled||(i=r[m])}i!==null&&(i.selected=!0)}}function Bt(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(e(91));return et({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Qt(r,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(e(92));if(Yt(l)){if(1<l.length)throw Error(e(93));l=l[0]}i=l}i==null&&(i=""),l=i}r._wrapperState={initialValue:H(l)}}function ye(r,i){var l=H(i.value),h=H(i.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),i.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),h!=null&&(r.defaultValue=""+h)}function $t(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function Kt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ae(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?Kt(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var yn,Ct=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,h,m){MSApp.execUnsafeLocalFunction(function(){return r(i,l,h,m)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(yn=yn||document.createElement("div"),yn.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=yn.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function Se(r,i){if(i){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=i;return}}r.textContent=i}var bt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},He=["Webkit","ms","Moz","O"];Object.keys(bt).forEach(function(r){He.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),bt[i]=bt[r]})});function In(r,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||bt.hasOwnProperty(r)&&bt[r]?(""+i).trim():i+"px"}function te(r,i){r=r.style;for(var l in i)if(i.hasOwnProperty(l)){var h=l.indexOf("--")===0,m=In(l,i[l],h);l==="float"&&(l="cssFloat"),h?r.setProperty(l,m):r[l]=m}}var Xt=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kn(r,i){if(i){if(Xt[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(e(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(e(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(e(61))}if(i.style!=null&&typeof i.style!="object")throw Error(e(62))}}function Pe(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ye=null;function xn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Zn=null,vn=null,Ue=null;function Ir(r){if(r=Qi(r)){if(typeof Zn!="function")throw Error(e(280));var i=r.stateNode;i&&(i=ma(i),Zn(r.stateNode,r.type,i))}}function Rr(r){vn?Ue?Ue.push(r):Ue=[r]:vn=r}function is(){if(vn){var r=vn,i=Ue;if(Ue=vn=null,Ir(r),i)for(r=0;r<i.length;r++)Ir(i[r])}}function Rn(r,i){return r(i)}function Yo(){}var Ei=!1;function Ii(r,i,l){if(Ei)return r(i,l);Ei=!0;try{return Rn(r,i,l)}finally{Ei=!1,(vn!==null||Ue!==null)&&(Yo(),is())}}function Jn(r,i){var l=r.stateNode;if(l===null)return null;var h=ma(l);if(h===null)return null;l=h[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break t;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(e(231,i,typeof l));return l}var Fr=!1;if(u)try{var tr={};Object.defineProperty(tr,"passive",{get:function(){Fr=!0}}),window.addEventListener("test",tr,tr),window.removeEventListener("test",tr,tr)}catch{Fr=!1}function Ls(r,i,l,h,m,y,S,P,E){var U=Array.prototype.slice.call(arguments,3);try{i.apply(l,U)}catch(nt){this.onError(nt)}}var os=!1,as=null,Xo=!1,nc=null,rv={onError:function(r){os=!0,as=r}};function sv(r,i,l,h,m,y,S,P,E){os=!1,as=null,Ls.apply(rv,arguments)}function iv(r,i,l,h,m,y,S,P,E){if(sv.apply(this,arguments),os){if(os){var U=as;os=!1,as=null}else throw Error(e(198));Xo||(Xo=!0,nc=U)}}function ls(r){var i=r,l=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(l=i.return),r=i.return;while(r)}return i.tag===3?l:null}function Wd(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function Vd(r){if(ls(r)!==r)throw Error(e(188))}function ov(r){var i=r.alternate;if(!i){if(i=ls(r),i===null)throw Error(e(188));return i!==r?null:r}for(var l=r,h=i;;){var m=l.return;if(m===null)break;var y=m.alternate;if(y===null){if(h=m.return,h!==null){l=h;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===l)return Vd(m),r;if(y===h)return Vd(m),i;y=y.sibling}throw Error(e(188))}if(l.return!==h.return)l=m,h=y;else{for(var S=!1,P=m.child;P;){if(P===l){S=!0,l=m,h=y;break}if(P===h){S=!0,h=m,l=y;break}P=P.sibling}if(!S){for(P=y.child;P;){if(P===l){S=!0,l=y,h=m;break}if(P===h){S=!0,h=y,l=m;break}P=P.sibling}if(!S)throw Error(e(189))}}if(l.alternate!==h)throw Error(e(190))}if(l.tag!==3)throw Error(e(188));return l.stateNode.current===l?r:i}function Hd(r){return r=ov(r),r!==null?Yd(r):null}function Yd(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=Yd(r);if(i!==null)return i;r=r.sibling}return null}var Xd=t.unstable_scheduleCallback,qd=t.unstable_cancelCallback,av=t.unstable_shouldYield,lv=t.unstable_requestPaint,xe=t.unstable_now,cv=t.unstable_getCurrentPriorityLevel,rc=t.unstable_ImmediatePriority,Qd=t.unstable_UserBlockingPriority,qo=t.unstable_NormalPriority,uv=t.unstable_LowPriority,Kd=t.unstable_IdlePriority,Qo=null,er=null;function hv(r){if(er&&typeof er.onCommitFiberRoot=="function")try{er.onCommitFiberRoot(Qo,r,void 0,(r.current.flags&128)===128)}catch{}}var Fn=Math.clz32?Math.clz32:pv,dv=Math.log,fv=Math.LN2;function pv(r){return r>>>=0,r===0?32:31-(dv(r)/fv|0)|0}var Ko=64,Zo=4194304;function Ri(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Jo(r,i){var l=r.pendingLanes;if(l===0)return 0;var h=0,m=r.suspendedLanes,y=r.pingedLanes,S=l&268435455;if(S!==0){var P=S&~m;P!==0?h=Ri(P):(y&=S,y!==0&&(h=Ri(y)))}else S=l&~m,S!==0?h=Ri(S):y!==0&&(h=Ri(y));if(h===0)return 0;if(i!==0&&i!==h&&(i&m)===0&&(m=h&-h,y=i&-i,m>=y||m===16&&(y&4194240)!==0))return i;if((h&4)!==0&&(h|=l&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=h;0<i;)l=31-Fn(i),m=1<<l,h|=r[l],i&=~m;return h}function mv(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gv(r,i){for(var l=r.suspendedLanes,h=r.pingedLanes,m=r.expirationTimes,y=r.pendingLanes;0<y;){var S=31-Fn(y),P=1<<S,E=m[S];E===-1?((P&l)===0||(P&h)!==0)&&(m[S]=mv(P,i)):E<=i&&(r.expiredLanes|=P),y&=~P}}function sc(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Zd(){var r=Ko;return Ko<<=1,(Ko&4194240)===0&&(Ko=64),r}function ic(r){for(var i=[],l=0;31>l;l++)i.push(r);return i}function Fi(r,i,l){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-Fn(i),r[i]=l}function yv(r,i){var l=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<l;){var m=31-Fn(l),y=1<<m;i[m]=0,h[m]=-1,r[m]=-1,l&=~y}}function oc(r,i){var l=r.entangledLanes|=i;for(r=r.entanglements;l;){var h=31-Fn(l),m=1<<h;m&i|r[h]&i&&(r[h]|=i),l&=~m}}var Wt=0;function Jd(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var tf,ac,ef,nf,rf,lc=!1,ta=[],Lr=null,Nr=null,Br=null,Li=new Map,Ni=new Map,Or=[],xv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sf(r,i){switch(r){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":Br=null;break;case"pointerover":case"pointerout":Li.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ni.delete(i.pointerId)}}function Bi(r,i,l,h,m,y){return r===null||r.nativeEvent!==y?(r={blockedOn:i,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[m]},i!==null&&(i=Qi(i),i!==null&&ac(i)),r):(r.eventSystemFlags|=h,i=r.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),r)}function vv(r,i,l,h,m){switch(i){case"focusin":return Lr=Bi(Lr,r,i,l,h,m),!0;case"dragenter":return Nr=Bi(Nr,r,i,l,h,m),!0;case"mouseover":return Br=Bi(Br,r,i,l,h,m),!0;case"pointerover":var y=m.pointerId;return Li.set(y,Bi(Li.get(y)||null,r,i,l,h,m)),!0;case"gotpointercapture":return y=m.pointerId,Ni.set(y,Bi(Ni.get(y)||null,r,i,l,h,m)),!0}return!1}function of(r){var i=cs(r.target);if(i!==null){var l=ls(i);if(l!==null){if(i=l.tag,i===13){if(i=Wd(l),i!==null){r.blockedOn=i,rf(r.priority,function(){ef(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ea(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var l=uc(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var h=new l.constructor(l.type,l);Ye=h,l.target.dispatchEvent(h),Ye=null}else return i=Qi(l),i!==null&&ac(i),r.blockedOn=l,!1;i.shift()}return!0}function af(r,i,l){ea(r)&&l.delete(i)}function wv(){lc=!1,Lr!==null&&ea(Lr)&&(Lr=null),Nr!==null&&ea(Nr)&&(Nr=null),Br!==null&&ea(Br)&&(Br=null),Li.forEach(af),Ni.forEach(af)}function Oi(r,i){r.blockedOn===i&&(r.blockedOn=null,lc||(lc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,wv)))}function zi(r){function i(m){return Oi(m,r)}if(0<ta.length){Oi(ta[0],r);for(var l=1;l<ta.length;l++){var h=ta[l];h.blockedOn===r&&(h.blockedOn=null)}}for(Lr!==null&&Oi(Lr,r),Nr!==null&&Oi(Nr,r),Br!==null&&Oi(Br,r),Li.forEach(i),Ni.forEach(i),l=0;l<Or.length;l++)h=Or[l],h.blockedOn===r&&(h.blockedOn=null);for(;0<Or.length&&(l=Or[0],l.blockedOn===null);)of(l),l.blockedOn===null&&Or.shift()}var Ns=k.ReactCurrentBatchConfig,na=!0;function _v(r,i,l,h){var m=Wt,y=Ns.transition;Ns.transition=null;try{Wt=1,cc(r,i,l,h)}finally{Wt=m,Ns.transition=y}}function Sv(r,i,l,h){var m=Wt,y=Ns.transition;Ns.transition=null;try{Wt=4,cc(r,i,l,h)}finally{Wt=m,Ns.transition=y}}function cc(r,i,l,h){if(na){var m=uc(r,i,l,h);if(m===null)Pc(r,i,h,ra,l),sf(r,h);else if(vv(m,r,i,l,h))h.stopPropagation();else if(sf(r,h),i&4&&-1<xv.indexOf(r)){for(;m!==null;){var y=Qi(m);if(y!==null&&tf(y),y=uc(r,i,l,h),y===null&&Pc(r,i,h,ra,l),y===m)break;m=y}m!==null&&h.stopPropagation()}else Pc(r,i,h,null,l)}}var ra=null;function uc(r,i,l,h){if(ra=null,r=xn(h),r=cs(r),r!==null)if(i=ls(r),i===null)r=null;else if(l=i.tag,l===13){if(r=Wd(i),r!==null)return r;r=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return ra=r,null}function lf(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cv()){case rc:return 1;case Qd:return 4;case qo:case uv:return 16;case Kd:return 536870912;default:return 16}default:return 16}}var zr=null,hc=null,sa=null;function cf(){if(sa)return sa;var r,i=hc,l=i.length,h,m="value"in zr?zr.value:zr.textContent,y=m.length;for(r=0;r<l&&i[r]===m[r];r++);var S=l-r;for(h=1;h<=S&&i[l-h]===m[y-h];h++);return sa=m.slice(r,1<h?1-h:void 0)}function ia(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function oa(){return!0}function uf(){return!1}function sn(r){function i(l,h,m,y,S){this._reactName=l,this._targetInst=m,this.type=h,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var P in r)r.hasOwnProperty(P)&&(l=r[P],this[P]=l?l(y):y[P]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?oa:uf,this.isPropagationStopped=uf,this}return et(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=oa)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=oa)},persist:function(){},isPersistent:oa}),i}var Bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dc=sn(Bs),Di=et({},Bs,{view:0,detail:0}),bv=sn(Di),fc,pc,ji,aa=et({},Di,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gc,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ji&&(ji&&r.type==="mousemove"?(fc=r.screenX-ji.screenX,pc=r.screenY-ji.screenY):pc=fc=0,ji=r),fc)},movementY:function(r){return"movementY"in r?r.movementY:pc}}),hf=sn(aa),kv=et({},aa,{dataTransfer:0}),Cv=sn(kv),Av=et({},Di,{relatedTarget:0}),mc=sn(Av),Pv=et({},Bs,{animationName:0,elapsedTime:0,pseudoElement:0}),Tv=sn(Pv),Mv=et({},Bs,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Ev=sn(Mv),Iv=et({},Bs,{data:0}),df=sn(Iv),Rv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nv(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Lv[r])?!!i[r]:!1}function gc(){return Nv}var Bv=et({},Di,{key:function(r){if(r.key){var i=Rv[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=ia(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Fv[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gc,charCode:function(r){return r.type==="keypress"?ia(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ia(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ov=sn(Bv),zv=et({},aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ff=sn(zv),Dv=et({},Di,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gc}),jv=sn(Dv),Gv=et({},Bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uv=sn(Gv),$v=et({},aa,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Wv=sn($v),Vv=[9,13,27,32],yc=u&&"CompositionEvent"in window,Gi=null;u&&"documentMode"in document&&(Gi=document.documentMode);var Hv=u&&"TextEvent"in window&&!Gi,pf=u&&(!yc||Gi&&8<Gi&&11>=Gi),mf=" ",gf=!1;function yf(r,i){switch(r){case"keyup":return Vv.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xf(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Os=!1;function Yv(r,i){switch(r){case"compositionend":return xf(i);case"keypress":return i.which!==32?null:(gf=!0,mf);case"textInput":return r=i.data,r===mf&&gf?null:r;default:return null}}function Xv(r,i){if(Os)return r==="compositionend"||!yc&&yf(r,i)?(r=cf(),sa=hc=zr=null,Os=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return pf&&i.locale!=="ko"?null:i.data;default:return null}}var qv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vf(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!qv[r.type]:i==="textarea"}function wf(r,i,l,h){Rr(h),i=da(i,"onChange"),0<i.length&&(l=new dc("onChange","change",null,l,h),r.push({event:l,listeners:i}))}var Ui=null,$i=null;function Qv(r){zf(r,0)}function la(r){var i=Us(r);if(yt(i))return r}function Kv(r,i){if(r==="change")return i}var _f=!1;if(u){var xc;if(u){var vc="oninput"in document;if(!vc){var Sf=document.createElement("div");Sf.setAttribute("oninput","return;"),vc=typeof Sf.oninput=="function"}xc=vc}else xc=!1;_f=xc&&(!document.documentMode||9<document.documentMode)}function bf(){Ui&&(Ui.detachEvent("onpropertychange",kf),$i=Ui=null)}function kf(r){if(r.propertyName==="value"&&la($i)){var i=[];wf(i,$i,r,xn(r)),Ii(Qv,i)}}function Zv(r,i,l){r==="focusin"?(bf(),Ui=i,$i=l,Ui.attachEvent("onpropertychange",kf)):r==="focusout"&&bf()}function Jv(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return la($i)}function t1(r,i){if(r==="click")return la(i)}function e1(r,i){if(r==="input"||r==="change")return la(i)}function n1(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Ln=typeof Object.is=="function"?Object.is:n1;function Wi(r,i){if(Ln(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var l=Object.keys(r),h=Object.keys(i);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var m=l[h];if(!d.call(i,m)||!Ln(r[m],i[m]))return!1}return!0}function Cf(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Af(r,i){var l=Cf(r);r=0;for(var h;l;){if(l.nodeType===3){if(h=r+l.textContent.length,r<=i&&h>=i)return{node:l,offset:i-r};r=h}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=Cf(l)}}function Pf(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Pf(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Tf(){for(var r=window,i=wt();i instanceof r.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)r=i.contentWindow;else break;i=wt(r.document)}return i}function wc(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function r1(r){var i=Tf(),l=r.focusedElem,h=r.selectionRange;if(i!==l&&l&&l.ownerDocument&&Pf(l.ownerDocument.documentElement,l)){if(h!==null&&wc(l)){if(i=h.start,r=h.end,r===void 0&&(r=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(r,l.value.length);else if(r=(i=l.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var m=l.textContent.length,y=Math.min(h.start,m);h=h.end===void 0?y:Math.min(h.end,m),!r.extend&&y>h&&(m=h,h=y,y=m),m=Af(l,y);var S=Af(l,h);m&&S&&(r.rangeCount!==1||r.anchorNode!==m.node||r.anchorOffset!==m.offset||r.focusNode!==S.node||r.focusOffset!==S.offset)&&(i=i.createRange(),i.setStart(m.node,m.offset),r.removeAllRanges(),y>h?(r.addRange(i),r.extend(S.node,S.offset)):(i.setEnd(S.node,S.offset),r.addRange(i)))}}for(i=[],r=l;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)r=i[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var s1=u&&"documentMode"in document&&11>=document.documentMode,zs=null,_c=null,Vi=null,Sc=!1;function Mf(r,i,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Sc||zs==null||zs!==wt(h)||(h=zs,"selectionStart"in h&&wc(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Vi&&Wi(Vi,h)||(Vi=h,h=da(_c,"onSelect"),0<h.length&&(i=new dc("onSelect","select",null,i,l),r.push({event:i,listeners:h}),i.target=zs)))}function ca(r,i){var l={};return l[r.toLowerCase()]=i.toLowerCase(),l["Webkit"+r]="webkit"+i,l["Moz"+r]="moz"+i,l}var Ds={animationend:ca("Animation","AnimationEnd"),animationiteration:ca("Animation","AnimationIteration"),animationstart:ca("Animation","AnimationStart"),transitionend:ca("Transition","TransitionEnd")},bc={},Ef={};u&&(Ef=document.createElement("div").style,"AnimationEvent"in window||(delete Ds.animationend.animation,delete Ds.animationiteration.animation,delete Ds.animationstart.animation),"TransitionEvent"in window||delete Ds.transitionend.transition);function ua(r){if(bc[r])return bc[r];if(!Ds[r])return r;var i=Ds[r],l;for(l in i)if(i.hasOwnProperty(l)&&l in Ef)return bc[r]=i[l];return r}var If=ua("animationend"),Rf=ua("animationiteration"),Ff=ua("animationstart"),Lf=ua("transitionend"),Nf=new Map,Bf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(r,i){Nf.set(r,i),a(i,[r])}for(var kc=0;kc<Bf.length;kc++){var Cc=Bf[kc],i1=Cc.toLowerCase(),o1=Cc[0].toUpperCase()+Cc.slice(1);Dr(i1,"on"+o1)}Dr(If,"onAnimationEnd"),Dr(Rf,"onAnimationIteration"),Dr(Ff,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Lf,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),a1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hi));function Of(r,i,l){var h=r.type||"unknown-event";r.currentTarget=l,iv(h,i,void 0,r),r.currentTarget=null}function zf(r,i){i=(i&4)!==0;for(var l=0;l<r.length;l++){var h=r[l],m=h.event;h=h.listeners;t:{var y=void 0;if(i)for(var S=h.length-1;0<=S;S--){var P=h[S],E=P.instance,U=P.currentTarget;if(P=P.listener,E!==y&&m.isPropagationStopped())break t;Of(m,P,U),y=E}else for(S=0;S<h.length;S++){if(P=h[S],E=P.instance,U=P.currentTarget,P=P.listener,E!==y&&m.isPropagationStopped())break t;Of(m,P,U),y=E}}}if(Xo)throw r=nc,Xo=!1,nc=null,r}function ee(r,i){var l=i[Fc];l===void 0&&(l=i[Fc]=new Set);var h=r+"__bubble";l.has(h)||(Df(i,r,2,!1),l.add(h))}function Ac(r,i,l){var h=0;i&&(h|=4),Df(l,r,h,i)}var ha="_reactListening"+Math.random().toString(36).slice(2);function Yi(r){if(!r[ha]){r[ha]=!0,s.forEach(function(l){l!=="selectionchange"&&(a1.has(l)||Ac(l,!1,r),Ac(l,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[ha]||(i[ha]=!0,Ac("selectionchange",!1,i))}}function Df(r,i,l,h){switch(lf(i)){case 1:var m=_v;break;case 4:m=Sv;break;default:m=cc}l=m.bind(null,i,l,r),m=void 0,!Fr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),h?m!==void 0?r.addEventListener(i,l,{capture:!0,passive:m}):r.addEventListener(i,l,!0):m!==void 0?r.addEventListener(i,l,{passive:m}):r.addEventListener(i,l,!1)}function Pc(r,i,l,h,m){var y=h;if((i&1)===0&&(i&2)===0&&h!==null)t:for(;;){if(h===null)return;var S=h.tag;if(S===3||S===4){var P=h.stateNode.containerInfo;if(P===m||P.nodeType===8&&P.parentNode===m)break;if(S===4)for(S=h.return;S!==null;){var E=S.tag;if((E===3||E===4)&&(E=S.stateNode.containerInfo,E===m||E.nodeType===8&&E.parentNode===m))return;S=S.return}for(;P!==null;){if(S=cs(P),S===null)return;if(E=S.tag,E===5||E===6){h=y=S;continue t}P=P.parentNode}}h=h.return}Ii(function(){var U=y,nt=xn(l),it=[];t:{var tt=Nf.get(r);if(tt!==void 0){var ht=dc,mt=r;switch(r){case"keypress":if(ia(l)===0)break t;case"keydown":case"keyup":ht=Ov;break;case"focusin":mt="focus",ht=mc;break;case"focusout":mt="blur",ht=mc;break;case"beforeblur":case"afterblur":ht=mc;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ht=hf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ht=Cv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ht=jv;break;case If:case Rf:case Ff:ht=Tv;break;case Lf:ht=Uv;break;case"scroll":ht=bv;break;case"wheel":ht=Wv;break;case"copy":case"cut":case"paste":ht=Ev;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ht=ff}var gt=(i&4)!==0,ve=!gt&&r==="scroll",B=gt?tt!==null?tt+"Capture":null:tt;gt=[];for(var I=U,D;I!==null;){D=I;var ot=D.stateNode;if(D.tag===5&&ot!==null&&(D=ot,B!==null&&(ot=Jn(I,B),ot!=null&&gt.push(Xi(I,ot,D)))),ve)break;I=I.return}0<gt.length&&(tt=new ht(tt,mt,null,l,nt),it.push({event:tt,listeners:gt}))}}if((i&7)===0){t:{if(tt=r==="mouseover"||r==="pointerover",ht=r==="mouseout"||r==="pointerout",tt&&l!==Ye&&(mt=l.relatedTarget||l.fromElement)&&(cs(mt)||mt[pr]))break t;if((ht||tt)&&(tt=nt.window===nt?nt:(tt=nt.ownerDocument)?tt.defaultView||tt.parentWindow:window,ht?(mt=l.relatedTarget||l.toElement,ht=U,mt=mt?cs(mt):null,mt!==null&&(ve=ls(mt),mt!==ve||mt.tag!==5&&mt.tag!==6)&&(mt=null)):(ht=null,mt=U),ht!==mt)){if(gt=hf,ot="onMouseLeave",B="onMouseEnter",I="mouse",(r==="pointerout"||r==="pointerover")&&(gt=ff,ot="onPointerLeave",B="onPointerEnter",I="pointer"),ve=ht==null?tt:Us(ht),D=mt==null?tt:Us(mt),tt=new gt(ot,I+"leave",ht,l,nt),tt.target=ve,tt.relatedTarget=D,ot=null,cs(nt)===U&&(gt=new gt(B,I+"enter",mt,l,nt),gt.target=D,gt.relatedTarget=ve,ot=gt),ve=ot,ht&&mt)e:{for(gt=ht,B=mt,I=0,D=gt;D;D=js(D))I++;for(D=0,ot=B;ot;ot=js(ot))D++;for(;0<I-D;)gt=js(gt),I--;for(;0<D-I;)B=js(B),D--;for(;I--;){if(gt===B||B!==null&&gt===B.alternate)break e;gt=js(gt),B=js(B)}gt=null}else gt=null;ht!==null&&jf(it,tt,ht,gt,!1),mt!==null&&ve!==null&&jf(it,ve,mt,gt,!0)}}t:{if(tt=U?Us(U):window,ht=tt.nodeName&&tt.nodeName.toLowerCase(),ht==="select"||ht==="input"&&tt.type==="file")var xt=Kv;else if(vf(tt))if(_f)xt=e1;else{xt=Jv;var At=Zv}else(ht=tt.nodeName)&&ht.toLowerCase()==="input"&&(tt.type==="checkbox"||tt.type==="radio")&&(xt=t1);if(xt&&(xt=xt(r,U))){wf(it,xt,l,nt);break t}At&&At(r,tt,U),r==="focusout"&&(At=tt._wrapperState)&&At.controlled&&tt.type==="number"&&qt(tt,"number",tt.value)}switch(At=U?Us(U):window,r){case"focusin":(vf(At)||At.contentEditable==="true")&&(zs=At,_c=U,Vi=null);break;case"focusout":Vi=_c=zs=null;break;case"mousedown":Sc=!0;break;case"contextmenu":case"mouseup":case"dragend":Sc=!1,Mf(it,l,nt);break;case"selectionchange":if(s1)break;case"keydown":case"keyup":Mf(it,l,nt)}var Pt;if(yc)t:{switch(r){case"compositionstart":var Tt="onCompositionStart";break t;case"compositionend":Tt="onCompositionEnd";break t;case"compositionupdate":Tt="onCompositionUpdate";break t}Tt=void 0}else Os?yf(r,l)&&(Tt="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Tt="onCompositionStart");Tt&&(pf&&l.locale!=="ko"&&(Os||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&Os&&(Pt=cf()):(zr=nt,hc="value"in zr?zr.value:zr.textContent,Os=!0)),At=da(U,Tt),0<At.length&&(Tt=new df(Tt,r,null,l,nt),it.push({event:Tt,listeners:At}),Pt?Tt.data=Pt:(Pt=xf(l),Pt!==null&&(Tt.data=Pt)))),(Pt=Hv?Yv(r,l):Xv(r,l))&&(U=da(U,"onBeforeInput"),0<U.length&&(nt=new df("onBeforeInput","beforeinput",null,l,nt),it.push({event:nt,listeners:U}),nt.data=Pt))}zf(it,i)})}function Xi(r,i,l){return{instance:r,listener:i,currentTarget:l}}function da(r,i){for(var l=i+"Capture",h=[];r!==null;){var m=r,y=m.stateNode;m.tag===5&&y!==null&&(m=y,y=Jn(r,l),y!=null&&h.unshift(Xi(r,y,m)),y=Jn(r,i),y!=null&&h.push(Xi(r,y,m))),r=r.return}return h}function js(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function jf(r,i,l,h,m){for(var y=i._reactName,S=[];l!==null&&l!==h;){var P=l,E=P.alternate,U=P.stateNode;if(E!==null&&E===h)break;P.tag===5&&U!==null&&(P=U,m?(E=Jn(l,y),E!=null&&S.unshift(Xi(l,E,P))):m||(E=Jn(l,y),E!=null&&S.push(Xi(l,E,P)))),l=l.return}S.length!==0&&r.push({event:i,listeners:S})}var l1=/\r\n?/g,c1=/\u0000|\uFFFD/g;function Gf(r){return(typeof r=="string"?r:""+r).replace(l1,`
`).replace(c1,"")}function fa(r,i,l){if(i=Gf(i),Gf(r)!==i&&l)throw Error(e(425))}function pa(){}var Tc=null,Mc=null;function Ec(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ic=typeof setTimeout=="function"?setTimeout:void 0,u1=typeof clearTimeout=="function"?clearTimeout:void 0,Uf=typeof Promise=="function"?Promise:void 0,h1=typeof queueMicrotask=="function"?queueMicrotask:typeof Uf<"u"?function(r){return Uf.resolve(null).then(r).catch(d1)}:Ic;function d1(r){setTimeout(function(){throw r})}function Rc(r,i){var l=i,h=0;do{var m=l.nextSibling;if(r.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(h===0){r.removeChild(m),zi(i);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=m}while(l);zi(i)}function jr(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function $f(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return r;i--}else l==="/$"&&i++}r=r.previousSibling}return null}var Gs=Math.random().toString(36).slice(2),nr="__reactFiber$"+Gs,qi="__reactProps$"+Gs,pr="__reactContainer$"+Gs,Fc="__reactEvents$"+Gs,f1="__reactListeners$"+Gs,p1="__reactHandles$"+Gs;function cs(r){var i=r[nr];if(i)return i;for(var l=r.parentNode;l;){if(i=l[pr]||l[nr]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(r=$f(r);r!==null;){if(l=r[nr])return l;r=$f(r)}return i}r=l,l=r.parentNode}return null}function Qi(r){return r=r[nr]||r[pr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Us(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(e(33))}function ma(r){return r[qi]||null}var Lc=[],$s=-1;function Gr(r){return{current:r}}function ne(r){0>$s||(r.current=Lc[$s],Lc[$s]=null,$s--)}function Zt(r,i){$s++,Lc[$s]=r.current,r.current=i}var Ur={},Oe=Gr(Ur),Xe=Gr(!1),us=Ur;function Ws(r,i){var l=r.type.contextTypes;if(!l)return Ur;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var m={},y;for(y in l)m[y]=i[y];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=m),m}function qe(r){return r=r.childContextTypes,r!=null}function ga(){ne(Xe),ne(Oe)}function Wf(r,i,l){if(Oe.current!==Ur)throw Error(e(168));Zt(Oe,i),Zt(Xe,l)}function Vf(r,i,l){var h=r.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var m in h)if(!(m in i))throw Error(e(108,j(r)||"Unknown",m));return et({},l,h)}function ya(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Ur,us=Oe.current,Zt(Oe,r),Zt(Xe,Xe.current),!0}function Hf(r,i,l){var h=r.stateNode;if(!h)throw Error(e(169));l?(r=Vf(r,i,us),h.__reactInternalMemoizedMergedChildContext=r,ne(Xe),ne(Oe),Zt(Oe,r)):ne(Xe),Zt(Xe,l)}var mr=null,xa=!1,Nc=!1;function Yf(r){mr===null?mr=[r]:mr.push(r)}function m1(r){xa=!0,Yf(r)}function $r(){if(!Nc&&mr!==null){Nc=!0;var r=0,i=Wt;try{var l=mr;for(Wt=1;r<l.length;r++){var h=l[r];do h=h(!0);while(h!==null)}mr=null,xa=!1}catch(m){throw mr!==null&&(mr=mr.slice(r+1)),Xd(rc,$r),m}finally{Wt=i,Nc=!1}}return null}var Vs=[],Hs=0,va=null,wa=0,wn=[],_n=0,hs=null,gr=1,yr="";function ds(r,i){Vs[Hs++]=wa,Vs[Hs++]=va,va=r,wa=i}function Xf(r,i,l){wn[_n++]=gr,wn[_n++]=yr,wn[_n++]=hs,hs=r;var h=gr;r=yr;var m=32-Fn(h)-1;h&=~(1<<m),l+=1;var y=32-Fn(i)+m;if(30<y){var S=m-m%5;y=(h&(1<<S)-1).toString(32),h>>=S,m-=S,gr=1<<32-Fn(i)+m|l<<m|h,yr=y+r}else gr=1<<y|l<<m|h,yr=r}function Bc(r){r.return!==null&&(ds(r,1),Xf(r,1,0))}function Oc(r){for(;r===va;)va=Vs[--Hs],Vs[Hs]=null,wa=Vs[--Hs],Vs[Hs]=null;for(;r===hs;)hs=wn[--_n],wn[_n]=null,yr=wn[--_n],wn[_n]=null,gr=wn[--_n],wn[_n]=null}var on=null,an=null,ae=!1,Nn=null;function qf(r,i){var l=Cn(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=r,i=r.deletions,i===null?(r.deletions=[l],r.flags|=16):i.push(l)}function Qf(r,i){switch(r.tag){case 5:var l=r.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,on=r,an=jr(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,on=r,an=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=hs!==null?{id:gr,overflow:yr}:null,r.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=Cn(18,null,null,0),l.stateNode=i,l.return=r,r.child=l,on=r,an=null,!0):!1;default:return!1}}function zc(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Dc(r){if(ae){var i=an;if(i){var l=i;if(!Qf(r,i)){if(zc(r))throw Error(e(418));i=jr(l.nextSibling);var h=on;i&&Qf(r,i)?qf(h,l):(r.flags=r.flags&-4097|2,ae=!1,on=r)}}else{if(zc(r))throw Error(e(418));r.flags=r.flags&-4097|2,ae=!1,on=r}}}function Kf(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;on=r}function _a(r){if(r!==on)return!1;if(!ae)return Kf(r),ae=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!Ec(r.type,r.memoizedProps)),i&&(i=an)){if(zc(r))throw Zf(),Error(e(418));for(;i;)qf(r,i),i=jr(i.nextSibling)}if(Kf(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(e(317));t:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(i===0){an=jr(r.nextSibling);break t}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}r=r.nextSibling}an=null}}else an=on?jr(r.stateNode.nextSibling):null;return!0}function Zf(){for(var r=an;r;)r=jr(r.nextSibling)}function Ys(){an=on=null,ae=!1}function jc(r){Nn===null?Nn=[r]:Nn.push(r)}var g1=k.ReactCurrentBatchConfig;function Ki(r,i,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(e(309));var h=l.stateNode}if(!h)throw Error(e(147,r));var m=h,y=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===y?i.ref:(i=function(S){var P=m.refs;S===null?delete P[y]:P[y]=S},i._stringRef=y,i)}if(typeof r!="string")throw Error(e(284));if(!l._owner)throw Error(e(290,r))}return r}function Sa(r,i){throw r=Object.prototype.toString.call(i),Error(e(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function Jf(r){var i=r._init;return i(r._payload)}function tp(r){function i(B,I){if(r){var D=B.deletions;D===null?(B.deletions=[I],B.flags|=16):D.push(I)}}function l(B,I){if(!r)return null;for(;I!==null;)i(B,I),I=I.sibling;return null}function h(B,I){for(B=new Map;I!==null;)I.key!==null?B.set(I.key,I):B.set(I.index,I),I=I.sibling;return B}function m(B,I){return B=Kr(B,I),B.index=0,B.sibling=null,B}function y(B,I,D){return B.index=D,r?(D=B.alternate,D!==null?(D=D.index,D<I?(B.flags|=2,I):D):(B.flags|=2,I)):(B.flags|=1048576,I)}function S(B){return r&&B.alternate===null&&(B.flags|=2),B}function P(B,I,D,ot){return I===null||I.tag!==6?(I=Iu(D,B.mode,ot),I.return=B,I):(I=m(I,D),I.return=B,I)}function E(B,I,D,ot){var xt=D.type;return xt===F?nt(B,I,D.props.children,ot,D.key):I!==null&&(I.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===Q&&Jf(xt)===I.type)?(ot=m(I,D.props),ot.ref=Ki(B,I,D),ot.return=B,ot):(ot=Ha(D.type,D.key,D.props,null,B.mode,ot),ot.ref=Ki(B,I,D),ot.return=B,ot)}function U(B,I,D,ot){return I===null||I.tag!==4||I.stateNode.containerInfo!==D.containerInfo||I.stateNode.implementation!==D.implementation?(I=Ru(D,B.mode,ot),I.return=B,I):(I=m(I,D.children||[]),I.return=B,I)}function nt(B,I,D,ot,xt){return I===null||I.tag!==7?(I=ws(D,B.mode,ot,xt),I.return=B,I):(I=m(I,D),I.return=B,I)}function it(B,I,D){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Iu(""+I,B.mode,D),I.return=B,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case L:return D=Ha(I.type,I.key,I.props,null,B.mode,D),D.ref=Ki(B,null,I),D.return=B,D;case R:return I=Ru(I,B.mode,D),I.return=B,I;case Q:var ot=I._init;return it(B,ot(I._payload),D)}if(Yt(I)||X(I))return I=ws(I,B.mode,D,null),I.return=B,I;Sa(B,I)}return null}function tt(B,I,D,ot){var xt=I!==null?I.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return xt!==null?null:P(B,I,""+D,ot);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case L:return D.key===xt?E(B,I,D,ot):null;case R:return D.key===xt?U(B,I,D,ot):null;case Q:return xt=D._init,tt(B,I,xt(D._payload),ot)}if(Yt(D)||X(D))return xt!==null?null:nt(B,I,D,ot,null);Sa(B,D)}return null}function ht(B,I,D,ot,xt){if(typeof ot=="string"&&ot!==""||typeof ot=="number")return B=B.get(D)||null,P(I,B,""+ot,xt);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case L:return B=B.get(ot.key===null?D:ot.key)||null,E(I,B,ot,xt);case R:return B=B.get(ot.key===null?D:ot.key)||null,U(I,B,ot,xt);case Q:var At=ot._init;return ht(B,I,D,At(ot._payload),xt)}if(Yt(ot)||X(ot))return B=B.get(D)||null,nt(I,B,ot,xt,null);Sa(I,ot)}return null}function mt(B,I,D,ot){for(var xt=null,At=null,Pt=I,Tt=I=0,Ee=null;Pt!==null&&Tt<D.length;Tt++){Pt.index>Tt?(Ee=Pt,Pt=null):Ee=Pt.sibling;var Dt=tt(B,Pt,D[Tt],ot);if(Dt===null){Pt===null&&(Pt=Ee);break}r&&Pt&&Dt.alternate===null&&i(B,Pt),I=y(Dt,I,Tt),At===null?xt=Dt:At.sibling=Dt,At=Dt,Pt=Ee}if(Tt===D.length)return l(B,Pt),ae&&ds(B,Tt),xt;if(Pt===null){for(;Tt<D.length;Tt++)Pt=it(B,D[Tt],ot),Pt!==null&&(I=y(Pt,I,Tt),At===null?xt=Pt:At.sibling=Pt,At=Pt);return ae&&ds(B,Tt),xt}for(Pt=h(B,Pt);Tt<D.length;Tt++)Ee=ht(Pt,B,Tt,D[Tt],ot),Ee!==null&&(r&&Ee.alternate!==null&&Pt.delete(Ee.key===null?Tt:Ee.key),I=y(Ee,I,Tt),At===null?xt=Ee:At.sibling=Ee,At=Ee);return r&&Pt.forEach(function(Zr){return i(B,Zr)}),ae&&ds(B,Tt),xt}function gt(B,I,D,ot){var xt=X(D);if(typeof xt!="function")throw Error(e(150));if(D=xt.call(D),D==null)throw Error(e(151));for(var At=xt=null,Pt=I,Tt=I=0,Ee=null,Dt=D.next();Pt!==null&&!Dt.done;Tt++,Dt=D.next()){Pt.index>Tt?(Ee=Pt,Pt=null):Ee=Pt.sibling;var Zr=tt(B,Pt,Dt.value,ot);if(Zr===null){Pt===null&&(Pt=Ee);break}r&&Pt&&Zr.alternate===null&&i(B,Pt),I=y(Zr,I,Tt),At===null?xt=Zr:At.sibling=Zr,At=Zr,Pt=Ee}if(Dt.done)return l(B,Pt),ae&&ds(B,Tt),xt;if(Pt===null){for(;!Dt.done;Tt++,Dt=D.next())Dt=it(B,Dt.value,ot),Dt!==null&&(I=y(Dt,I,Tt),At===null?xt=Dt:At.sibling=Dt,At=Dt);return ae&&ds(B,Tt),xt}for(Pt=h(B,Pt);!Dt.done;Tt++,Dt=D.next())Dt=ht(Pt,B,Tt,Dt.value,ot),Dt!==null&&(r&&Dt.alternate!==null&&Pt.delete(Dt.key===null?Tt:Dt.key),I=y(Dt,I,Tt),At===null?xt=Dt:At.sibling=Dt,At=Dt);return r&&Pt.forEach(function(q1){return i(B,q1)}),ae&&ds(B,Tt),xt}function ve(B,I,D,ot){if(typeof D=="object"&&D!==null&&D.type===F&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case L:t:{for(var xt=D.key,At=I;At!==null;){if(At.key===xt){if(xt=D.type,xt===F){if(At.tag===7){l(B,At.sibling),I=m(At,D.props.children),I.return=B,B=I;break t}}else if(At.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===Q&&Jf(xt)===At.type){l(B,At.sibling),I=m(At,D.props),I.ref=Ki(B,At,D),I.return=B,B=I;break t}l(B,At);break}else i(B,At);At=At.sibling}D.type===F?(I=ws(D.props.children,B.mode,ot,D.key),I.return=B,B=I):(ot=Ha(D.type,D.key,D.props,null,B.mode,ot),ot.ref=Ki(B,I,D),ot.return=B,B=ot)}return S(B);case R:t:{for(At=D.key;I!==null;){if(I.key===At)if(I.tag===4&&I.stateNode.containerInfo===D.containerInfo&&I.stateNode.implementation===D.implementation){l(B,I.sibling),I=m(I,D.children||[]),I.return=B,B=I;break t}else{l(B,I);break}else i(B,I);I=I.sibling}I=Ru(D,B.mode,ot),I.return=B,B=I}return S(B);case Q:return At=D._init,ve(B,I,At(D._payload),ot)}if(Yt(D))return mt(B,I,D,ot);if(X(D))return gt(B,I,D,ot);Sa(B,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,I!==null&&I.tag===6?(l(B,I.sibling),I=m(I,D),I.return=B,B=I):(l(B,I),I=Iu(D,B.mode,ot),I.return=B,B=I),S(B)):l(B,I)}return ve}var Xs=tp(!0),ep=tp(!1),ba=Gr(null),ka=null,qs=null,Gc=null;function Uc(){Gc=qs=ka=null}function $c(r){var i=ba.current;ne(ba),r._currentValue=i}function Wc(r,i,l){for(;r!==null;){var h=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),r===l)break;r=r.return}}function Qs(r,i){ka=r,Gc=qs=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(Qe=!0),r.firstContext=null)}function Sn(r){var i=r._currentValue;if(Gc!==r)if(r={context:r,memoizedValue:i,next:null},qs===null){if(ka===null)throw Error(e(308));qs=r,ka.dependencies={lanes:0,firstContext:r}}else qs=qs.next=r;return i}var fs=null;function Vc(r){fs===null?fs=[r]:fs.push(r)}function np(r,i,l,h){var m=i.interleaved;return m===null?(l.next=l,Vc(i)):(l.next=m.next,m.next=l),i.interleaved=l,xr(r,h)}function xr(r,i){r.lanes|=i;var l=r.alternate;for(l!==null&&(l.lanes|=i),l=r,r=r.return;r!==null;)r.childLanes|=i,l=r.alternate,l!==null&&(l.childLanes|=i),l=r,r=r.return;return l.tag===3?l.stateNode:null}var Wr=!1;function Hc(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rp(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function vr(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function Vr(r,i,l){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(zt&2)!==0){var m=h.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),h.pending=i,xr(r,l)}return m=h.interleaved,m===null?(i.next=i,Vc(h)):(i.next=m.next,m.next=i),h.interleaved=i,xr(r,l)}function Ca(r,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var h=i.lanes;h&=r.pendingLanes,l|=h,i.lanes=l,oc(r,l)}}function sp(r,i){var l=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var m=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var S={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?m=y=S:y=y.next=S,l=l.next}while(l!==null);y===null?m=y=i:y=y.next=i}else m=y=i;l={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:h.shared,effects:h.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=i:r.next=i,l.lastBaseUpdate=i}function Aa(r,i,l,h){var m=r.updateQueue;Wr=!1;var y=m.firstBaseUpdate,S=m.lastBaseUpdate,P=m.shared.pending;if(P!==null){m.shared.pending=null;var E=P,U=E.next;E.next=null,S===null?y=U:S.next=U,S=E;var nt=r.alternate;nt!==null&&(nt=nt.updateQueue,P=nt.lastBaseUpdate,P!==S&&(P===null?nt.firstBaseUpdate=U:P.next=U,nt.lastBaseUpdate=E))}if(y!==null){var it=m.baseState;S=0,nt=U=E=null,P=y;do{var tt=P.lane,ht=P.eventTime;if((h&tt)===tt){nt!==null&&(nt=nt.next={eventTime:ht,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});t:{var mt=r,gt=P;switch(tt=i,ht=l,gt.tag){case 1:if(mt=gt.payload,typeof mt=="function"){it=mt.call(ht,it,tt);break t}it=mt;break t;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=gt.payload,tt=typeof mt=="function"?mt.call(ht,it,tt):mt,tt==null)break t;it=et({},it,tt);break t;case 2:Wr=!0}}P.callback!==null&&P.lane!==0&&(r.flags|=64,tt=m.effects,tt===null?m.effects=[P]:tt.push(P))}else ht={eventTime:ht,lane:tt,tag:P.tag,payload:P.payload,callback:P.callback,next:null},nt===null?(U=nt=ht,E=it):nt=nt.next=ht,S|=tt;if(P=P.next,P===null){if(P=m.shared.pending,P===null)break;tt=P,P=tt.next,tt.next=null,m.lastBaseUpdate=tt,m.shared.pending=null}}while(!0);if(nt===null&&(E=it),m.baseState=E,m.firstBaseUpdate=U,m.lastBaseUpdate=nt,i=m.shared.interleaved,i!==null){m=i;do S|=m.lane,m=m.next;while(m!==i)}else y===null&&(m.shared.lanes=0);gs|=S,r.lanes=S,r.memoizedState=it}}function ip(r,i,l){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var h=r[i],m=h.callback;if(m!==null){if(h.callback=null,h=l,typeof m!="function")throw Error(e(191,m));m.call(h)}}}var Zi={},rr=Gr(Zi),Ji=Gr(Zi),to=Gr(Zi);function ps(r){if(r===Zi)throw Error(e(174));return r}function Yc(r,i){switch(Zt(to,i),Zt(Ji,r),Zt(rr,Zi),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Ae(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=Ae(i,r)}ne(rr),Zt(rr,i)}function Ks(){ne(rr),ne(Ji),ne(to)}function op(r){ps(to.current);var i=ps(rr.current),l=Ae(i,r.type);i!==l&&(Zt(Ji,r),Zt(rr,l))}function Xc(r){Ji.current===r&&(ne(rr),ne(Ji))}var ue=Gr(0);function Pa(r){for(var i=r;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var qc=[];function Qc(){for(var r=0;r<qc.length;r++)qc[r]._workInProgressVersionPrimary=null;qc.length=0}var Ta=k.ReactCurrentDispatcher,Kc=k.ReactCurrentBatchConfig,ms=0,he=null,be=null,Te=null,Ma=!1,eo=!1,no=0,y1=0;function ze(){throw Error(e(321))}function Zc(r,i){if(i===null)return!1;for(var l=0;l<i.length&&l<r.length;l++)if(!Ln(r[l],i[l]))return!1;return!0}function Jc(r,i,l,h,m,y){if(ms=y,he=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Ta.current=r===null||r.memoizedState===null?_1:S1,r=l(h,m),eo){y=0;do{if(eo=!1,no=0,25<=y)throw Error(e(301));y+=1,Te=be=null,i.updateQueue=null,Ta.current=b1,r=l(h,m)}while(eo)}if(Ta.current=Ra,i=be!==null&&be.next!==null,ms=0,Te=be=he=null,Ma=!1,i)throw Error(e(300));return r}function tu(){var r=no!==0;return no=0,r}function sr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Te===null?he.memoizedState=Te=r:Te=Te.next=r,Te}function bn(){if(be===null){var r=he.alternate;r=r!==null?r.memoizedState:null}else r=be.next;var i=Te===null?he.memoizedState:Te.next;if(i!==null)Te=i,be=r;else{if(r===null)throw Error(e(310));be=r,r={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},Te===null?he.memoizedState=Te=r:Te=Te.next=r}return Te}function ro(r,i){return typeof i=="function"?i(r):i}function eu(r){var i=bn(),l=i.queue;if(l===null)throw Error(e(311));l.lastRenderedReducer=r;var h=be,m=h.baseQueue,y=l.pending;if(y!==null){if(m!==null){var S=m.next;m.next=y.next,y.next=S}h.baseQueue=m=y,l.pending=null}if(m!==null){y=m.next,h=h.baseState;var P=S=null,E=null,U=y;do{var nt=U.lane;if((ms&nt)===nt)E!==null&&(E=E.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),h=U.hasEagerState?U.eagerState:r(h,U.action);else{var it={lane:nt,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};E===null?(P=E=it,S=h):E=E.next=it,he.lanes|=nt,gs|=nt}U=U.next}while(U!==null&&U!==y);E===null?S=h:E.next=P,Ln(h,i.memoizedState)||(Qe=!0),i.memoizedState=h,i.baseState=S,i.baseQueue=E,l.lastRenderedState=h}if(r=l.interleaved,r!==null){m=r;do y=m.lane,he.lanes|=y,gs|=y,m=m.next;while(m!==r)}else m===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function nu(r){var i=bn(),l=i.queue;if(l===null)throw Error(e(311));l.lastRenderedReducer=r;var h=l.dispatch,m=l.pending,y=i.memoizedState;if(m!==null){l.pending=null;var S=m=m.next;do y=r(y,S.action),S=S.next;while(S!==m);Ln(y,i.memoizedState)||(Qe=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),l.lastRenderedState=y}return[y,h]}function ap(){}function lp(r,i){var l=he,h=bn(),m=i(),y=!Ln(h.memoizedState,m);if(y&&(h.memoizedState=m,Qe=!0),h=h.queue,ru(hp.bind(null,l,h,r),[r]),h.getSnapshot!==i||y||Te!==null&&Te.memoizedState.tag&1){if(l.flags|=2048,so(9,up.bind(null,l,h,m,i),void 0,null),Me===null)throw Error(e(349));(ms&30)!==0||cp(l,i,m)}return m}function cp(r,i,l){r.flags|=16384,r={getSnapshot:i,value:l},i=he.updateQueue,i===null?(i={lastEffect:null,stores:null},he.updateQueue=i,i.stores=[r]):(l=i.stores,l===null?i.stores=[r]:l.push(r))}function up(r,i,l,h){i.value=l,i.getSnapshot=h,dp(i)&&fp(r)}function hp(r,i,l){return l(function(){dp(i)&&fp(r)})}function dp(r){var i=r.getSnapshot;r=r.value;try{var l=i();return!Ln(r,l)}catch{return!0}}function fp(r){var i=xr(r,1);i!==null&&Dn(i,r,1,-1)}function pp(r){var i=sr();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:r},i.queue=r,r=r.dispatch=w1.bind(null,he,r),[i.memoizedState,r]}function so(r,i,l,h){return r={tag:r,create:i,destroy:l,deps:h,next:null},i=he.updateQueue,i===null?(i={lastEffect:null,stores:null},he.updateQueue=i,i.lastEffect=r.next=r):(l=i.lastEffect,l===null?i.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,i.lastEffect=r)),r}function mp(){return bn().memoizedState}function Ea(r,i,l,h){var m=sr();he.flags|=r,m.memoizedState=so(1|i,l,void 0,h===void 0?null:h)}function Ia(r,i,l,h){var m=bn();h=h===void 0?null:h;var y=void 0;if(be!==null){var S=be.memoizedState;if(y=S.destroy,h!==null&&Zc(h,S.deps)){m.memoizedState=so(i,l,y,h);return}}he.flags|=r,m.memoizedState=so(1|i,l,y,h)}function gp(r,i){return Ea(8390656,8,r,i)}function ru(r,i){return Ia(2048,8,r,i)}function yp(r,i){return Ia(4,2,r,i)}function xp(r,i){return Ia(4,4,r,i)}function vp(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function wp(r,i,l){return l=l!=null?l.concat([r]):null,Ia(4,4,vp.bind(null,i,r),l)}function su(){}function _p(r,i){var l=bn();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&Zc(i,h[1])?h[0]:(l.memoizedState=[r,i],r)}function Sp(r,i){var l=bn();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&Zc(i,h[1])?h[0]:(r=r(),l.memoizedState=[r,i],r)}function bp(r,i,l){return(ms&21)===0?(r.baseState&&(r.baseState=!1,Qe=!0),r.memoizedState=l):(Ln(l,i)||(l=Zd(),he.lanes|=l,gs|=l,r.baseState=!0),i)}function x1(r,i){var l=Wt;Wt=l!==0&&4>l?l:4,r(!0);var h=Kc.transition;Kc.transition={};try{r(!1),i()}finally{Wt=l,Kc.transition=h}}function kp(){return bn().memoizedState}function v1(r,i,l){var h=qr(r);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Cp(r))Ap(i,l);else if(l=np(r,i,l,h),l!==null){var m=We();Dn(l,r,h,m),Pp(l,i,h)}}function w1(r,i,l){var h=qr(r),m={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Cp(r))Ap(i,m);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var S=i.lastRenderedState,P=y(S,l);if(m.hasEagerState=!0,m.eagerState=P,Ln(P,S)){var E=i.interleaved;E===null?(m.next=m,Vc(i)):(m.next=E.next,E.next=m),i.interleaved=m;return}}catch{}finally{}l=np(r,i,m,h),l!==null&&(m=We(),Dn(l,r,h,m),Pp(l,i,h))}}function Cp(r){var i=r.alternate;return r===he||i!==null&&i===he}function Ap(r,i){eo=Ma=!0;var l=r.pending;l===null?i.next=i:(i.next=l.next,l.next=i),r.pending=i}function Pp(r,i,l){if((l&4194240)!==0){var h=i.lanes;h&=r.pendingLanes,l|=h,i.lanes=l,oc(r,l)}}var Ra={readContext:Sn,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useInsertionEffect:ze,useLayoutEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useMutableSource:ze,useSyncExternalStore:ze,useId:ze,unstable_isNewReconciler:!1},_1={readContext:Sn,useCallback:function(r,i){return sr().memoizedState=[r,i===void 0?null:i],r},useContext:Sn,useEffect:gp,useImperativeHandle:function(r,i,l){return l=l!=null?l.concat([r]):null,Ea(4194308,4,vp.bind(null,i,r),l)},useLayoutEffect:function(r,i){return Ea(4194308,4,r,i)},useInsertionEffect:function(r,i){return Ea(4,2,r,i)},useMemo:function(r,i){var l=sr();return i=i===void 0?null:i,r=r(),l.memoizedState=[r,i],r},useReducer:function(r,i,l){var h=sr();return i=l!==void 0?l(i):i,h.memoizedState=h.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},h.queue=r,r=r.dispatch=v1.bind(null,he,r),[h.memoizedState,r]},useRef:function(r){var i=sr();return r={current:r},i.memoizedState=r},useState:pp,useDebugValue:su,useDeferredValue:function(r){return sr().memoizedState=r},useTransition:function(){var r=pp(!1),i=r[0];return r=x1.bind(null,r[1]),sr().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,l){var h=he,m=sr();if(ae){if(l===void 0)throw Error(e(407));l=l()}else{if(l=i(),Me===null)throw Error(e(349));(ms&30)!==0||cp(h,i,l)}m.memoizedState=l;var y={value:l,getSnapshot:i};return m.queue=y,gp(hp.bind(null,h,y,r),[r]),h.flags|=2048,so(9,up.bind(null,h,y,l,i),void 0,null),l},useId:function(){var r=sr(),i=Me.identifierPrefix;if(ae){var l=yr,h=gr;l=(h&~(1<<32-Fn(h)-1)).toString(32)+l,i=":"+i+"R"+l,l=no++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=y1++,i=":"+i+"r"+l.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},S1={readContext:Sn,useCallback:_p,useContext:Sn,useEffect:ru,useImperativeHandle:wp,useInsertionEffect:yp,useLayoutEffect:xp,useMemo:Sp,useReducer:eu,useRef:mp,useState:function(){return eu(ro)},useDebugValue:su,useDeferredValue:function(r){var i=bn();return bp(i,be.memoizedState,r)},useTransition:function(){var r=eu(ro)[0],i=bn().memoizedState;return[r,i]},useMutableSource:ap,useSyncExternalStore:lp,useId:kp,unstable_isNewReconciler:!1},b1={readContext:Sn,useCallback:_p,useContext:Sn,useEffect:ru,useImperativeHandle:wp,useInsertionEffect:yp,useLayoutEffect:xp,useMemo:Sp,useReducer:nu,useRef:mp,useState:function(){return nu(ro)},useDebugValue:su,useDeferredValue:function(r){var i=bn();return be===null?i.memoizedState=r:bp(i,be.memoizedState,r)},useTransition:function(){var r=nu(ro)[0],i=bn().memoizedState;return[r,i]},useMutableSource:ap,useSyncExternalStore:lp,useId:kp,unstable_isNewReconciler:!1};function Bn(r,i){if(r&&r.defaultProps){i=et({},i),r=r.defaultProps;for(var l in r)i[l]===void 0&&(i[l]=r[l]);return i}return i}function iu(r,i,l,h){i=r.memoizedState,l=l(h,i),l=l==null?i:et({},i,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Fa={isMounted:function(r){return(r=r._reactInternals)?ls(r)===r:!1},enqueueSetState:function(r,i,l){r=r._reactInternals;var h=We(),m=qr(r),y=vr(h,m);y.payload=i,l!=null&&(y.callback=l),i=Vr(r,y,m),i!==null&&(Dn(i,r,m,h),Ca(i,r,m))},enqueueReplaceState:function(r,i,l){r=r._reactInternals;var h=We(),m=qr(r),y=vr(h,m);y.tag=1,y.payload=i,l!=null&&(y.callback=l),i=Vr(r,y,m),i!==null&&(Dn(i,r,m,h),Ca(i,r,m))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var l=We(),h=qr(r),m=vr(l,h);m.tag=2,i!=null&&(m.callback=i),i=Vr(r,m,h),i!==null&&(Dn(i,r,h,l),Ca(i,r,h))}};function Tp(r,i,l,h,m,y,S){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,y,S):i.prototype&&i.prototype.isPureReactComponent?!Wi(l,h)||!Wi(m,y):!0}function Mp(r,i,l){var h=!1,m=Ur,y=i.contextType;return typeof y=="object"&&y!==null?y=Sn(y):(m=qe(i)?us:Oe.current,h=i.contextTypes,y=(h=h!=null)?Ws(r,m):Ur),i=new i(l,y),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Fa,r.stateNode=i,i._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=m,r.__reactInternalMemoizedMaskedChildContext=y),i}function Ep(r,i,l,h){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,h),i.state!==r&&Fa.enqueueReplaceState(i,i.state,null)}function ou(r,i,l,h){var m=r.stateNode;m.props=l,m.state=r.memoizedState,m.refs={},Hc(r);var y=i.contextType;typeof y=="object"&&y!==null?m.context=Sn(y):(y=qe(i)?us:Oe.current,m.context=Ws(r,y)),m.state=r.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(iu(r,i,y,l),m.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(i=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),i!==m.state&&Fa.enqueueReplaceState(m,m.state,null),Aa(r,l,m,h),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308)}function Zs(r,i){try{var l="",h=i;do l+=st(h),h=h.return;while(h);var m=l}catch(y){m=`
Error generating stack: `+y.message+`
`+y.stack}return{value:r,source:i,stack:m,digest:null}}function au(r,i,l){return{value:r,source:null,stack:l??null,digest:i??null}}function lu(r,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var k1=typeof WeakMap=="function"?WeakMap:Map;function Ip(r,i,l){l=vr(-1,l),l.tag=3,l.payload={element:null};var h=i.value;return l.callback=function(){ja||(ja=!0,bu=h),lu(r,i)},l}function Rp(r,i,l){l=vr(-1,l),l.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var m=i.value;l.payload=function(){return h(m)},l.callback=function(){lu(r,i)}}var y=r.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){lu(r,i),typeof h!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var S=i.stack;this.componentDidCatch(i.value,{componentStack:S!==null?S:""})}),l}function Fp(r,i,l){var h=r.pingCache;if(h===null){h=r.pingCache=new k1;var m=new Set;h.set(i,m)}else m=h.get(i),m===void 0&&(m=new Set,h.set(i,m));m.has(l)||(m.add(l),r=z1.bind(null,r,i,l),i.then(r,r))}function Lp(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function Np(r,i,l,h,m){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=vr(-1,1),i.tag=2,Vr(l,i,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=m,r)}var C1=k.ReactCurrentOwner,Qe=!1;function $e(r,i,l,h){i.child=r===null?ep(i,null,l,h):Xs(i,r.child,l,h)}function Bp(r,i,l,h,m){l=l.render;var y=i.ref;return Qs(i,m),h=Jc(r,i,l,h,y,m),l=tu(),r!==null&&!Qe?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~m,wr(r,i,m)):(ae&&l&&Bc(i),i.flags|=1,$e(r,i,h,m),i.child)}function Op(r,i,l,h,m){if(r===null){var y=l.type;return typeof y=="function"&&!Eu(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=y,zp(r,i,y,h,m)):(r=Ha(l.type,null,h,i,i.mode,m),r.ref=i.ref,r.return=i,i.child=r)}if(y=r.child,(r.lanes&m)===0){var S=y.memoizedProps;if(l=l.compare,l=l!==null?l:Wi,l(S,h)&&r.ref===i.ref)return wr(r,i,m)}return i.flags|=1,r=Kr(y,h),r.ref=i.ref,r.return=i,i.child=r}function zp(r,i,l,h,m){if(r!==null){var y=r.memoizedProps;if(Wi(y,h)&&r.ref===i.ref)if(Qe=!1,i.pendingProps=h=y,(r.lanes&m)!==0)(r.flags&131072)!==0&&(Qe=!0);else return i.lanes=r.lanes,wr(r,i,m)}return cu(r,i,l,h,m)}function Dp(r,i,l){var h=i.pendingProps,m=h.children,y=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zt(ti,ln),ln|=l;else{if((l&1073741824)===0)return r=y!==null?y.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,Zt(ti,ln),ln|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:l,Zt(ti,ln),ln|=h}else y!==null?(h=y.baseLanes|l,i.memoizedState=null):h=l,Zt(ti,ln),ln|=h;return $e(r,i,m,l),i.child}function jp(r,i){var l=i.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function cu(r,i,l,h,m){var y=qe(l)?us:Oe.current;return y=Ws(i,y),Qs(i,m),l=Jc(r,i,l,h,y,m),h=tu(),r!==null&&!Qe?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~m,wr(r,i,m)):(ae&&h&&Bc(i),i.flags|=1,$e(r,i,l,m),i.child)}function Gp(r,i,l,h,m){if(qe(l)){var y=!0;ya(i)}else y=!1;if(Qs(i,m),i.stateNode===null)Na(r,i),Mp(i,l,h),ou(i,l,h,m),h=!0;else if(r===null){var S=i.stateNode,P=i.memoizedProps;S.props=P;var E=S.context,U=l.contextType;typeof U=="object"&&U!==null?U=Sn(U):(U=qe(l)?us:Oe.current,U=Ws(i,U));var nt=l.getDerivedStateFromProps,it=typeof nt=="function"||typeof S.getSnapshotBeforeUpdate=="function";it||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(P!==h||E!==U)&&Ep(i,S,h,U),Wr=!1;var tt=i.memoizedState;S.state=tt,Aa(i,h,S,m),E=i.memoizedState,P!==h||tt!==E||Xe.current||Wr?(typeof nt=="function"&&(iu(i,l,nt,h),E=i.memoizedState),(P=Wr||Tp(i,l,P,h,tt,E,U))?(it||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(i.flags|=4194308)):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=E),S.props=h,S.state=E,S.context=U,h=P):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{S=i.stateNode,rp(r,i),P=i.memoizedProps,U=i.type===i.elementType?P:Bn(i.type,P),S.props=U,it=i.pendingProps,tt=S.context,E=l.contextType,typeof E=="object"&&E!==null?E=Sn(E):(E=qe(l)?us:Oe.current,E=Ws(i,E));var ht=l.getDerivedStateFromProps;(nt=typeof ht=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(P!==it||tt!==E)&&Ep(i,S,h,E),Wr=!1,tt=i.memoizedState,S.state=tt,Aa(i,h,S,m);var mt=i.memoizedState;P!==it||tt!==mt||Xe.current||Wr?(typeof ht=="function"&&(iu(i,l,ht,h),mt=i.memoizedState),(U=Wr||Tp(i,l,U,h,tt,mt,E)||!1)?(nt||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(h,mt,E),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(h,mt,E)),typeof S.componentDidUpdate=="function"&&(i.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof S.componentDidUpdate!="function"||P===r.memoizedProps&&tt===r.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||P===r.memoizedProps&&tt===r.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=mt),S.props=h,S.state=mt,S.context=E,h=U):(typeof S.componentDidUpdate!="function"||P===r.memoizedProps&&tt===r.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||P===r.memoizedProps&&tt===r.memoizedState||(i.flags|=1024),h=!1)}return uu(r,i,l,h,y,m)}function uu(r,i,l,h,m,y){jp(r,i);var S=(i.flags&128)!==0;if(!h&&!S)return m&&Hf(i,l,!1),wr(r,i,y);h=i.stateNode,C1.current=i;var P=S&&typeof l.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,r!==null&&S?(i.child=Xs(i,r.child,null,y),i.child=Xs(i,null,P,y)):$e(r,i,P,y),i.memoizedState=h.state,m&&Hf(i,l,!0),i.child}function Up(r){var i=r.stateNode;i.pendingContext?Wf(r,i.pendingContext,i.pendingContext!==i.context):i.context&&Wf(r,i.context,!1),Yc(r,i.containerInfo)}function $p(r,i,l,h,m){return Ys(),jc(m),i.flags|=256,$e(r,i,l,h),i.child}var hu={dehydrated:null,treeContext:null,retryLane:0};function du(r){return{baseLanes:r,cachePool:null,transitions:null}}function Wp(r,i,l){var h=i.pendingProps,m=ue.current,y=!1,S=(i.flags&128)!==0,P;if((P=S)||(P=r!==null&&r.memoizedState===null?!1:(m&2)!==0),P?(y=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(m|=1),Zt(ue,m&1),r===null)return Dc(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(S=h.children,r=h.fallback,y?(h=i.mode,y=i.child,S={mode:"hidden",children:S},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=S):y=Ya(S,h,0,null),r=ws(r,h,l,null),y.return=i,r.return=i,y.sibling=r,i.child=y,i.child.memoizedState=du(l),i.memoizedState=hu,r):fu(i,S));if(m=r.memoizedState,m!==null&&(P=m.dehydrated,P!==null))return A1(r,i,S,h,P,m,l);if(y){y=h.fallback,S=i.mode,m=r.child,P=m.sibling;var E={mode:"hidden",children:h.children};return(S&1)===0&&i.child!==m?(h=i.child,h.childLanes=0,h.pendingProps=E,i.deletions=null):(h=Kr(m,E),h.subtreeFlags=m.subtreeFlags&14680064),P!==null?y=Kr(P,y):(y=ws(y,S,l,null),y.flags|=2),y.return=i,h.return=i,h.sibling=y,i.child=h,h=y,y=i.child,S=r.child.memoizedState,S=S===null?du(l):{baseLanes:S.baseLanes|l,cachePool:null,transitions:S.transitions},y.memoizedState=S,y.childLanes=r.childLanes&~l,i.memoizedState=hu,h}return y=r.child,r=y.sibling,h=Kr(y,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=l),h.return=i,h.sibling=null,r!==null&&(l=i.deletions,l===null?(i.deletions=[r],i.flags|=16):l.push(r)),i.child=h,i.memoizedState=null,h}function fu(r,i){return i=Ya({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function La(r,i,l,h){return h!==null&&jc(h),Xs(i,r.child,null,l),r=fu(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function A1(r,i,l,h,m,y,S){if(l)return i.flags&256?(i.flags&=-257,h=au(Error(e(422))),La(r,i,S,h)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(y=h.fallback,m=i.mode,h=Ya({mode:"visible",children:h.children},m,0,null),y=ws(y,m,S,null),y.flags|=2,h.return=i,y.return=i,h.sibling=y,i.child=h,(i.mode&1)!==0&&Xs(i,r.child,null,S),i.child.memoizedState=du(S),i.memoizedState=hu,y);if((i.mode&1)===0)return La(r,i,S,null);if(m.data==="$!"){if(h=m.nextSibling&&m.nextSibling.dataset,h)var P=h.dgst;return h=P,y=Error(e(419)),h=au(y,h,void 0),La(r,i,S,h)}if(P=(S&r.childLanes)!==0,Qe||P){if(h=Me,h!==null){switch(S&-S){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(h.suspendedLanes|S))!==0?0:m,m!==0&&m!==y.retryLane&&(y.retryLane=m,xr(r,m),Dn(h,r,m,-1))}return Mu(),h=au(Error(e(421))),La(r,i,S,h)}return m.data==="$?"?(i.flags|=128,i.child=r.child,i=D1.bind(null,r),m._reactRetry=i,null):(r=y.treeContext,an=jr(m.nextSibling),on=i,ae=!0,Nn=null,r!==null&&(wn[_n++]=gr,wn[_n++]=yr,wn[_n++]=hs,gr=r.id,yr=r.overflow,hs=i),i=fu(i,h.children),i.flags|=4096,i)}function Vp(r,i,l){r.lanes|=i;var h=r.alternate;h!==null&&(h.lanes|=i),Wc(r.return,i,l)}function pu(r,i,l,h,m){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:m}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=m)}function Hp(r,i,l){var h=i.pendingProps,m=h.revealOrder,y=h.tail;if($e(r,i,h.children,l),h=ue.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)t:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Vp(r,l,i);else if(r.tag===19)Vp(r,l,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break t;for(;r.sibling===null;){if(r.return===null||r.return===i)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Zt(ue,h),(i.mode&1)===0)i.memoizedState=null;else switch(m){case"forwards":for(l=i.child,m=null;l!==null;)r=l.alternate,r!==null&&Pa(r)===null&&(m=l),l=l.sibling;l=m,l===null?(m=i.child,i.child=null):(m=l.sibling,l.sibling=null),pu(i,!1,m,l,y);break;case"backwards":for(l=null,m=i.child,i.child=null;m!==null;){if(r=m.alternate,r!==null&&Pa(r)===null){i.child=m;break}r=m.sibling,m.sibling=l,l=m,m=r}pu(i,!0,l,null,y);break;case"together":pu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Na(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function wr(r,i,l){if(r!==null&&(i.dependencies=r.dependencies),gs|=i.lanes,(l&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(e(153));if(i.child!==null){for(r=i.child,l=Kr(r,r.pendingProps),i.child=l,l.return=i;r.sibling!==null;)r=r.sibling,l=l.sibling=Kr(r,r.pendingProps),l.return=i;l.sibling=null}return i.child}function P1(r,i,l){switch(i.tag){case 3:Up(i),Ys();break;case 5:op(i);break;case 1:qe(i.type)&&ya(i);break;case 4:Yc(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,m=i.memoizedProps.value;Zt(ba,h._currentValue),h._currentValue=m;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(Zt(ue,ue.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?Wp(r,i,l):(Zt(ue,ue.current&1),r=wr(r,i,l),r!==null?r.sibling:null);Zt(ue,ue.current&1);break;case 19:if(h=(l&i.childLanes)!==0,(r.flags&128)!==0){if(h)return Hp(r,i,l);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Zt(ue,ue.current),h)break;return null;case 22:case 23:return i.lanes=0,Dp(r,i,l)}return wr(r,i,l)}var Yp,mu,Xp,qp;Yp=function(r,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},mu=function(){},Xp=function(r,i,l,h){var m=r.memoizedProps;if(m!==h){r=i.stateNode,ps(rr.current);var y=null;switch(l){case"input":m=pt(r,m),h=pt(r,h),y=[];break;case"select":m=et({},m,{value:void 0}),h=et({},h,{value:void 0}),y=[];break;case"textarea":m=Bt(r,m),h=Bt(r,h),y=[];break;default:typeof m.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=pa)}Kn(l,h);var S;l=null;for(U in m)if(!h.hasOwnProperty(U)&&m.hasOwnProperty(U)&&m[U]!=null)if(U==="style"){var P=m[U];for(S in P)P.hasOwnProperty(S)&&(l||(l={}),l[S]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(o.hasOwnProperty(U)?y||(y=[]):(y=y||[]).push(U,null));for(U in h){var E=h[U];if(P=m?.[U],h.hasOwnProperty(U)&&E!==P&&(E!=null||P!=null))if(U==="style")if(P){for(S in P)!P.hasOwnProperty(S)||E&&E.hasOwnProperty(S)||(l||(l={}),l[S]="");for(S in E)E.hasOwnProperty(S)&&P[S]!==E[S]&&(l||(l={}),l[S]=E[S])}else l||(y||(y=[]),y.push(U,l)),l=E;else U==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,P=P?P.__html:void 0,E!=null&&P!==E&&(y=y||[]).push(U,E)):U==="children"?typeof E!="string"&&typeof E!="number"||(y=y||[]).push(U,""+E):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(o.hasOwnProperty(U)?(E!=null&&U==="onScroll"&&ee("scroll",r),y||P===E||(y=[])):(y=y||[]).push(U,E))}l&&(y=y||[]).push("style",l);var U=y;(i.updateQueue=U)&&(i.flags|=4)}},qp=function(r,i,l,h){l!==h&&(i.flags|=4)};function io(r,i){if(!ae)switch(r.tailMode){case"hidden":i=r.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function De(r){var i=r.alternate!==null&&r.alternate.child===r.child,l=0,h=0;if(i)for(var m=r.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags&14680064,h|=m.flags&14680064,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=h,r.childLanes=l,i}function T1(r,i,l){var h=i.pendingProps;switch(Oc(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return De(i),null;case 1:return qe(i.type)&&ga(),De(i),null;case 3:return h=i.stateNode,Ks(),ne(Xe),ne(Oe),Qc(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(_a(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Nn!==null&&(Au(Nn),Nn=null))),mu(r,i),De(i),null;case 5:Xc(i);var m=ps(to.current);if(l=i.type,r!==null&&i.stateNode!=null)Xp(r,i,l,h,m),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(e(166));return De(i),null}if(r=ps(rr.current),_a(i)){h=i.stateNode,l=i.type;var y=i.memoizedProps;switch(h[nr]=i,h[qi]=y,r=(i.mode&1)!==0,l){case"dialog":ee("cancel",h),ee("close",h);break;case"iframe":case"object":case"embed":ee("load",h);break;case"video":case"audio":for(m=0;m<Hi.length;m++)ee(Hi[m],h);break;case"source":ee("error",h);break;case"img":case"image":case"link":ee("error",h),ee("load",h);break;case"details":ee("toggle",h);break;case"input":It(h,y),ee("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},ee("invalid",h);break;case"textarea":Qt(h,y),ee("invalid",h)}Kn(l,y),m=null;for(var S in y)if(y.hasOwnProperty(S)){var P=y[S];S==="children"?typeof P=="string"?h.textContent!==P&&(y.suppressHydrationWarning!==!0&&fa(h.textContent,P,r),m=["children",P]):typeof P=="number"&&h.textContent!==""+P&&(y.suppressHydrationWarning!==!0&&fa(h.textContent,P,r),m=["children",""+P]):o.hasOwnProperty(S)&&P!=null&&S==="onScroll"&&ee("scroll",h)}switch(l){case"input":St(h),ce(h,y,!0);break;case"textarea":St(h),$t(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=pa)}h=m,i.updateQueue=h,h!==null&&(i.flags|=4)}else{S=m.nodeType===9?m:m.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Kt(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=S.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=S.createElement(l,{is:h.is}):(r=S.createElement(l),l==="select"&&(S=r,h.multiple?S.multiple=!0:h.size&&(S.size=h.size))):r=S.createElementNS(r,l),r[nr]=i,r[qi]=h,Yp(r,i,!1,!1),i.stateNode=r;t:{switch(S=Pe(l,h),l){case"dialog":ee("cancel",r),ee("close",r),m=h;break;case"iframe":case"object":case"embed":ee("load",r),m=h;break;case"video":case"audio":for(m=0;m<Hi.length;m++)ee(Hi[m],r);m=h;break;case"source":ee("error",r),m=h;break;case"img":case"image":case"link":ee("error",r),ee("load",r),m=h;break;case"details":ee("toggle",r),m=h;break;case"input":It(r,h),m=pt(r,h),ee("invalid",r);break;case"option":m=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},m=et({},h,{value:void 0}),ee("invalid",r);break;case"textarea":Qt(r,h),m=Bt(r,h),ee("invalid",r);break;default:m=h}Kn(l,m),P=m;for(y in P)if(P.hasOwnProperty(y)){var E=P[y];y==="style"?te(r,E):y==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&Ct(r,E)):y==="children"?typeof E=="string"?(l!=="textarea"||E!=="")&&Se(r,E):typeof E=="number"&&Se(r,""+E):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?E!=null&&y==="onScroll"&&ee("scroll",r):E!=null&&T(r,y,E,S))}switch(l){case"input":St(r),ce(r,h,!1);break;case"textarea":St(r),$t(r);break;case"option":h.value!=null&&r.setAttribute("value",""+H(h.value));break;case"select":r.multiple=!!h.multiple,y=h.value,y!=null?Nt(r,!!h.multiple,y,!1):h.defaultValue!=null&&Nt(r,!!h.multiple,h.defaultValue,!0);break;default:typeof m.onClick=="function"&&(r.onclick=pa)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break t;case"img":h=!0;break t;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return De(i),null;case 6:if(r&&i.stateNode!=null)qp(r,i,r.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(e(166));if(l=ps(to.current),ps(rr.current),_a(i)){if(h=i.stateNode,l=i.memoizedProps,h[nr]=i,(y=h.nodeValue!==l)&&(r=on,r!==null))switch(r.tag){case 3:fa(h.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&fa(h.nodeValue,l,(r.mode&1)!==0)}y&&(i.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[nr]=i,i.stateNode=h}return De(i),null;case 13:if(ne(ue),h=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(ae&&an!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Zf(),Ys(),i.flags|=98560,y=!1;else if(y=_a(i),h!==null&&h.dehydrated!==null){if(r===null){if(!y)throw Error(e(318));if(y=i.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(e(317));y[nr]=i}else Ys(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;De(i),y=!1}else Nn!==null&&(Au(Nn),Nn=null),y=!0;if(!y)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(ue.current&1)!==0?ke===0&&(ke=3):Mu())),i.updateQueue!==null&&(i.flags|=4),De(i),null);case 4:return Ks(),mu(r,i),r===null&&Yi(i.stateNode.containerInfo),De(i),null;case 10:return $c(i.type._context),De(i),null;case 17:return qe(i.type)&&ga(),De(i),null;case 19:if(ne(ue),y=i.memoizedState,y===null)return De(i),null;if(h=(i.flags&128)!==0,S=y.rendering,S===null)if(h)io(y,!1);else{if(ke!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(S=Pa(r),S!==null){for(i.flags|=128,io(y,!1),h=S.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=l,l=i.child;l!==null;)y=l,r=h,y.flags&=14680066,S=y.alternate,S===null?(y.childLanes=0,y.lanes=r,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=S.childLanes,y.lanes=S.lanes,y.child=S.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=S.memoizedProps,y.memoizedState=S.memoizedState,y.updateQueue=S.updateQueue,y.type=S.type,r=S.dependencies,y.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Zt(ue,ue.current&1|2),i.child}r=r.sibling}y.tail!==null&&xe()>ei&&(i.flags|=128,h=!0,io(y,!1),i.lanes=4194304)}else{if(!h)if(r=Pa(S),r!==null){if(i.flags|=128,h=!0,l=r.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),io(y,!0),y.tail===null&&y.tailMode==="hidden"&&!S.alternate&&!ae)return De(i),null}else 2*xe()-y.renderingStartTime>ei&&l!==1073741824&&(i.flags|=128,h=!0,io(y,!1),i.lanes=4194304);y.isBackwards?(S.sibling=i.child,i.child=S):(l=y.last,l!==null?l.sibling=S:i.child=S,y.last=S)}return y.tail!==null?(i=y.tail,y.rendering=i,y.tail=i.sibling,y.renderingStartTime=xe(),i.sibling=null,l=ue.current,Zt(ue,h?l&1|2:l&1),i):(De(i),null);case 22:case 23:return Tu(),h=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(ln&1073741824)!==0&&(De(i),i.subtreeFlags&6&&(i.flags|=8192)):De(i),null;case 24:return null;case 25:return null}throw Error(e(156,i.tag))}function M1(r,i){switch(Oc(i),i.tag){case 1:return qe(i.type)&&ga(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Ks(),ne(Xe),ne(Oe),Qc(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return Xc(i),null;case 13:if(ne(ue),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(e(340));Ys()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return ne(ue),null;case 4:return Ks(),null;case 10:return $c(i.type._context),null;case 22:case 23:return Tu(),null;case 24:return null;default:return null}}var Ba=!1,je=!1,E1=typeof WeakSet=="function"?WeakSet:Set,ft=null;function Js(r,i){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){pe(r,i,h)}else l.current=null}function gu(r,i,l){try{l()}catch(h){pe(r,i,h)}}var Qp=!1;function I1(r,i){if(Tc=na,r=Tf(),wc(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else t:{l=(l=r.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var m=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break t}var S=0,P=-1,E=-1,U=0,nt=0,it=r,tt=null;e:for(;;){for(var ht;it!==l||m!==0&&it.nodeType!==3||(P=S+m),it!==y||h!==0&&it.nodeType!==3||(E=S+h),it.nodeType===3&&(S+=it.nodeValue.length),(ht=it.firstChild)!==null;)tt=it,it=ht;for(;;){if(it===r)break e;if(tt===l&&++U===m&&(P=S),tt===y&&++nt===h&&(E=S),(ht=it.nextSibling)!==null)break;it=tt,tt=it.parentNode}it=ht}l=P===-1||E===-1?null:{start:P,end:E}}else l=null}l=l||{start:0,end:0}}else l=null;for(Mc={focusedElem:r,selectionRange:l},na=!1,ft=i;ft!==null;)if(i=ft,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,ft=r;else for(;ft!==null;){i=ft;try{var mt=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(mt!==null){var gt=mt.memoizedProps,ve=mt.memoizedState,B=i.stateNode,I=B.getSnapshotBeforeUpdate(i.elementType===i.type?gt:Bn(i.type,gt),ve);B.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var D=i.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(ot){pe(i,i.return,ot)}if(r=i.sibling,r!==null){r.return=i.return,ft=r;break}ft=i.return}return mt=Qp,Qp=!1,mt}function oo(r,i,l){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var m=h=h.next;do{if((m.tag&r)===r){var y=m.destroy;m.destroy=void 0,y!==void 0&&gu(i,l,y)}m=m.next}while(m!==h)}}function Oa(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&r)===r){var h=l.create;l.destroy=h()}l=l.next}while(l!==i)}}function yu(r){var i=r.ref;if(i!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof i=="function"?i(r):i.current=r}}function Kp(r){var i=r.alternate;i!==null&&(r.alternate=null,Kp(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[nr],delete i[qi],delete i[Fc],delete i[f1],delete i[p1])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Zp(r){return r.tag===5||r.tag===3||r.tag===4}function Jp(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||Zp(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function xu(r,i,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(r,i):l.insertBefore(r,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(r,l)):(i=l,i.appendChild(r)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=pa));else if(h!==4&&(r=r.child,r!==null))for(xu(r,i,l),r=r.sibling;r!==null;)xu(r,i,l),r=r.sibling}function vu(r,i,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?l.insertBefore(r,i):l.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(vu(r,i,l),r=r.sibling;r!==null;)vu(r,i,l),r=r.sibling}var Re=null,On=!1;function Hr(r,i,l){for(l=l.child;l!==null;)tm(r,i,l),l=l.sibling}function tm(r,i,l){if(er&&typeof er.onCommitFiberUnmount=="function")try{er.onCommitFiberUnmount(Qo,l)}catch{}switch(l.tag){case 5:je||Js(l,i);case 6:var h=Re,m=On;Re=null,Hr(r,i,l),Re=h,On=m,Re!==null&&(On?(r=Re,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):Re.removeChild(l.stateNode));break;case 18:Re!==null&&(On?(r=Re,l=l.stateNode,r.nodeType===8?Rc(r.parentNode,l):r.nodeType===1&&Rc(r,l),zi(r)):Rc(Re,l.stateNode));break;case 4:h=Re,m=On,Re=l.stateNode.containerInfo,On=!0,Hr(r,i,l),Re=h,On=m;break;case 0:case 11:case 14:case 15:if(!je&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){m=h=h.next;do{var y=m,S=y.destroy;y=y.tag,S!==void 0&&((y&2)!==0||(y&4)!==0)&&gu(l,i,S),m=m.next}while(m!==h)}Hr(r,i,l);break;case 1:if(!je&&(Js(l,i),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(P){pe(l,i,P)}Hr(r,i,l);break;case 21:Hr(r,i,l);break;case 22:l.mode&1?(je=(h=je)||l.memoizedState!==null,Hr(r,i,l),je=h):Hr(r,i,l);break;default:Hr(r,i,l)}}function em(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new E1),i.forEach(function(h){var m=j1.bind(null,r,h);l.has(h)||(l.add(h),h.then(m,m))})}}function zn(r,i){var l=i.deletions;if(l!==null)for(var h=0;h<l.length;h++){var m=l[h];try{var y=r,S=i,P=S;t:for(;P!==null;){switch(P.tag){case 5:Re=P.stateNode,On=!1;break t;case 3:Re=P.stateNode.containerInfo,On=!0;break t;case 4:Re=P.stateNode.containerInfo,On=!0;break t}P=P.return}if(Re===null)throw Error(e(160));tm(y,S,m),Re=null,On=!1;var E=m.alternate;E!==null&&(E.return=null),m.return=null}catch(U){pe(m,i,U)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)nm(i,r),i=i.sibling}function nm(r,i){var l=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(zn(i,r),ir(r),h&4){try{oo(3,r,r.return),Oa(3,r)}catch(gt){pe(r,r.return,gt)}try{oo(5,r,r.return)}catch(gt){pe(r,r.return,gt)}}break;case 1:zn(i,r),ir(r),h&512&&l!==null&&Js(l,l.return);break;case 5:if(zn(i,r),ir(r),h&512&&l!==null&&Js(l,l.return),r.flags&32){var m=r.stateNode;try{Se(m,"")}catch(gt){pe(r,r.return,gt)}}if(h&4&&(m=r.stateNode,m!=null)){var y=r.memoizedProps,S=l!==null?l.memoizedProps:y,P=r.type,E=r.updateQueue;if(r.updateQueue=null,E!==null)try{P==="input"&&y.type==="radio"&&y.name!=null&&Rt(m,y),Pe(P,S);var U=Pe(P,y);for(S=0;S<E.length;S+=2){var nt=E[S],it=E[S+1];nt==="style"?te(m,it):nt==="dangerouslySetInnerHTML"?Ct(m,it):nt==="children"?Se(m,it):T(m,nt,it,U)}switch(P){case"input":Gt(m,y);break;case"textarea":ye(m,y);break;case"select":var tt=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!y.multiple;var ht=y.value;ht!=null?Nt(m,!!y.multiple,ht,!1):tt!==!!y.multiple&&(y.defaultValue!=null?Nt(m,!!y.multiple,y.defaultValue,!0):Nt(m,!!y.multiple,y.multiple?[]:"",!1))}m[qi]=y}catch(gt){pe(r,r.return,gt)}}break;case 6:if(zn(i,r),ir(r),h&4){if(r.stateNode===null)throw Error(e(162));m=r.stateNode,y=r.memoizedProps;try{m.nodeValue=y}catch(gt){pe(r,r.return,gt)}}break;case 3:if(zn(i,r),ir(r),h&4&&l!==null&&l.memoizedState.isDehydrated)try{zi(i.containerInfo)}catch(gt){pe(r,r.return,gt)}break;case 4:zn(i,r),ir(r);break;case 13:zn(i,r),ir(r),m=r.child,m.flags&8192&&(y=m.memoizedState!==null,m.stateNode.isHidden=y,!y||m.alternate!==null&&m.alternate.memoizedState!==null||(Su=xe())),h&4&&em(r);break;case 22:if(nt=l!==null&&l.memoizedState!==null,r.mode&1?(je=(U=je)||nt,zn(i,r),je=U):zn(i,r),ir(r),h&8192){if(U=r.memoizedState!==null,(r.stateNode.isHidden=U)&&!nt&&(r.mode&1)!==0)for(ft=r,nt=r.child;nt!==null;){for(it=ft=nt;ft!==null;){switch(tt=ft,ht=tt.child,tt.tag){case 0:case 11:case 14:case 15:oo(4,tt,tt.return);break;case 1:Js(tt,tt.return);var mt=tt.stateNode;if(typeof mt.componentWillUnmount=="function"){h=tt,l=tt.return;try{i=h,mt.props=i.memoizedProps,mt.state=i.memoizedState,mt.componentWillUnmount()}catch(gt){pe(h,l,gt)}}break;case 5:Js(tt,tt.return);break;case 22:if(tt.memoizedState!==null){im(it);continue}}ht!==null?(ht.return=tt,ft=ht):im(it)}nt=nt.sibling}t:for(nt=null,it=r;;){if(it.tag===5){if(nt===null){nt=it;try{m=it.stateNode,U?(y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(P=it.stateNode,E=it.memoizedProps.style,S=E!=null&&E.hasOwnProperty("display")?E.display:null,P.style.display=In("display",S))}catch(gt){pe(r,r.return,gt)}}}else if(it.tag===6){if(nt===null)try{it.stateNode.nodeValue=U?"":it.memoizedProps}catch(gt){pe(r,r.return,gt)}}else if((it.tag!==22&&it.tag!==23||it.memoizedState===null||it===r)&&it.child!==null){it.child.return=it,it=it.child;continue}if(it===r)break t;for(;it.sibling===null;){if(it.return===null||it.return===r)break t;nt===it&&(nt=null),it=it.return}nt===it&&(nt=null),it.sibling.return=it.return,it=it.sibling}}break;case 19:zn(i,r),ir(r),h&4&&em(r);break;case 21:break;default:zn(i,r),ir(r)}}function ir(r){var i=r.flags;if(i&2){try{t:{for(var l=r.return;l!==null;){if(Zp(l)){var h=l;break t}l=l.return}throw Error(e(160))}switch(h.tag){case 5:var m=h.stateNode;h.flags&32&&(Se(m,""),h.flags&=-33);var y=Jp(r);vu(r,y,m);break;case 3:case 4:var S=h.stateNode.containerInfo,P=Jp(r);xu(r,P,S);break;default:throw Error(e(161))}}catch(E){pe(r,r.return,E)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function R1(r,i,l){ft=r,rm(r)}function rm(r,i,l){for(var h=(r.mode&1)!==0;ft!==null;){var m=ft,y=m.child;if(m.tag===22&&h){var S=m.memoizedState!==null||Ba;if(!S){var P=m.alternate,E=P!==null&&P.memoizedState!==null||je;P=Ba;var U=je;if(Ba=S,(je=E)&&!U)for(ft=m;ft!==null;)S=ft,E=S.child,S.tag===22&&S.memoizedState!==null?om(m):E!==null?(E.return=S,ft=E):om(m);for(;y!==null;)ft=y,rm(y),y=y.sibling;ft=m,Ba=P,je=U}sm(r)}else(m.subtreeFlags&8772)!==0&&y!==null?(y.return=m,ft=y):sm(r)}}function sm(r){for(;ft!==null;){var i=ft;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:je||Oa(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!je)if(l===null)h.componentDidMount();else{var m=i.elementType===i.type?l.memoizedProps:Bn(i.type,l.memoizedProps);h.componentDidUpdate(m,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=i.updateQueue;y!==null&&ip(i,y,h);break;case 3:var S=i.updateQueue;if(S!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}ip(i,S,l)}break;case 5:var P=i.stateNode;if(l===null&&i.flags&4){l=P;var E=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&l.focus();break;case"img":E.src&&(l.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var U=i.alternate;if(U!==null){var nt=U.memoizedState;if(nt!==null){var it=nt.dehydrated;it!==null&&zi(it)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}je||i.flags&512&&yu(i)}catch(tt){pe(i,i.return,tt)}}if(i===r){ft=null;break}if(l=i.sibling,l!==null){l.return=i.return,ft=l;break}ft=i.return}}function im(r){for(;ft!==null;){var i=ft;if(i===r){ft=null;break}var l=i.sibling;if(l!==null){l.return=i.return,ft=l;break}ft=i.return}}function om(r){for(;ft!==null;){var i=ft;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{Oa(4,i)}catch(E){pe(i,l,E)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var m=i.return;try{h.componentDidMount()}catch(E){pe(i,m,E)}}var y=i.return;try{yu(i)}catch(E){pe(i,y,E)}break;case 5:var S=i.return;try{yu(i)}catch(E){pe(i,S,E)}}}catch(E){pe(i,i.return,E)}if(i===r){ft=null;break}var P=i.sibling;if(P!==null){P.return=i.return,ft=P;break}ft=i.return}}var F1=Math.ceil,za=k.ReactCurrentDispatcher,wu=k.ReactCurrentOwner,kn=k.ReactCurrentBatchConfig,zt=0,Me=null,we=null,Fe=0,ln=0,ti=Gr(0),ke=0,ao=null,gs=0,Da=0,_u=0,lo=null,Ke=null,Su=0,ei=1/0,_r=null,ja=!1,bu=null,Yr=null,Ga=!1,Xr=null,Ua=0,co=0,ku=null,$a=-1,Wa=0;function We(){return(zt&6)!==0?xe():$a!==-1?$a:$a=xe()}function qr(r){return(r.mode&1)===0?1:(zt&2)!==0&&Fe!==0?Fe&-Fe:g1.transition!==null?(Wa===0&&(Wa=Zd()),Wa):(r=Wt,r!==0||(r=window.event,r=r===void 0?16:lf(r.type)),r)}function Dn(r,i,l,h){if(50<co)throw co=0,ku=null,Error(e(185));Fi(r,l,h),((zt&2)===0||r!==Me)&&(r===Me&&((zt&2)===0&&(Da|=l),ke===4&&Qr(r,Fe)),Ze(r,h),l===1&&zt===0&&(i.mode&1)===0&&(ei=xe()+500,xa&&$r()))}function Ze(r,i){var l=r.callbackNode;gv(r,i);var h=Jo(r,r===Me?Fe:0);if(h===0)l!==null&&qd(l),r.callbackNode=null,r.callbackPriority=0;else if(i=h&-h,r.callbackPriority!==i){if(l!=null&&qd(l),i===1)r.tag===0?m1(lm.bind(null,r)):Yf(lm.bind(null,r)),h1(function(){(zt&6)===0&&$r()}),l=null;else{switch(Jd(h)){case 1:l=rc;break;case 4:l=Qd;break;case 16:l=qo;break;case 536870912:l=Kd;break;default:l=qo}l=gm(l,am.bind(null,r))}r.callbackPriority=i,r.callbackNode=l}}function am(r,i){if($a=-1,Wa=0,(zt&6)!==0)throw Error(e(327));var l=r.callbackNode;if(ni()&&r.callbackNode!==l)return null;var h=Jo(r,r===Me?Fe:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||i)i=Va(r,h);else{i=h;var m=zt;zt|=2;var y=um();(Me!==r||Fe!==i)&&(_r=null,ei=xe()+500,xs(r,i));do try{B1();break}catch(P){cm(r,P)}while(!0);Uc(),za.current=y,zt=m,we!==null?i=0:(Me=null,Fe=0,i=ke)}if(i!==0){if(i===2&&(m=sc(r),m!==0&&(h=m,i=Cu(r,m))),i===1)throw l=ao,xs(r,0),Qr(r,h),Ze(r,xe()),l;if(i===6)Qr(r,h);else{if(m=r.current.alternate,(h&30)===0&&!L1(m)&&(i=Va(r,h),i===2&&(y=sc(r),y!==0&&(h=y,i=Cu(r,y))),i===1))throw l=ao,xs(r,0),Qr(r,h),Ze(r,xe()),l;switch(r.finishedWork=m,r.finishedLanes=h,i){case 0:case 1:throw Error(e(345));case 2:vs(r,Ke,_r);break;case 3:if(Qr(r,h),(h&130023424)===h&&(i=Su+500-xe(),10<i)){if(Jo(r,0)!==0)break;if(m=r.suspendedLanes,(m&h)!==h){We(),r.pingedLanes|=r.suspendedLanes&m;break}r.timeoutHandle=Ic(vs.bind(null,r,Ke,_r),i);break}vs(r,Ke,_r);break;case 4:if(Qr(r,h),(h&4194240)===h)break;for(i=r.eventTimes,m=-1;0<h;){var S=31-Fn(h);y=1<<S,S=i[S],S>m&&(m=S),h&=~y}if(h=m,h=xe()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*F1(h/1960))-h,10<h){r.timeoutHandle=Ic(vs.bind(null,r,Ke,_r),h);break}vs(r,Ke,_r);break;case 5:vs(r,Ke,_r);break;default:throw Error(e(329))}}}return Ze(r,xe()),r.callbackNode===l?am.bind(null,r):null}function Cu(r,i){var l=lo;return r.current.memoizedState.isDehydrated&&(xs(r,i).flags|=256),r=Va(r,i),r!==2&&(i=Ke,Ke=l,i!==null&&Au(i)),r}function Au(r){Ke===null?Ke=r:Ke.push.apply(Ke,r)}function L1(r){for(var i=r;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var m=l[h],y=m.getSnapshot;m=m.value;try{if(!Ln(y(),m))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Qr(r,i){for(i&=~_u,i&=~Da,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var l=31-Fn(i),h=1<<l;r[l]=-1,i&=~h}}function lm(r){if((zt&6)!==0)throw Error(e(327));ni();var i=Jo(r,0);if((i&1)===0)return Ze(r,xe()),null;var l=Va(r,i);if(r.tag!==0&&l===2){var h=sc(r);h!==0&&(i=h,l=Cu(r,h))}if(l===1)throw l=ao,xs(r,0),Qr(r,i),Ze(r,xe()),l;if(l===6)throw Error(e(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,vs(r,Ke,_r),Ze(r,xe()),null}function Pu(r,i){var l=zt;zt|=1;try{return r(i)}finally{zt=l,zt===0&&(ei=xe()+500,xa&&$r())}}function ys(r){Xr!==null&&Xr.tag===0&&(zt&6)===0&&ni();var i=zt;zt|=1;var l=kn.transition,h=Wt;try{if(kn.transition=null,Wt=1,r)return r()}finally{Wt=h,kn.transition=l,zt=i,(zt&6)===0&&$r()}}function Tu(){ln=ti.current,ne(ti)}function xs(r,i){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,u1(l)),we!==null)for(l=we.return;l!==null;){var h=l;switch(Oc(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&ga();break;case 3:Ks(),ne(Xe),ne(Oe),Qc();break;case 5:Xc(h);break;case 4:Ks();break;case 13:ne(ue);break;case 19:ne(ue);break;case 10:$c(h.type._context);break;case 22:case 23:Tu()}l=l.return}if(Me=r,we=r=Kr(r.current,null),Fe=ln=i,ke=0,ao=null,_u=Da=gs=0,Ke=lo=null,fs!==null){for(i=0;i<fs.length;i++)if(l=fs[i],h=l.interleaved,h!==null){l.interleaved=null;var m=h.next,y=l.pending;if(y!==null){var S=y.next;y.next=m,h.next=S}l.pending=h}fs=null}return r}function cm(r,i){do{var l=we;try{if(Uc(),Ta.current=Ra,Ma){for(var h=he.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}Ma=!1}if(ms=0,Te=be=he=null,eo=!1,no=0,wu.current=null,l===null||l.return===null){ke=1,ao=i,we=null;break}t:{var y=r,S=l.return,P=l,E=i;if(i=Fe,P.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var U=E,nt=P,it=nt.tag;if((nt.mode&1)===0&&(it===0||it===11||it===15)){var tt=nt.alternate;tt?(nt.updateQueue=tt.updateQueue,nt.memoizedState=tt.memoizedState,nt.lanes=tt.lanes):(nt.updateQueue=null,nt.memoizedState=null)}var ht=Lp(S);if(ht!==null){ht.flags&=-257,Np(ht,S,P,y,i),ht.mode&1&&Fp(y,U,i),i=ht,E=U;var mt=i.updateQueue;if(mt===null){var gt=new Set;gt.add(E),i.updateQueue=gt}else mt.add(E);break t}else{if((i&1)===0){Fp(y,U,i),Mu();break t}E=Error(e(426))}}else if(ae&&P.mode&1){var ve=Lp(S);if(ve!==null){(ve.flags&65536)===0&&(ve.flags|=256),Np(ve,S,P,y,i),jc(Zs(E,P));break t}}y=E=Zs(E,P),ke!==4&&(ke=2),lo===null?lo=[y]:lo.push(y),y=S;do{switch(y.tag){case 3:y.flags|=65536,i&=-i,y.lanes|=i;var B=Ip(y,E,i);sp(y,B);break t;case 1:P=E;var I=y.type,D=y.stateNode;if((y.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Yr===null||!Yr.has(D)))){y.flags|=65536,i&=-i,y.lanes|=i;var ot=Rp(y,P,i);sp(y,ot);break t}}y=y.return}while(y!==null)}dm(l)}catch(xt){i=xt,we===l&&l!==null&&(we=l=l.return);continue}break}while(!0)}function um(){var r=za.current;return za.current=Ra,r===null?Ra:r}function Mu(){(ke===0||ke===3||ke===2)&&(ke=4),Me===null||(gs&268435455)===0&&(Da&268435455)===0||Qr(Me,Fe)}function Va(r,i){var l=zt;zt|=2;var h=um();(Me!==r||Fe!==i)&&(_r=null,xs(r,i));do try{N1();break}catch(m){cm(r,m)}while(!0);if(Uc(),zt=l,za.current=h,we!==null)throw Error(e(261));return Me=null,Fe=0,ke}function N1(){for(;we!==null;)hm(we)}function B1(){for(;we!==null&&!av();)hm(we)}function hm(r){var i=mm(r.alternate,r,ln);r.memoizedProps=r.pendingProps,i===null?dm(r):we=i,wu.current=null}function dm(r){var i=r;do{var l=i.alternate;if(r=i.return,(i.flags&32768)===0){if(l=T1(l,i,ln),l!==null){we=l;return}}else{if(l=M1(l,i),l!==null){l.flags&=32767,we=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{ke=6,we=null;return}}if(i=i.sibling,i!==null){we=i;return}we=i=r}while(i!==null);ke===0&&(ke=5)}function vs(r,i,l){var h=Wt,m=kn.transition;try{kn.transition=null,Wt=1,O1(r,i,l,h)}finally{kn.transition=m,Wt=h}return null}function O1(r,i,l,h){do ni();while(Xr!==null);if((zt&6)!==0)throw Error(e(327));l=r.finishedWork;var m=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(e(177));r.callbackNode=null,r.callbackPriority=0;var y=l.lanes|l.childLanes;if(yv(r,y),r===Me&&(we=Me=null,Fe=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Ga||(Ga=!0,gm(qo,function(){return ni(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=kn.transition,kn.transition=null;var S=Wt;Wt=1;var P=zt;zt|=4,wu.current=null,I1(r,l),nm(l,r),r1(Mc),na=!!Tc,Mc=Tc=null,r.current=l,R1(l),lv(),zt=P,Wt=S,kn.transition=y}else r.current=l;if(Ga&&(Ga=!1,Xr=r,Ua=m),y=r.pendingLanes,y===0&&(Yr=null),hv(l.stateNode),Ze(r,xe()),i!==null)for(h=r.onRecoverableError,l=0;l<i.length;l++)m=i[l],h(m.value,{componentStack:m.stack,digest:m.digest});if(ja)throw ja=!1,r=bu,bu=null,r;return(Ua&1)!==0&&r.tag!==0&&ni(),y=r.pendingLanes,(y&1)!==0?r===ku?co++:(co=0,ku=r):co=0,$r(),null}function ni(){if(Xr!==null){var r=Jd(Ua),i=kn.transition,l=Wt;try{if(kn.transition=null,Wt=16>r?16:r,Xr===null)var h=!1;else{if(r=Xr,Xr=null,Ua=0,(zt&6)!==0)throw Error(e(331));var m=zt;for(zt|=4,ft=r.current;ft!==null;){var y=ft,S=y.child;if((ft.flags&16)!==0){var P=y.deletions;if(P!==null){for(var E=0;E<P.length;E++){var U=P[E];for(ft=U;ft!==null;){var nt=ft;switch(nt.tag){case 0:case 11:case 15:oo(8,nt,y)}var it=nt.child;if(it!==null)it.return=nt,ft=it;else for(;ft!==null;){nt=ft;var tt=nt.sibling,ht=nt.return;if(Kp(nt),nt===U){ft=null;break}if(tt!==null){tt.return=ht,ft=tt;break}ft=ht}}}var mt=y.alternate;if(mt!==null){var gt=mt.child;if(gt!==null){mt.child=null;do{var ve=gt.sibling;gt.sibling=null,gt=ve}while(gt!==null)}}ft=y}}if((y.subtreeFlags&2064)!==0&&S!==null)S.return=y,ft=S;else t:for(;ft!==null;){if(y=ft,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:oo(9,y,y.return)}var B=y.sibling;if(B!==null){B.return=y.return,ft=B;break t}ft=y.return}}var I=r.current;for(ft=I;ft!==null;){S=ft;var D=S.child;if((S.subtreeFlags&2064)!==0&&D!==null)D.return=S,ft=D;else t:for(S=I;ft!==null;){if(P=ft,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:Oa(9,P)}}catch(xt){pe(P,P.return,xt)}if(P===S){ft=null;break t}var ot=P.sibling;if(ot!==null){ot.return=P.return,ft=ot;break t}ft=P.return}}if(zt=m,$r(),er&&typeof er.onPostCommitFiberRoot=="function")try{er.onPostCommitFiberRoot(Qo,r)}catch{}h=!0}return h}finally{Wt=l,kn.transition=i}}return!1}function fm(r,i,l){i=Zs(l,i),i=Ip(r,i,1),r=Vr(r,i,1),i=We(),r!==null&&(Fi(r,1,i),Ze(r,i))}function pe(r,i,l){if(r.tag===3)fm(r,r,l);else for(;i!==null;){if(i.tag===3){fm(i,r,l);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Yr===null||!Yr.has(h))){r=Zs(l,r),r=Rp(i,r,1),i=Vr(i,r,1),r=We(),i!==null&&(Fi(i,1,r),Ze(i,r));break}}i=i.return}}function z1(r,i,l){var h=r.pingCache;h!==null&&h.delete(i),i=We(),r.pingedLanes|=r.suspendedLanes&l,Me===r&&(Fe&l)===l&&(ke===4||ke===3&&(Fe&130023424)===Fe&&500>xe()-Su?xs(r,0):_u|=l),Ze(r,i)}function pm(r,i){i===0&&((r.mode&1)===0?i=1:(i=Zo,Zo<<=1,(Zo&130023424)===0&&(Zo=4194304)));var l=We();r=xr(r,i),r!==null&&(Fi(r,i,l),Ze(r,l))}function D1(r){var i=r.memoizedState,l=0;i!==null&&(l=i.retryLane),pm(r,l)}function j1(r,i){var l=0;switch(r.tag){case 13:var h=r.stateNode,m=r.memoizedState;m!==null&&(l=m.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(e(314))}h!==null&&h.delete(i),pm(r,l)}var mm;mm=function(r,i,l){if(r!==null)if(r.memoizedProps!==i.pendingProps||Xe.current)Qe=!0;else{if((r.lanes&l)===0&&(i.flags&128)===0)return Qe=!1,P1(r,i,l);Qe=(r.flags&131072)!==0}else Qe=!1,ae&&(i.flags&1048576)!==0&&Xf(i,wa,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;Na(r,i),r=i.pendingProps;var m=Ws(i,Oe.current);Qs(i,l),m=Jc(null,i,h,r,m,l);var y=tu();return i.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,qe(h)?(y=!0,ya(i)):y=!1,i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Hc(i),m.updater=Fa,i.stateNode=m,m._reactInternals=i,ou(i,h,r,l),i=uu(null,i,h,!0,y,l)):(i.tag=0,ae&&y&&Bc(i),$e(null,i,m,l),i=i.child),i;case 16:h=i.elementType;t:{switch(Na(r,i),r=i.pendingProps,m=h._init,h=m(h._payload),i.type=h,m=i.tag=U1(h),r=Bn(h,r),m){case 0:i=cu(null,i,h,r,l);break t;case 1:i=Gp(null,i,h,r,l);break t;case 11:i=Bp(null,i,h,r,l);break t;case 14:i=Op(null,i,h,Bn(h.type,r),l);break t}throw Error(e(306,h,""))}return i;case 0:return h=i.type,m=i.pendingProps,m=i.elementType===h?m:Bn(h,m),cu(r,i,h,m,l);case 1:return h=i.type,m=i.pendingProps,m=i.elementType===h?m:Bn(h,m),Gp(r,i,h,m,l);case 3:t:{if(Up(i),r===null)throw Error(e(387));h=i.pendingProps,y=i.memoizedState,m=y.element,rp(r,i),Aa(i,h,null,l);var S=i.memoizedState;if(h=S.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){m=Zs(Error(e(423)),i),i=$p(r,i,h,l,m);break t}else if(h!==m){m=Zs(Error(e(424)),i),i=$p(r,i,h,l,m);break t}else for(an=jr(i.stateNode.containerInfo.firstChild),on=i,ae=!0,Nn=null,l=ep(i,null,h,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ys(),h===m){i=wr(r,i,l);break t}$e(r,i,h,l)}i=i.child}return i;case 5:return op(i),r===null&&Dc(i),h=i.type,m=i.pendingProps,y=r!==null?r.memoizedProps:null,S=m.children,Ec(h,m)?S=null:y!==null&&Ec(h,y)&&(i.flags|=32),jp(r,i),$e(r,i,S,l),i.child;case 6:return r===null&&Dc(i),null;case 13:return Wp(r,i,l);case 4:return Yc(i,i.stateNode.containerInfo),h=i.pendingProps,r===null?i.child=Xs(i,null,h,l):$e(r,i,h,l),i.child;case 11:return h=i.type,m=i.pendingProps,m=i.elementType===h?m:Bn(h,m),Bp(r,i,h,m,l);case 7:return $e(r,i,i.pendingProps,l),i.child;case 8:return $e(r,i,i.pendingProps.children,l),i.child;case 12:return $e(r,i,i.pendingProps.children,l),i.child;case 10:t:{if(h=i.type._context,m=i.pendingProps,y=i.memoizedProps,S=m.value,Zt(ba,h._currentValue),h._currentValue=S,y!==null)if(Ln(y.value,S)){if(y.children===m.children&&!Xe.current){i=wr(r,i,l);break t}}else for(y=i.child,y!==null&&(y.return=i);y!==null;){var P=y.dependencies;if(P!==null){S=y.child;for(var E=P.firstContext;E!==null;){if(E.context===h){if(y.tag===1){E=vr(-1,l&-l),E.tag=2;var U=y.updateQueue;if(U!==null){U=U.shared;var nt=U.pending;nt===null?E.next=E:(E.next=nt.next,nt.next=E),U.pending=E}}y.lanes|=l,E=y.alternate,E!==null&&(E.lanes|=l),Wc(y.return,l,i),P.lanes|=l;break}E=E.next}}else if(y.tag===10)S=y.type===i.type?null:y.child;else if(y.tag===18){if(S=y.return,S===null)throw Error(e(341));S.lanes|=l,P=S.alternate,P!==null&&(P.lanes|=l),Wc(S,l,i),S=y.sibling}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===i){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}$e(r,i,m.children,l),i=i.child}return i;case 9:return m=i.type,h=i.pendingProps.children,Qs(i,l),m=Sn(m),h=h(m),i.flags|=1,$e(r,i,h,l),i.child;case 14:return h=i.type,m=Bn(h,i.pendingProps),m=Bn(h.type,m),Op(r,i,h,m,l);case 15:return zp(r,i,i.type,i.pendingProps,l);case 17:return h=i.type,m=i.pendingProps,m=i.elementType===h?m:Bn(h,m),Na(r,i),i.tag=1,qe(h)?(r=!0,ya(i)):r=!1,Qs(i,l),Mp(i,h,m),ou(i,h,m,l),uu(null,i,h,!0,r,l);case 19:return Hp(r,i,l);case 22:return Dp(r,i,l)}throw Error(e(156,i.tag))};function gm(r,i){return Xd(r,i)}function G1(r,i,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(r,i,l,h){return new G1(r,i,l,h)}function Eu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function U1(r){if(typeof r=="function")return Eu(r)?1:0;if(r!=null){if(r=r.$$typeof,r===rt)return 11;if(r===kt)return 14}return 2}function Kr(r,i){var l=r.alternate;return l===null?(l=Cn(r.tag,i,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=i,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,i=r.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function Ha(r,i,l,h,m,y){var S=2;if(h=r,typeof r=="function")Eu(r)&&(S=1);else if(typeof r=="string")S=5;else t:switch(r){case F:return ws(l.children,m,y,i);case q:S=8,m|=8;break;case $:return r=Cn(12,l,i,m|2),r.elementType=$,r.lanes=y,r;case ct:return r=Cn(13,l,i,m),r.elementType=ct,r.lanes=y,r;case lt:return r=Cn(19,l,i,m),r.elementType=lt,r.lanes=y,r;case K:return Ya(l,m,y,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case N:S=10;break t;case V:S=9;break t;case rt:S=11;break t;case kt:S=14;break t;case Q:S=16,h=null;break t}throw Error(e(130,r==null?r:typeof r,""))}return i=Cn(S,l,i,m),i.elementType=r,i.type=h,i.lanes=y,i}function ws(r,i,l,h){return r=Cn(7,r,h,i),r.lanes=l,r}function Ya(r,i,l,h){return r=Cn(22,r,h,i),r.elementType=K,r.lanes=l,r.stateNode={isHidden:!1},r}function Iu(r,i,l){return r=Cn(6,r,null,i),r.lanes=l,r}function Ru(r,i,l){return i=Cn(4,r.children!==null?r.children:[],r.key,i),i.lanes=l,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function $1(r,i,l,h,m){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ic(0),this.expirationTimes=ic(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ic(0),this.identifierPrefix=h,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Fu(r,i,l,h,m,y,S,P,E){return r=new $1(r,i,l,P,E),i===1?(i=1,y===!0&&(i|=8)):i=0,y=Cn(3,null,null,i),r.current=y,y.stateNode=r,y.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hc(y),r}function W1(r,i,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:h==null?null:""+h,children:r,containerInfo:i,implementation:l}}function ym(r){if(!r)return Ur;r=r._reactInternals;t:{if(ls(r)!==r||r.tag!==1)throw Error(e(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break t;case 1:if(qe(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break t}}i=i.return}while(i!==null);throw Error(e(171))}if(r.tag===1){var l=r.type;if(qe(l))return Vf(r,l,i)}return i}function xm(r,i,l,h,m,y,S,P,E){return r=Fu(l,h,!0,r,m,y,S,P,E),r.context=ym(null),l=r.current,h=We(),m=qr(l),y=vr(h,m),y.callback=i??null,Vr(l,y,m),r.current.lanes=m,Fi(r,m,h),Ze(r,h),r}function Xa(r,i,l,h){var m=i.current,y=We(),S=qr(m);return l=ym(l),i.context===null?i.context=l:i.pendingContext=l,i=vr(y,S),i.payload={element:r},h=h===void 0?null:h,h!==null&&(i.callback=h),r=Vr(m,i,S),r!==null&&(Dn(r,m,S,y),Ca(r,m,S)),S}function qa(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function vm(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<i?l:i}}function Lu(r,i){vm(r,i),(r=r.alternate)&&vm(r,i)}function V1(){return null}var wm=typeof reportError=="function"?reportError:function(r){console.error(r)};function Nu(r){this._internalRoot=r}Qa.prototype.render=Nu.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(e(409));Xa(r,i,null,null)},Qa.prototype.unmount=Nu.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;ys(function(){Xa(null,r,null,null)}),i[pr]=null}};function Qa(r){this._internalRoot=r}Qa.prototype.unstable_scheduleHydration=function(r){if(r){var i=nf();r={blockedOn:null,target:r,priority:i};for(var l=0;l<Or.length&&i!==0&&i<Or[l].priority;l++);Or.splice(l,0,r),l===0&&of(r)}};function Bu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Ka(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function _m(){}function H1(r,i,l,h,m){if(m){if(typeof h=="function"){var y=h;h=function(){var U=qa(S);y.call(U)}}var S=xm(i,h,r,0,null,!1,!1,"",_m);return r._reactRootContainer=S,r[pr]=S.current,Yi(r.nodeType===8?r.parentNode:r),ys(),S}for(;m=r.lastChild;)r.removeChild(m);if(typeof h=="function"){var P=h;h=function(){var U=qa(E);P.call(U)}}var E=Fu(r,0,!1,null,null,!1,!1,"",_m);return r._reactRootContainer=E,r[pr]=E.current,Yi(r.nodeType===8?r.parentNode:r),ys(function(){Xa(i,E,l,h)}),E}function Za(r,i,l,h,m){var y=l._reactRootContainer;if(y){var S=y;if(typeof m=="function"){var P=m;m=function(){var E=qa(S);P.call(E)}}Xa(i,S,r,m)}else S=H1(l,i,r,m,h);return qa(S)}tf=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var l=Ri(i.pendingLanes);l!==0&&(oc(i,l|1),Ze(i,xe()),(zt&6)===0&&(ei=xe()+500,$r()))}break;case 13:ys(function(){var h=xr(r,1);if(h!==null){var m=We();Dn(h,r,1,m)}}),Lu(r,1)}},ac=function(r){if(r.tag===13){var i=xr(r,134217728);if(i!==null){var l=We();Dn(i,r,134217728,l)}Lu(r,134217728)}},ef=function(r){if(r.tag===13){var i=qr(r),l=xr(r,i);if(l!==null){var h=We();Dn(l,r,i,h)}Lu(r,i)}},nf=function(){return Wt},rf=function(r,i){var l=Wt;try{return Wt=r,i()}finally{Wt=l}},Zn=function(r,i,l){switch(i){case"input":if(Gt(r,l),i=l.name,l.type==="radio"&&i!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var h=l[i];if(h!==r&&h.form===r.form){var m=ma(h);if(!m)throw Error(e(90));yt(h),Gt(h,m)}}}break;case"textarea":ye(r,l);break;case"select":i=l.value,i!=null&&Nt(r,!!l.multiple,i,!1)}},Rn=Pu,Yo=ys;var Y1={usingClientEntryPoint:!1,Events:[Qi,Us,ma,Rr,is,Pu]},uo={findFiberByHostInstance:cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},X1={bundleType:uo.bundleType,version:uo.version,rendererPackageName:uo.rendererPackageName,rendererConfig:uo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Hd(r),r===null?null:r.stateNode},findFiberByHostInstance:uo.findFiberByHostInstance||V1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ja=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ja.isDisabled&&Ja.supportsFiber)try{Qo=Ja.inject(X1),er=Ja}catch{}}return Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y1,Je.createPortal=function(r,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bu(i))throw Error(e(200));return W1(r,i,null,l)},Je.createRoot=function(r,i){if(!Bu(r))throw Error(e(299));var l=!1,h="",m=wm;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(m=i.onRecoverableError)),i=Fu(r,1,!1,null,null,l,!1,h,m),r[pr]=i.current,Yi(r.nodeType===8?r.parentNode:r),new Nu(i)},Je.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(e(188)):(r=Object.keys(r).join(","),Error(e(268,r)));return r=Hd(i),r=r===null?null:r.stateNode,r},Je.flushSync=function(r){return ys(r)},Je.hydrate=function(r,i,l){if(!Ka(i))throw Error(e(200));return Za(null,r,i,!0,l)},Je.hydrateRoot=function(r,i,l){if(!Bu(r))throw Error(e(405));var h=l!=null&&l.hydratedSources||null,m=!1,y="",S=wm;if(l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),i=xm(i,null,r,1,l??null,m,!1,y,S),r[pr]=i.current,Yi(r),h)for(r=0;r<h.length;r++)l=h[r],m=l._getVersion,m=m(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,m]:i.mutableSourceEagerHydrationData.push(l,m);return new Qa(i)},Je.render=function(r,i,l){if(!Ka(i))throw Error(e(200));return Za(null,r,i,!1,l)},Je.unmountComponentAtNode=function(r){if(!Ka(r))throw Error(e(40));return r._reactRootContainer?(ys(function(){Za(null,null,r,!1,function(){r._reactRootContainer=null,r[pr]=null})}),!0):!1},Je.unstable_batchedUpdates=Pu,Je.unstable_renderSubtreeIntoContainer=function(r,i,l,h){if(!Ka(l))throw Error(e(200));if(r==null||r._reactInternals===void 0)throw Error(e(38));return Za(r,i,l,!1,h)},Je.version="18.3.1-next-f1338f8080-20240426",Je}var Mm;function ky(){if(Mm)return Du.exports;Mm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Du.exports=rw(),Du.exports}var Em;function sw(){if(Em)return tl;Em=1;var n=ky();return tl.createRoot=n.createRoot,tl.hydrateRoot=n.hydrateRoot,tl}var iw=sw(),ut=hd();const ai=ud(ut),ow="modulepreload",aw=function(n){return"/farmwork/"+n},Im={},Tl=function(t,e,s){let o=Promise.resolve();if(e&&e.length>0){let c=function(p){return Promise.all(p.map(f=>Promise.resolve(f).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");o=c(e.map(p=>{if(p=aw(p),p in Im)return;Im[p]=!0;const f=p.endsWith(".css"),g=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${g}`))return;const x=document.createElement("link");if(x.rel=f?"stylesheet":ow,f||(x.as="script"),x.crossOrigin="",x.href=p,d&&x.setAttribute("nonce",d),document.head.appendChild(x),f)return new Promise((v,_)=>{x.addEventListener("load",v),x.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return o.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return t().catch(a)})};var _t=(n=>(n.Application="application",n.WebGLPipes="webgl-pipes",n.WebGLPipesAdaptor="webgl-pipes-adaptor",n.WebGLSystem="webgl-system",n.WebGPUPipes="webgpu-pipes",n.WebGPUPipesAdaptor="webgpu-pipes-adaptor",n.WebGPUSystem="webgpu-system",n.CanvasSystem="canvas-system",n.CanvasPipesAdaptor="canvas-pipes-adaptor",n.CanvasPipes="canvas-pipes",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n.MaskEffect="mask-effect",n.BlendMode="blend-mode",n.TextureSource="texture-source",n.Environment="environment",n.ShapeBuilder="shape-builder",n.Batcher="batcher",n))(_t||{});const Ih=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},el=(n,t)=>Ih(n).priority??t,Ne={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(Ih).forEach(t=>{t.type.forEach(e=>this._removeHandlers[e]?.(t))}),this},add(...n){return n.map(Ih).forEach(t=>{t.type.forEach(e=>{const s=this._addHandlers,o=this._queue;s[e]?s[e]?.(t):(o[e]=o[e]||[],o[e]?.push(t))})}),this},handle(n,t,e){const s=this._addHandlers,o=this._removeHandlers;if(s[n]||o[n])throw new Error(`Extension type ${n} already has a handler`);s[n]=t,o[n]=e;const a=this._queue;return a[n]&&(a[n]?.forEach(c=>t(c)),delete a[n]),this},handleByMap(n,t){return this.handle(n,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByNamedList(n,t,e=-1){return this.handle(n,s=>{t.findIndex(a=>a.name===s.name)>=0||(t.push({name:s.name,value:s.ref}),t.sort((a,c)=>el(c.value,e)-el(a.value,e)))},s=>{const o=t.findIndex(a=>a.name===s.name);o!==-1&&t.splice(o,1)})},handleByList(n,t,e=-1){return this.handle(n,s=>{t.includes(s.ref)||(t.push(s.ref),t.sort((o,a)=>el(a,e)-el(o,e)))},s=>{const o=t.indexOf(s.ref);o!==-1&&t.splice(o,1)})},mixin(n,...t){for(const e of t)Object.defineProperties(n.prototype,Object.getOwnPropertyDescriptors(e))}},lw={extension:{type:_t.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Tl(()=>import("./browserAll-CNqRT5Zi.js"),__vite__mapDeps([0,1,2]))}},cw={extension:{type:_t.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Tl(()=>import("./webworkerAll-DuguPJgB.js"),__vite__mapDeps([1,2]))}};class Le{constructor(t,e,s){this._x=e||0,this._y=s||0,this._observer=t}clone(t){return new Le(t??this._observer,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}var Uu={exports:{}},Rm;function uw(){return Rm||(Rm=1,(function(n){var t=Object.prototype.hasOwnProperty,e="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(e=!1));function o(d,p,f){this.fn=d,this.context=p,this.once=f||!1}function a(d,p,f,g,x){if(typeof f!="function")throw new TypeError("The listener must be a function");var v=new o(f,g||d,x),_=e?e+p:p;return d._events[_]?d._events[_].fn?d._events[_]=[d._events[_],v]:d._events[_].push(v):(d._events[_]=v,d._eventsCount++),d}function c(d,p){--d._eventsCount===0?d._events=new s:delete d._events[p]}function u(){this._events=new s,this._eventsCount=0}u.prototype.eventNames=function(){var p=[],f,g;if(this._eventsCount===0)return p;for(g in f=this._events)t.call(f,g)&&p.push(e?g.slice(1):g);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(f)):p},u.prototype.listeners=function(p){var f=e?e+p:p,g=this._events[f];if(!g)return[];if(g.fn)return[g.fn];for(var x=0,v=g.length,_=new Array(v);x<v;x++)_[x]=g[x].fn;return _},u.prototype.listenerCount=function(p){var f=e?e+p:p,g=this._events[f];return g?g.fn?1:g.length:0},u.prototype.emit=function(p,f,g,x,v,_){var b=e?e+p:p;if(!this._events[b])return!1;var w=this._events[b],C=arguments.length,A,T;if(w.fn){switch(w.once&&this.removeListener(p,w.fn,void 0,!0),C){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,g),!0;case 4:return w.fn.call(w.context,f,g,x),!0;case 5:return w.fn.call(w.context,f,g,x,v),!0;case 6:return w.fn.call(w.context,f,g,x,v,_),!0}for(T=1,A=new Array(C-1);T<C;T++)A[T-1]=arguments[T];w.fn.apply(w.context,A)}else{var k=w.length,L;for(T=0;T<k;T++)switch(w[T].once&&this.removeListener(p,w[T].fn,void 0,!0),C){case 1:w[T].fn.call(w[T].context);break;case 2:w[T].fn.call(w[T].context,f);break;case 3:w[T].fn.call(w[T].context,f,g);break;case 4:w[T].fn.call(w[T].context,f,g,x);break;default:if(!A)for(L=1,A=new Array(C-1);L<C;L++)A[L-1]=arguments[L];w[T].fn.apply(w[T].context,A)}}return!0},u.prototype.on=function(p,f,g){return a(this,p,f,g,!1)},u.prototype.once=function(p,f,g){return a(this,p,f,g,!0)},u.prototype.removeListener=function(p,f,g,x){var v=e?e+p:p;if(!this._events[v])return this;if(!f)return c(this,v),this;var _=this._events[v];if(_.fn)_.fn===f&&(!x||_.once)&&(!g||_.context===g)&&c(this,v);else{for(var b=0,w=[],C=_.length;b<C;b++)(_[b].fn!==f||x&&!_[b].once||g&&_[b].context!==g)&&w.push(_[b]);w.length?this._events[v]=w.length===1?w[0]:w:c(this,v)}return this},u.prototype.removeAllListeners=function(p){var f;return p?(f=e?e+p:p,this._events[f]&&c(this,f)):(this._events=new s,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=e,u.EventEmitter=u,n.exports=u})(Uu)),Uu.exports}var hw=uw();const Yn=ud(hw),dw=Math.PI*2,fw=180/Math.PI,pw=Math.PI/180;class Ge{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new Ge(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return $u.x=0,$u.y=0,$u}}const $u=new Ge;class Lt{constructor(t=1,e=0,s=0,o=1,a=0,c=0){this.array=null,this.a=t,this.b=e,this.c=s,this.d=o,this.tx=a,this.ty=c}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,s,o,a,c){return this.a=t,this.b=e,this.c=s,this.d=o,this.tx=a,this.ty=c,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const s=e||this.array;return t?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(t,e){e=e||new Ge;const s=t.x,o=t.y;return e.x=this.a*s+this.c*o+this.tx,e.y=this.b*s+this.d*o+this.ty,e}applyInverse(t,e){e=e||new Ge;const s=this.a,o=this.b,a=this.c,c=this.d,u=this.tx,d=this.ty,p=1/(s*c+a*-o),f=t.x,g=t.y;return e.x=c*p*f+-a*p*g+(d*a-u*c)*p,e.y=s*p*g+-o*p*f+(-d*s+u*o)*p,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),s=Math.sin(t),o=this.a,a=this.c,c=this.tx;return this.a=o*e-this.b*s,this.b=o*s+this.b*e,this.c=a*e-this.d*s,this.d=a*s+this.d*e,this.tx=c*e-this.ty*s,this.ty=c*s+this.ty*e,this}append(t){const e=this.a,s=this.b,o=this.c,a=this.d;return this.a=t.a*e+t.b*o,this.b=t.a*s+t.b*a,this.c=t.c*e+t.d*o,this.d=t.c*s+t.d*a,this.tx=t.tx*e+t.ty*o+this.tx,this.ty=t.tx*s+t.ty*a+this.ty,this}appendFrom(t,e){const s=t.a,o=t.b,a=t.c,c=t.d,u=t.tx,d=t.ty,p=e.a,f=e.b,g=e.c,x=e.d;return this.a=s*p+o*g,this.b=s*f+o*x,this.c=a*p+c*g,this.d=a*f+c*x,this.tx=u*p+d*g+e.tx,this.ty=u*f+d*x+e.ty,this}setTransform(t,e,s,o,a,c,u,d,p){return this.a=Math.cos(u+p)*a,this.b=Math.sin(u+p)*a,this.c=-Math.sin(u-d)*c,this.d=Math.cos(u-d)*c,this.tx=t-(s*this.a+o*this.c),this.ty=e-(s*this.b+o*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const s=this.a,o=this.c;this.a=s*t.a+this.b*t.c,this.b=s*t.b+this.b*t.d,this.c=o*t.a+this.d*t.c,this.d=o*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,s=this.b,o=this.c,a=this.d,c=t.pivot,u=-Math.atan2(-o,a),d=Math.atan2(s,e),p=Math.abs(u+d);return p<1e-5||Math.abs(dw-p)<1e-5?(t.rotation=d,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=u,t.skew.y=d),t.scale.x=Math.sqrt(e*e+s*s),t.scale.y=Math.sqrt(o*o+a*a),t.position.x=this.tx+(c.x*e+c.y*o),t.position.y=this.ty+(c.x*s+c.y*a),t}invert(){const t=this.a,e=this.b,s=this.c,o=this.d,a=this.tx,c=t*o-e*s;return this.a=o/c,this.b=-e/c,this.c=-s/c,this.d=t/c,this.tx=(s*this.ty-o*a)/c,this.ty=-(t*this.ty-e*a)/c,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Lt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return gw.identity()}static get shared(){return mw.identity()}}const mw=new Lt,gw=new Lt,ks=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Cs=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],As=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ps=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Rh=[],Cy=[],nl=Math.sign;function yw(){for(let n=0;n<16;n++){const t=[];Rh.push(t);for(let e=0;e<16;e++){const s=nl(ks[n]*ks[e]+As[n]*Cs[e]),o=nl(Cs[n]*ks[e]+Ps[n]*Cs[e]),a=nl(ks[n]*As[e]+As[n]*Ps[e]),c=nl(Cs[n]*As[e]+Ps[n]*Ps[e]);for(let u=0;u<16;u++)if(ks[u]===s&&Cs[u]===o&&As[u]===a&&Ps[u]===c){t.push(u);break}}}for(let n=0;n<16;n++){const t=new Lt;t.set(ks[n],Cs[n],As[n],Ps[n],0,0),Cy.push(t)}}yw();const Vt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>ks[n],uY:n=>Cs[n],vX:n=>As[n],vY:n=>Ps[n],inv:n=>n&8?n&15:-n&7,add:(n,t)=>Rh[n][t],sub:(n,t)=>Rh[n][Vt.inv(t)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,t)=>Math.abs(n)*2<=Math.abs(t)?t>=0?Vt.S:Vt.N:Math.abs(t)*2<=Math.abs(n)?n>0?Vt.E:Vt.W:t>0?n>0?Vt.SE:Vt.SW:n>0?Vt.NE:Vt.NW,matrixAppendRotationInv:(n,t,e=0,s=0)=>{const o=Cy[Vt.inv(t)];o.tx=e,o.ty=s,n.append(o)},transformRectCoords:(n,t,e,s)=>{const{x:o,y:a,width:c,height:u}=n,{x:d,y:p,width:f,height:g}=t;return e===Vt.E?(s.set(o+d,a+p,c,u),s):e===Vt.S?s.set(f-a-u+d,o+p,u,c):e===Vt.W?s.set(f-o-c+d,g-a-u+p,c,u):e===Vt.N?s.set(a+d,g-o-c+p,u,c):s.set(o+d,a+p,c,u)}},rl=[new Ge,new Ge,new Ge,new Ge];class oe{constructor(t=0,e=0,s=0,o=0){this.type="rectangle",this.x=Number(t),this.y=Number(e),this.width=Number(s),this.height=Number(o)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new oe(0,0,0,0)}clone(){return new oe(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}strokeContains(t,e,s,o=.5){const{width:a,height:c}=this;if(a<=0||c<=0)return!1;const u=this.x,d=this.y,p=s*(1-o),f=s-p,g=u-p,x=u+a+p,v=d-p,_=d+c+p,b=u+f,w=u+a-f,C=d+f,A=d+c-f;return t>=g&&t<=x&&e>=v&&e<=_&&!(t>b&&t<w&&e>C&&e<A)}intersects(t,e){if(!e){const q=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=q)return!1;const N=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>N}const s=this.left,o=this.right,a=this.top,c=this.bottom;if(o<=s||c<=a)return!1;const u=rl[0].set(t.left,t.top),d=rl[1].set(t.left,t.bottom),p=rl[2].set(t.right,t.top),f=rl[3].set(t.right,t.bottom);if(p.x<=u.x||d.y<=u.y)return!1;const g=Math.sign(e.a*e.d-e.b*e.c);if(g===0||(e.apply(u,u),e.apply(d,d),e.apply(p,p),e.apply(f,f),Math.max(u.x,d.x,p.x,f.x)<=s||Math.min(u.x,d.x,p.x,f.x)>=o||Math.max(u.y,d.y,p.y,f.y)<=a||Math.min(u.y,d.y,p.y,f.y)>=c))return!1;const x=g*(d.y-u.y),v=g*(u.x-d.x),_=x*s+v*a,b=x*o+v*a,w=x*s+v*c,C=x*o+v*c;if(Math.max(_,b,w,C)<=x*u.x+v*u.y||Math.min(_,b,w,C)>=x*f.x+v*f.y)return!1;const A=g*(u.y-p.y),T=g*(p.x-u.x),k=A*s+T*a,L=A*o+T*a,R=A*s+T*c,F=A*o+T*c;return!(Math.max(k,L,R,F)<=A*u.x+T*u.y||Math.min(k,L,R,F)>=A*f.x+T*f.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),s=Math.min(this.x+this.width,t.x+t.width),o=Math.max(this.y,t.y),a=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(s-e,0),this.y=o,this.height=Math.max(a-o,0),this}ceil(t=1,e=.001){const s=Math.ceil((this.x+this.width-e)*t)/t,o=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=s-this.x,this.height=o-this.y,this}scale(t,e=t){return this.x*=t,this.y*=e,this.width*=t,this.height*=e,this}enlarge(t){const e=Math.min(this.x,t.x),s=Math.max(this.x+this.width,t.x+t.width),o=Math.min(this.y,t.y),a=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=s-e,this.y=o,this.height=a-o,this}getBounds(t){return t||(t=new oe),t.copyFrom(this),t}containsRect(t){if(this.width<=0||this.height<=0)return!1;const e=t.x,s=t.y,o=t.x+t.width,a=t.y+t.height;return e>=this.x&&e<this.x+this.width&&s>=this.y&&s<this.y+this.height&&o>=this.x&&o<this.x+this.width&&a>=this.y&&a<this.y+this.height}set(t,e,s,o){return this.x=t,this.y=e,this.width=s,this.height=o,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const Wu={default:-1};function ge(n="default"){return Wu[n]===void 0&&(Wu[n]=-1),++Wu[n]}const Fm=new Set,Ut="8.0.0",xw="8.3.4",li={quiet:!1,noColor:!1},Et=(n,t,e=3)=>{if(li.quiet||Fm.has(t))return;let s=new Error().stack;const o=`${t}
Deprecated since v${n}`,a=typeof console.groupCollapsed=="function"&&!li.noColor;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",o):(s=s.split(`
`).splice(e).join(`
`),a?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",o),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",o),console.warn(s))),Fm.add(t)};Object.defineProperties(Et,{quiet:{get:()=>li.quiet,set:n=>{li.quiet=n},enumerable:!0,configurable:!1},noColor:{get:()=>li.noColor,set:n=>{li.noColor=n},enumerable:!0,configurable:!1}});const Ay=()=>{};function yi(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function Lm(n){return!(n&n-1)&&!!n}function Py(n){const t={};for(const e in n)n[e]!==void 0&&(t[e]=n[e]);return t}const Nm=Object.create(null);function vw(n){const t=Nm[n];return t===void 0&&(Nm[n]=ge("resource")),t}const Ty=class My extends Yn{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...My.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){Et(Ut,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=vw(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};Ty.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let xi=Ty;const Ey=class Iy extends Yn{constructor(t={}){super(),this.options=t,this.uid=ge("textureSource"),this._resourceType="textureSource",this._resourceId=ge("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...Iy.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new xi(Py(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){this.style!==t&&(this._style?.off("change",this._onStyleChange,this),this._style=t,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(t){this._style.maxAnisotropy=t}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=ge("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,e,s){s||(s=this._resolution),t||(t=this.width),e||(e=this.height);const o=Math.round(t*s),a=Math.round(e*s);return this.width=o/s,this.height=a/s,this._resolution=s,this.pixelWidth===o&&this.pixelHeight===a?!1:(this._refreshPOT(),this.pixelWidth=o,this.pixelHeight=a,this.emit("resize",this),this._resourceId=ge("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Lm(this.pixelWidth)&&Lm(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};Ey.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Xn=Ey;class dd extends Xn{constructor(t){const e=t.resource||new Float32Array(t.width*t.height*4);let s=t.format;s||(e instanceof Float32Array?s="rgba32float":e instanceof Int32Array||e instanceof Uint32Array?s="rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?s="rgba16uint":(e instanceof Int8Array,s="bgra8unorm")),super({...t,resource:e,format:s}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}dd.extension=_t.TextureSource;const Bm=new Lt;class ww{constructor(t,e){this.mapCoord=new Lt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof e>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){this.texture!==t&&(this._texture?.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,e){e===void 0&&(e=t);const s=this.mapCoord;for(let o=0;o<t.length;o+=2){const a=t[o],c=t[o+1];e[o]=a*s.a+c*s.c+s.tx,e[o+1]=a*s.b+c*s.d+s.ty}return e}update(){const t=this._texture;this._updateID++;const e=t.uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);const s=t.orig,o=t.trim;o&&(Bm.set(s.width/o.width,0,0,s.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(Bm));const a=t.source,c=this.uClampFrame,u=this.clampMargin/a._resolution,d=this.clampOffset/a._resolution;return c[0]=(t.frame.x+u+d)/a.width,c[1]=(t.frame.y+u+d)/a.height,c[2]=(t.frame.x+t.frame.width-u+d)/a.width,c[3]=(t.frame.y+t.frame.height-u+d)/a.height,this.uClampOffset[0]=this.clampOffset/a.pixelWidth,this.uClampOffset[1]=this.clampOffset/a.pixelHeight,this.isSimple=t.frame.width===a.width&&t.frame.height===a.height&&t.rotate===0,!0}}class Ot extends Yn{constructor({source:t,label:e,frame:s,orig:o,trim:a,defaultAnchor:c,defaultBorders:u,rotate:d,dynamic:p}={}){if(super(),this.uid=ge("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new oe,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=e,this.source=t?.source??new Xn,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:f,height:g}=this._source;this.frame.width=f,this.frame.height=g}this.orig=o||this.frame,this.trim=a,this.rotate=d??0,this.defaultAnchor=c,this.defaultBorders=u,this.destroyed=!1,this.dynamic=p||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new ww(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:e}=this,{width:s,height:o}=this._source,a=e.x/s,c=e.y/o,u=e.width/s,d=e.height/o;let p=this.rotate;if(p){const f=u/2,g=d/2,x=a+f,v=c+g;p=Vt.add(p,Vt.NW),t.x0=x+f*Vt.uX(p),t.y0=v+g*Vt.uY(p),p=Vt.add(p,2),t.x1=x+f*Vt.uX(p),t.y1=v+g*Vt.uY(p),p=Vt.add(p,2),t.x2=x+f*Vt.uX(p),t.y2=v+g*Vt.uY(p),p=Vt.add(p,2),t.x3=x+f*Vt.uX(p),t.y3=v+g*Vt.uY(p)}else t.x0=a,t.y0=c,t.x1=a+u,t.y1=c,t.x2=a+u,t.y2=c+d,t.x3=a,t.y3=c+d}destroy(t=!1){this._source&&(this._source.off("resize",this.update,this),t&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Et(Ut,"Texture.baseTexture is now Texture.source"),this._source}}Ot.EMPTY=new Ot({label:"EMPTY",source:new Xn({label:"EMPTY"})});Ot.EMPTY.destroy=Ay;Ot.WHITE=new Ot({source:new dd({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Ot.WHITE.destroy=Ay;function _w(n,t,e){const{width:s,height:o}=e.orig,a=e.trim;if(a){const c=a.width,u=a.height;n.minX=a.x-t._x*s,n.maxX=n.minX+c,n.minY=a.y-t._y*o,n.maxY=n.minY+u}else n.minX=-t._x*s,n.maxX=n.minX+s,n.minY=-t._y*o,n.maxY=n.minY+o}const Om=new Lt;class Vn{constructor(t=1/0,e=1/0,s=-1/0,o=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Om,this.minX=t,this.minY=e,this.maxX=s,this.maxY=o}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new oe);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Om,this}set(t,e,s,o){this.minX=t,this.minY=e,this.maxX=s,this.maxY=o}addFrame(t,e,s,o,a){a||(a=this.matrix);const c=a.a,u=a.b,d=a.c,p=a.d,f=a.tx,g=a.ty;let x=this.minX,v=this.minY,_=this.maxX,b=this.maxY,w=c*t+d*e+f,C=u*t+p*e+g;w<x&&(x=w),C<v&&(v=C),w>_&&(_=w),C>b&&(b=C),w=c*s+d*e+f,C=u*s+p*e+g,w<x&&(x=w),C<v&&(v=C),w>_&&(_=w),C>b&&(b=C),w=c*t+d*o+f,C=u*t+p*o+g,w<x&&(x=w),C<v&&(v=C),w>_&&(_=w),C>b&&(b=C),w=c*s+d*o+f,C=u*s+p*o+g,w<x&&(x=w),C<v&&(v=C),w>_&&(_=w),C>b&&(b=C),this.minX=x,this.minY=v,this.maxX=_,this.maxY=b}addRect(t,e){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,e)}addBounds(t,e){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,e)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const e=this.minX,s=this.minY,o=this.maxX,a=this.maxY,{a:c,b:u,c:d,d:p,tx:f,ty:g}=t;let x=c*e+d*s+f,v=u*e+p*s+g;this.minX=x,this.minY=v,this.maxX=x,this.maxY=v,x=c*o+d*s+f,v=u*o+p*s+g,this.minX=x<this.minX?x:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=v>this.maxY?v:this.maxY,x=c*e+d*a+f,v=u*e+p*a+g,this.minX=x<this.minX?x:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=v>this.maxY?v:this.maxY,x=c*o+d*a+f,v=u*o+p*a+g,this.minX=x<this.minX?x:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=v>this.maxY?v:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,e,s,o){return this.minX<t&&(this.minX=t),this.maxX>e&&(this.maxX=e),this.minY<s&&(this.minY=s),this.maxY>o&&(this.maxY=o),this}pad(t,e=t){return this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Vn(this.minX,this.minY,this.maxX,this.maxY)}scale(t,e=t){return this.minX*=t,this.minY*=e,this.maxX*=t,this.maxY*=e,this}get x(){return this.minX}set x(t){const e=this.maxX-this.minX;this.minX=t,this.maxX=t+e}get y(){return this.minY}set y(t){const e=this.maxY-this.minY;this.minY=t,this.maxY=t+e}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,e,s,o){let a=this.minX,c=this.minY,u=this.maxX,d=this.maxY;o||(o=this.matrix);const p=o.a,f=o.b,g=o.c,x=o.d,v=o.tx,_=o.ty;for(let b=e;b<s;b+=2){const w=t[b],C=t[b+1],A=p*w+g*C+v,T=f*w+x*C+_;a=A<a?A:a,c=T<c?T:c,u=A>u?A:u,d=T>d?T:d}this.minX=a,this.minY=c,this.maxX=u,this.maxY=d}containsPoint(t,e){return this.minX<=t&&this.minY<=e&&this.maxX>=t&&this.maxY>=e}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(t){return this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,this}}var Sw={grad:.9,turn:360,rad:360/(2*Math.PI)},Sr=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Ie=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*n)/e+0},Tn=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},Ry=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},zm=function(n){return{r:Tn(n.r,0,255),g:Tn(n.g,0,255),b:Tn(n.b,0,255),a:Tn(n.a)}},Vu=function(n){return{r:Ie(n.r),g:Ie(n.g),b:Ie(n.b),a:Ie(n.a,3)}},bw=/^#([0-9a-f]{3,8})$/i,sl=function(n){var t=n.toString(16);return t.length<2?"0"+t:t},Fy=function(n){var t=n.r,e=n.g,s=n.b,o=n.a,a=Math.max(t,e,s),c=a-Math.min(t,e,s),u=c?a===t?(e-s)/c:a===e?2+(s-t)/c:4+(t-e)/c:0;return{h:60*(u<0?u+6:u),s:a?c/a*100:0,v:a/255*100,a:o}},Ly=function(n){var t=n.h,e=n.s,s=n.v,o=n.a;t=t/360*6,e/=100,s/=100;var a=Math.floor(t),c=s*(1-e),u=s*(1-(t-a)*e),d=s*(1-(1-t+a)*e),p=a%6;return{r:255*[s,u,c,c,d,s][p],g:255*[d,s,s,u,c,c][p],b:255*[c,c,d,s,s,u][p],a:o}},Dm=function(n){return{h:Ry(n.h),s:Tn(n.s,0,100),l:Tn(n.l,0,100),a:Tn(n.a)}},jm=function(n){return{h:Ie(n.h),s:Ie(n.s),l:Ie(n.l),a:Ie(n.a,3)}},Gm=function(n){return Ly((e=(t=n).s,{h:t.h,s:(e*=((s=t.l)<50?s:100-s)/100)>0?2*e/(s+e)*100:0,v:s+e,a:t.a}));var t,e,s},Ao=function(n){return{h:(t=Fy(n)).h,s:(o=(200-(e=t.s))*(s=t.v)/100)>0&&o<200?e*s/100/(o<=100?o:200-o)*100:0,l:o/2,a:t.a};var t,e,s,o},kw=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Cw=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Aw=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Pw=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Fh={string:[[function(n){var t=bw.exec(n);return t?(n=t[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Ie(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Ie(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var t=Aw.exec(n)||Pw.exec(n);return t?t[2]!==t[4]||t[4]!==t[6]?null:zm({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(n){var t=kw.exec(n)||Cw.exec(n);if(!t)return null;var e,s,o=Dm({h:(e=t[1],s=t[2],s===void 0&&(s="deg"),Number(e)*(Sw[s]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Gm(o)},"hsl"]],object:[[function(n){var t=n.r,e=n.g,s=n.b,o=n.a,a=o===void 0?1:o;return Sr(t)&&Sr(e)&&Sr(s)?zm({r:Number(t),g:Number(e),b:Number(s),a:Number(a)}):null},"rgb"],[function(n){var t=n.h,e=n.s,s=n.l,o=n.a,a=o===void 0?1:o;if(!Sr(t)||!Sr(e)||!Sr(s))return null;var c=Dm({h:Number(t),s:Number(e),l:Number(s),a:Number(a)});return Gm(c)},"hsl"],[function(n){var t=n.h,e=n.s,s=n.v,o=n.a,a=o===void 0?1:o;if(!Sr(t)||!Sr(e)||!Sr(s))return null;var c=(function(u){return{h:Ry(u.h),s:Tn(u.s,0,100),v:Tn(u.v,0,100),a:Tn(u.a)}})({h:Number(t),s:Number(e),v:Number(s),a:Number(a)});return Ly(c)},"hsv"]]},Um=function(n,t){for(var e=0;e<t.length;e++){var s=t[e][0](n);if(s)return[s,t[e][1]]}return[null,void 0]},Tw=function(n){return typeof n=="string"?Um(n.trim(),Fh.string):typeof n=="object"&&n!==null?Um(n,Fh.object):[null,void 0]},Hu=function(n,t){var e=Ao(n);return{h:e.h,s:Tn(e.s+100*t,0,100),l:e.l,a:e.a}},Yu=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},$m=function(n,t){var e=Ao(n);return{h:e.h,s:e.s,l:Tn(e.l+100*t,0,100),a:e.a}},Lh=(function(){function n(t){this.parsed=Tw(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Ie(Yu(this.rgba),2)},n.prototype.isDark=function(){return Yu(this.rgba)<.5},n.prototype.isLight=function(){return Yu(this.rgba)>=.5},n.prototype.toHex=function(){return t=Vu(this.rgba),e=t.r,s=t.g,o=t.b,c=(a=t.a)<1?sl(Ie(255*a)):"","#"+sl(e)+sl(s)+sl(o)+c;var t,e,s,o,a,c},n.prototype.toRgb=function(){return Vu(this.rgba)},n.prototype.toRgbString=function(){return t=Vu(this.rgba),e=t.r,s=t.g,o=t.b,(a=t.a)<1?"rgba("+e+", "+s+", "+o+", "+a+")":"rgb("+e+", "+s+", "+o+")";var t,e,s,o,a},n.prototype.toHsl=function(){return jm(Ao(this.rgba))},n.prototype.toHslString=function(){return t=jm(Ao(this.rgba)),e=t.h,s=t.s,o=t.l,(a=t.a)<1?"hsla("+e+", "+s+"%, "+o+"%, "+a+")":"hsl("+e+", "+s+"%, "+o+"%)";var t,e,s,o,a},n.prototype.toHsv=function(){return t=Fy(this.rgba),{h:Ie(t.h),s:Ie(t.s),v:Ie(t.v),a:Ie(t.a,3)};var t},n.prototype.invert=function(){return or({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},n.prototype.saturate=function(t){return t===void 0&&(t=.1),or(Hu(this.rgba,t))},n.prototype.desaturate=function(t){return t===void 0&&(t=.1),or(Hu(this.rgba,-t))},n.prototype.grayscale=function(){return or(Hu(this.rgba,-1))},n.prototype.lighten=function(t){return t===void 0&&(t=.1),or($m(this.rgba,t))},n.prototype.darken=function(t){return t===void 0&&(t=.1),or($m(this.rgba,-t))},n.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},n.prototype.alpha=function(t){return typeof t=="number"?or({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):Ie(this.rgba.a,3);var e},n.prototype.hue=function(t){var e=Ao(this.rgba);return typeof t=="number"?or({h:t,s:e.s,l:e.l,a:e.a}):Ie(e.h)},n.prototype.isEqual=function(t){return this.toHex()===or(t).toHex()},n})(),or=function(n){return n instanceof Lh?n:new Lh(n)},Wm=[],Mw=function(n){n.forEach(function(t){Wm.indexOf(t)<0&&(t(Lh,Fh),Wm.push(t))})};function Ew(n,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var o in e)s[e[o]]=o;var a={};n.prototype.toName=function(c){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var u,d,p=s[this.toHex()];if(p)return p;if(c?.closest){var f=this.toRgb(),g=1/0,x="black";if(!a.length)for(var v in e)a[v]=new n(e[v]).toRgb();for(var _ in e){var b=(u=f,d=a[_],Math.pow(u.r-d.r,2)+Math.pow(u.g-d.g,2)+Math.pow(u.b-d.b,2));b<g&&(g=b,x=_)}return x}},t.string.push([function(c){var u=c.toLowerCase(),d=u==="transparent"?"#0000":e[u];return d?new n(d).toRgb():null},"name"])}Mw([Ew]);const vi=class _o{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof _o)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,e){const s=typeof t;if(s!==typeof e)return!1;if(s==="number"||s==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((a,c)=>a===e[c]);if(t!==null&&e!==null){const a=Object.keys(t),c=Object.keys(e);return a.length!==c.length?!1:a.every(u=>t[u]===e[u])}return t===e}toRgba(){const[t,e,s,o]=this._components;return{r:t,g:e,b:s,a:o}}toRgb(){const[t,e,s]=this._components;return{r:t,g:e,b:s}}toRgbaString(){const[t,e,s]=this.toUint8RgbArray();return`rgba(${t},${e},${s},${this.alpha})`}toUint8RgbArray(t){const[e,s,o]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb),t[0]=Math.round(e*255),t[1]=Math.round(s*255),t[2]=Math.round(o*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t||(t=this._arrayRgba);const[e,s,o,a]=this._components;return t[0]=e,t[1]=s,t[2]=o,t[3]=a,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb);const[e,s,o]=this._components;return t[0]=e,t[1]=s,t[2]=o,t}toNumber(){return this._int}toBgrNumber(){const[t,e,s]=this.toUint8RgbArray();return(s<<16)+(e<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,s,o,a]=_o._temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=s,this._components[2]*=o,this._components[3]*=a,this._refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let s=this._int>>16&255,o=this._int>>8&255,a=this._int&255;return e&&(s=s*t+.5|0,o=o*t+.5|0,a=a*t+.5|0),(t*255<<24)+(s<<16)+(o<<8)+a}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let e,s,o,a;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const c=t;e=(c>>16&255)/255,s=(c>>8&255)/255,o=(c&255)/255,a=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,s,o,a=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,s,o,a=255]=t,e/=255,s/=255,o/=255,a/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const u=_o.HEX_PATTERN.exec(t);u&&(t=`#${u[2]}`)}const c=or(t);c.isValid()&&({r:e,g:s,b:o,a}=c.rgba,e/=255,s/=255,o/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=s,this._components[2]=o,this._components[3]=a,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,e,s]=this._components;this._int=(t*255<<16)+(e*255<<8)+(s*255|0)}_clamp(t,e=0,s=1){return typeof t=="number"?Math.min(Math.max(t,e),s):(t.forEach((o,a)=>{t[a]=Math.min(Math.max(o,e),s)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof _o||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};vi.shared=new vi;vi._temp=new vi;vi.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let _e=vi;const Iw={cullArea:null,cullable:!1,cullableChildren:!0};let Xu=0;const Vm=500;function ie(...n){Xu!==Vm&&(Xu++,Xu===Vm?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...n))}const Vo={_registeredResources:new Set,register(n){this._registeredResources.add(n)},unregister(n){this._registeredResources.delete(n)},release(){this._registeredResources.forEach(n=>n.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(n){return this._registeredResources.has(n)},reset(){this._registeredResources.clear()}};class Rw{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(t){for(let e=0;e<t;e++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){let e;return this._index>0?e=this._pool[--this._index]:(e=new this._classType,this._count++),e.init?.(t),e}return(t){t.reset?.(),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let t=0;t<this._index;t++)this._pool[t].destroy();this._pool.length=0,this._count=0,this._index=0}}class Fw{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new Rw(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(e=>{const s=t[e._classType.name]?e._classType.name+e._classType.ID:e._classType.name;t[s]={free:e.totalFree,used:e.totalUsed,size:e.totalSize}}),t}clear(){this._poolsByClass.forEach(t=>t.clear()),this._poolsByClass.clear()}}const Mn=new Fw;Vo.register(Mn);const Lw={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(n){typeof n=="boolean"&&n===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(n===!0?{}:n))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(n){Et("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(n)}};function Nw(n,t,e){const s=n.length;let o;if(t>=s||e===0)return;e=t+e>s?s-t:e;const a=s-e;for(o=t;o<a;++o)n[o]=n[o+e];n.length=a}const Bw={allowChildren:!0,removeChildren(n=0,t){const e=t??this.children.length,s=e-n,o=[];if(s>0&&s<=e){for(let c=e-1;c>=n;c--){const u=this.children[c];u&&(o.push(u),u.parent=null)}Nw(this.children,n,e);const a=this.renderGroup||this.parentRenderGroup;a&&a.removeChildren(o);for(let c=0;c<o.length;++c){const u=o[c];u.parentRenderLayer?.detach(u),this.emit("childRemoved",u,this,c),o[c].emit("removed",this)}return o.length>0&&this._didViewChangeTick++,o}else if(s===0&&this.children.length===0)return o;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(n){const t=this.getChildAt(n);return this.removeChild(t)},getChildAt(n){if(n<0||n>=this.children.length)throw new Error(`getChildAt: Index (${n}) does not exist.`);return this.children[n]},setChildIndex(n,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(n),this.addChildAt(n,t)},getChildIndex(n){const t=this.children.indexOf(n);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(n,t){this.allowChildren||Et(Ut,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:e}=this;if(t<0||t>e.length)throw new Error(`${n}addChildAt: The index ${t} supplied is out of bounds ${e.length}`);if(n.parent){const o=n.parent.children.indexOf(n);if(n.parent===this&&o===t)return n;o!==-1&&n.parent.children.splice(o,1)}t===e.length?e.push(n):e.splice(t,0,n),n.parent=this,n.didChange=!0,n._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(n),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",n,this,t),n.emit("added",this),n},swapChildren(n,t){if(n===t)return;const e=this.getChildIndex(n),s=this.getChildIndex(t);this.children[e]=t,this.children[s]=n;const o=this.renderGroup||this.parentRenderGroup;o&&(o.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...n){return n.length===1?this.reparentChildAt(n[0],this.children.length):(n.forEach(t=>this.reparentChildAt(t,this.children.length)),n[0])},reparentChildAt(n,t){if(n.parent===this)return this.setChildIndex(n,t),n;const e=n.worldTransform.clone();n.removeFromParent(),this.addChildAt(n,t);const s=this.worldTransform.clone();return s.invert(),e.prepend(s),n.setFromMatrix(e),n},replaceChild(n,t){n.updateLocalTransform(),this.addChildAt(t,this.getChildIndex(n)),t.setFromMatrix(n.localTransform),t.updateLocalTransform(),this.removeChild(n)}},Ow={collectRenderables(n,t,e){this.parentRenderLayer&&this.parentRenderLayer!==e||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(n,t,e):this.renderGroup?t.renderPipes.renderGroup.addRenderGroup(this.renderGroup,n):this.collectRenderablesWithEffects(n,t,e))},collectRenderablesSimple(n,t,e){const s=this.children,o=s.length;for(let a=0;a<o;a++)s[a].collectRenderables(n,t,e)},collectRenderablesWithEffects(n,t,e){const{renderPipes:s}=t;for(let o=0;o<this.effects.length;o++){const a=this.effects[o];s[a.pipe].push(a,this,n)}this.collectRenderablesSimple(n,t,e);for(let o=this.effects.length-1;o>=0;o--){const a=this.effects[o];s[a.pipe].pop(a,this,n)}}};class Hm{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class zw{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let e=0;e<this._tests.length;e++){const s=this._tests[e];if(s.test(t))return Mn.get(s.maskClass,t)}return t}returnMaskEffect(t){Mn.return(t)}}const Nh=new zw;Ne.handleByList(_t.MaskEffect,Nh._effectClasses);const Dw={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const n=this.renderGroup||this.parentRenderGroup;n&&(n.structureDidChange=!0)},addEffect(n){this.effects.indexOf(n)===-1&&(this.effects.push(n),this.effects.sort((e,s)=>e.priority-s.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(n){const t=this.effects.indexOf(n);t!==-1&&(this.effects.splice(t,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(n){const t=this._maskEffect;t?.mask!==n&&(t&&(this.removeEffect(t),Nh.returnMaskEffect(t),this._maskEffect=null),n!=null&&(this._maskEffect=Nh.getMaskEffect(n),this.addEffect(this._maskEffect)))},get mask(){return this._maskEffect?.mask},setMask(n){this._maskOptions={...this._maskOptions,...n},n.mask&&(this.mask=n.mask),this._markStructureAsChanged()},set filters(n){!Array.isArray(n)&&n&&(n=[n]);const t=this._filterEffect||(this._filterEffect=new Hm);n=n;const e=n?.length>0,s=t.filters?.length>0,o=e!==s;n=Array.isArray(n)?n.slice(0):n,t.filters=Object.freeze(n),o&&(e?this.addEffect(t):(this.removeEffect(t),t.filters=n??null))},get filters(){return this._filterEffect?.filters},set filterArea(n){this._filterEffect||(this._filterEffect=new Hm),this._filterEffect.filterArea=n},get filterArea(){return this._filterEffect?.filterArea}},jw={label:null,get name(){return Et(Ut,"Container.name property has been removed, use Container.label instead"),this.label},set name(n){Et(Ut,"Container.name property has been removed, use Container.label instead"),this.label=n},getChildByName(n,t=!1){return this.getChildByLabel(n,t)},getChildByLabel(n,t=!1){const e=this.children;for(let s=0;s<e.length;s++){const o=e[s];if(o.label===n||n instanceof RegExp&&n.test(o.label))return o}if(t)for(let s=0;s<e.length;s++){const a=e[s].getChildByLabel(n,!0);if(a)return a}return null},getChildrenByLabel(n,t=!1,e=[]){const s=this.children;for(let o=0;o<s.length;o++){const a=s[o];(a.label===n||n instanceof RegExp&&n.test(a.label))&&e.push(a)}if(t)for(let o=0;o<s.length;o++)s[o].getChildrenByLabel(n,!0,e);return e}},Ve=Mn.getPool(Lt),Tr=Mn.getPool(Vn),Gw=new Lt,Uw={getFastGlobalBounds(n,t){t||(t=new Vn),t.clear(),this._getGlobalBoundsRecursive(!!n,t,this.parentRenderLayer),t.isValid||t.set(0,0,0,0);const e=this.renderGroup||this.parentRenderGroup;return t.applyMatrix(e.worldTransform),t},_getGlobalBoundsRecursive(n,t,e){let s=t;if(n&&this.parentRenderLayer&&this.parentRenderLayer!==e||this.localDisplayStatus!==7||!this.measurable)return;const o=!!this.effects.length;if((this.renderGroup||o)&&(s=Tr.get().clear()),this.boundsArea)t.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const c=this.bounds;s.addFrame(c.minX,c.minY,c.maxX,c.maxY,this.groupTransform)}const a=this.children;for(let c=0;c<a.length;c++)a[c]._getGlobalBoundsRecursive(n,s,e)}if(o){let a=!1;const c=this.renderGroup||this.parentRenderGroup;for(let u=0;u<this.effects.length;u++)this.effects[u].addBounds&&(a||(a=!0,s.applyMatrix(c.worldTransform)),this.effects[u].addBounds(s,!0));a&&s.applyMatrix(c.worldTransform.copyTo(Gw).invert()),t.addBounds(s),Tr.return(s)}else this.renderGroup&&(t.addBounds(s,this.relativeGroupTransform),Tr.return(s))}};function Ny(n,t,e){e.clear();let s,o;return n.parent?t?s=n.parent.worldTransform:(o=Ve.get().identity(),s=fd(n,o)):s=Lt.IDENTITY,By(n,e,s,t),o&&Ve.return(o),e.isValid||e.set(0,0,0,0),e}function By(n,t,e,s){if(!n.visible||!n.measurable)return;let o;s?o=n.worldTransform:(n.updateLocalTransform(),o=Ve.get(),o.appendFrom(n.localTransform,e));const a=t,c=!!n.effects.length;if(c&&(t=Tr.get().clear()),n.boundsArea)t.addRect(n.boundsArea,o);else{const u=n.bounds;u&&!u.isEmpty()&&(t.matrix=o,t.addBounds(u));for(let d=0;d<n.children.length;d++)By(n.children[d],t,o,s)}if(c){for(let u=0;u<n.effects.length;u++)n.effects[u].addBounds?.(t);a.addBounds(t,Lt.IDENTITY),Tr.return(t)}s||Ve.return(o)}function fd(n,t){const e=n.parent;return e&&(fd(e,t),e.updateLocalTransform(),t.append(e.localTransform)),t}function Oy(n,t){if(n===16777215||!t)return t;if(t===16777215||!n)return n;const e=n>>16&255,s=n>>8&255,o=n&255,a=t>>16&255,c=t>>8&255,u=t&255,d=e*a/255|0,p=s*c/255|0,f=o*u/255|0;return(d<<16)+(p<<8)+f}const Ym=16777215;function Xm(n,t){return n===Ym?t:t===Ym?n:Oy(n,t)}function Sl(n){return((n&255)<<16)+(n&65280)+(n>>16&255)}const $w={getGlobalAlpha(n){if(n)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let t=this.alpha,e=this.parent;for(;e;)t*=e.alpha,e=e.parent;return t},getGlobalTransform(n=new Lt,t){if(t)return n.copyFrom(this.worldTransform);this.updateLocalTransform();const e=fd(this,Ve.get().identity());return n.appendFrom(this.localTransform,e),Ve.return(e),n},getGlobalTint(n){if(n)return this.renderGroup?Sl(this.renderGroup.worldColor):this.parentRenderGroup?Sl(Xm(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let t=this.localColor,e=this.parent;for(;e;)t=Xm(t,e.localColor),e=e.parent;return Sl(t)}};function zy(n,t,e){return t.clear(),e||(e=Lt.IDENTITY),Dy(n,t,e,n,!0),t.isValid||t.set(0,0,0,0),t}function Dy(n,t,e,s,o){let a;if(o)a=Ve.get(),a=e.copyTo(a);else{if(!n.visible||!n.measurable)return;n.updateLocalTransform();const d=n.localTransform;a=Ve.get(),a.appendFrom(d,e)}const c=t,u=!!n.effects.length;if(u&&(t=Tr.get().clear()),n.boundsArea)t.addRect(n.boundsArea,a);else{n.renderPipeId&&(t.matrix=a,t.addBounds(n.bounds));const d=n.children;for(let p=0;p<d.length;p++)Dy(d[p],t,a,s,!1)}if(u){for(let d=0;d<n.effects.length;d++)n.effects[d].addLocalBounds?.(t,s);c.addBounds(t,Lt.IDENTITY),Tr.return(t)}Ve.return(a)}function jy(n,t){const e=n.children;for(let s=0;s<e.length;s++){const o=e[s],a=o.uid,c=(o._didViewChangeTick&65535)<<16|o._didContainerChangeTick&65535,u=t.index;(t.data[u]!==a||t.data[u+1]!==c)&&(t.data[t.index]=a,t.data[t.index+1]=c,t.didChange=!0),t.index=u+2,o.children.length&&jy(o,t)}return t.didChange}const Ww=new Lt,Vw={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(n,t){const e=Math.sign(this.scale.x)||1;t!==0?this.scale.x=n/t*e:this.scale.x=e},_setHeight(n,t){const e=Math.sign(this.scale.y)||1;t!==0?this.scale.y=n/t*e:this.scale.y=e},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Vn});const n=this._localBoundsCacheData;return n.index=1,n.didChange=!1,n.data[0]!==this._didViewChangeTick&&(n.didChange=!0,n.data[0]=this._didViewChangeTick),jy(this,n),n.didChange&&zy(this,n.localBounds,Ww),n.localBounds},getBounds(n,t){return Ny(this,n,t||new Vn)}},Hw={_onRender:null,set onRender(n){const t=this.renderGroup||this.parentRenderGroup;if(!n){this._onRender&&t?.removeOnRender(this),this._onRender=null;return}this._onRender||t?.addOnRender(this),this._onRender=n},get onRender(){return this._onRender}},Yw={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(n){this._zIndex!==n&&(this._zIndex=n,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(Xw))}};function Xw(n,t){return n._zIndex-t._zIndex}const qw={getGlobalPosition(n=new Ge,t=!1){return this.parent?this.parent.toGlobal(this._position,n,t):(n.x=this._position.x,n.y=this._position.y),n},toGlobal(n,t,e=!1){const s=this.getGlobalTransform(Ve.get(),e);return t=s.apply(n,t),Ve.return(s),t},toLocal(n,t,e,s){t&&(n=t.toGlobal(n,e,s));const o=this.getGlobalTransform(Ve.get(),s);return e=o.applyInverse(n,e),Ve.return(o),e}};class Gy{constructor(){this.uid=ge("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let Qw=0;class Kw{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this.textureStyle=new xi(this.textureOptions)}createTexture(t,e,s){const o=new Xn({...this.textureOptions,width:t,height:e,resolution:1,antialias:s,autoGarbageCollect:!1});return new Ot({source:o,label:`texturePool_${Qw++}`})}getOptimalTexture(t,e,s=1,o){let a=Math.ceil(t*s-1e-6),c=Math.ceil(e*s-1e-6);a=yi(a),c=yi(c);const u=(a<<17)+(c<<1)+(o?1:0);this._texturePool[u]||(this._texturePool[u]=[]);let d=this._texturePool[u].pop();return d||(d=this.createTexture(a,c,o)),d.source._resolution=s,d.source.width=a/s,d.source.height=c/s,d.source.pixelWidth=a,d.source.pixelHeight=c,d.frame.x=0,d.frame.y=0,d.frame.width=t,d.frame.height=e,d.updateUvs(),this._poolKeyHash[d.uid]=u,d}getSameSizeTexture(t,e=!1){const s=t.source;return this.getOptimalTexture(t.width,t.height,s._resolution,e)}returnTexture(t,e=!1){const s=this._poolKeyHash[t.uid];e&&(t.source.style=this.textureStyle),this._texturePool[s].push(t)}clear(t){if(t=t!==!1,t)for(const e in this._texturePool){const s=this._texturePool[e];if(s)for(let o=0;o<s.length;o++)s[o].destroy(!0)}this._texturePool={}}}const wi=new Kw;Vo.register(wi);class Zw{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Lt,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Gy,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const e=t.children;for(let s=0;s<e.length;s++){const o=e[s];o._updateFlags=15,this.addChild(o)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(wi.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const t=this._parentCacheAsTextureRenderGroup;t&&!t.textureNeedsUpdate&&t.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const e=this.childrenToUpdate[t];e.list.fill(null),e.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const e=this.renderGroupChildren.indexOf(t);e>-1&&this.renderGroupChildren.splice(e,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);const e=t.children;for(let s=0;s<e.length;s++)this.addChild(e[s])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}const e=t.children;for(let s=0;s<e.length;s++)this.removeChild(e[s])}removeChildren(t){for(let e=0;e<t.length;e++)this.removeChild(t[e])}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeRenderGroupDepth];e||(e=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),e.list[e.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(t){for(let e=0;e<this._onRenderContainers.length;e++)this._onRenderContainers[e]._onRender(t)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const e=this.root.children;for(let s=0;s<e.length;s++)this._getChildren(e[s],t);return t}_getChildren(t,e=[]){if(e.push(t),t.renderGroup)return e;const s=t.children;for(let o=0;o<s.length;o++)this._getChildren(s[o],e);return e}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Lt),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Lt),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Lt),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function Jw(n,t,e={}){for(const s in t)!e[s]&&t[s]!==void 0&&(n[s]=t[s])}const qu=new Le(null),il=new Le(null),Qu=new Le(null,1,1),ol=new Le(null),qm=1,t_=2,Ku=4;class Be extends Yn{constructor(t={}){super(),this.uid=ge("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new Lt,this.relativeGroupTransform=new Lt,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Le(this,0,0),this._scale=Qu,this._pivot=il,this._origin=ol,this._skew=qu,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],Jw(this,t,{children:!0,parent:!0,effects:!0}),t.children?.forEach(e=>this.addChild(e)),t.parent?.addChild(this)}static mixin(t){Et("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),Ne.mixin(Be,t)}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=t&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...t){if(this.allowChildren||Et(Ut,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let o=0;o<t.length;o++)this.addChild(t[o]);return t[0]}const e=t[0],s=this.renderGroup||this.parentRenderGroup;return e.parent===this?(this.children.splice(this.children.indexOf(e),1),this.children.push(e),s&&(s.structureDidChange=!0),e):(e.parent&&e.parent.removeChild(e),this.children.push(e),this.sortableChildren&&(this.sortDirty=!0),e.parent=this,e.didChange=!0,e._updateFlags=15,s&&s.addChild(e),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this),this._didViewChangeTick++,e._zIndex!==0&&e.depthOfChildModified(),e)}removeChild(...t){if(t.length>1){for(let o=0;o<t.length;o++)this.removeChild(t[o]);return t[0]}const e=t[0],s=this.children.indexOf(e);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(e):this.parentRenderGroup&&this.parentRenderGroup.removeChild(e),e.parentRenderLayer&&e.parentRenderLayer.detach(e),e.parent=null,this.emit("childRemoved",e,this,s),e.emit("removed",this)),e}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t?.removeChild(this),this.renderGroup=Mn.get(Zw,this),this.groupTransform=Lt.IDENTITY,t?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t?.removeChild(this),Mn.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Lt),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*fw}set angle(t){this.rotation=t*pw}get pivot(){return this._pivot===il&&(this._pivot=new Le(this,0,0)),this._pivot}set pivot(t){this._pivot===il&&(this._pivot=new Le(this,0,0),this._origin!==ol&&ie("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===qu&&(this._skew=new Le(this,0,0)),this._skew}set skew(t){this._skew===qu&&(this._skew=new Le(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===Qu&&(this._scale=new Le(this,1,1)),this._scale}set scale(t){this._scale===Qu&&(this._scale=new Le(this,0,0)),typeof t=="string"&&(t=parseFloat(t)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get origin(){return this._origin===ol&&(this._origin=new Le(this,0,0)),this._origin}set origin(t){this._origin===ol&&(this._origin=new Le(this,0,0),this._pivot!==il&&ie("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof t=="number"?this._origin.set(t):this._origin.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const e=this.getLocalBounds().width;this._setWidth(t,e)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const e=this.getLocalBounds().height;this._setHeight(t,e)}getSize(t){t||(t={});const e=this.getLocalBounds();return t.width=Math.abs(this.scale.x*e.width),t.height=Math.abs(this.scale.y*e.height),t}setSize(t,e){const s=this.getLocalBounds();typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,s.width),e!==void 0&&this._setHeight(e,s.height)}_updateSkew(){const t=this._rotation,e=this._skew;this._cx=Math.cos(t+e._y),this._sx=Math.sin(t+e._y),this._cy=-Math.sin(t-e._x),this._sy=Math.cos(t-e._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this.origin.set(typeof t.originX=="number"?t.originX:this.origin.x,typeof t.originY=="number"?t.originY:this.origin.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const e=this.localTransform,s=this._scale,o=this._pivot,a=this._origin,c=this._position,u=s._x,d=s._y,p=o._x,f=o._y,g=-a._x,x=-a._y;e.a=this._cx*u,e.b=this._sx*u,e.c=this._cy*d,e.d=this._sy*d,e.tx=c._x-(p*e.a+f*e.c)+(g*e.a+x*e.c)-g,e.ty=c._y-(p*e.b+f*e.d)+(g*e.b+x*e.d)-x}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=qm,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const s=_e.shared.setValue(t??16777215).toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=qm,this._onUpdate())}get tint(){return Sl(this.localColor)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=t_,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const e=t?2:0;(this.localDisplayStatus&2)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Ku,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const e=t?0:4;(this.localDisplayStatus&4)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Ku,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const e=t?1:0;(this.localDisplayStatus&1)!==e&&(this._updateFlags|=Ku,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){if(this.destroyed)return;this.destroyed=!0;let e;if(this.children.length&&(e=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof t=="boolean"?t:t?.children)&&e)for(let o=0;o<e.length;++o)e[o].destroy(t);this.renderGroup?.destroy(),this.renderGroup=null}}Ne.mixin(Be,Bw,Uw,qw,Hw,Vw,Dw,jw,Yw,Iw,Lw,$w,Ow);class pd extends Be{constructor(t){super(t),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new Vn(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const e=this.bounds,{x:s,y:o}=t;return s>=e.minX&&s<=e.maxX&&o>=e.minY&&o<=e.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){super.destroy(t),this._bounds=null;for(const e in this._gpuData)this._gpuData[e].destroy?.();this._gpuData=null}collectRenderablesSimple(t,e,s){const{renderPipes:o}=e;o.blendMode.pushBlendMode(this,this.groupBlendMode,t),o[this.renderPipeId].addRenderable(this,t),this.didViewUpdate=!1;const c=this.children,u=c.length;for(let d=0;d<u;d++)c[d].collectRenderables(t,e,s);o.blendMode.popBlendMode(t)}}class hr extends pd{constructor(t=Ot.EMPTY){t instanceof Ot&&(t={texture:t});const{texture:e=Ot.EMPTY,anchor:s,roundPixels:o,width:a,height:c,...u}=t;super({label:"Sprite",...u}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Le({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:e.defaultAnchor&&(this.anchor=e.defaultAnchor),this.texture=e,this.allowChildren=!1,this.roundPixels=o??!1,a!==void 0&&(this.width=a),c!==void 0&&(this.height=c)}static from(t,e=!1){return t instanceof Ot?new hr(t):new hr(Ot.from(t,e))}set texture(t){t||(t=Ot.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return _w(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Et("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const t=this._anchor,e=this._texture,s=this._bounds,{width:o,height:a}=e.orig;s.minX=-t._x*o,s.maxX=s.minX+o,s.minY=-t._y*a,s.maxY=s.minY+a}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t?.texture){const s=typeof t=="boolean"?t:t?.textureSource;this._texture.destroy(s)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this._texture.orig.width),e!==void 0&&this._setHeight(e,this._texture.orig.height)}}const e_=new Vn;function Uy(n,t,e){const s=e_;n.measurable=!0,Ny(n,e,s),t.addBoundsMask(s),n.measurable=!1}function $y(n,t,e){const s=Tr.get();n.measurable=!0;const o=Ve.get().identity(),a=Wy(n,e,o);zy(n,s,a),n.measurable=!1,t.addBoundsMask(s),Ve.return(o),Tr.return(s)}function Wy(n,t,e){return n?(n!==t&&(Wy(n.parent,t,e),n.updateLocalTransform(),e.append(n.localTransform)),e):(ie("Mask bounds, renderable is not inside the root container"),e)}class Vy{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof hr),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(t,e){this.inverse||Uy(this.mask,t,e)}addLocalBounds(t,e){$y(this.mask,t,e)}containsPoint(t,e){const s=this.mask;return e(s,t)}destroy(){this.reset()}static test(t){return t instanceof hr}}Vy.extension=_t.MaskEffect;class Hy{constructor(t){this.priority=0,this.pipe="colorMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}Hy.extension=_t.MaskEffect;class Yy{constructor(t){this.priority=0,this.pipe="stencilMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(t,e){Uy(this.mask,t,e)}addLocalBounds(t,e){$y(this.mask,t,e)}containsPoint(t,e){const s=this.mask;return e(s,t)}destroy(){this.reset()}static test(t){return t instanceof Be}}Yy.extension=_t.MaskEffect;const n_={createCanvas:(n,t)=>{const e=document.createElement("canvas");return e.width=n,e.height=t,e},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,t)=>fetch(n,t),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")};let Qm=n_;const Jt={get(){return Qm},set(n){Qm=n}};class Xy extends Xn{constructor(t){t.resource||(t.resource=Jt.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,e=this.height,s=this._resolution){const o=super.resize(t,e,s);return o&&this.resizeCanvas(),o}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}Xy.extension=_t.TextureSource;class Rs extends Xn{constructor(t){super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}Rs.extension=_t.TextureSource;var Bh=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(Bh||{});class Zu{constructor(t,e=null,s=0,o=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=s,this._once=o}match(t,e=null){return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const qy=class cn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Zu(null,null,1/0),this.deltaMS=1/cn.targetFPMS,this.elapsedMS=1/cn.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,s=Bh.NORMAL){return this._addListener(new Zu(t,e,s))}addOnce(t,e,s=Bh.NORMAL){return this._addListener(new Zu(t,e,s,!0))}_addListener(t){let e=this._head.next,s=this._head;if(!e)t.connect(s);else{for(;e;){if(t.priority>e.priority){t.connect(s);break}s=e,e=e.next}t.previous||t.connect(s)}return this._startIfPossible(),this}remove(t,e){let s=this._head.next;for(;s;)s.match(t,e)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const a=t-this._lastFrame|0;if(a<this._minElapsedMS)return;this._lastFrame=t-a%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*cn.targetFPMS;const s=this._head;let o=s.next;for(;o;)o=o.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),s=Math.min(Math.max(0,e)/1e3,cn.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!cn._shared){const t=cn._shared=new cn;t.autoStart=!0,t._protected=!0}return cn._shared}static get system(){if(!cn._system){const t=cn._system=new cn;t.autoStart=!0,t._protected=!0}return cn._system}};qy.targetFPMS=.06;let al=qy,Ju;async function Qy(){return Ju??(Ju=(async()=>{const t=Jt.get().createCanvas(1,1).getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const e=await new Promise(c=>{const u=document.createElement("video");u.onloadeddata=()=>c(u),u.onerror=()=>c(null),u.autoplay=!1,u.crossOrigin="anonymous",u.preload="auto",u.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",u.load()});if(!e)return"premultiply-alpha-on-upload";const s=t.createTexture();t.bindTexture(t.TEXTURE_2D,s);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,s,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const a=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,a),t.deleteFramebuffer(o),t.deleteTexture(s),t.getExtension("WEBGL_lose_context")?.loseContext(),a[0]<=a[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Ju}const jl=class Ky extends Xn{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...Ky.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=al.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,e=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(e.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await Qy(),this._load=new Promise((s,o)=>{this.isValid?s(this):(this._resolve=s,this._reject=o,e.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${e.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(al.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(al.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(al.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};jl.extension=_t.TextureSource;jl.defaultOptions={...Xn.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};jl.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Po=jl;const Gn=(n,t,e=!1)=>(Array.isArray(n)||(n=[n]),t?n.map(s=>typeof s=="string"||e?t(s):s):n);class r_{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||ie(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const s=Gn(t);let o;for(let d=0;d<this.parsers.length;d++){const p=this.parsers[d];if(p.test(e)){o=p.getCacheableAssets(s,e);break}}const a=new Map(Object.entries(o||{}));o||s.forEach(d=>{a.set(d,e)});const c=[...a.keys()],u={cacheKeys:c,keys:s};s.forEach(d=>{this._cacheMap.set(d,u)}),c.forEach(d=>{const p=o?o[d]:e;this._cache.has(d)&&this._cache.get(d)!==p&&ie("[Cache] already has key:",d),this._cache.set(d,a.get(d))})}remove(t){if(!this._cacheMap.has(t)){ie(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(o=>{this._cache.delete(o)}),e.keys.forEach(o=>{this._cacheMap.delete(o)})}get parsers(){return this._parsers}}const se=new r_,Oh=[];Ne.handleByList(_t.TextureSource,Oh);function Zy(n={}){const t=n&&n.resource,e=t?n.resource:n,s=t?n:{resource:n};for(let o=0;o<Oh.length;o++){const a=Oh[o];if(a.test(e))return new a(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}function s_(n={},t=!1){const e=n&&n.resource,s=e?n.resource:n,o=e?n:{resource:n};if(!t&&se.has(s))return se.get(s);const a=new Ot({source:Zy(o)});return a.on("destroy",()=>{se.has(s)&&se.remove(s)}),t||se.set(s,a),a}function i_(n,t=!1){return typeof n=="string"?se.get(n):n instanceof Xn?new Ot({source:n}):s_(n,t)}Ot.from=i_;Xn.from=Zy;Ne.add(Vy,Hy,Yy,Po,Rs,Xy,dd);var rs=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(rs||{});function jn(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function fo(n){return n.split("?")[0].split("#")[0]}function o_(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a_(n,t,e){return n.replace(new RegExp(o_(t),"g"),e)}function l_(n,t){let e="",s=0,o=-1,a=0,c=-1;for(let u=0;u<=n.length;++u){if(u<n.length)c=n.charCodeAt(u);else{if(c===47)break;c=47}if(c===47){if(!(o===u-1||a===1))if(o!==u-1&&a===2){if(e.length<2||s!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const d=e.lastIndexOf("/");if(d!==e.length-1){d===-1?(e="",s=0):(e=e.slice(0,d),s=e.length-1-e.lastIndexOf("/")),o=u,a=0;continue}}else if(e.length===2||e.length===1){e="",s=0,o=u,a=0;continue}}}else e.length>0?e+=`/${n.slice(o+1,u)}`:e=n.slice(o+1,u),s=u-o-1;o=u,a=0}else c===46&&a!==-1?++a:a=-1}return e}const fn={toPosix(n){return a_(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){jn(n),n=this.toPosix(n);const t=/^file:\/\/\//.exec(n);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(n);return e?e[0]:""},toAbsolute(n,t,e){if(jn(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const s=fo(this.toPosix(t??Jt.get().getBaseUrl())),o=fo(this.toPosix(e??this.rootname(s)));return n=this.toPosix(n),n.startsWith("/")?fn.join(o,n.slice(1)):this.isAbsolute(n)?n:this.join(s,n)},normalize(n){if(jn(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let t="";const e=n.startsWith("/");this.hasProtocol(n)&&(t=this.rootname(n),n=n.slice(t.length));const s=n.endsWith("/");return n=l_(n),n.length>0&&s&&(n+="/"),e?`/${n}`:t+n},isAbsolute(n){return jn(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let t;for(let e=0;e<n.length;++e){const s=n[e];if(jn(s),s.length>0)if(t===void 0)t=s;else{const o=n[e-1]??"";this.joinExtensions.includes(this.extname(o).toLowerCase())?t+=`/../${s}`:t+=`/${s}`}}return t===void 0?".":this.normalize(t)},dirname(n){if(jn(n),n.length===0)return".";n=this.toPosix(n);let t=n.charCodeAt(0);const e=t===47;let s=-1,o=!0;const a=this.getProtocol(n),c=n;n=n.slice(a.length);for(let u=n.length-1;u>=1;--u)if(t=n.charCodeAt(u),t===47){if(!o){s=u;break}}else o=!1;return s===-1?e?"/":this.isUrl(c)?a+n:a:e&&s===1?"//":a+n.slice(0,s)},rootname(n){jn(n),n=this.toPosix(n);let t="";if(n.startsWith("/")?t="/":t=this.getProtocol(n),this.isUrl(n)){const e=n.indexOf("/",t.length);e!==-1?t=n.slice(0,e):t=n,t.endsWith("/")||(t+="/")}return t},basename(n,t){jn(n),t&&jn(t),n=fo(this.toPosix(n));let e=0,s=-1,o=!0,a;if(t!==void 0&&t.length>0&&t.length<=n.length){if(t.length===n.length&&t===n)return"";let c=t.length-1,u=-1;for(a=n.length-1;a>=0;--a){const d=n.charCodeAt(a);if(d===47){if(!o){e=a+1;break}}else u===-1&&(o=!1,u=a+1),c>=0&&(d===t.charCodeAt(c)?--c===-1&&(s=a):(c=-1,s=u))}return e===s?s=u:s===-1&&(s=n.length),n.slice(e,s)}for(a=n.length-1;a>=0;--a)if(n.charCodeAt(a)===47){if(!o){e=a+1;break}}else s===-1&&(o=!1,s=a+1);return s===-1?"":n.slice(e,s)},extname(n){jn(n),n=fo(this.toPosix(n));let t=-1,e=0,s=-1,o=!0,a=0;for(let c=n.length-1;c>=0;--c){const u=n.charCodeAt(c);if(u===47){if(!o){e=c+1;break}continue}s===-1&&(o=!1,s=c+1),u===46?t===-1?t=c:a!==1&&(a=1):t!==-1&&(a=-1)}return t===-1||s===-1||a===0||a===1&&t===s-1&&t===e+1?"":n.slice(t,s)},parse(n){jn(n);const t={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return t;n=fo(this.toPosix(n));let e=n.charCodeAt(0);const s=this.isAbsolute(n);let o;t.root=this.rootname(n),s||this.hasProtocol(n)?o=1:o=0;let a=-1,c=0,u=-1,d=!0,p=n.length-1,f=0;for(;p>=o;--p){if(e=n.charCodeAt(p),e===47){if(!d){c=p+1;break}continue}u===-1&&(d=!1,u=p+1),e===46?a===-1?a=p:f!==1&&(f=1):a!==-1&&(f=-1)}return a===-1||u===-1||f===0||f===1&&a===u-1&&a===c+1?u!==-1&&(c===0&&s?t.base=t.name=n.slice(1,u):t.base=t.name=n.slice(c,u)):(c===0&&s?(t.name=n.slice(1,a),t.base=n.slice(1,u)):(t.name=n.slice(c,a),t.base=n.slice(c,u)),t.ext=n.slice(a,u)),t.dir=this.dirname(n),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function Jy(n,t,e,s,o){const a=t[e];for(let c=0;c<a.length;c++){const u=a[c];e<t.length-1?Jy(n.replace(s[e],u),t,e+1,s,o):o.push(n.replace(s[e],u))}}function c_(n){const t=/\{(.*?)\}/g,e=n.match(t),s=[];if(e){const o=[];e.forEach(a=>{const c=a.substring(1,a.length-1).split(",");o.push(c)}),Jy(n,o,0,e,s)}else s.push(n);return s}const Ml=n=>!Array.isArray(n);class ki{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(e[s])}`).join("&")}}getAlias(t){const{alias:e,src:s}=t;return Gn(e||s,a=>typeof a=="string"?a:Array.isArray(a)?a.map(c=>c?.src??c):a?.src?a.src:a,!0)}addManifest(t){this._manifest&&ie("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const s=[];let o=e;Array.isArray(e)||(o=Object.entries(e).map(([a,c])=>typeof c=="string"||Array.isArray(c)?{alias:a,src:c}:{alias:a,...c})),o.forEach(a=>{const c=a.src,u=a.alias;let d;if(typeof u=="string"){const p=this._createBundleAssetId(t,u);s.push(p),d=[u,p]}else{const p=u.map(f=>this._createBundleAssetId(t,f));s.push(...p),d=[...u,...p]}this.add({...a,alias:d,src:c})}),this._bundles[t]=s}add(t){const e=[];Array.isArray(t)?e.push(...t):e.push(t);let s;s=a=>{this.hasKey(a)&&ie(`[Resolver] already has key: ${a} overwriting`)},Gn(e).forEach(a=>{const{src:c}=a;let{data:u,format:d,loadParser:p,parser:f}=a;const g=Gn(c).map(b=>typeof b=="string"?c_(b):Array.isArray(b)?b:[b]),x=this.getAlias(a);Array.isArray(x)?x.forEach(s):s(x);const v=[],_=b=>({...this._parsers.find(C=>C.test(b))?.parse(b),src:b});g.forEach(b=>{b.forEach(w=>{let C={};if(typeof w!="object"?C=_(w):(u=w.data??u,d=w.format??d,(w.loadParser||w.parser)&&(p=w.loadParser??p,f=w.parser??f),C={..._(w.src),...w}),!x)throw new Error(`[Resolver] alias is undefined for this asset: ${C.src}`);C=this._buildResolvedAsset(C,{aliases:x,data:u,format:d,loadParser:p,parser:f,progressSize:a.progressSize}),v.push(C)})}),x.forEach(b=>{this._assetMap[b]=v})})}resolveBundle(t){const e=Ml(t);t=Gn(t);const s={};return t.forEach(o=>{const a=this._bundles[o];if(a){const c=this.resolve(a),u={};for(const d in c){const p=c[d];u[this._extractAssetIdFromBundle(o,d)]=p}s[o]=u}}),e?s[t[0]]:s}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const s={};for(const o in e)s[o]=e[o].src;return s}return e.src}resolve(t){const e=Ml(t);t=Gn(t);const s={};return t.forEach(o=>{if(!this._resolverHash[o])if(this._assetMap[o]){let a=this._assetMap[o];const c=this._getPreferredOrder(a);c?.priority.forEach(u=>{c.params[u].forEach(d=>{const p=a.filter(f=>f[u]?f[u]===d:!1);p.length&&(a=p)})}),this._resolverHash[o]=a[0]}else this._resolverHash[o]=this._buildResolvedAsset({alias:[o],src:o},{});s[o]=this._resolverHash[o]}),e?s[t[0]]:s}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const s=t[e],o=this._preferredOrder.find(a=>a.params.format.includes(s.format));if(o)return o}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}_buildResolvedAsset(t,e){const{aliases:s,data:o,loadParser:a,parser:c,format:u,progressSize:d}=e;return(this._basePath||this._rootPath)&&(t.src=fn.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=s??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...o||{},...t.data},t.loadParser=a??t.loadParser,t.parser=c??t.parser,t.format=u??t.format??u_(t.src),d!==void 0&&(t.progressSize=d),t}}ki.RETINA_PREFIX=/@([0-9\.]+)x/;function u_(n){return n.split(".").pop().split("?").shift().split("#").shift()}const zh=(n,t)=>{const e=t.split("?")[1];return e&&(n+=`?${e}`),n},t0=class So{constructor(t,e){this.linkedSheets=[];let s=t;t?.source instanceof Xn&&(s={texture:t,data:e});const{texture:o,data:a,cachePrefix:c=""}=s;this.cachePrefix=c,this._texture=o instanceof Ot?o:null,this.textureSource=o.source,this.textures={},this.animations={},this.data=a;const u=parseFloat(a.meta.scale);u?(this.resolution=u,o.source.resolution=this.resolution):this.resolution=o.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=So.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const s=So.BATCH_SIZE;for(;e-t<s&&e<this._frameKeys.length;){const o=this._frameKeys[e],a=this._frames[o],c=a.frame;if(c){let u=null,d=null;const p=a.trimmed!==!1&&a.sourceSize?a.sourceSize:a.frame,f=new oe(0,0,Math.floor(p.w)/this.resolution,Math.floor(p.h)/this.resolution);a.rotated?u=new oe(Math.floor(c.x)/this.resolution,Math.floor(c.y)/this.resolution,Math.floor(c.h)/this.resolution,Math.floor(c.w)/this.resolution):u=new oe(Math.floor(c.x)/this.resolution,Math.floor(c.y)/this.resolution,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution),a.trimmed!==!1&&a.spriteSourceSize&&(d=new oe(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution)),this.textures[o]=new Ot({source:this.textureSource,frame:u,orig:f,trim:d,rotate:a.rotated?2:0,defaultAnchor:a.anchor,defaultBorders:a.borders,label:o.toString()})}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let s=0;s<t[e].length;s++){const o=t[e][s];this.animations[e].push(this.textures[o])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*So.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*So.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){for(const e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};t0.BATCH_SIZE=1e3;let Km=t0;const h_=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function e0(n,t,e){const s={};if(n.forEach(o=>{s[o]=t}),Object.keys(t.textures).forEach(o=>{s[`${t.cachePrefix}${o}`]=t.textures[o]}),!e){const o=fn.dirname(n[0]);t.linkedSheets.forEach((a,c)=>{const u=e0([`${o}/${t.data.meta.related_multi_packs[c]}`],a,!0);Object.assign(s,u)})}return s}const d_={extension:_t.Asset,cache:{test:n=>n instanceof Km,getCacheableAssets:(n,t)=>e0(n,t,!1)},resolver:{extension:{type:_t.ResolveParser,name:"resolveSpritesheet"},test:n=>{const e=n.split("?")[0].split("."),s=e.pop(),o=e.pop();return s==="json"&&h_.includes(o)},parse:n=>{const t=n.split(".");return{resolution:parseFloat(ki.RETINA_PREFIX.exec(n)?.[1]??"1"),format:t[t.length-2],src:n}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:_t.LoadParser,priority:rs.Normal,name:"spritesheetLoader"},async testParse(n,t){return fn.extname(t.src).toLowerCase()===".json"&&!!n.frames},async parse(n,t,e){const{texture:s,imageFilename:o,textureOptions:a,cachePrefix:c}=t?.data??{};let u=fn.dirname(t.src);u&&u.lastIndexOf("/")!==u.length-1&&(u+="/");let d;if(s instanceof Ot)d=s;else{const g=zh(u+(o??n.meta.image),t.src);d=(await e.load([{src:g,data:a}]))[g]}const p=new Km({texture:d.source,data:n,cachePrefix:c});await p.parse();const f=n?.meta?.related_multi_packs;if(Array.isArray(f)){const g=[];for(const v of f){if(typeof v!="string")continue;let _=u+v;t.data?.ignoreMultiPack||(_=zh(_,t.src),g.push(e.load({src:_,data:{textureOptions:a,ignoreMultiPack:!0}})))}const x=await Promise.all(g);p.linkedSheets=x,x.forEach(v=>{v.linkedSheets=[p].concat(p.linkedSheets.filter(_=>_!==v))})}return p},async unload(n,t,e){await e.unload(n.textureSource._sourceOrigin),n.destroy(!1)}}};Ne.add(d_);const th=Object.create(null),Zm=Object.create(null);function md(n,t){let e=Zm[n];return e===void 0&&(th[t]===void 0&&(th[t]=1),Zm[n]=e=th[t]++),e}let ll;function n0(){return(!ll||ll?.isContextLost())&&(ll=Jt.get().createCanvas().getContext("webgl",{})),ll}let cl;function f_(){if(!cl){cl="mediump";const n=n0();n&&n.getShaderPrecisionFormat&&(cl=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision?"highp":"mediump")}return cl}function p_(n,t,e){return t?n:e?(n=n.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${n}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${n}
        `}function m_(n,t,e){const s=e?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(n.substring(0,9)!=="precision"){let o=e?t.requestedFragmentPrecision:t.requestedVertexPrecision;return o==="highp"&&s!=="highp"&&(o="mediump"),`precision ${o} float;
${n}`}else if(s!=="highp"&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}function g_(n,t){return t?`#version 300 es
${n}`:n}const y_={},x_={};function v_(n,{name:t="pixi-program"},e=!0){t=t.replace(/\s+/g,"-"),t+=e?"-fragment":"-vertex";const s=e?y_:x_;return s[t]?(s[t]++,t+=`-${s[t]}`):s[t]=1,n.indexOf("#define SHADER_NAME")!==-1?n:`${`#define SHADER_NAME ${t}`}
${n}`}function w_(n,t){return t?n.replace("#version 300 es",""):n}const eh={stripVersion:w_,ensurePrecision:m_,addProgramDefines:p_,setProgramName:v_,insertVersion:g_},po=Object.create(null),r0=class Dh{constructor(t){t={...Dh.defaultOptions,...t};const e=t.fragment.indexOf("#version 300 es")!==-1,s={stripVersion:e,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:f_()},setProgramName:{name:t.name},addProgramDefines:e,insertVersion:e};let o=t.fragment,a=t.vertex;Object.keys(eh).forEach(c=>{const u=s[c];o=eh[c](o,u,!0),a=eh[c](a,u,!1)}),this.fragment=o,this.vertex=a,this.transformFeedbackVaryings=t.transformFeedbackVaryings,this._key=md(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,po[this._cacheKey]=null}static from(t){const e=`${t.vertex}:${t.fragment}`;return po[e]||(po[e]=new Dh(t),po[e]._cacheKey=e),po[e]}};r0.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let Gl=r0;const Jm={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function __(n){return Jm[n]??Jm.float32}const S_={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function b_({source:n,entryPoint:t}){const e={},s=n.indexOf(`fn ${t}`);if(s!==-1){const o=n.indexOf("->",s);if(o!==-1){const a=n.substring(s,o),c=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let u;for(;(u=c.exec(a))!==null;){const d=S_[u[3]]??"float32";e[u[2]]={location:parseInt(u[1],10),format:d,stride:__(d).stride,offset:0,instance:!1,start:0}}}}return e}function nh(n){const t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,e=/@group\((\d+)\)/,s=/@binding\((\d+)\)/,o=/var(<[^>]+>)? (\w+)/,a=/:\s*(\w+)/,c=/struct\s+(\w+)\s*{([^}]+)}/g,u=/(\w+)\s*:\s*([\w\<\>]+)/g,d=/struct\s+(\w+)/,p=n.match(t)?.map(g=>({group:parseInt(g.match(e)[1],10),binding:parseInt(g.match(s)[1],10),name:g.match(o)[2],isUniform:g.match(o)[1]==="<uniform>",type:g.match(a)[1]}));if(!p)return{groups:[],structs:[]};const f=n.match(c)?.map(g=>{const x=g.match(d)[1],v=g.match(u).reduce((_,b)=>{const[w,C]=b.split(":");return _[w.trim()]=C.trim(),_},{});return v?{name:x,members:v}:null}).filter(({name:g})=>p.some(x=>x.type===g))??[];return{groups:p,structs:f}}var bo=(n=>(n[n.VERTEX=1]="VERTEX",n[n.FRAGMENT=2]="FRAGMENT",n[n.COMPUTE=4]="COMPUTE",n))(bo||{});function k_({groups:n}){const t=[];for(let e=0;e<n.length;e++){const s=n[e];t[s.group]||(t[s.group]=[]),s.isUniform?t[s.group].push({binding:s.binding,visibility:bo.VERTEX|bo.FRAGMENT,buffer:{type:"uniform"}}):s.type==="sampler"?t[s.group].push({binding:s.binding,visibility:bo.FRAGMENT,sampler:{type:"filtering"}}):s.type==="texture_2d"&&t[s.group].push({binding:s.binding,visibility:bo.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}function C_({groups:n}){const t=[];for(let e=0;e<n.length;e++){const s=n[e];t[s.group]||(t[s.group]={}),t[s.group][s.name]=s.binding}return t}function A_(n,t){const e=new Set,s=new Set,o=[...n.structs,...t.structs].filter(c=>e.has(c.name)?!1:(e.add(c.name),!0)),a=[...n.groups,...t.groups].filter(c=>{const u=`${c.name}-${c.binding}`;return s.has(u)?!1:(s.add(u),!0)});return{structs:o,groups:a}}const mo=Object.create(null);class Ci{constructor(t){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:e,vertex:s,layout:o,gpuLayout:a,name:c}=t;if(this.name=c,this.fragment=e,this.vertex=s,e.source===s.source){const u=nh(e.source);this.structsAndGroups=u}else{const u=nh(s.source),d=nh(e.source);this.structsAndGroups=A_(u,d)}this.layout=o??C_(this.structsAndGroups),this.gpuLayout=a??k_(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:e}=this,s=t.source+e.source+t.entryPoint+e.entryPoint;this._layoutKey=md(s,"program")}get attributeData(){return this._attributeData??(this._attributeData=b_(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,mo[this._cacheKey]=null}static from(t){const e=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return mo[e]||(mo[e]=new Ci(t),mo[e]._cacheKey=e),mo[e]}}const s0=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],P_=s0.reduce((n,t)=>(n[t]=!0,n),{});function T_(n,t){switch(n){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const i0=class o0{constructor(t,e){this._touched=0,this.uid=ge("uniform"),this._resourceType="uniformGroup",this._resourceId=ge("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,e={...o0.defaultOptions,...e},this.uniformStructures=t;const s={};for(const o in t){const a=t[o];if(a.name=o,a.size=a.size??1,!P_[a.type]){const c=a.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(c){const[,u,d]=c;throw new Error(`Uniform type ${a.type} is not supported. Use type: '${u}', size: ${d} instead.`)}throw new Error(`Uniform type ${a.type} is not supported. Supported uniform types are: ${s0.join(", ")}`)}a.value??(a.value=T_(a.type,a.size)),s[o]=a.value}this.uniforms=s,this._dirtyId=1,this.ubo=e.ubo,this.isStatic=e.isStatic,this._signature=md(Object.keys(s).map(o=>`${o}-${t[o].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};i0.defaultOptions={ubo:!1,isStatic:!1};let a0=i0;class bl{constructor(t){this.resources=Object.create(null),this._dirty=!0;let e=0;for(const s in t){const o=t[s];this.setResource(o,e++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let e=0;for(const s in this.resources)t[e++]=this.resources[s]._resourceId;this._key=t.join("|")}setResource(t,e){const s=this.resources[e];t!==s&&(s&&t.off?.("change",this.onResourceChange,this),t.on?.("change",this.onResourceChange,this),this.resources[e]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){const e=this.resources;for(const s in e)e[s]._touched=t}destroy(){const t=this.resources;for(const e in t)t[e]?.off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const e=this.resources;for(const s in e)e[s]===t&&(e[s]=null)}else this._updateKey()}}var Ro=(n=>(n[n.WEBGL=1]="WEBGL",n[n.WEBGPU=2]="WEBGPU",n[n.BOTH=3]="BOTH",n))(Ro||{});class Ul extends Yn{constructor(t){super(),this.uid=ge("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:e,glProgram:s,groups:o,resources:a,compatibleRenderers:c,groupMap:u}=t;this.gpuProgram=e,this.glProgram=s,c===void 0&&(c=0,e&&(c|=Ro.WEBGPU),s&&(c|=Ro.WEBGL)),this.compatibleRenderers=c;const d={};if(!a&&!o&&(a={}),a&&o)throw new Error("[Shader] Cannot have both resources and groups");if(!e&&o&&!u)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!e&&o&&u)for(const p in u)for(const f in u[p]){const g=u[p][f];d[g]={group:p,binding:f,name:g}}else if(e&&o&&!u){const p=e.structsAndGroups.groups;u={},p.forEach(f=>{u[f.group]=u[f.group]||{},u[f.group][f.binding]=f.name,d[f.name]=f})}else if(a){o={},u={},e&&e.structsAndGroups.groups.forEach(g=>{u[g.group]=u[g.group]||{},u[g.group][g.binding]=g.name,d[g.name]=g});let p=0;for(const f in a)d[f]||(o[99]||(o[99]=new bl,this._ownedBindGroups.push(o[99])),d[f]={group:99,binding:p,name:f},u[99]=u[99]||{},u[99][p]=f,p++);for(const f in a){const g=f;let x=a[f];!x.source&&!x._resourceType&&(x=new a0(x));const v=d[g];v&&(o[v.group]||(o[v.group]=new bl,this._ownedBindGroups.push(o[v.group])),o[v.group].setResource(x,v.binding))}}this.groups=o,this._uniformBindMap=u,this.resources=this._buildResourceAccessor(o,d)}addResource(t,e,s){var o,a;(o=this._uniformBindMap)[e]||(o[e]={}),(a=this._uniformBindMap[e])[s]||(a[s]=t),this.groups[e]||(this.groups[e]=new bl,this._ownedBindGroups.push(this.groups[e]))}_buildResourceAccessor(t,e){const s={};for(const o in e){const a=e[o];Object.defineProperty(s,a.name,{get(){return t[a.group].getResource(a.binding)},set(c){t[a.group].setResource(c,a.binding)}})}return s}destroy(t=!1){this._destroyed||(this._destroyed=!0,this.emit("destroy",this),t&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(e=>{e.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(t){const{gpu:e,gl:s,...o}=t;let a,c;return e&&(a=Ci.from(e)),s&&(c=Gl.from(s)),new Ul({gpuProgram:a,glProgram:c,...o})}}const M_={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},rh=0,sh=1,ih=2,oh=3,ah=4,lh=5,jh=class l0{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<rh)}set blend(t){!!(this.data&1<<rh)!==t&&(this.data^=1<<rh)}get offsets(){return!!(this.data&1<<sh)}set offsets(t){!!(this.data&1<<sh)!==t&&(this.data^=1<<sh)}set cullMode(t){if(t==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=t==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<ih)}set culling(t){!!(this.data&1<<ih)!==t&&(this.data^=1<<ih)}get depthTest(){return!!(this.data&1<<oh)}set depthTest(t){!!(this.data&1<<oh)!==t&&(this.data^=1<<oh)}get depthMask(){return!!(this.data&1<<lh)}set depthMask(t){!!(this.data&1<<lh)!==t&&(this.data^=1<<lh)}get clockwiseFrontFace(){return!!(this.data&1<<ah)}set clockwiseFrontFace(t){!!(this.data&1<<ah)!==t&&(this.data^=1<<ah)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!=="none",this._blendMode=t,this._blendModeId=M_[t]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new l0;return t.depthTest=!1,t.blend=!0,t}};jh.default2d=jh.for2d();let E_=jh;const c0=class Gh extends Ul{constructor(t){t={...Gh.defaultOptions,...t},super(t),this.enabled=!0,this._state=E_.for2d(),this.blendMode=t.blendMode,this.padding=t.padding,typeof t.antialias=="boolean"?this.antialias=t.antialias?"on":"off":this.antialias=t.antialias,this.resolution=t.resolution,this.blendRequired=t.blendRequired,this.clipToViewport=t.clipToViewport,this.addResource("uTexture",0,1),t.blendRequired&&this.addResource("uBackTexture",0,3)}apply(t,e,s,o){t.applyFilter(this,e,s,o)}get blendMode(){return this._state.blendMode}set blendMode(t){this._state.blendMode=t}static from(t){const{gpu:e,gl:s,...o}=t;let a,c;return e&&(a=Ci.from(e)),s&&(c=Gl.from(s)),new Gh({gpuProgram:a,glProgram:c,...o})}};c0.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};let u0=c0;const Uh=[];Ne.handleByNamedList(_t.Environment,Uh);async function I_(n){if(!n)for(let t=0;t<Uh.length;t++){const e=Uh[t];if(e.value.test()){await e.value.load();return}}}let go;function R_(){if(typeof go=="boolean")return go;try{go=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{go=!1}return go}function tg(n,t,e=2){const s=t&&t.length,o=s?t[0]*e:n.length;let a=h0(n,0,o,e,!0);const c=[];if(!a||a.next===a.prev)return c;let u,d,p;if(s&&(a=O_(n,t,a,e)),n.length>80*e){u=n[0],d=n[1];let f=u,g=d;for(let x=e;x<o;x+=e){const v=n[x],_=n[x+1];v<u&&(u=v),_<d&&(d=_),v>f&&(f=v),_>g&&(g=_)}p=Math.max(f-u,g-d),p=p!==0?32767/p:0}return Fo(a,c,e,u,d,p,0),c}function h0(n,t,e,s,o){let a;if(o===X_(n,t,e,s)>0)for(let c=t;c<e;c+=s)a=eg(c/s|0,n[c],n[c+1],a);else for(let c=e-s;c>=t;c-=s)a=eg(c/s|0,n[c],n[c+1],a);return a&&_i(a,a.next)&&(No(a),a=a.next),a}function Fs(n,t){if(!n)return n;t||(t=n);let e=n,s;do if(s=!1,!e.steiner&&(_i(e,e.next)||de(e.prev,e,e.next)===0)){if(No(e),e=t=e.prev,e===e.next)break;s=!0}else e=e.next;while(s||e!==t);return t}function Fo(n,t,e,s,o,a,c){if(!n)return;!c&&a&&U_(n,s,o,a);let u=n;for(;n.prev!==n.next;){const d=n.prev,p=n.next;if(a?L_(n,s,o,a):F_(n)){t.push(d.i,n.i,p.i),No(n),n=p.next,u=p.next;continue}if(n=p,n===u){c?c===1?(n=N_(Fs(n),t),Fo(n,t,e,s,o,a,2)):c===2&&B_(n,t,e,s,o,a):Fo(Fs(n),t,e,s,o,a,1);break}}}function F_(n){const t=n.prev,e=n,s=n.next;if(de(t,e,s)>=0)return!1;const o=t.x,a=e.x,c=s.x,u=t.y,d=e.y,p=s.y,f=Math.min(o,a,c),g=Math.min(u,d,p),x=Math.max(o,a,c),v=Math.max(u,d,p);let _=s.next;for(;_!==t;){if(_.x>=f&&_.x<=x&&_.y>=g&&_.y<=v&&ko(o,u,a,d,c,p,_.x,_.y)&&de(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function L_(n,t,e,s){const o=n.prev,a=n,c=n.next;if(de(o,a,c)>=0)return!1;const u=o.x,d=a.x,p=c.x,f=o.y,g=a.y,x=c.y,v=Math.min(u,d,p),_=Math.min(f,g,x),b=Math.max(u,d,p),w=Math.max(f,g,x),C=$h(v,_,t,e,s),A=$h(b,w,t,e,s);let T=n.prevZ,k=n.nextZ;for(;T&&T.z>=C&&k&&k.z<=A;){if(T.x>=v&&T.x<=b&&T.y>=_&&T.y<=w&&T!==o&&T!==c&&ko(u,f,d,g,p,x,T.x,T.y)&&de(T.prev,T,T.next)>=0||(T=T.prevZ,k.x>=v&&k.x<=b&&k.y>=_&&k.y<=w&&k!==o&&k!==c&&ko(u,f,d,g,p,x,k.x,k.y)&&de(k.prev,k,k.next)>=0))return!1;k=k.nextZ}for(;T&&T.z>=C;){if(T.x>=v&&T.x<=b&&T.y>=_&&T.y<=w&&T!==o&&T!==c&&ko(u,f,d,g,p,x,T.x,T.y)&&de(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;k&&k.z<=A;){if(k.x>=v&&k.x<=b&&k.y>=_&&k.y<=w&&k!==o&&k!==c&&ko(u,f,d,g,p,x,k.x,k.y)&&de(k.prev,k,k.next)>=0)return!1;k=k.nextZ}return!0}function N_(n,t){let e=n;do{const s=e.prev,o=e.next.next;!_i(s,o)&&f0(s,e,e.next,o)&&Lo(s,o)&&Lo(o,s)&&(t.push(s.i,e.i,o.i),No(e),No(e.next),e=n=o),e=e.next}while(e!==n);return Fs(e)}function B_(n,t,e,s,o,a){let c=n;do{let u=c.next.next;for(;u!==c.prev;){if(c.i!==u.i&&V_(c,u)){let d=p0(c,u);c=Fs(c,c.next),d=Fs(d,d.next),Fo(c,t,e,s,o,a,0),Fo(d,t,e,s,o,a,0);return}u=u.next}c=c.next}while(c!==n)}function O_(n,t,e,s){const o=[];for(let a=0,c=t.length;a<c;a++){const u=t[a]*s,d=a<c-1?t[a+1]*s:n.length,p=h0(n,u,d,s,!1);p===p.next&&(p.steiner=!0),o.push(W_(p))}o.sort(z_);for(let a=0;a<o.length;a++)e=D_(o[a],e);return e}function z_(n,t){let e=n.x-t.x;if(e===0&&(e=n.y-t.y,e===0)){const s=(n.next.y-n.y)/(n.next.x-n.x),o=(t.next.y-t.y)/(t.next.x-t.x);e=s-o}return e}function D_(n,t){const e=j_(n,t);if(!e)return t;const s=p0(e,n);return Fs(s,s.next),Fs(e,e.next)}function j_(n,t){let e=t;const s=n.x,o=n.y;let a=-1/0,c;if(_i(n,e))return e;do{if(_i(n,e.next))return e.next;if(o<=e.y&&o>=e.next.y&&e.next.y!==e.y){const g=e.x+(o-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(g<=s&&g>a&&(a=g,c=e.x<e.next.x?e:e.next,g===s))return c}e=e.next}while(e!==t);if(!c)return null;const u=c,d=c.x,p=c.y;let f=1/0;e=c;do{if(s>=e.x&&e.x>=d&&s!==e.x&&d0(o<p?s:a,o,d,p,o<p?a:s,o,e.x,e.y)){const g=Math.abs(o-e.y)/(s-e.x);Lo(e,n)&&(g<f||g===f&&(e.x>c.x||e.x===c.x&&G_(c,e)))&&(c=e,f=g)}e=e.next}while(e!==u);return c}function G_(n,t){return de(n.prev,n,t.prev)<0&&de(t.next,n,n.next)<0}function U_(n,t,e,s){let o=n;do o.z===0&&(o.z=$h(o.x,o.y,t,e,s)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==n);o.prevZ.nextZ=null,o.prevZ=null,$_(o)}function $_(n){let t,e=1;do{let s=n,o;n=null;let a=null;for(t=0;s;){t++;let c=s,u=0;for(let p=0;p<e&&(u++,c=c.nextZ,!!c);p++);let d=e;for(;u>0||d>0&&c;)u!==0&&(d===0||!c||s.z<=c.z)?(o=s,s=s.nextZ,u--):(o=c,c=c.nextZ,d--),a?a.nextZ=o:n=o,o.prevZ=a,a=o;s=c}a.nextZ=null,e*=2}while(t>1);return n}function $h(n,t,e,s,o){return n=(n-e)*o|0,t=(t-s)*o|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,n|t<<1}function W_(n){let t=n,e=n;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==n);return e}function d0(n,t,e,s,o,a,c,u){return(o-c)*(t-u)>=(n-c)*(a-u)&&(n-c)*(s-u)>=(e-c)*(t-u)&&(e-c)*(a-u)>=(o-c)*(s-u)}function ko(n,t,e,s,o,a,c,u){return!(n===c&&t===u)&&d0(n,t,e,s,o,a,c,u)}function V_(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!H_(n,t)&&(Lo(n,t)&&Lo(t,n)&&Y_(n,t)&&(de(n.prev,n,t.prev)||de(n,t.prev,t))||_i(n,t)&&de(n.prev,n,n.next)>0&&de(t.prev,t,t.next)>0)}function de(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function _i(n,t){return n.x===t.x&&n.y===t.y}function f0(n,t,e,s){const o=hl(de(n,t,e)),a=hl(de(n,t,s)),c=hl(de(e,s,n)),u=hl(de(e,s,t));return!!(o!==a&&c!==u||o===0&&ul(n,e,t)||a===0&&ul(n,s,t)||c===0&&ul(e,n,s)||u===0&&ul(e,t,s))}function ul(n,t,e){return t.x<=Math.max(n.x,e.x)&&t.x>=Math.min(n.x,e.x)&&t.y<=Math.max(n.y,e.y)&&t.y>=Math.min(n.y,e.y)}function hl(n){return n>0?1:n<0?-1:0}function H_(n,t){let e=n;do{if(e.i!==n.i&&e.next.i!==n.i&&e.i!==t.i&&e.next.i!==t.i&&f0(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}function Lo(n,t){return de(n.prev,n,n.next)<0?de(n,t,n.next)>=0&&de(n,n.prev,t)>=0:de(n,t,n.prev)<0||de(n,n.next,t)<0}function Y_(n,t){let e=n,s=!1;const o=(n.x+t.x)/2,a=(n.y+t.y)/2;do e.y>a!=e.next.y>a&&e.next.y!==e.y&&o<(e.next.x-e.x)*(a-e.y)/(e.next.y-e.y)+e.x&&(s=!s),e=e.next;while(e!==n);return s}function p0(n,t){const e=Wh(n.i,n.x,n.y),s=Wh(t.i,t.x,t.y),o=n.next,a=t.prev;return n.next=t,t.prev=n,e.next=o,o.prev=e,s.next=e,e.prev=s,a.next=s,s.prev=a,s}function eg(n,t,e,s){const o=Wh(n,t,e);return s?(o.next=s.next,o.prev=s,s.next.prev=o,s.next=o):(o.prev=o,o.next=o),o}function No(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Wh(n,t,e){return{i:n,x:t,y:e,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function X_(n,t,e,s){let o=0;for(let a=t,c=e-s;a<e;a+=s)o+=(n[c]-n[a])*(n[a+1]+n[c+1]),c=a;return o}const q_=tg.default||tg;var m0=(n=>(n[n.NONE=0]="NONE",n[n.COLOR=16384]="COLOR",n[n.STENCIL=1024]="STENCIL",n[n.DEPTH=256]="DEPTH",n[n.COLOR_DEPTH=16640]="COLOR_DEPTH",n[n.COLOR_STENCIL=17408]="COLOR_STENCIL",n[n.DEPTH_STENCIL=1280]="DEPTH_STENCIL",n[n.ALL=17664]="ALL",n))(m0||{});class Q_{constructor(t){this.items=[],this._name=t}emit(t,e,s,o,a,c,u,d){const{name:p,items:f}=this;for(let g=0,x=f.length;g<x;g++)f[g][p](t,e,s,o,a,c,u,d);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&this.items.splice(e,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const K_=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],g0=class y0 extends Yn{constructor(t){super(),this.uid=ge("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const e=[...K_,...this.config.runners??[]];this._addRunners(...e),this._unsafeEvalCheck()}async init(t={}){const e=t.skipExtensionImports===!0?!0:t.manageImports===!1;await I_(e),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const s in this._systemsHash)t={...this._systemsHash[s].constructor.defaultOptions,...t};t={...y0.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let s=0;s<this.runners.init.items.length;s++)await this.runners.init.items[s].init(t);this._initOptions=t}render(t,e){let s=t;if(s instanceof Be&&(s={container:s},e&&(Et(Ut,"passing a second argument is deprecated, please use render options instead"),s.target=e.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,s.clearColor??(s.clearColor=this.background.colorRgba),s.clear??(s.clear=this.background.clearBeforeRender)),s.clearColor){const o=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=o?s.clearColor:_e.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),s.container.visible&&(s.container.enableRenderGroup(),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s))}resize(t,e,s){const o=this.view.resolution;this.view.resize(t,e,s),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),s!==void 0&&s!==o&&this.runners.resolutionChange.emit(s)}clear(t={}){const e=this;t.target||(t.target=e.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=m0.ALL);const{clear:s,clearColor:o,target:a}=t;_e.shared.setValue(o??this.background.colorRgba),e.renderTarget.clear(a,s,_e.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(e=>{this.runners[e]=new Q_(e)})}_addSystems(t){let e;for(e in t){const s=t[e];this._addSystem(s.value,s.name)}}_addSystem(t,e){const s=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=s,this._systemsHash[e]=s;for(const o in this.runners)this.runners[o].add(s);return this}_addPipes(t,e){const s=e.reduce((o,a)=>(o[a.name]=a.value,o),{});t.forEach(o=>{const a=o.value,c=o.name,u=s[c];this.renderPipes[c]=new a(this,u?new u:null),this.runners.destroy.add(this.renderPipes[c])})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),(t===!0||typeof t=="object"&&t.releaseGlobalResources)&&Vo.release(),Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!R_())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};g0.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let x0=g0,dl;function Z_(n){return dl!==void 0||(dl=(()=>{const t={stencil:!0,failIfMajorPerformanceCaveat:n??x0.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Jt.get().getWebGLRenderingContext())return!1;let s=Jt.get().createCanvas().getContext("webgl",t);const o=!!s?.getContextAttributes()?.stencil;if(s){const a=s.getExtension("WEBGL_lose_context");a&&a.loseContext()}return s=null,o}catch{return!1}})()),dl}let fl;async function J_(n={}){return fl!==void 0||(fl=await(async()=>{const t=Jt.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(n)).requestDevice(),!0}catch{return!1}})()),fl}const ng=["webgl","webgpu","canvas"];async function tS(n){let t=[];n.preference?(t.push(n.preference),ng.forEach(a=>{a!==n.preference&&t.push(a)})):t=ng.slice();let e,s={};for(let a=0;a<t.length;a++){const c=t[a];if(c==="webgpu"&&await J_()){const{WebGPURenderer:u}=await Tl(async()=>{const{WebGPURenderer:d}=await import("./WebGPURenderer-B4I60VvR.js");return{WebGPURenderer:d}},__vite__mapDeps([3,2,4]));e=u,s={...n,...n.webgpu};break}else if(c==="webgl"&&Z_(n.failIfMajorPerformanceCaveat??x0.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:u}=await Tl(async()=>{const{WebGLRenderer:d}=await import("./WebGLRenderer-Dopi2San.js");return{WebGLRenderer:d}},__vite__mapDeps([5,2,4]));e=u,s={...n,...n.webgl};break}else if(c==="canvas")throw s={...n},new Error("CanvasRenderer is not yet implemented")}if(delete s.webgpu,delete s.webgl,!e)throw new Error("No available renderer for the current environment");const o=new e;return await o.init(s),o}const v0="8.14.3";class w0{static init(){globalThis.__PIXI_APP_INIT__?.(this,v0)}static destroy(){}}w0.extension=_t.Application;class eS{constructor(t){this._renderer=t}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,v0)}destroy(){this._renderer=null}}eS.extension={type:[_t.WebGLSystem,_t.WebGPUSystem],name:"initHook",priority:-10};const _0=class Vh{constructor(...t){this.stage=new Be,t[0]!==void 0&&Et(Ut,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.stage||(this.stage=new Be),this.renderer=await tS(t),Vh._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Et(Ut,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,e=!1){const s=Vh._plugins.slice(0);s.reverse(),s.forEach(o=>{o.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};_0._plugins=[];let S0=_0;Ne.handleByList(_t.Application,S0._plugins);Ne.add(w0);class b0 extends Yn{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Et(Ut,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Et(Ut,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Et(Ut,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Et(Ut,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Et(Ut,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners();for(const e in this.chars)this.chars[e].texture?.destroy();this.chars=null,t&&(this.pages.forEach(e=>e.texture.destroy(!0)),this.pages=null)}}/**
 * tiny-lru
 *
 * @copyright 2025 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 11.4.5
 */class nS{constructor(t=0,e=0,s=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=t,this.resetTtl=s,this.size=0,this.ttl=e}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(t){if(this.has(t)){const e=this.items[t];delete this.items[t],this.size--,e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),this.last===e&&(this.last=e.prev)}return this}entries(t=this.keys()){return t.map(e=>[e,this.get(e)])}evict(t=!1){if(t||this.size>0){const e=this.first;delete this.items[e.key],--this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}return this}expiresAt(t){let e;return this.has(t)&&(e=this.items[t].expiry),e}get(t){const e=this.items[t];if(e!==void 0){if(this.ttl>0&&e.expiry<=Date.now()){this.delete(t);return}return this.moveToEnd(e),e.value}}has(t){return t in this.items}moveToEnd(t){this.last!==t&&(t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),t.prev=this.last,t.next=null,this.last!==null&&(this.last.next=t),this.last=t,this.first===null&&(this.first=t))}keys(){const t=[];let e=this.first;for(;e!==null;)t.push(e.key),e=e.next;return t}setWithEvicted(t,e,s=this.resetTtl){let o=null;if(this.has(t))this.set(t,e,!0,s);else{this.max>0&&this.size===this.max&&(o={...this.first},this.evict(!0));let a=this.items[t]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:e};++this.size===1?this.first=a:this.last.next=a,this.last=a}return o}set(t,e,s=!1,o=this.resetTtl){let a=this.items[t];return s||a!==void 0?(a.value=e,s===!1&&o&&(a.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(a)):(this.max>0&&this.size===this.max&&this.evict(!0),a=this.items[t]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:e},++this.size===1?this.first=a:this.last.next=a,this.last=a),this}values(t=this.keys()){return t.map(e=>this.get(e))}}function k0(n=1e3,t=0,e=!1){if(isNaN(n)||n<0)throw new TypeError("Invalid max value");if(isNaN(t)||t<0)throw new TypeError("Invalid ttl value");if(typeof e!="boolean")throw new TypeError("Invalid resetTtl value");return new nS(n,t,e)}const rS=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function El(n){const t=typeof n.fontSize=="number"?`${n.fontSize}px`:n.fontSize;let e=n.fontFamily;Array.isArray(n.fontFamily)||(e=n.fontFamily.split(","));for(let s=e.length-1;s>=0;s--){let o=e[s].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&!rS.includes(o)&&(o=`"${o}"`),e[s]=o}return`${n.fontStyle} ${n.fontVariant} ${n.fontWeight} ${t} ${e.join(",")}`}const ch={willReadFrequently:!0},qn=class vt{static get experimentalLetterSpacingSupported(){let t=vt._experimentalLetterSpacingSupported;if(t===void 0){const e=Jt.get().getCanvasRenderingContext2D().prototype;t=vt._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,s,o,a,c,u,d,p){this.text=t,this.style=e,this.width=s,this.height=o,this.lines=a,this.lineWidths=c,this.lineHeight=u,this.maxLineWidth=d,this.fontProperties=p}static measureText(t=" ",e,s=vt._canvas,o=e.wordWrap){const a=`${t}-${e.styleKey}-wordWrap-${o}`;if(vt._measurementCache.has(a))return vt._measurementCache.get(a);const c=El(e),u=vt.measureFont(c);u.fontSize===0&&(u.fontSize=e.fontSize,u.ascent=e.fontSize);const d=vt.__context;d.font=c;const f=(o?vt._wordWrap(t,e,s):t).split(/(?:\r\n|\r|\n)/),g=new Array(f.length);let x=0;for(let A=0;A<f.length;A++){const T=vt._measureText(f[A],e.letterSpacing,d);g[A]=T,x=Math.max(x,T)}const v=e._stroke?.width||0;let _=x+v;e.dropShadow&&(_+=e.dropShadow.distance);const b=e.lineHeight||u.fontSize;let w=Math.max(b,u.fontSize+v)+(f.length-1)*(b+e.leading);e.dropShadow&&(w+=e.dropShadow.distance);const C=new vt(t,e,_,w,f,g,b+e.leading,x,u);return vt._measurementCache.set(a,C),C}static _measureText(t,e,s){let o=!1;vt.experimentalLetterSpacingSupported&&(vt.experimentalLetterSpacing?(s.letterSpacing=`${e}px`,s.textLetterSpacing=`${e}px`,o=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));const a=s.measureText(t);let c=a.width;const u=-a.actualBoundingBoxLeft;let p=a.actualBoundingBoxRight-u;if(c>0)if(o)c-=e,p-=e;else{const f=(vt.graphemeSegmenter(t).length-1)*e;c+=f,p+=f}return Math.max(c,p)}static _wordWrap(t,e,s=vt._canvas){const o=s.getContext("2d",ch);let a=0,c="",u="";const d=Object.create(null),{letterSpacing:p,whiteSpace:f}=e,g=vt._collapseSpaces(f),x=vt._collapseNewlines(f);let v=!g;const _=e.wordWrapWidth+p,b=vt._tokenize(t);for(let w=0;w<b.length;w++){let C=b[w];if(vt._isNewline(C)){if(!x){u+=vt._addLine(c),v=!g,c="",a=0;continue}C=" "}if(g){const T=vt.isBreakingSpace(C),k=vt.isBreakingSpace(c[c.length-1]);if(T&&k)continue}const A=vt._getFromCache(C,p,d,o);if(A>_)if(c!==""&&(u+=vt._addLine(c),c="",a=0),vt.canBreakWords(C,e.breakWords)){const T=vt.wordWrapSplit(C);for(let k=0;k<T.length;k++){let L=T[k],R=L,F=1;for(;T[k+F];){const $=T[k+F];if(!vt.canBreakChars(R,$,C,k,e.breakWords))L+=$;else break;R=$,F++}k+=F-1;const q=vt._getFromCache(L,p,d,o);q+a>_&&(u+=vt._addLine(c),v=!1,c="",a=0),c+=L,a+=q}}else{c.length>0&&(u+=vt._addLine(c),c="",a=0);const T=w===b.length-1;u+=vt._addLine(C,!T),v=!1,c="",a=0}else A+a>_&&(v=!1,u+=vt._addLine(c),c="",a=0),(c.length>0||!vt.isBreakingSpace(C)||v)&&(c+=C,a+=A)}return u+=vt._addLine(c,!1),u}static _addLine(t,e=!0){return t=vt._trimRight(t),t=e?`${t}
`:t,t}static _getFromCache(t,e,s,o){let a=s[t];return typeof a!="number"&&(a=vt._measureText(t,e,o)+e,s[t]=a),a}static _collapseSpaces(t){return t==="normal"||t==="pre-line"}static _collapseNewlines(t){return t==="normal"}static _trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const s=t[e];if(!vt.isBreakingSpace(s))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t!="string"?!1:vt._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:vt._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){const e=[];let s="";if(typeof t!="string")return e;for(let o=0;o<t.length;o++){const a=t[o],c=t[o+1];if(vt.isBreakingSpace(a,c)||vt._isNewline(a)){s!==""&&(e.push(s),s=""),a==="\r"&&c===`
`?(e.push(`\r
`),o++):e.push(a);continue}s+=a}return s!==""&&e.push(s),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,s,o,a){return!0}static wordWrapSplit(t){return vt.graphemeSegmenter(t)}static measureFont(t){if(vt._fonts[t])return vt._fonts[t];const e=vt._context;e.font=t;const s=e.measureText(vt.METRICS_STRING+vt.BASELINE_SYMBOL),o={ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,fontSize:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent};return vt._fonts[t]=o,o}static clearMetrics(t=""){t?delete vt._fonts[t]:vt._fonts={}}static get _canvas(){if(!vt.__canvas){let t;try{const e=new OffscreenCanvas(0,0);if(e.getContext("2d",ch)?.measureText)return vt.__canvas=e,e;t=Jt.get().createCanvas()}catch{t=Jt.get().createCanvas()}t.width=t.height=10,vt.__canvas=t}return vt.__canvas}static get _context(){return vt.__context||(vt.__context=vt._canvas.getContext("2d",ch)),vt.__context}};qn.METRICS_STRING="|q";qn.BASELINE_SYMBOL="M";qn.BASELINE_MULTIPLIER=1.4;qn.HEIGHT_MULTIPLIER=2;qn.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const n=new Intl.Segmenter;return t=>{const e=n.segment(t),s=[];let o=0;for(const a of e)s[o++]=a.segment;return s}}return n=>[...n]})();qn.experimentalLetterSpacing=!1;qn._fonts={};qn._newlines=[10,13];qn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];qn._measurementCache=k0(1e3);let cr=qn;const rg=[{offset:0,color:"white"},{offset:1,color:"black"}],gd=class Hh{constructor(...t){this.uid=ge("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let e=sS(t);e={...e.type==="radial"?Hh.defaultRadialOptions:Hh.defaultLinearOptions,...Py(e)},this._textureSize=e.textureSize,this._wrapMode=e.wrapMode,e.type==="radial"?(this.center=e.center,this.outerCenter=e.outerCenter??this.center,this.innerRadius=e.innerRadius,this.outerRadius=e.outerRadius,this.scale=e.scale,this.rotation=e.rotation):(this.start=e.start,this.end=e.end),this.textureSpace=e.textureSpace,this.type=e.type,e.colorStops.forEach(o=>{this.addColorStop(o.offset,o.color)})}addColorStop(t,e){return this.colorStops.push({offset:t,color:_e.shared.setValue(e).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:t,y:e}=this.start,{x:s,y:o}=this.end,a=s-t,c=o-e;const u=a<0||c<0;if(this._wrapMode==="clamp-to-edge"){if(a<0){const w=t;t=s,s=w,a*=-1}if(c<0){const w=e;e=o,o=w,c*=-1}}const d=this.colorStops.length?this.colorStops:rg,p=this._textureSize,{canvas:f,context:g}=ig(p,1),x=u?g.createLinearGradient(this._textureSize,0,0,0):g.createLinearGradient(0,0,this._textureSize,0);sg(x,d),g.fillStyle=x,g.fillRect(0,0,p,1),this.texture=new Ot({source:new Rs({resource:f,addressMode:this._wrapMode})});const v=Math.sqrt(a*a+c*c),_=Math.atan2(c,a),b=new Lt;b.scale(v/p,1),b.rotate(_),b.translate(t,e),this.textureSpace==="local"&&b.scale(p,p),this.transform=b}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:rg,e=this._textureSize,{canvas:s,context:o}=ig(e,e),{x:a,y:c}=this.center,{x:u,y:d}=this.outerCenter,p=this.innerRadius,f=this.outerRadius,g=u-f,x=d-f,v=e/(f*2),_=(a-g)*v,b=(c-x)*v,w=o.createRadialGradient(_,b,p*v,(u-g)*v,(d-x)*v,f*v);sg(w,t),o.fillStyle=t[t.length-1].color,o.fillRect(0,0,e,e),o.fillStyle=w,o.translate(_,b),o.rotate(this.rotation),o.scale(1,this.scale),o.translate(-_,-b),o.fillRect(0,0,e,e),this.texture=new Ot({source:new Rs({resource:s,addressMode:this._wrapMode})});const C=new Lt;C.scale(1/v,1/v),C.translate(g,x),this.textureSpace==="local"&&C.scale(e,e),this.transform=C}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};gd.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};gd.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let Er=gd;function sg(n,t){for(let e=0;e<t.length;e++){const s=t[e];n.addColorStop(s.offset,s.color)}}function ig(n,t){const e=Jt.get().createCanvas(n,t),s=e.getContext("2d");return{canvas:e,context:s}}function sS(n){let t=n[0]??{};return(typeof t=="number"||n[1])&&(Et("8.5.2","use options object instead"),t={type:"linear",start:{x:n[0],y:n[1]},end:{x:n[2],y:n[3]},textureSpace:n[4],textureSize:n[5]??Er.defaultLinearOptions.textureSize}),t}const og={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class $l{constructor(t,e){this.uid=ge("fillPattern"),this._tick=0,this.transform=new Lt,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=og[e].addressModeU,t.source.style.addressModeV=og[e].addressModeV)}setTransform(t){const e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height),this._tick++}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture=t,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var uh,ag;function iS(){if(ag)return uh;ag=1,uh=e;var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function e(a){var c=[];return a.replace(t,function(u,d,p){var f=d.toLowerCase();for(p=o(p),f=="m"&&p.length>2&&(c.push([d].concat(p.splice(0,2))),f="l",d=d=="m"?"l":"L");;){if(p.length==n[f])return p.unshift(d),c.push(p);if(p.length<n[f])throw new Error("malformed path data");c.push([d].concat(p.splice(0,n[f])))}}),c}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function o(a){var c=a.match(s);return c?c.map(Number):[]}return uh}var oS=iS();const aS=ud(oS);function lS(n,t){const e=aS(n),s=[];let o=null,a=0,c=0;for(let u=0;u<e.length;u++){const d=e[u],p=d[0],f=d;switch(p){case"M":a=f[1],c=f[2],t.moveTo(a,c);break;case"m":a+=f[1],c+=f[2],t.moveTo(a,c);break;case"H":a=f[1],t.lineTo(a,c);break;case"h":a+=f[1],t.lineTo(a,c);break;case"V":c=f[1],t.lineTo(a,c);break;case"v":c+=f[1],t.lineTo(a,c);break;case"L":a=f[1],c=f[2],t.lineTo(a,c);break;case"l":a+=f[1],c+=f[2],t.lineTo(a,c);break;case"C":a=f[5],c=f[6],t.bezierCurveTo(f[1],f[2],f[3],f[4],a,c);break;case"c":t.bezierCurveTo(a+f[1],c+f[2],a+f[3],c+f[4],a+f[5],c+f[6]),a+=f[5],c+=f[6];break;case"S":a=f[3],c=f[4],t.bezierCurveToShort(f[1],f[2],a,c);break;case"s":t.bezierCurveToShort(a+f[1],c+f[2],a+f[3],c+f[4]),a+=f[3],c+=f[4];break;case"Q":a=f[3],c=f[4],t.quadraticCurveTo(f[1],f[2],a,c);break;case"q":t.quadraticCurveTo(a+f[1],c+f[2],a+f[3],c+f[4]),a+=f[3],c+=f[4];break;case"T":a=f[1],c=f[2],t.quadraticCurveToShort(a,c);break;case"t":a+=f[1],c+=f[2],t.quadraticCurveToShort(a,c);break;case"A":a=f[6],c=f[7],t.arcToSvg(f[1],f[2],f[3],f[4],f[5],a,c);break;case"a":a+=f[6],c+=f[7],t.arcToSvg(f[1],f[2],f[3],f[4],f[5],a,c);break;case"Z":case"z":t.closePath(),s.length>0&&(o=s.pop(),o?(a=o.startX,c=o.startY):(a=0,c=0)),o=null;break;default:ie(`Unknown SVG path command: ${p}`)}p!=="Z"&&p!=="z"&&o===null&&(o={startX:a,startY:c},s.push(o))}return t}class yd{constructor(t=0,e=0,s=0){this.type="circle",this.x=t,this.y=e,this.radius=s}clone(){return new yd(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const s=this.radius*this.radius;let o=this.x-t,a=this.y-e;return o*=o,a*=a,o+a<=s}strokeContains(t,e,s,o=.5){if(this.radius===0)return!1;const a=this.x-t,c=this.y-e,u=this.radius,d=(1-o)*s,p=Math.sqrt(a*a+c*c);return p<=u+d&&p>u-(s-d)}getBounds(t){return t||(t=new oe),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class xd{constructor(t=0,e=0,s=0,o=0){this.type="ellipse",this.x=t,this.y=e,this.halfWidth=s,this.halfHeight=o}clone(){return new xd(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(t-this.x)/this.halfWidth,o=(e-this.y)/this.halfHeight;return s*=s,o*=o,s+o<=1}strokeContains(t,e,s,o=.5){const{halfWidth:a,halfHeight:c}=this;if(a<=0||c<=0)return!1;const u=s*(1-o),d=s-u,p=a-d,f=c-d,g=a+u,x=c+u,v=t-this.x,_=e-this.y,b=v*v/(p*p)+_*_/(f*f),w=v*v/(g*g)+_*_/(x*x);return b>1&&w<=1}getBounds(t){return t||(t=new oe),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function cS(n,t,e,s,o,a){const c=n-e,u=t-s,d=o-e,p=a-s,f=c*d+u*p,g=d*d+p*p;let x=-1;g!==0&&(x=f/g);let v,_;x<0?(v=e,_=s):x>1?(v=o,_=a):(v=e+x*d,_=s+x*p);const b=n-v,w=t-_;return b*b+w*w}let uS,hS;class To{constructor(...t){this.type="polygon";let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const s=[];for(let o=0,a=e.length;o<a;o++)s.push(e[o].x,e[o].y);e=s}this.points=e,this.closePath=!0}isClockwise(){let t=0;const e=this.points,s=e.length;for(let o=0;o<s;o+=2){const a=e[o],c=e[o+1],u=e[(o+2)%s],d=e[(o+3)%s];t+=(u-a)*(d+c)}return t<0}containsPolygon(t){const e=this.getBounds(uS),s=t.getBounds(hS);if(!e.containsRect(s))return!1;const o=t.points;for(let a=0;a<o.length;a+=2){const c=o[a],u=o[a+1];if(!this.contains(c,u))return!1}return!0}clone(){const t=this.points.slice(),e=new To(t);return e.closePath=this.closePath,e}contains(t,e){let s=!1;const o=this.points.length/2;for(let a=0,c=o-1;a<o;c=a++){const u=this.points[a*2],d=this.points[a*2+1],p=this.points[c*2],f=this.points[c*2+1];d>e!=f>e&&t<(p-u)*((e-d)/(f-d))+u&&(s=!s)}return s}strokeContains(t,e,s,o=.5){const a=s*s,c=a*(1-o),u=a-c,{points:d}=this,p=d.length-(this.closePath?0:2);for(let f=0;f<p;f+=2){const g=d[f],x=d[f+1],v=d[(f+2)%d.length],_=d[(f+3)%d.length],b=cS(t,e,g,x,v,_),w=Math.sign((v-g)*(e-x)-(_-x)*(t-g));if(b<=(w<0?u:c))return!0}return!1}getBounds(t){t||(t=new oe);const e=this.points;let s=1/0,o=-1/0,a=1/0,c=-1/0;for(let u=0,d=e.length;u<d;u+=2){const p=e[u],f=e[u+1];s=p<s?p:s,o=p>o?p:o,a=f<a?f:a,c=f>c?f:c}return t.x=s,t.width=o-s,t.y=a,t.height=c-a,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return Et("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return Et("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const pl=(n,t,e,s,o,a,c)=>{const u=n-e,d=t-s,p=Math.sqrt(u*u+d*d);return p>=o-a&&p<=o+c};class vd{constructor(t=0,e=0,s=0,o=0,a=20){this.type="roundedRectangle",this.x=t,this.y=e,this.width=s,this.height=o,this.radius=a}getBounds(t){return t||(t=new oe),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new vd(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+s&&e<=this.y+this.height-s||t>=this.x+s&&t<=this.x+this.width-s)return!0;let o=t-(this.x+s),a=e-(this.y+s);const c=s*s;if(o*o+a*a<=c||(o=t-(this.x+this.width-s),o*o+a*a<=c)||(a=e-(this.y+this.height-s),o*o+a*a<=c)||(o=t-(this.x+s),o*o+a*a<=c))return!0}return!1}strokeContains(t,e,s,o=.5){const{x:a,y:c,width:u,height:d,radius:p}=this,f=s*(1-o),g=s-f,x=a+p,v=c+p,_=u-p*2,b=d-p*2,w=a+u,C=c+d;return(t>=a-f&&t<=a+g||t>=w-g&&t<=w+f)&&e>=v&&e<=v+b||(e>=c-f&&e<=c+g||e>=C-g&&e<=C+f)&&t>=x&&t<=x+_?!0:t<x&&e<v&&pl(t,e,x,v,p,g,f)||t>w-p&&e<v&&pl(t,e,w-p,v,p,g,f)||t>w-p&&e>C-p&&pl(t,e,w-p,C-p,p,g,f)||t<x&&e>C-p&&pl(t,e,x,C-p,p,g,f)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const C0={};function dS(n,t,e){let s=2166136261;for(let o=0;o<t;o++)s^=n[o].uid,s=Math.imul(s,16777619),s>>>=0;return C0[s]||fS(n,t,s,e)}function fS(n,t,e,s){const o={};let a=0;for(let u=0;u<s;u++){const d=u<t?n[u]:Ot.EMPTY.source;o[a++]=d.source,o[a++]=d.style}const c=new bl(o);return C0[e]=c,c}class lg{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}function cg(n,t){const e=n.byteLength/8|0,s=new Float64Array(n,0,e);new Float64Array(t,0,e).set(s);const a=n.byteLength-e*8;if(a>0){const c=new Uint8Array(n,e*8,a);new Uint8Array(t,e*8,a).set(c)}}const pS={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var mS=(n=>(n[n.DISABLED=0]="DISABLED",n[n.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",n[n.MASK_ACTIVE=2]="MASK_ACTIVE",n[n.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",n[n.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",n[n.NONE=5]="NONE",n))(mS||{});function ug(n,t){return t.alphaMode==="no-premultiply-alpha"&&pS[n]||n}const gS=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function yS(n){let t="";for(let e=0;e<n;++e)e>0&&(t+=`
else `),e<n-1&&(t+=`if(test == ${e}.0){}`);return t}function xS(n,t){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const s=gS.replace(/%forloop%/gi,yS(n));if(t.shaderSource(e,s),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))n=n/2|0;else break}}finally{t.deleteShader(e)}return n}let ri=null;function vS(){if(ri)return ri;const n=n0();return ri=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),ri=xS(ri,n),n.getExtension("WEBGL_lose_context")?.loseContext(),ri}class wS{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const e=this.textures[t];this.textures[t]=null,this.ids[e.uid]=null}this.count=0}}class _S{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new wS,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const Mo=[];let Il=0;Vo.register({clear:()=>{if(Mo.length>0)for(const n of Mo)n&&n.destroy();Mo.length=0,Il=0}});function hg(){return Il>0?Mo[--Il]:new _S}function dg(n){Mo[Il++]=n}let yo=0;const A0=class P0{constructor(t){this.uid=ge("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],t={...P0.defaultOptions,...t},t.maxTextures||(Et("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),t.maxTextures=vS());const{maxTextures:e,attributesInitialSize:s,indicesInitialSize:o}=t;this.attributeBuffer=new lg(s*4),this.indexBuffer=new Uint16Array(o),this.maxTextures=e}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)dg(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,e){const s=t._batch.textures.ids[e._source.uid];return!s&&s!==0?!1:(t._textureId=s,t.texture=e,!0)}updateElement(t){this.dirty=!0;const e=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId)}break(t){const e=this._elements;if(!e[this.elementStart])return;let s=hg(),o=s.textures;o.clear();const a=e[this.elementStart];let c=ug(a.blendMode,a.texture._source),u=a.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const d=this.attributeBuffer.float32View,p=this.attributeBuffer.uint32View,f=this.indexBuffer;let g=this._batchIndexSize,x=this._batchIndexStart,v="startBatch";const _=this.maxTextures;for(let b=this.elementStart;b<this.elementSize;++b){const w=e[b];e[b]=null;const A=w.texture._source,T=ug(w.blendMode,A),k=c!==T||u!==w.topology;if(A._batchTick===yo&&!k){w._textureId=A._textureBindLocation,g+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,d,p,w._attributeStart,w._textureId),this.packQuadIndex(f,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,d,p,w._attributeStart,w._textureId),this.packIndex(w,f,w._indexStart,w._attributeStart/this.vertexSize)),w._batch=s;continue}A._batchTick=yo,(o.count>=_||k)&&(this._finishBatch(s,x,g-x,o,c,u,t,v),v="renderBatch",x=g,c=T,u=w.topology,s=hg(),o=s.textures,o.clear(),++yo),w._textureId=A._textureBindLocation=o.count,o.ids[A.uid]=o.count,o.textures[o.count++]=A,w._batch=s,g+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,d,p,w._attributeStart,w._textureId),this.packQuadIndex(f,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,d,p,w._attributeStart,w._textureId),this.packIndex(w,f,w._indexStart,w._attributeStart/this.vertexSize))}o.count>0&&(this._finishBatch(s,x,g-x,o,c,u,t,v),x=g,++yo),this.elementStart=this.elementSize,this._batchIndexStart=x,this._batchIndexSize=g}_finishBatch(t,e,s,o,a,c,u,d){t.gpuBindGroup=null,t.bindGroup=null,t.action=d,t.batcher=this,t.textures=o,t.blendMode=a,t.topology=c,t.start=e,t.size=s,++yo,this.batches[this.batchIndex++]=t,u.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const e=Math.max(t,this.attributeBuffer.size*2),s=new lg(e);cg(this.attributeBuffer.rawBinaryData,s.rawBinaryData),this.attributeBuffer=s}_resizeIndexBuffer(t){const e=this.indexBuffer;let s=Math.max(t,e.length*1.5);s+=s%2;const o=s>65535?new Uint32Array(s):new Uint16Array(s);if(o.BYTES_PER_ELEMENT!==e.BYTES_PER_ELEMENT)for(let a=0;a<e.length;a++)o[a]=e[a];else cg(e.buffer,o.buffer);this.indexBuffer=o}packQuadIndex(t,e,s){t[e]=s+0,t[e+1]=s+1,t[e+2]=s+2,t[e+3]=s+0,t[e+4]=s+2,t[e+5]=s+3}packIndex(t,e,s,o){const a=t.indices,c=t.indexSize,u=t.indexOffset,d=t.attributeOffset;for(let p=0;p<c;p++)e[s++]=o+a[p+u]-d}destroy(t={}){if(this.batches!==null){for(let e=0;e<this.batches.length;e++)dg(this.batches[e]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,t.shader&&(this.shader?.destroy(),this.shader=null);for(let e=0;e<this._elements.length;e++)this._elements[e]&&(this._elements[e]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};A0.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let SS=A0;var en=(n=>(n[n.MAP_READ=1]="MAP_READ",n[n.MAP_WRITE=2]="MAP_WRITE",n[n.COPY_SRC=4]="COPY_SRC",n[n.COPY_DST=8]="COPY_DST",n[n.INDEX=16]="INDEX",n[n.VERTEX=32]="VERTEX",n[n.UNIFORM=64]="UNIFORM",n[n.STORAGE=128]="STORAGE",n[n.INDIRECT=256]="INDIRECT",n[n.QUERY_RESOLVE=512]="QUERY_RESOLVE",n[n.STATIC=1024]="STATIC",n))(en||{});class Bo extends Yn{constructor(t){let{data:e,size:s}=t;const{usage:o,label:a,shrinkToFit:c}=t;super(),this.uid=ge("buffer"),this._resourceType="buffer",this._resourceId=ge("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,e instanceof Array&&(e=new Float32Array(e)),this._data=e,s??(s=e?.byteLength);const u=!!e;this.descriptor={size:s,usage:o,mappedAtCreation:u,label:a},this.shrinkToFit=c??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&en.STATIC)}set static(t){t?this.descriptor.usage|=en.STATIC:this.descriptor.usage&=~en.STATIC}setDataWithSize(t,e,s){if(this._updateID++,this._updateSize=e*t.BYTES_PER_ELEMENT,this._data===t){s&&this.emit("update",this);return}const o=this._data;if(this._data=t,this._dataInt32=null,!o||o.length!==t.length){!this.shrinkToFit&&o&&t.byteLength<o.byteLength?s&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=ge("resource"),this.emit("change",this));return}s&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function T0(n,t){if(!(n instanceof Bo)){let e=t?en.INDEX:en.VERTEX;n instanceof Array&&(t?(n=new Uint32Array(n),e=en.INDEX|en.COPY_DST):(n=new Float32Array(n),e=en.VERTEX|en.COPY_DST)),n=new Bo({data:n,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:e})}return n}function bS(n,t,e){const s=n.getAttribute(t);if(!s)return e.minX=0,e.minY=0,e.maxX=0,e.maxY=0,e;const o=s.buffer.data;let a=1/0,c=1/0,u=-1/0,d=-1/0;const p=o.BYTES_PER_ELEMENT,f=(s.offset||0)/p,g=(s.stride||8)/p;for(let x=f;x<o.length;x+=g){const v=o[x],_=o[x+1];v>u&&(u=v),_>d&&(d=_),v<a&&(a=v),_<c&&(c=_)}return e.minX=a,e.minY=c,e.maxX=u,e.maxY=d,e}function kS(n){return(n instanceof Bo||Array.isArray(n)||n.BYTES_PER_ELEMENT)&&(n={buffer:n}),n.buffer=T0(n.buffer,!1),n}class CS extends Yn{constructor(t={}){super(),this.uid=ge("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Vn,this._boundsDirty=!0;const{attributes:e,indexBuffer:s,topology:o}=t;if(this.buffers=[],this.attributes={},e)for(const a in e)this.addAttribute(a,e[a]);this.instanceCount=t.instanceCount??1,s&&this.addIndex(s),this.topology=o||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const e=this.attributes[t];return e.buffer.data.length/(e.stride/4||e.size)}return 0}addAttribute(t,e){const s=kS(e);this.buffers.indexOf(s.buffer)===-1&&(this.buffers.push(s.buffer),s.buffer.on("update",this.onBufferUpdate,this),s.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=s}addIndex(t){this.indexBuffer=T0(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,bS(this,"aPosition",this._bounds)):this._bounds}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(e=>e.destroy()),this.indexBuffer?.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const AS=new Float32Array(1),PS=new Uint32Array(1);class TS extends CS{constructor(){const e=new Bo({data:AS,label:"attribute-batch-buffer",usage:en.VERTEX|en.COPY_DST,shrinkToFit:!1}),s=new Bo({data:PS,label:"index-batch-buffer",usage:en.INDEX|en.COPY_DST,shrinkToFit:!1}),o=24;super({attributes:{aPosition:{buffer:e,format:"float32x2",stride:o,offset:0},aUV:{buffer:e,format:"float32x2",stride:o,offset:8},aColor:{buffer:e,format:"unorm8x4",stride:o,offset:16},aTextureIdAndRound:{buffer:e,format:"uint16x2",stride:o,offset:20}},indexBuffer:s})}}function fg(n,t,e){if(n)for(const s in n){const o=s.toLocaleLowerCase(),a=t[o];if(a){let c=n[s];s==="header"&&(c=c.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),e&&a.push(`//----${e}----//`),a.push(c)}else ie(`${s} placement hook does not exist in shader`)}}const MS=/\{\{(.*?)\}\}/g;function pg(n){const t={};return(n.match(MS)?.map(s=>s.replace(/[{()}]/g,""))??[]).forEach(s=>{t[s]=[]}),t}function mg(n,t){let e;const s=/@in\s+([^;]+);/g;for(;(e=s.exec(n))!==null;)t.push(e[1])}function gg(n,t,e=!1){const s=[];mg(t,s),n.forEach(u=>{u.header&&mg(u.header,s)});const o=s;e&&o.sort();const a=o.map((u,d)=>`       @location(${d}) ${u},`).join(`
`);let c=t.replace(/@in\s+[^;]+;\s*/g,"");return c=c.replace("{{in}}",`
${a}
`),c}function yg(n,t){let e;const s=/@out\s+([^;]+);/g;for(;(e=s.exec(n))!==null;)t.push(e[1])}function ES(n){const e=/\b(\w+)\s*:/g.exec(n);return e?e[1]:""}function IS(n){const t=/@.*?\s+/g;return n.replace(t,"")}function RS(n,t){const e=[];yg(t,e),n.forEach(d=>{d.header&&yg(d.header,e)});let s=0;const o=e.sort().map(d=>d.indexOf("builtin")>-1?d:`@location(${s++}) ${d}`).join(`,
`),a=e.sort().map(d=>`       var ${IS(d)};`).join(`
`),c=`return VSOutput(
            ${e.sort().map(d=>` ${ES(d)}`).join(`,
`)});`;let u=t.replace(/@out\s+[^;]+;\s*/g,"");return u=u.replace("{{struct}}",`
${o}
`),u=u.replace("{{start}}",`
${a}
`),u=u.replace("{{return}}",`
${c}
`),u}function xg(n,t){let e=n;for(const s in t){const o=t[s];o.join(`
`).length?e=e.replace(`{{${s}}}`,`//-----${s} START-----//
${o.join(`
`)}
//----${s} FINISH----//`):e=e.replace(`{{${s}}}`,"")}return e}const Jr=Object.create(null),hh=new Map;let FS=0;function LS({template:n,bits:t}){const e=M0(n,t);if(Jr[e])return Jr[e];const{vertex:s,fragment:o}=BS(n,t);return Jr[e]=E0(s,o,t),Jr[e]}function NS({template:n,bits:t}){const e=M0(n,t);return Jr[e]||(Jr[e]=E0(n.vertex,n.fragment,t)),Jr[e]}function BS(n,t){const e=t.map(c=>c.vertex).filter(c=>!!c),s=t.map(c=>c.fragment).filter(c=>!!c);let o=gg(e,n.vertex,!0);o=RS(e,o);const a=gg(s,n.fragment,!0);return{vertex:o,fragment:a}}function M0(n,t){return t.map(e=>(hh.has(e)||hh.set(e,FS++),hh.get(e))).sort((e,s)=>e-s).join("-")+n.vertex+n.fragment}function E0(n,t,e){const s=pg(n),o=pg(t);return e.forEach(a=>{fg(a.vertex,s,a.name),fg(a.fragment,o,a.name)}),{vertex:xg(n,s),fragment:xg(t,o)}}const OS=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,zS=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,DS=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,jS=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,GS={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},US={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function $S({bits:n,name:t}){const e=LS({template:{fragment:zS,vertex:OS},bits:[GS,...n]});return Ci.from({name:t,vertex:{source:e.vertex,entryPoint:"main"},fragment:{source:e.fragment,entryPoint:"main"}})}function WS({bits:n,name:t}){return new Gl({name:t,...NS({template:{vertex:DS,fragment:jS},bits:[US,...n]})})}const VS={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},HS={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},dh={};function YS(n){const t=[];if(n===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let e=0;for(let s=0;s<n;s++)t.push(`@group(1) @binding(${e++}) var textureSource${s+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${e++}) var textureSampler${s+1}: sampler;`)}return t.join(`
`)}function XS(n){const t=[];if(n===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let e=0;e<n;e++)e===n-1?t.push("  default:{"):t.push(`  case ${e}:{`),t.push(`      outColor = textureSampleGrad(textureSource${e+1}, textureSampler${e+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function qS(n){return dh[n]||(dh[n]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${YS(n)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${XS(n)}
            `}}),dh[n]}const fh={};function QS(n){const t=[];for(let e=0;e<n;e++)e>0&&t.push("else"),e<n-1&&t.push(`if(vTextureId < ${e}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${e}], vUV);`),t.push("}");return t.join(`
`)}function KS(n){return fh[n]||(fh[n]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${n}];

            `,main:`

                ${QS(n)}
            `}}),fh[n]}const ZS={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},JS={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},vg={};function tb(n){let t=vg[n];if(t)return t;const e=new Int32Array(n);for(let s=0;s<n;s++)e[s]=s;return t=vg[n]=new a0({uTextures:{value:e,type:"i32",size:n}},{isStatic:!0}),t}class wg extends Ul{constructor(t){const e=WS({name:"batch",bits:[HS,KS(t),JS]}),s=$S({name:"batch",bits:[VS,qS(t),ZS]});super({glProgram:e,gpuProgram:s,resources:{batchSamplers:tb(t)}}),this.maxTextures=t}}let xo=null;const I0=class R0 extends SS{constructor(t){super(t),this.geometry=new TS,this.name=R0.extension.name,this.vertexSize=6,xo??(xo=new wg(t.maxTextures)),this.shader=xo}packAttributes(t,e,s,o,a){const c=a<<16|t.roundPixels&65535,u=t.transform,d=u.a,p=u.b,f=u.c,g=u.d,x=u.tx,v=u.ty,{positions:_,uvs:b}=t,w=t.color,C=t.attributeOffset,A=C+t.attributeSize;for(let T=C;T<A;T++){const k=T*2,L=_[k],R=_[k+1];e[o++]=d*L+f*R+x,e[o++]=g*R+p*L+v,e[o++]=b[k],e[o++]=b[k+1],s[o++]=w,s[o++]=c}}packQuadAttributes(t,e,s,o,a){const c=t.texture,u=t.transform,d=u.a,p=u.b,f=u.c,g=u.d,x=u.tx,v=u.ty,_=t.bounds,b=_.maxX,w=_.minX,C=_.maxY,A=_.minY,T=c.uvs,k=t.color,L=a<<16|t.roundPixels&65535;e[o+0]=d*w+f*A+x,e[o+1]=g*A+p*w+v,e[o+2]=T.x0,e[o+3]=T.y0,s[o+4]=k,s[o+5]=L,e[o+6]=d*b+f*A+x,e[o+7]=g*A+p*b+v,e[o+8]=T.x1,e[o+9]=T.y1,s[o+10]=k,s[o+11]=L,e[o+12]=d*b+f*C+x,e[o+13]=g*C+p*b+v,e[o+14]=T.x2,e[o+15]=T.y2,s[o+16]=k,s[o+17]=L,e[o+18]=d*w+f*C+x,e[o+19]=g*C+p*w+v,e[o+20]=T.x3,e[o+21]=T.y3,s[o+22]=k,s[o+23]=L}_updateMaxTextures(t){this.shader.maxTextures!==t&&(xo=new wg(t),this.shader=xo)}destroy(){this.shader=null,super.destroy()}};I0.extension={type:[_t.Batcher],name:"default"};let eb=I0;function nb(n,t,e,s,o,a,c,u=null){let d=0;e*=t,o*=a;const p=u.a,f=u.b,g=u.c,x=u.d,v=u.tx,_=u.ty;for(;d<c;){const b=n[e],w=n[e+1];s[o]=p*b+g*w+v,s[o+1]=f*b+x*w+_,o+=a,e+=t,d++}}function rb(n,t,e,s){let o=0;for(t*=e;o<s;)n[t]=0,n[t+1]=0,t+=e,o++}function F0(n,t,e,s,o){const a=t.a,c=t.b,u=t.c,d=t.d,p=t.tx,f=t.ty;e||(e=0),s||(s=2),o||(o=n.length/s-e);let g=e*s;for(let x=0;x<o;x++){const v=n[g],_=n[g+1];n[g]=a*v+u*_+p,n[g+1]=c*v+d*_+f,g+=s}}const sb=new Lt;class L0{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,e=t>>16|t&65280|(t&255)<<16,s=this.renderable;return s?Oy(e,s.groupColor)+(this.alpha*s.groupAlpha*255<<24):e+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||sb}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const Oo={extension:{type:_t.ShapeBuilder,name:"circle"},build(n,t){let e,s,o,a,c,u;if(n.type==="circle"){const k=n;if(c=u=k.radius,c<=0)return!1;e=k.x,s=k.y,o=a=0}else if(n.type==="ellipse"){const k=n;if(c=k.halfWidth,u=k.halfHeight,c<=0||u<=0)return!1;e=k.x,s=k.y,o=a=0}else{const k=n,L=k.width/2,R=k.height/2;e=k.x+L,s=k.y+R,c=u=Math.max(0,Math.min(k.radius,Math.min(L,R))),o=L-c,a=R-u}if(o<0||a<0)return!1;const d=Math.ceil(2.3*Math.sqrt(c+u)),p=d*8+(o?4:0)+(a?4:0);if(p===0)return!1;if(d===0)return t[0]=t[6]=e+o,t[1]=t[3]=s+a,t[2]=t[4]=e-o,t[5]=t[7]=s-a,!0;let f=0,g=d*4+(o?2:0)+2,x=g,v=p,_=o+c,b=a,w=e+_,C=e-_,A=s+b;if(t[f++]=w,t[f++]=A,t[--g]=A,t[--g]=C,a){const k=s-b;t[x++]=C,t[x++]=k,t[--v]=k,t[--v]=w}for(let k=1;k<d;k++){const L=Math.PI/2*(k/d),R=o+Math.cos(L)*c,F=a+Math.sin(L)*u,q=e+R,$=e-R,N=s+F,V=s-F;t[f++]=q,t[f++]=N,t[--g]=N,t[--g]=$,t[x++]=$,t[x++]=V,t[--v]=V,t[--v]=q}_=o,b=a+u,w=e+_,C=e-_,A=s+b;const T=s-b;return t[f++]=w,t[f++]=A,t[--v]=T,t[--v]=w,o&&(t[f++]=C,t[f++]=A,t[--v]=T,t[--v]=C),!0},triangulate(n,t,e,s,o,a){if(n.length===0)return;let c=0,u=0;for(let f=0;f<n.length;f+=2)c+=n[f],u+=n[f+1];c/=n.length/2,u/=n.length/2;let d=s;t[d*e]=c,t[d*e+1]=u;const p=d++;for(let f=0;f<n.length;f+=2)t[d*e]=n[f],t[d*e+1]=n[f+1],f>0&&(o[a++]=d,o[a++]=p,o[a++]=d-1),d++;o[a++]=p+1,o[a++]=p,o[a++]=d-1}},ib={...Oo,extension:{...Oo.extension,name:"ellipse"}},ob={...Oo,extension:{...Oo.extension,name:"roundedRectangle"}},N0=1e-4,_g=1e-4;function ab(n){const t=n.length;if(t<6)return 1;let e=0;for(let s=0,o=n[t-2],a=n[t-1];s<t;s+=2){const c=n[s],u=n[s+1];e+=(c-o)*(u+a),o=c,a=u}return e<0?-1:1}function Sg(n,t,e,s,o,a,c,u){const d=n-e*o,p=t-s*o,f=n+e*a,g=t+s*a;let x,v;c?(x=s,v=-e):(x=-s,v=e);const _=d+x,b=p+v,w=f+x,C=g+v;return u.push(_,b),u.push(w,C),2}function _s(n,t,e,s,o,a,c,u){const d=e-n,p=s-t;let f=Math.atan2(d,p),g=Math.atan2(o-n,a-t);u&&f<g?f+=Math.PI*2:!u&&f>g&&(g+=Math.PI*2);let x=f;const v=g-f,_=Math.abs(v),b=Math.sqrt(d*d+p*p),w=(15*_*Math.sqrt(b)/Math.PI>>0)+1,C=v/w;if(x+=C,u){c.push(n,t),c.push(e,s);for(let A=1,T=x;A<w;A++,T+=C)c.push(n,t),c.push(n+Math.sin(T)*b,t+Math.cos(T)*b);c.push(n,t),c.push(o,a)}else{c.push(e,s),c.push(n,t);for(let A=1,T=x;A<w;A++,T+=C)c.push(n+Math.sin(T)*b,t+Math.cos(T)*b),c.push(n,t);c.push(o,a),c.push(n,t)}return w*2}function lb(n,t,e,s,o,a){const c=N0;if(n.length===0)return;const u=t;let d=u.alignment;if(t.alignment!==.5){let X=ab(n);d=(d-.5)*X+.5}const p=new Ge(n[0],n[1]),f=new Ge(n[n.length-2],n[n.length-1]),g=s,x=Math.abs(p.x-f.x)<c&&Math.abs(p.y-f.y)<c;if(g){n=n.slice(),x&&(n.pop(),n.pop(),f.set(n[n.length-2],n[n.length-1]));const X=(p.x+f.x)*.5,et=(f.y+p.y)*.5;n.unshift(X,et),n.push(X,et)}const v=o,_=n.length/2;let b=n.length;const w=v.length/2,C=u.width/2,A=C*C,T=u.miterLimit*u.miterLimit;let k=n[0],L=n[1],R=n[2],F=n[3],q=0,$=0,N=-(L-F),V=k-R,rt=0,ct=0,lt=Math.sqrt(N*N+V*V);N/=lt,V/=lt,N*=C,V*=C;const kt=d,Q=(1-kt)*2,K=kt*2;g||(u.cap==="round"?b+=_s(k-N*(Q-K)*.5,L-V*(Q-K)*.5,k-N*Q,L-V*Q,k+N*K,L+V*K,v,!0)+2:u.cap==="square"&&(b+=Sg(k,L,N,V,Q,K,!0,v))),v.push(k-N*Q,L-V*Q),v.push(k+N*K,L+V*K);for(let X=1;X<_-1;++X){k=n[(X-1)*2],L=n[(X-1)*2+1],R=n[X*2],F=n[X*2+1],q=n[(X+1)*2],$=n[(X+1)*2+1],N=-(L-F),V=k-R,lt=Math.sqrt(N*N+V*V),N/=lt,V/=lt,N*=C,V*=C,rt=-(F-$),ct=R-q,lt=Math.sqrt(rt*rt+ct*ct),rt/=lt,ct/=lt,rt*=C,ct*=C;const et=R-k,M=L-F,O=R-q,G=$-F,Z=et*O+M*G,st=M*O-G*et,W=st<0;if(Math.abs(st)<.001*Math.abs(Z)){v.push(R-N*Q,F-V*Q),v.push(R+N*K,F+V*K),Z>=0&&(u.join==="round"?b+=_s(R,F,R-N*Q,F-V*Q,R-rt*Q,F-ct*Q,v,!1)+4:b+=2,v.push(R-rt*K,F-ct*K),v.push(R+rt*Q,F+ct*Q));continue}const j=(-N+k)*(-V+F)-(-N+R)*(-V+L),H=(-rt+q)*(-ct+F)-(-rt+R)*(-ct+$),Y=(et*H-O*j)/st,at=(G*j-M*H)/st,St=(Y-R)*(Y-R)+(at-F)*(at-F),yt=R+(Y-R)*Q,wt=F+(at-F)*Q,pt=R-(Y-R)*K,It=F-(at-F)*K,Rt=Math.min(et*et+M*M,O*O+G*G),Gt=W?Q:K,ce=Rt+Gt*Gt*A;St<=ce?u.join==="bevel"||St/A>T?(W?(v.push(yt,wt),v.push(R+N*K,F+V*K),v.push(yt,wt),v.push(R+rt*K,F+ct*K)):(v.push(R-N*Q,F-V*Q),v.push(pt,It),v.push(R-rt*Q,F-ct*Q),v.push(pt,It)),b+=2):u.join==="round"?W?(v.push(yt,wt),v.push(R+N*K,F+V*K),b+=_s(R,F,R+N*K,F+V*K,R+rt*K,F+ct*K,v,!0)+4,v.push(yt,wt),v.push(R+rt*K,F+ct*K)):(v.push(R-N*Q,F-V*Q),v.push(pt,It),b+=_s(R,F,R-N*Q,F-V*Q,R-rt*Q,F-ct*Q,v,!1)+4,v.push(R-rt*Q,F-ct*Q),v.push(pt,It)):(v.push(yt,wt),v.push(pt,It)):(v.push(R-N*Q,F-V*Q),v.push(R+N*K,F+V*K),u.join==="round"?W?b+=_s(R,F,R+N*K,F+V*K,R+rt*K,F+ct*K,v,!0)+2:b+=_s(R,F,R-N*Q,F-V*Q,R-rt*Q,F-ct*Q,v,!1)+2:u.join==="miter"&&St/A<=T&&(W?(v.push(pt,It),v.push(pt,It)):(v.push(yt,wt),v.push(yt,wt)),b+=2),v.push(R-rt*Q,F-ct*Q),v.push(R+rt*K,F+ct*K),b+=2)}k=n[(_-2)*2],L=n[(_-2)*2+1],R=n[(_-1)*2],F=n[(_-1)*2+1],N=-(L-F),V=k-R,lt=Math.sqrt(N*N+V*V),N/=lt,V/=lt,N*=C,V*=C,v.push(R-N*Q,F-V*Q),v.push(R+N*K,F+V*K),g||(u.cap==="round"?b+=_s(R-N*(Q-K)*.5,F-V*(Q-K)*.5,R-N*Q,F-V*Q,R+N*K,F+V*K,v,!1)+2:u.cap==="square"&&(b+=Sg(R,F,N,V,Q,K,!1,v)));const J=_g*_g;for(let X=w;X<b+w-2;++X)k=v[X*2],L=v[X*2+1],R=v[(X+1)*2],F=v[(X+1)*2+1],q=v[(X+2)*2],$=v[(X+2)*2+1],!(Math.abs(k*(F-$)+R*($-L)+q*(L-F))<J)&&a.push(X,X+1,X+2)}function cb(n,t,e,s){const o=N0;if(n.length===0)return;const a=n[0],c=n[1],u=n[n.length-2],d=n[n.length-1],p=t||Math.abs(a-u)<o&&Math.abs(c-d)<o,f=e,g=n.length/2,x=f.length/2;for(let v=0;v<g;v++)f.push(n[v*2]),f.push(n[v*2+1]);for(let v=0;v<g-1;v++)s.push(x+v,x+v+1);p&&s.push(x+g-1,x)}function B0(n,t,e,s,o,a,c){const u=q_(n,t,2);if(!u)return;for(let p=0;p<u.length;p+=3)a[c++]=u[p]+o,a[c++]=u[p+1]+o,a[c++]=u[p+2]+o;let d=o*s;for(let p=0;p<n.length;p+=2)e[d]=n[p],e[d+1]=n[p+1],d+=s}const ub=[],hb={extension:{type:_t.ShapeBuilder,name:"polygon"},build(n,t){for(let e=0;e<n.points.length;e++)t[e]=n.points[e];return!0},triangulate(n,t,e,s,o,a){B0(n,ub,t,e,s,o,a)}},db={extension:{type:_t.ShapeBuilder,name:"rectangle"},build(n,t){const e=n,s=e.x,o=e.y,a=e.width,c=e.height;return a>0&&c>0?(t[0]=s,t[1]=o,t[2]=s+a,t[3]=o,t[4]=s+a,t[5]=o+c,t[6]=s,t[7]=o+c,!0):!1},triangulate(n,t,e,s,o,a){let c=0;s*=e,t[s+c]=n[0],t[s+c+1]=n[1],c+=e,t[s+c]=n[2],t[s+c+1]=n[3],c+=e,t[s+c]=n[6],t[s+c+1]=n[7],c+=e,t[s+c]=n[4],t[s+c+1]=n[5],c+=e;const u=s/e;o[a++]=u,o[a++]=u+1,o[a++]=u+2,o[a++]=u+1,o[a++]=u+3,o[a++]=u+2}},fb={extension:{type:_t.ShapeBuilder,name:"triangle"},build(n,t){return t[0]=n.x,t[1]=n.y,t[2]=n.x2,t[3]=n.y2,t[4]=n.x3,t[5]=n.y3,!0},triangulate(n,t,e,s,o,a){let c=0;s*=e,t[s+c]=n[0],t[s+c+1]=n[1],c+=e,t[s+c]=n[2],t[s+c+1]=n[3],c+=e,t[s+c]=n[4],t[s+c+1]=n[5];const u=s/e;o[a++]=u,o[a++]=u+1,o[a++]=u+2}},pb=new Lt,mb=new oe;function gb(n,t,e,s){const o=t.matrix?n.copyFrom(t.matrix).invert():n.identity();if(t.textureSpace==="local"){const c=e.getBounds(mb);t.width&&c.pad(t.width);const{x:u,y:d}=c,p=1/c.width,f=1/c.height,g=-u*p,x=-d*f,v=o.a,_=o.b,b=o.c,w=o.d;o.a*=p,o.b*=p,o.c*=f,o.d*=f,o.tx=g*v+x*b+o.tx,o.ty=g*_+x*w+o.ty}else o.translate(t.texture.frame.x,t.texture.frame.y),o.scale(1/t.texture.source.width,1/t.texture.source.height);const a=t.texture.source.style;return!(t.fill instanceof Er)&&a.addressMode==="clamp-to-edge"&&(a.addressMode="repeat",a.update()),s&&o.append(pb.copyFrom(s).invert()),o}const Wl={};Ne.handleByMap(_t.ShapeBuilder,Wl);Ne.add(db,hb,fb,Oo,ib,ob);const yb=new oe,xb=new Lt;function vb(n,t){const{geometryData:e,batches:s}=t;s.length=0,e.indices.length=0,e.vertices.length=0,e.uvs.length=0;for(let o=0;o<n.instructions.length;o++){const a=n.instructions[o];if(a.action==="texture")wb(a.data,s,e);else if(a.action==="fill"||a.action==="stroke"){const c=a.action==="stroke",u=a.data.path.shapePath,d=a.data.style,p=a.data.hole;c&&p&&bg(p.shapePath,d,!0,s,e),p&&(u.shapePrimitives[u.shapePrimitives.length-1].holes=p.shapePath.shapePrimitives),bg(u,d,c,s,e)}}}function wb(n,t,e){const s=[],o=Wl.rectangle,a=yb;a.x=n.dx,a.y=n.dy,a.width=n.dw,a.height=n.dh;const c=n.transform;if(!o.build(a,s))return;const{vertices:u,uvs:d,indices:p}=e,f=p.length,g=u.length/2;c&&F0(s,c),o.triangulate(s,u,2,g,p,f);const x=n.image,v=x.uvs;d.push(v.x0,v.y0,v.x1,v.y1,v.x3,v.y3,v.x2,v.y2);const _=Mn.get(L0);_.indexOffset=f,_.indexSize=p.length-f,_.attributeOffset=g,_.attributeSize=u.length/2-g,_.baseColor=n.style,_.alpha=n.alpha,_.texture=x,_.geometryData=e,t.push(_)}function bg(n,t,e,s,o){const{vertices:a,uvs:c,indices:u}=o;n.shapePrimitives.forEach(({shape:d,transform:p,holes:f})=>{const g=[],x=Wl[d.type];if(!x.build(d,g))return;const v=u.length,_=a.length/2;let b="triangle-list";if(p&&F0(g,p),e){const T=d.closePath??!0,k=t;k.pixelLine?(cb(g,T,a,u),b="line-list"):lb(g,k,!1,T,a,u)}else if(f){const T=[],k=g.slice();_b(f).forEach(R=>{T.push(k.length/2),k.push(...R)}),B0(k,T,a,2,_,u,v)}else x.triangulate(g,a,2,_,u,v);const w=c.length/2,C=t.texture;if(C!==Ot.WHITE){const T=gb(xb,t,d,p);nb(a,2,_,c,w,2,a.length/2-_,T)}else rb(c,w,2,a.length/2-_);const A=Mn.get(L0);A.indexOffset=v,A.indexSize=u.length-v,A.attributeOffset=_,A.attributeSize=a.length/2-_,A.baseColor=t.color,A.alpha=t.alpha,A.texture=C,A.geometryData=o,A.topology=b,s.push(A)})}function _b(n){const t=[];for(let e=0;e<n.length;e++){const s=n[e].shape,o=[];Wl[s.type].build(s,o)&&t.push(o)}return t}class Sb{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class bb{constructor(){this.instructions=new Gy}init(t){const e=t.maxTextures;this.batcher?this.batcher._updateMaxTextures(e):this.batcher=new eb({maxTextures:e}),this.instructions.reset()}get geometry(){return Et(xw,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const wd=class Yh{constructor(t){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=t,t.renderableGC.addManagedHash(this,"_gpuContextHash"),t.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(t){Yh.defaultOptions.bezierSmoothness=t?.bezierSmoothness??Yh.defaultOptions.bezierSmoothness}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let e=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){e?this._cleanGraphicsContextData(t):e=this._initContext(t),vb(t,e);const s=t.batchMode;t.customShader||s==="no-batch"?e.isBatchable=!1:s==="auto"?e.isBatchable=e.geometryData.vertices.length<400:e.isBatchable=!0,t.dirty=!1}return e}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_initContextRenderData(t){const e=Mn.get(bb,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:s,geometryData:o}=this._gpuContextHash[t.uid],a=o.vertices.length,c=o.indices.length;for(let f=0;f<s.length;f++)s[f].applyTransform=!1;const u=e.batcher;u.ensureAttributeBuffer(a),u.ensureIndexBuffer(c),u.begin();for(let f=0;f<s.length;f++){const g=s[f];u.add(g)}u.finish(e.instructions);const d=u.geometry;d.indexBuffer.setDataWithSize(u.indexBuffer,u.indexSize,!0),d.buffers[0].setDataWithSize(u.attributeBuffer.float32View,u.attributeSize,!0);const p=u.batches;for(let f=0;f<p.length;f++){const g=p[f];g.bindGroup=dS(g.textures.textures,g.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[t.uid]=e,e}_initContext(t){const e=new Sb;return e.context=t,this._gpuContextHash[t.uid]=e,t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){const e=this._gpuContextHash[t.uid];e.isBatchable||this._graphicsDataContextHash[t.uid]&&(Mn.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),e.batches&&e.batches.forEach(s=>{Mn.return(s)})}destroy(){for(const t in this._gpuContextHash)this._gpuContextHash[t]&&this.onGraphicsContextDestroy(this._gpuContextHash[t].context);this._gpuContextHash={},this._graphicsDataContextHash={},this._renderer=null}};wd.extension={type:[_t.WebGLSystem,_t.WebGPUSystem,_t.CanvasSystem],name:"graphicsContext"};wd.defaultOptions={bezierSmoothness:.5};let O0=wd;const kb=8,ml=11920929e-14,Cb=1;function z0(n,t,e,s,o,a,c,u,d,p){const g=Math.min(.99,Math.max(0,p??O0.defaultOptions.bezierSmoothness));let x=(Cb-g)/1;return x*=x,Ab(t,e,s,o,a,c,u,d,n,x),n}function Ab(n,t,e,s,o,a,c,u,d,p){Xh(n,t,e,s,o,a,c,u,d,p,0),d.push(c,u)}function Xh(n,t,e,s,o,a,c,u,d,p,f){if(f>kb)return;const g=(n+e)/2,x=(t+s)/2,v=(e+o)/2,_=(s+a)/2,b=(o+c)/2,w=(a+u)/2,C=(g+v)/2,A=(x+_)/2,T=(v+b)/2,k=(_+w)/2,L=(C+T)/2,R=(A+k)/2;if(f>0){let F=c-n,q=u-t;const $=Math.abs((e-c)*q-(s-u)*F),N=Math.abs((o-c)*q-(a-u)*F);if($>ml&&N>ml){if(($+N)*($+N)<=p*(F*F+q*q)){d.push(L,R);return}}else if($>ml){if($*$<=p*(F*F+q*q)){d.push(L,R);return}}else if(N>ml){if(N*N<=p*(F*F+q*q)){d.push(L,R);return}}else if(F=L-(n+c)/2,q=R-(t+u)/2,F*F+q*q<=p){d.push(L,R);return}}Xh(n,t,g,x,C,A,L,R,d,p,f+1),Xh(L,R,T,k,b,w,c,u,d,p,f+1)}const Pb=8,Tb=11920929e-14,Mb=1;function Eb(n,t,e,s,o,a,c,u){const p=Math.min(.99,Math.max(0,u??O0.defaultOptions.bezierSmoothness));let f=(Mb-p)/1;return f*=f,Ib(t,e,s,o,a,c,n,f),n}function Ib(n,t,e,s,o,a,c,u){qh(c,n,t,e,s,o,a,u,0),c.push(o,a)}function qh(n,t,e,s,o,a,c,u,d){if(d>Pb)return;const p=(t+s)/2,f=(e+o)/2,g=(s+a)/2,x=(o+c)/2,v=(p+g)/2,_=(f+x)/2;let b=a-t,w=c-e;const C=Math.abs((s-a)*w-(o-c)*b);if(C>Tb){if(C*C<=u*(b*b+w*w)){n.push(v,_);return}}else if(b=v-(t+a)/2,w=_-(e+c)/2,b*b+w*w<=u){n.push(v,_);return}qh(n,t,e,p,f,v,_,u,d+1),qh(n,v,_,g,x,a,c,u,d+1)}function D0(n,t,e,s,o,a,c,u){let d=Math.abs(o-a);(!c&&o>a||c&&a>o)&&(d=2*Math.PI-d),u||(u=Math.max(6,Math.floor(6*Math.pow(s,1/3)*(d/Math.PI)))),u=Math.max(u,3);let p=d/u,f=o;p*=c?-1:1;for(let g=0;g<u+1;g++){const x=Math.cos(f),v=Math.sin(f),_=t+x*s,b=e+v*s;n.push(_,b),f+=p}}function Rb(n,t,e,s,o,a){const c=n[n.length-2],d=n[n.length-1]-e,p=c-t,f=o-e,g=s-t,x=Math.abs(d*g-p*f);if(x<1e-8||a===0){(n[n.length-2]!==t||n[n.length-1]!==e)&&n.push(t,e);return}const v=d*d+p*p,_=f*f+g*g,b=d*f+p*g,w=a*Math.sqrt(v)/x,C=a*Math.sqrt(_)/x,A=w*b/v,T=C*b/_,k=w*g+C*p,L=w*f+C*d,R=p*(C+A),F=d*(C+A),q=g*(w+T),$=f*(w+T),N=Math.atan2(F-L,R-k),V=Math.atan2($-L,q-k);D0(n,k+t,L+e,a,N,V,p*f>g*d)}const Eo=Math.PI*2,ph={centerX:0,centerY:0,ang1:0,ang2:0},mh=({x:n,y:t},e,s,o,a,c,u,d)=>{n*=e,t*=s;const p=o*n-a*t,f=a*n+o*t;return d.x=p+c,d.y=f+u,d};function Fb(n,t){const e=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),s=t===1.5707963267948966?.551915024494:e,o=Math.cos(n),a=Math.sin(n),c=Math.cos(n+t),u=Math.sin(n+t);return[{x:o-a*s,y:a+o*s},{x:c+u*s,y:u-c*s},{x:c,y:u}]}const kg=(n,t,e,s)=>{const o=n*s-t*e<0?-1:1;let a=n*e+t*s;return a>1&&(a=1),a<-1&&(a=-1),o*Math.acos(a)},Lb=(n,t,e,s,o,a,c,u,d,p,f,g,x)=>{const v=Math.pow(o,2),_=Math.pow(a,2),b=Math.pow(f,2),w=Math.pow(g,2);let C=v*_-v*w-_*b;C<0&&(C=0),C/=v*w+_*b,C=Math.sqrt(C)*(c===u?-1:1);const A=C*o/a*g,T=C*-a/o*f,k=p*A-d*T+(n+e)/2,L=d*A+p*T+(t+s)/2,R=(f-A)/o,F=(g-T)/a,q=(-f-A)/o,$=(-g-T)/a,N=kg(1,0,R,F);let V=kg(R,F,q,$);u===0&&V>0&&(V-=Eo),u===1&&V<0&&(V+=Eo),x.centerX=k,x.centerY=L,x.ang1=N,x.ang2=V};function Nb(n,t,e,s,o,a,c,u=0,d=0,p=0){if(a===0||c===0)return;const f=Math.sin(u*Eo/360),g=Math.cos(u*Eo/360),x=g*(t-s)/2+f*(e-o)/2,v=-f*(t-s)/2+g*(e-o)/2;if(x===0&&v===0)return;a=Math.abs(a),c=Math.abs(c);const _=Math.pow(x,2)/Math.pow(a,2)+Math.pow(v,2)/Math.pow(c,2);_>1&&(a*=Math.sqrt(_),c*=Math.sqrt(_)),Lb(t,e,s,o,a,c,d,p,f,g,x,v,ph);let{ang1:b,ang2:w}=ph;const{centerX:C,centerY:A}=ph;let T=Math.abs(w)/(Eo/4);Math.abs(1-T)<1e-7&&(T=1);const k=Math.max(Math.ceil(T),1);w/=k;let L=n[n.length-2],R=n[n.length-1];const F={x:0,y:0};for(let q=0;q<k;q++){const $=Fb(b,w),{x:N,y:V}=mh($[0],a,c,g,f,C,A,F),{x:rt,y:ct}=mh($[1],a,c,g,f,C,A,F),{x:lt,y:kt}=mh($[2],a,c,g,f,C,A,F);z0(n,L,R,N,V,rt,ct,lt,kt),L=lt,R=kt,b+=w}}function Bb(n,t,e){const s=(c,u)=>{const d=u.x-c.x,p=u.y-c.y,f=Math.sqrt(d*d+p*p),g=d/f,x=p/f;return{len:f,nx:g,ny:x}},o=(c,u)=>{c===0?n.moveTo(u.x,u.y):n.lineTo(u.x,u.y)};let a=t[t.length-1];for(let c=0;c<t.length;c++){const u=t[c%t.length],d=u.radius??e;if(d<=0){o(c,u),a=u;continue}const p=t[(c+1)%t.length],f=s(u,a),g=s(u,p);if(f.len<1e-4||g.len<1e-4){o(c,u),a=u;continue}let x=Math.asin(f.nx*g.ny-f.ny*g.nx),v=1,_=!1;f.nx*g.nx-f.ny*-g.ny<0?x<0?x=Math.PI+x:(x=Math.PI-x,v=-1,_=!0):x>0&&(v=-1,_=!0);const b=x/2;let w,C=Math.abs(Math.cos(b)*d/Math.sin(b));C>Math.min(f.len/2,g.len/2)?(C=Math.min(f.len/2,g.len/2),w=Math.abs(C*Math.sin(b)/Math.cos(b))):w=d;const A=u.x+g.nx*C+-g.ny*w*v,T=u.y+g.ny*C+g.nx*w*v,k=Math.atan2(f.ny,f.nx)+Math.PI/2*v,L=Math.atan2(g.ny,g.nx)-Math.PI/2*v;c===0&&n.moveTo(A+Math.cos(k)*w,T+Math.sin(k)*w),n.arc(A,T,w,k,L,_),a=u}}function Ob(n,t,e,s){const o=(u,d)=>Math.sqrt((u.x-d.x)**2+(u.y-d.y)**2),a=(u,d,p)=>({x:u.x+(d.x-u.x)*p,y:u.y+(d.y-u.y)*p}),c=t.length;for(let u=0;u<c;u++){const d=t[(u+1)%c],p=d.radius??e;if(p<=0){u===0?n.moveTo(d.x,d.y):n.lineTo(d.x,d.y);continue}const f=t[u],g=t[(u+2)%c],x=o(f,d);let v;if(x<1e-4)v=d;else{const w=Math.min(x/2,p);v=a(d,f,w/x)}const _=o(g,d);let b;if(_<1e-4)b=d;else{const w=Math.min(_/2,p);b=a(d,g,w/_)}u===0?n.moveTo(v.x,v.y):n.lineTo(v.x,v.y),n.quadraticCurveTo(d.x,d.y,b.x,b.y,s)}}const zb=new oe;class Db{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Vn,this._graphicsPath2D=t,this.signed=t.checkForHoles}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();const s=this._currentPoly.points,o=s[s.length-2],a=s[s.length-1];return(o!==t||a!==e)&&s.push(t,e),this}arc(t,e,s,o,a,c){this._ensurePoly(!1);const u=this._currentPoly.points;return D0(u,t,e,s,o,a,c),this}arcTo(t,e,s,o,a){this._ensurePoly();const c=this._currentPoly.points;return Rb(c,t,e,s,o,a),this}arcToSvg(t,e,s,o,a,c,u){const d=this._currentPoly.points;return Nb(d,this._currentPoly.lastX,this._currentPoly.lastY,c,u,t,e,s,o,a),this}bezierCurveTo(t,e,s,o,a,c,u){this._ensurePoly();const d=this._currentPoly;return z0(this._currentPoly.points,d.lastX,d.lastY,t,e,s,o,a,c,u),this}quadraticCurveTo(t,e,s,o,a){this._ensurePoly();const c=this._currentPoly;return Eb(this._currentPoly.points,c.lastX,c.lastY,t,e,s,o,a),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0),t.transform(e));const s=this.shapePrimitives,o=s.length;for(let a=0;a<t.instructions.length;a++){const c=t.instructions[a];this[c.action](...c.data)}if(t.checkForHoles&&s.length-o>1){let a=null;for(let c=o;c<s.length;c++){const u=s[c];if(u.shape.type==="polygon"){const d=u.shape,p=a?.shape;p&&p.containsPolygon(d)?(a.holes||(a.holes=[]),a.holes.push(u),s.copyWithin(c,c+1),s.length--,c--):a=u}}}return this}finish(t=!1){this.endPoly(t)}rect(t,e,s,o,a){return this.drawShape(new oe(t,e,s,o),a),this}circle(t,e,s,o){return this.drawShape(new yd(t,e,s),o),this}poly(t,e,s){const o=new To(t);return o.closePath=e,this.drawShape(o,s),this}regularPoly(t,e,s,o,a=0,c){o=Math.max(o|0,3);const u=-1*Math.PI/2+a,d=Math.PI*2/o,p=[];for(let f=0;f<o;f++){const g=u-f*d;p.push(t+s*Math.cos(g),e+s*Math.sin(g))}return this.poly(p,!0,c),this}roundPoly(t,e,s,o,a,c=0,u){if(o=Math.max(o|0,3),a<=0)return this.regularPoly(t,e,s,o,c);const d=s*Math.sin(Math.PI/o)-.001;a=Math.min(a,d);const p=-1*Math.PI/2+c,f=Math.PI*2/o,g=(o-2)*Math.PI/o/2;for(let x=0;x<o;x++){const v=x*f+p,_=t+s*Math.cos(v),b=e+s*Math.sin(v),w=v+Math.PI+g,C=v-Math.PI-g,A=_+a*Math.cos(w),T=b+a*Math.sin(w),k=_+a*Math.cos(C),L=b+a*Math.sin(C);x===0?this.moveTo(A,T):this.lineTo(A,T),this.quadraticCurveTo(_,b,k,L,u)}return this.closePath()}roundShape(t,e,s=!1,o){return t.length<3?this:(s?Ob(this,t,e,o):Bb(this,t,e),this.closePath())}filletRect(t,e,s,o,a){if(a===0)return this.rect(t,e,s,o);const c=Math.min(s,o)/2,u=Math.min(c,Math.max(-c,a)),d=t+s,p=e+o,f=u<0?-u:0,g=Math.abs(u);return this.moveTo(t,e+g).arcTo(t+f,e+f,t+g,e,g).lineTo(d-g,e).arcTo(d-f,e+f,d,e+g,g).lineTo(d,p-g).arcTo(d-f,p-f,t+s-g,p,g).lineTo(t+g,p).arcTo(t+f,p-f,t,p-g,g).closePath()}chamferRect(t,e,s,o,a,c){if(a<=0)return this.rect(t,e,s,o);const u=Math.min(a,Math.min(s,o)/2),d=t+s,p=e+o,f=[t+u,e,d-u,e,d,e+u,d,p-u,d-u,p,t+u,p,t,p-u,t,e+u];for(let g=f.length-1;g>=2;g-=2)f[g]===f[g-2]&&f[g-1]===f[g-3]&&f.splice(g-1,2);return this.poly(f,!0,c)}ellipse(t,e,s,o,a){return this.drawShape(new xd(t,e,s,o),a),this}roundRect(t,e,s,o,a,c){return this.drawShape(new vd(t,e,s,o,a),c),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let s=this._currentPoly;return s&&this.endPoly(),s=new To,s.points.push(t,e),this._currentPoly=s,this}endPoly(t=!1){const e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new To,t)){const e=this.shapePrimitives[this.shapePrimitives.length-1];if(e){let s=e.shape.x,o=e.shape.y;if(e.transform&&!e.transform.isIdentity()){const a=e.transform,c=s;s=a.a*s+a.c*o+a.tx,o=a.b*c+a.d*o+a.ty}this._currentPoly.points.push(s,o)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){const s=t.instructions[e];this[s.action](...s.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const e=this.shapePrimitives;for(let s=0;s<e.length;s++){const o=e[s],a=o.shape.getBounds(zb);o.transform?t.addRect(a,o.transform):t.addRect(a)}return t}}class Mr{constructor(t,e=!1){this.instructions=[],this.uid=ge("graphicsPath"),this._dirty=!0,this.checkForHoles=e,typeof t=="string"?lS(t,this):this.instructions=t?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new Db(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,e,s,o,a){const c=this.instructions[this.instructions.length-1],u=this.getLastPoint(Ge.shared);let d=0,p=0;if(!c||c.action!=="bezierCurveTo")d=u.x,p=u.y;else{d=c.data[2],p=c.data[3];const f=u.x,g=u.y;d=f+(f-d),p=g+(g-p)}return this.instructions.push({action:"bezierCurveTo",data:[d,p,t,e,s,o,a]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,e,s){const o=this.instructions[this.instructions.length-1],a=this.getLastPoint(Ge.shared);let c=0,u=0;if(!o||o.action!=="quadraticCurveTo")c=a.x,u=a.y;else{c=o.data[0],u=o.data[1];const d=a.x,p=a.y;c=d+(d-c),u=p+(p-u)}return this.instructions.push({action:"quadraticCurveTo",data:[c,u,t,e,s]}),this._dirty=!0,this}rect(t,e,s,o,a){return this.instructions.push({action:"rect",data:[t,e,s,o,a]}),this._dirty=!0,this}circle(t,e,s,o){return this.instructions.push({action:"circle",data:[t,e,s,o]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,e,s,o,a,c,u){a||(a=o/2);const d=-1*Math.PI/2+c,p=s*2,f=Math.PI*2/p,g=[];for(let x=0;x<p;x++){const v=x%2?a:o,_=x*f+d;g.push(t+v*Math.cos(_),e+v*Math.sin(_))}return this.poly(g,!0,u),this}clone(t=!1){const e=new Mr;if(e.checkForHoles=this.checkForHoles,!t)e.instructions=this.instructions.slice();else for(let s=0;s<this.instructions.length;s++){const o=this.instructions[s];e.instructions.push({action:o.action,data:o.data.slice()})}return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const e=t.a,s=t.b,o=t.c,a=t.d,c=t.tx,u=t.ty;let d=0,p=0,f=0,g=0,x=0,v=0,_=0,b=0;for(let w=0;w<this.instructions.length;w++){const C=this.instructions[w],A=C.data;switch(C.action){case"moveTo":case"lineTo":d=A[0],p=A[1],A[0]=e*d+o*p+c,A[1]=s*d+a*p+u;break;case"bezierCurveTo":f=A[0],g=A[1],x=A[2],v=A[3],d=A[4],p=A[5],A[0]=e*f+o*g+c,A[1]=s*f+a*g+u,A[2]=e*x+o*v+c,A[3]=s*x+a*v+u,A[4]=e*d+o*p+c,A[5]=s*d+a*p+u;break;case"quadraticCurveTo":f=A[0],g=A[1],d=A[2],p=A[3],A[0]=e*f+o*g+c,A[1]=s*f+a*g+u,A[2]=e*d+o*p+c,A[3]=s*d+a*p+u;break;case"arcToSvg":d=A[5],p=A[6],_=A[0],b=A[1],A[0]=e*_+o*b,A[1]=s*_+a*b,A[5]=e*d+o*p+c,A[6]=s*d+a*p+u;break;case"circle":A[4]=vo(A[3],t);break;case"rect":A[4]=vo(A[4],t);break;case"ellipse":A[8]=vo(A[8],t);break;case"roundRect":A[5]=vo(A[5],t);break;case"addPath":A[0].transform(t);break;case"poly":A[2]=vo(A[2],t);break;default:ie("unknown transform action",C.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,s=this.instructions[e];if(!s)return t.x=0,t.y=0,t;for(;s.action==="closePath";){if(e--,e<0)return t.x=0,t.y=0,t;s=this.instructions[e]}switch(s.action){case"moveTo":case"lineTo":t.x=s.data[0],t.y=s.data[1];break;case"quadraticCurveTo":t.x=s.data[2],t.y=s.data[3];break;case"bezierCurveTo":t.x=s.data[4],t.y=s.data[5];break;case"arc":case"arcToSvg":t.x=s.data[5],t.y=s.data[6];break;case"addPath":s.data[0].getLastPoint(t);break}return t}}function vo(n,t){return n?n.prepend(t):t.clone()}function me(n,t,e){const s=n.getAttribute(t);return s?Number(s):e}function jb(n,t){const e=n.querySelectorAll("defs");for(let s=0;s<e.length;s++){const o=e[s];for(let a=0;a<o.children.length;a++){const c=o.children[a];switch(c.nodeName.toLowerCase()){case"lineargradient":t.defs[c.id]=Gb(c);break;case"radialgradient":t.defs[c.id]=Ub();break}}}}function Gb(n){const t=me(n,"x1",0),e=me(n,"y1",0),s=me(n,"x2",1),o=me(n,"y2",0),a=n.getAttribute("gradientUnits")||"objectBoundingBox",c=new Er(t,e,s,o,a==="objectBoundingBox"?"local":"global");for(let u=0;u<n.children.length;u++){const d=n.children[u],p=me(d,"offset",0),f=_e.shared.setValue(d.getAttribute("stop-color")).toNumber();c.addColorStop(p,f)}return c}function Ub(n){return ie("[SVG Parser] Radial gradients are not yet supported"),new Er(0,0,1,0)}function Cg(n){const t=n.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return t?t[1]:""}const Ag={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function j0(n,t){const e=n.getAttribute("style"),s={},o={},a={strokeStyle:s,fillStyle:o,useFill:!1,useStroke:!1};for(const c in Ag){const u=n.getAttribute(c);u&&Pg(t,a,c,u.trim())}if(e){const c=e.split(";");for(let u=0;u<c.length;u++){const d=c[u].trim(),[p,f]=d.split(":");Ag[p]&&Pg(t,a,p,f.trim())}}return{strokeStyle:a.useStroke?s:null,fillStyle:a.useFill?o:null,useFill:a.useFill,useStroke:a.useStroke}}function Pg(n,t,e,s){switch(e){case"stroke":if(s!=="none"){if(s.startsWith("url(")){const o=Cg(s);t.strokeStyle.fill=n.defs[o]}else t.strokeStyle.color=_e.shared.setValue(s).toNumber();t.useStroke=!0}break;case"stroke-width":t.strokeStyle.width=Number(s);break;case"fill":if(s!=="none"){if(s.startsWith("url(")){const o=Cg(s);t.fillStyle.fill=n.defs[o]}else t.fillStyle.color=_e.shared.setValue(s).toNumber();t.useFill=!0}break;case"fill-opacity":t.fillStyle.alpha=Number(s);break;case"stroke-opacity":t.strokeStyle.alpha=Number(s);break;case"opacity":t.fillStyle.alpha=Number(s),t.strokeStyle.alpha=Number(s);break}}function $b(n){if(n.length<=2)return!0;const t=n.map(u=>u.area).sort((u,d)=>d-u),[e,s]=t,o=t[t.length-1],a=e/s,c=s/o;return!(a>3&&c<2)}function Wb(n){return n.split(/(?=[Mm])/).filter(s=>s.trim().length>0)}function Vb(n){const t=n.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!t||t.length<4)return 0;const e=t.map(Number),s=[],o=[];for(let f=0;f<e.length;f+=2)f+1<e.length&&(s.push(e[f]),o.push(e[f+1]));if(s.length===0||o.length===0)return 0;const a=Math.min(...s),c=Math.max(...s),u=Math.min(...o),d=Math.max(...o);return(c-a)*(d-u)}function Tg(n,t){const e=new Mr(n,!1);for(const s of e.instructions)t.instructions.push(s)}function Hb(n,t){if(typeof n=="string"){const c=document.createElement("div");c.innerHTML=n.trim(),n=c.querySelector("svg")}const e={context:t,defs:{},path:new Mr};jb(n,e);const s=n.children,{fillStyle:o,strokeStyle:a}=j0(n,e);for(let c=0;c<s.length;c++){const u=s[c];u.nodeName.toLowerCase()!=="defs"&&G0(u,e,o,a)}return t}function G0(n,t,e,s){const o=n.children,{fillStyle:a,strokeStyle:c}=j0(n,t);a&&e?e={...e,...a}:a&&(e=a),c&&s?s={...s,...c}:c&&(s=c);const u=!e&&!s;u&&(e={color:0});let d,p,f,g,x,v,_,b,w,C,A,T,k,L,R,F,q;switch(n.nodeName.toLowerCase()){case"path":{L=n.getAttribute("d");const $=n.getAttribute("fill-rule"),N=Wb(L),V=$==="evenodd",rt=N.length>1;if(V&&rt){const lt=N.map(Q=>({path:Q,area:Vb(Q)}));if(lt.sort((Q,K)=>K.area-Q.area),N.length>3||!$b(lt))for(let Q=0;Q<lt.length;Q++){const K=lt[Q],J=Q===0;t.context.beginPath();const X=new Mr(void 0,!0);Tg(K.path,X),t.context.path(X),J?(e&&t.context.fill(e),s&&t.context.stroke(s)):t.context.cut()}else for(let Q=0;Q<lt.length;Q++){const K=lt[Q],J=Q%2===1;t.context.beginPath();const X=new Mr(void 0,!0);Tg(K.path,X),t.context.path(X),J?t.context.cut():(e&&t.context.fill(e),s&&t.context.stroke(s))}}else{const lt=$?$==="evenodd":!0;R=new Mr(L,lt),t.context.path(R),e&&t.context.fill(e),s&&t.context.stroke(s)}break}case"circle":_=me(n,"cx",0),b=me(n,"cy",0),w=me(n,"r",0),t.context.ellipse(_,b,w,w),e&&t.context.fill(e),s&&t.context.stroke(s);break;case"rect":d=me(n,"x",0),p=me(n,"y",0),F=me(n,"width",0),q=me(n,"height",0),C=me(n,"rx",0),A=me(n,"ry",0),C||A?t.context.roundRect(d,p,F,q,C||A):t.context.rect(d,p,F,q),e&&t.context.fill(e),s&&t.context.stroke(s);break;case"ellipse":_=me(n,"cx",0),b=me(n,"cy",0),C=me(n,"rx",0),A=me(n,"ry",0),t.context.beginPath(),t.context.ellipse(_,b,C,A),e&&t.context.fill(e),s&&t.context.stroke(s);break;case"line":f=me(n,"x1",0),g=me(n,"y1",0),x=me(n,"x2",0),v=me(n,"y2",0),t.context.beginPath(),t.context.moveTo(f,g),t.context.lineTo(x,v),s&&t.context.stroke(s);break;case"polygon":k=n.getAttribute("points"),T=k.match(/\d+/g).map($=>parseInt($,10)),t.context.poly(T,!0),e&&t.context.fill(e),s&&t.context.stroke(s);break;case"polyline":k=n.getAttribute("points"),T=k.match(/\d+/g).map($=>parseInt($,10)),t.context.poly(T,!1),s&&t.context.stroke(s);break;case"g":case"svg":break;default:{ie(`[SVG parser] <${n.nodeName}> elements unsupported`);break}}u&&(e=null);for(let $=0;$<o.length;$++)G0(o[$],t,e,s)}function Yb(n){return _e.isColorLike(n)}function Mg(n){return n instanceof $l}function Eg(n){return n instanceof Er}function Xb(n){return n instanceof Ot}function qb(n,t,e){const s=_e.shared.setValue(t??0);return n.color=s.toNumber(),n.alpha=s.alpha===1?e.alpha:s.alpha,n.texture=Ot.WHITE,{...e,...n}}function Qb(n,t,e){return n.texture=t,{...e,...n}}function Ig(n,t,e){return n.fill=t,n.color=16777215,n.texture=t.texture,n.matrix=t.transform,{...e,...n}}function Rg(n,t,e){return t.buildGradient(),n.fill=t,n.color=16777215,n.texture=t.texture,n.matrix=t.transform,n.textureSpace=t.textureSpace,{...e,...n}}function Kb(n,t){const e={...t,...n},s=_e.shared.setValue(e.color);return e.alpha*=s.alpha,e.color=s.toNumber(),e}function Ms(n,t){if(n==null)return null;const e={},s=n;return Yb(n)?qb(e,n,t):Xb(n)?Qb(e,n,t):Mg(n)?Ig(e,n,t):Eg(n)?Rg(e,n,t):s.fill&&Mg(s.fill)?Ig(s,s.fill,t):s.fill&&Eg(s.fill)?Rg(s,s.fill,t):Kb(s,t)}function Rl(n,t){const{width:e,alignment:s,miterLimit:o,cap:a,join:c,pixelLine:u,...d}=t,p=Ms(n,d);return p?{width:e,alignment:s,miterLimit:o,cap:a,join:c,pixelLine:u,...p}:null}const Zb=new Ge,Fg=new Lt,_d=class ar extends Yn{constructor(){super(...arguments),this.uid=ge("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new Mr,this._transform=new Lt,this._fillStyle={...ar.defaultFillStyle},this._strokeStyle={...ar.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Vn,this._boundsDirty=!0}clone(){const t=new ar;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=Ms(t,ar.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=Rl(t,ar.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=Ms(t,ar.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=Ms(t,ar.defaultStrokeStyle),this}texture(t,e,s,o,a,c){return this.instructions.push({action:"texture",data:{image:t,dx:s||0,dy:o||0,dw:a||t.frame.width,dh:c||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?_e.shared.setValue(e).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Mr,this}fill(t,e){let s;const o=this.instructions[this.instructions.length-1];return this._tick===0&&o?.action==="stroke"?s=o.data.path:s=this._activePath.clone(),s?(t!=null&&(e!==void 0&&typeof t=="number"&&(Et(Ut,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:e}),this._fillStyle=Ms(t,ar.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:e}=this._activePath.getLastPoint(Ge.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(t){let e;const s=this.instructions[this.instructions.length-1];return this._tick===0&&s?.action==="fill"?e=s.data.path:e=this._activePath.clone(),e?(t!=null&&(this._strokeStyle=Rl(t,ar.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:e}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const e=this.instructions[this.instructions.length-1-t],s=this._activePath.clone();if(e&&(e.action==="stroke"||e.action==="fill"))if(e.data.hole)e.data.hole.addPath(s);else{e.data.hole=s;break}}return this._initNextPathLocation(),this}arc(t,e,s,o,a,c){this._tick++;const u=this._transform;return this._activePath.arc(u.a*t+u.c*e+u.tx,u.b*t+u.d*e+u.ty,s,o,a,c),this}arcTo(t,e,s,o,a){this._tick++;const c=this._transform;return this._activePath.arcTo(c.a*t+c.c*e+c.tx,c.b*t+c.d*e+c.ty,c.a*s+c.c*o+c.tx,c.b*s+c.d*o+c.ty,a),this}arcToSvg(t,e,s,o,a,c,u){this._tick++;const d=this._transform;return this._activePath.arcToSvg(t,e,s,o,a,d.a*c+d.c*u+d.tx,d.b*c+d.d*u+d.ty),this}bezierCurveTo(t,e,s,o,a,c,u){this._tick++;const d=this._transform;return this._activePath.bezierCurveTo(d.a*t+d.c*e+d.tx,d.b*t+d.d*e+d.ty,d.a*s+d.c*o+d.tx,d.b*s+d.d*o+d.ty,d.a*a+d.c*c+d.tx,d.b*a+d.d*c+d.ty,u),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(t,e,s,o){return this._tick++,this._activePath.ellipse(t,e,s,o,this._transform.clone()),this}circle(t,e,s){return this._tick++,this._activePath.circle(t,e,s,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;const s=this._transform;return this._activePath.lineTo(s.a*t+s.c*e+s.tx,s.b*t+s.d*e+s.ty),this}moveTo(t,e){this._tick++;const s=this._transform,o=this._activePath.instructions,a=s.a*t+s.c*e+s.tx,c=s.b*t+s.d*e+s.ty;return o.length===1&&o[0].action==="moveTo"?(o[0].data[0]=a,o[0].data[1]=c,this):(this._activePath.moveTo(a,c),this)}quadraticCurveTo(t,e,s,o,a){this._tick++;const c=this._transform;return this._activePath.quadraticCurveTo(c.a*t+c.c*e+c.tx,c.b*t+c.d*e+c.ty,c.a*s+c.c*o+c.tx,c.b*s+c.d*o+c.ty,a),this}rect(t,e,s,o){return this._tick++,this._activePath.rect(t,e,s,o,this._transform.clone()),this}roundRect(t,e,s,o,a){return this._tick++,this._activePath.roundRect(t,e,s,o,a,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,s,o,a=0,c){return this._tick++,this._activePath.regularPoly(t,e,s,o,a,c),this}roundPoly(t,e,s,o,a,c){return this._tick++,this._activePath.roundPoly(t,e,s,o,a,c),this}roundShape(t,e,s,o){return this._tick++,this._activePath.roundShape(t,e,s,o),this}filletRect(t,e,s,o,a){return this._tick++,this._activePath.filletRect(t,e,s,o,a),this}chamferRect(t,e,s,o,a,c){return this._tick++,this._activePath.chamferRect(t,e,s,o,a,c),this}star(t,e,s,o,a=0,c=0){return this._tick++,this._activePath.star(t,e,s,o,a,c,this._transform.clone()),this}svg(t){return this._tick++,Hb(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,e=t){return this._transform.scale(t,e),this}setTransform(t,e,s,o,a,c){return t instanceof Lt?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,e,s,o,a,c),this)}transform(t,e,s,o,a,c){return t instanceof Lt?(this._transform.append(t),this):(Fg.set(t,e,s,o,a,c),this._transform.append(Fg),this)}translate(t,e=t){return this._transform.translate(t,e),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const t=this._bounds;t.clear();for(let e=0;e<this.instructions.length;e++){const s=this.instructions[e],o=s.action;if(o==="fill"){const a=s.data;t.addBounds(a.path.bounds)}else if(o==="texture"){const a=s.data;t.addFrame(a.dx,a.dy,a.dx+a.dw,a.dy+a.dh,a.transform)}if(o==="stroke"){const a=s.data,c=a.style.alignment,u=a.style.width*(1-c),d=a.path.bounds;t.addFrame(d.minX-u,d.minY-u,d.maxX+u,d.maxY+u)}}return t}containsPoint(t){if(!this.bounds.containsPoint(t.x,t.y))return!1;const e=this.instructions;let s=!1;for(let o=0;o<e.length;o++){const a=e[o],c=a.data,u=c.path;if(!a.action||!u)continue;const d=c.style,p=u.shapePath.shapePrimitives;for(let f=0;f<p.length;f++){const g=p[f].shape;if(!d||!g)continue;const x=p[f].transform,v=x?x.applyInverse(t,Zb):t;if(a.action==="fill")s=g.contains(v.x,v.y);else{const b=d;s=g.strokeContains(v.x,v.y,b.width,b.alignment)}const _=c.hole;if(_){const b=_.shapePath?.shapePrimitives;if(b)for(let w=0;w<b.length;w++)b[w].shape.contains(v.x,v.y)&&(s=!1)}if(s)return!0}}return s}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t?.texture){const s=typeof t=="boolean"?t:t?.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(s)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(s))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};_d.defaultFillStyle={color:16777215,alpha:1,texture:Ot.WHITE,matrix:null,fill:null,textureSpace:"local"};_d.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Ot.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let Pn=_d;const Sd=class oi extends Yn{constructor(t={}){super(),this.uid=ge("textStyle"),this._tick=0,Jb(t);const e={...oi.defaultTextStyle,...t};for(const s in e){const o=s;this[o]=e[s]}this.update(),this._tick=0}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.update())}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(t!==null&&typeof t=="object"?this._dropShadow=this._createProxy({...oi.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...oi.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily!==t&&(this._fontFamily=t,this.update())}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.update())}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.update())}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.update())}get filters(){return this._filters}set filters(t){this._filters!==t&&(this._filters=Object.freeze(t),this.update())}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.update())}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...Pn.defaultFillStyle,...t},()=>{this._fill=Ms({...this._originalFill},Pn.defaultFillStyle)})),this._fill=Ms(t===0?"black":t,Pn.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...Pn.defaultStrokeStyle,...t},()=>{this._stroke=Rl({...this._originalStroke},Pn.defaultStrokeStyle)})),this._stroke=Rl(t,Pn.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const t=oi.defaultTextStyle;for(const e in t)this[e]=t[e]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new oi({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let t=0;if(this._filters)for(let e=0;e<this._filters.length;e++)t+=this._filters[e].padding;return Math.max(this._padding,t)}destroy(t=!1){if(this.removeAllListeners(),typeof t=="boolean"?t:t?.texture){const s=typeof t=="boolean"?t:t?.textureSource;this._fill?.texture&&this._fill.texture.destroy(s),this._originalFill?.texture&&this._originalFill.texture.destroy(s),this._stroke?.texture&&this._stroke.texture.destroy(s),this._originalStroke?.texture&&this._originalStroke.texture.destroy(s)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,e){return new Proxy(t,{set:(s,o,a)=>(s[o]===a||(s[o]=a,e?.(o,a),this.update()),!0)})}_isFillStyle(t){return(t??null)!==null&&!(_e.isColorLike(t)||t instanceof Er||t instanceof $l)}};Sd.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};Sd.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let ns=Sd;function Jb(n){const t=n;if(typeof t.dropShadow=="boolean"&&t.dropShadow){const e=ns.defaultDropShadow;n.dropShadow={alpha:t.dropShadowAlpha??e.alpha,angle:t.dropShadowAngle??e.angle,blur:t.dropShadowBlur??e.blur,color:t.dropShadowColor??e.color,distance:t.dropShadowDistance??e.distance}}if(t.strokeThickness!==void 0){Et(Ut,"strokeThickness is now a part of stroke");const e=t.stroke;let s={};if(_e.isColorLike(e))s.color=e;else if(e instanceof Er||e instanceof $l)s.fill=e;else if(Object.hasOwnProperty.call(e,"color")||Object.hasOwnProperty.call(e,"fill"))s=e;else throw new Error("Invalid stroke value.");n.stroke={...s,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){if(Et(Ut,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(t.fill)||t.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");t.fill.length!==t.fillGradientStops.length&&ie("The number of fill colors must match the number of fill gradient stops.");const e=new Er({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),s=t.fillGradientStops.slice(),o=t.fill.map(a=>_e.shared.setValue(a).toNumber());s.forEach((a,c)=>{e.addColorStop(a,o[c])}),n.fill={fill:e}}}class tk{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,e){const s=Jt.get().createCanvas();s.width=t,s.height=e;const o=s.getContext("2d");return{canvas:s,context:o}}getOptimalCanvasAndContext(t,e,s=1){t=Math.ceil(t*s-1e-6),e=Math.ceil(e*s-1e-6),t=yi(t),e=yi(e);const o=(t<<17)+(e<<1);this._canvasPool[o]||(this._canvasPool[o]=[]);let a=this._canvasPool[o].pop();return a||(a=this._createCanvasAndContext(t,e)),a}returnCanvasAndContext(t){const e=t.canvas,{width:s,height:o}=e,a=(s<<17)+(o<<1);t.context.resetTransform(),t.context.clearRect(0,0,s,o),this._canvasPool[a].push(t)}clear(){this._canvasPool={}}}const zo=new tk;Vo.register(zo);const Lg=1e5;function Fl(n,t,e,s=0){if(n.texture===Ot.WHITE&&!n.fill)return _e.shared.setValue(n.color).setAlpha(n.alpha??1).toHexa();if(n.fill){if(n.fill instanceof $l){const o=n.fill,a=t.createPattern(o.texture.source.resource,"repeat"),c=o.transform.copyTo(Lt.shared);return c.scale(o.texture.frame.width,o.texture.frame.height),a.setTransform(c),a}else if(n.fill instanceof Er){const o=n.fill,a=o.type==="linear",c=o.textureSpace==="local";let u=1,d=1;c&&e&&(u=e.width+s,d=e.height+s);let p,f=!1;if(a){const{start:g,end:x}=o;p=t.createLinearGradient(g.x*u,g.y*d,x.x*u,x.y*d),f=Math.abs(x.x-g.x)<Math.abs((x.y-g.y)*.1)}else{const{center:g,innerRadius:x,outerCenter:v,outerRadius:_}=o;p=t.createRadialGradient(g.x*u,g.y*d,x*u,v.x*u,v.y*d,_*u)}if(f&&c&&e){const g=e.lineHeight/d;for(let x=0;x<e.lines.length;x++){const v=(x*e.lineHeight+s/2)/d;o.colorStops.forEach(_=>{const b=v+_.offset*g;p.addColorStop(Math.floor(b*Lg)/Lg,_e.shared.setValue(_.color).toHex())})}}else o.colorStops.forEach(g=>{p.addColorStop(g.offset,_e.shared.setValue(g.color).toHex())});return p}}else{const o=t.createPattern(n.texture.source.resource,"repeat"),a=n.matrix.copyTo(Lt.shared);return a.scale(n.texture.frame.width,n.texture.frame.height),o.setTransform(a),o}return ie("FillStyle not recognised",n),"red"}const U0=class $0 extends b0{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const e={...$0.defaultOptions,...t};this._textureSize=e.textureSize,this._mipmap=e.mipmap;const s=e.style.clone();e.overrideFill&&(s._fill.color=16777215,s._fill.alpha=1,s._fill.texture=Ot.WHITE,s._fill.fill=null),this.applyFillAsTint=e.overrideFill;const o=s.fontSize;s.fontSize=this.baseMeasurementFontSize;const a=El(s);e.overrideSize?s._stroke&&(s._stroke.width*=this.baseRenderedFontSize/o):s.fontSize=this.baseRenderedFontSize=o,this._style=s,this._skipKerning=e.skipKerning??!1,this.resolution=e.resolution??1,this._padding=e.padding??4,e.textureStyle&&(this._textureStyle=e.textureStyle instanceof xi?e.textureStyle:new xi(e.textureStyle)),this.fontMetrics=cr.measureFont(a),this.lineHeight=s.lineHeight||this.fontMetrics.fontSize||s.fontSize}ensureCharacters(t){const e=cr.graphemeSegmenter(t).filter(w=>!this._currentChars.includes(w)).filter((w,C,A)=>A.indexOf(w)===C);if(!e.length)return;this._currentChars=[...this._currentChars,...e];let s;this._currentPageIndex===-1?s=this._nextPage():s=this.pages[this._currentPageIndex];let{canvas:o,context:a}=s.canvasAndContext,c=s.texture.source;const u=this._style;let d=this._currentX,p=this._currentY,f=this._currentMaxCharHeight;const g=this.baseRenderedFontSize/this.baseMeasurementFontSize,x=this._padding*g;let v=!1;const _=o.width/this.resolution,b=o.height/this.resolution;for(let w=0;w<e.length;w++){const C=e[w],A=cr.measureText(C,u,o,!1);A.lineHeight=A.height;const T=A.width*g,k=Math.ceil((u.fontStyle==="italic"?2:1)*T),L=A.height*g,R=k+x*2,F=L+x*2;if(v=!1,C!==`
`&&C!=="\r"&&C!=="	"&&C!==" "&&(v=!0,f=Math.ceil(Math.max(F,f))),d+R>_&&(p+=f,f=F,d=0,p+f>b)){c.update();const $=this._nextPage();o=$.canvasAndContext.canvas,a=$.canvasAndContext.context,c=$.texture.source,d=0,p=0,f=0}const q=T/g-(u.dropShadow?.distance??0)-(u._stroke?.width??0);if(this.chars[C]={id:C.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:q,kerning:{}},v){this._drawGlyph(a,A,d+x,p+x,g,u);const $=c.width*g,N=c.height*g,V=new oe(d/$*c.width,p/N*c.height,R/$*c.width,F/N*c.height);this.chars[C].texture=new Ot({source:c,frame:V}),d+=Math.ceil(R)}}c.update(),this._currentX=d,this._currentY=p,this._currentMaxCharHeight=f,this._skipKerning&&this._applyKerning(e,a)}get pageTextures(){return Et(Ut,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,e){const s=this._measureCache;for(let o=0;o<t.length;o++){const a=t[o];for(let c=0;c<this._currentChars.length;c++){const u=this._currentChars[c];let d=s[a];d||(d=s[a]=e.measureText(a).width);let p=s[u];p||(p=s[u]=e.measureText(u).width);let f=e.measureText(a+u).width,g=f-(d+p);g&&(this.chars[a].kerning[u]=g),f=e.measureText(a+u).width,g=f-(d+p),g&&(this.chars[u].kerning[a]=g)}}}_nextPage(){this._currentPageIndex++;const t=this.resolution,e=zo.getOptimalCanvasAndContext(this._textureSize,this._textureSize,t);this._setupContext(e.context,this._style,t);const s=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),o=new Ot({source:new Rs({resource:e.canvas,resolution:s,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(o.source.style=this._textureStyle);const a={canvasAndContext:e,texture:o};return this.pages[this._currentPageIndex]=a,a}_setupContext(t,e,s){e.fontSize=this.baseRenderedFontSize,t.scale(s,s),t.font=El(e),e.fontSize=this.baseMeasurementFontSize,t.textBaseline=e.textBaseline;const o=e._stroke,a=o?.width??0;if(o&&(t.lineWidth=a,t.lineJoin=o.join,t.miterLimit=o.miterLimit,t.strokeStyle=Fl(o,t)),e._fill&&(t.fillStyle=Fl(e._fill,t)),e.dropShadow){const c=e.dropShadow,u=_e.shared.setValue(c.color).toArray(),d=c.blur*s,p=c.distance*s;t.shadowColor=`rgba(${u[0]*255},${u[1]*255},${u[2]*255},${c.alpha})`,t.shadowBlur=d,t.shadowOffsetX=Math.cos(c.angle)*p,t.shadowOffsetY=Math.sin(c.angle)*p}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,e,s,o,a,c){const u=e.text,d=e.fontProperties,f=(c._stroke?.width??0)*a,g=s+f/2,x=o-f/2,v=d.descent*a,_=e.lineHeight*a;let b=!1;c.stroke&&f&&(b=!0,t.strokeText(u,g,x+_-v));const{shadowBlur:w,shadowOffsetX:C,shadowOffsetY:A}=t;c._fill&&(b&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.fillText(u,g,x+_-v)),b&&(t.shadowBlur=w,t.shadowOffsetX=C,t.shadowOffsetY=A)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{canvasAndContext:e,texture:s}=this.pages[t];zo.returnCanvasAndContext(e),s.destroy(!0)}this.pages=null}};U0.defaultOptions={textureSize:512,style:new ns,mipmap:!0};let Ng=U0;function ek(n,t,e,s){const o={width:0,height:0,offsetY:0,scale:t.fontSize/e.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};o.offsetY=e.baseLineOffset;let a=o.lines[0],c=null,u=!0;const d={width:0,start:0,index:0,positions:[],chars:[]},p=e.baseMeasurementFontSize/t.fontSize,f=t.letterSpacing*p,g=t.wordWrapWidth*p,x=t.lineHeight?t.lineHeight*p:e.lineHeight,v=t.wordWrap&&t.breakWords,_=C=>{const A=a.width;for(let T=0;T<d.index;T++){const k=C.positions[T];a.chars.push(C.chars[T]),a.charPositions.push(k+A)}a.width+=C.width,u=!1,d.width=0,d.index=0,d.chars.length=0},b=()=>{let C=a.chars.length-1;if(s){let A=a.chars[C];for(;A===" ";)a.width-=e.chars[A].xAdvance,A=a.chars[--C]}o.width=Math.max(o.width,a.width),a={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},u=!0,o.lines.push(a),o.height+=x},w=C=>C-f>g;for(let C=0;C<n.length+1;C++){let A;const T=C===n.length;T||(A=n[C]);const k=e.chars[A]||e.chars[" "];if(/(?:\s)/.test(A)||A==="\r"||A===`
`||T){if(!u&&t.wordWrap&&w(a.width+d.width)?(b(),_(d),T||a.charPositions.push(0)):(d.start=a.width,_(d),T||a.charPositions.push(0)),A==="\r"||A===`
`)b();else if(!T){const q=k.xAdvance+(k.kerning[c]||0)+f;a.width+=q,a.spaceWidth=q,a.spacesIndex.push(a.charPositions.length),a.chars.push(A)}}else{const F=k.kerning[c]||0,q=k.xAdvance+F+f;v&&w(a.width+d.width+q)&&(_(d),b()),d.positions[d.index++]=d.width+F,d.chars.push(A),d.width+=q}c=A}return b(),t.align==="center"?nk(o):t.align==="right"?rk(o):t.align==="justify"&&sk(o),o}function nk(n){for(let t=0;t<n.lines.length;t++){const e=n.lines[t],s=n.width/2-e.width/2;for(let o=0;o<e.charPositions.length;o++)e.charPositions[o]+=s}}function rk(n){for(let t=0;t<n.lines.length;t++){const e=n.lines[t],s=n.width-e.width;for(let o=0;o<e.charPositions.length;o++)e.charPositions[o]+=s}}function sk(n){const t=n.width;for(let e=0;e<n.lines.length;e++){const s=n.lines[e];let o=0,a=s.spacesIndex[o++],c=0;const u=s.spacesIndex.length,p=(t-s.width)/u;for(let f=0;f<s.charPositions.length;f++)f===a&&(a=s.spacesIndex[o++],c+=p),s.charPositions[f]+=c}}function ik(n){if(n==="")return[];typeof n=="string"&&(n=[n]);const t=[];for(let e=0,s=n.length;e<s;e++){const o=n[e];if(Array.isArray(o)){if(o.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${o.length}.`);if(o[0].length===0||o[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const a=o[0].charCodeAt(0),c=o[1].charCodeAt(0);if(c<a)throw new Error("[BitmapFont]: Invalid character range.");for(let u=a,d=c;u<=d;u++)t.push(String.fromCharCode(u))}else t.push(...Array.from(o))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}let gl=0;class ok{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=k0(1e3)}getFont(t,e){let s=`${e.fontFamily}-bitmap`,o=!0;if(e._fill.fill&&!e._stroke?(s+=e._fill.fill.styleKey,o=!1):(e._stroke||e.dropShadow)&&(s=`${e.styleKey}-bitmap`,o=!1),!se.has(s)){const c=Object.create(e);c.lineHeight=0;const u=new Ng({style:c,overrideFill:o,overrideSize:!0,...this.defaultOptions});gl++,gl>50&&ie("BitmapText",`You have dynamically created ${gl} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),u.once("destroy",()=>{gl--,se.remove(s)}),se.set(s,u)}const a=se.get(s);return a.ensureCharacters?.(t),a}getLayout(t,e,s=!0){const o=this.getFont(t,e),a=`${t}-${e.styleKey}-${s}`;if(this.measureCache.has(a))return this.measureCache.get(a);const c=cr.graphemeSegmenter(t),u=ek(c,e,o,s);return this.measureCache.set(a,u),u}measureText(t,e,s=!0){return this.getLayout(t,e,s)}install(...t){let e=t[0];typeof e=="string"&&(e={name:e,style:t[1],chars:t[2]?.chars,resolution:t[2]?.resolution,padding:t[2]?.padding,skipKerning:t[2]?.skipKerning},Et(Ut,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const s=e?.name;if(!s)throw new Error("[BitmapFontManager] Property `name` is required.");e={...this.defaultOptions,...e};const o=e.style,a=o instanceof ns?o:new ns(o),c=e.dynamicFill??this._canUseTintForStyle(a),u=new Ng({style:a,overrideFill:c,skipKerning:e.skipKerning,padding:e.padding,resolution:e.resolution,overrideSize:!1,textureStyle:e.textureStyle}),d=ik(e.chars);return u.ensureCharacters(d.join("")),se.set(`${s}-bitmap`,u),u.once("destroy",()=>se.remove(`${s}-bitmap`)),u}uninstall(t){const e=`${t}-bitmap`,s=se.get(e);s&&s.destroy()}_canUseTintForStyle(t){return!t._stroke&&(!t.dropShadow||t.dropShadow.color===0)&&!t._fill.fill&&t._fill.color===16777215}}const Bg=new ok;class W0 extends b0{constructor(t,e){super();const{textures:s,data:o}=t;Object.keys(o.pages).forEach(a=>{const c=o.pages[parseInt(a,10)],u=s[c.id];this.pages.push({texture:u})}),Object.keys(o.chars).forEach(a=>{const c=o.chars[a],{frame:u,source:d,rotate:p}=s[c.page],f=Vt.transformRectCoords(c,u,p,new oe),g=new Ot({frame:f,orig:new oe(0,0,c.width,c.height),source:d,rotate:p});this.chars[a]={id:a.codePointAt(0),xOffset:c.xOffset,yOffset:c.yOffset,xAdvance:c.xAdvance,kerning:c.kerning??{},texture:g}}),this.baseRenderedFontSize=o.fontSize,this.baseMeasurementFontSize=o.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:o.fontSize},this.baseLineOffset=o.baseLineOffset,this.lineHeight=o.lineHeight,this.fontFamily=o.fontFamily,this.distanceField=o.distanceField??{type:"none",range:0},this.url=e}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{texture:e}=this.pages[t];e.destroy(!0)}this.pages=null}static install(t){Bg.install(t)}static uninstall(t){Bg.uninstall(t)}}const gh={test(n){return typeof n=="string"&&n.startsWith("info face=")},parse(n){const t=n.match(/^[a-z]+\s+.+$/gm),e={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const g in t){const x=t[g].match(/^[a-z]+/gm)[0],v=t[g].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),_={};for(const b in v){const w=v[b].split("="),C=w[0],A=w[1].replace(/"/gm,""),T=parseFloat(A),k=isNaN(T)?A:T;_[C]=k}e[x].push(_)}const s={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[o]=e.info,[a]=e.common,[c]=e.distanceField??[];c&&(s.distanceField={range:parseInt(c.distanceRange,10),type:c.fieldType}),s.fontSize=parseInt(o.size,10),s.fontFamily=o.face,s.lineHeight=parseInt(a.lineHeight,10);const u=e.page;for(let g=0;g<u.length;g++)s.pages.push({id:parseInt(u[g].id,10)||0,file:u[g].file});const d={};s.baseLineOffset=s.lineHeight-parseInt(a.base,10);const p=e.char;for(let g=0;g<p.length;g++){const x=p[g],v=parseInt(x.id,10);let _=x.letter??x.char??String.fromCharCode(v);_==="space"&&(_=" "),d[v]=_,s.chars[_]={id:v,page:parseInt(x.page,10)||0,x:parseInt(x.x,10),y:parseInt(x.y,10),width:parseInt(x.width,10),height:parseInt(x.height,10),xOffset:parseInt(x.xoffset,10),yOffset:parseInt(x.yoffset,10),xAdvance:parseInt(x.xadvance,10),kerning:{}}}const f=e.kerning||[];for(let g=0;g<f.length;g++){const x=parseInt(f[g].first,10),v=parseInt(f[g].second,10),_=parseInt(f[g].amount,10);s.chars[d[v]].kerning[d[x]]=_}return s}},Og={test(n){const t=n;return typeof t!="string"&&"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(n){const t={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},e=n.getElementsByTagName("info")[0],s=n.getElementsByTagName("common")[0],o=n.getElementsByTagName("distanceField")[0];o&&(t.distanceField={type:o.getAttribute("fieldType"),range:parseInt(o.getAttribute("distanceRange"),10)});const a=n.getElementsByTagName("page"),c=n.getElementsByTagName("char"),u=n.getElementsByTagName("kerning");t.fontSize=parseInt(e.getAttribute("size"),10),t.fontFamily=e.getAttribute("face"),t.lineHeight=parseInt(s.getAttribute("lineHeight"),10);for(let p=0;p<a.length;p++)t.pages.push({id:parseInt(a[p].getAttribute("id"),10)||0,file:a[p].getAttribute("file")});const d={};t.baseLineOffset=t.lineHeight-parseInt(s.getAttribute("base"),10);for(let p=0;p<c.length;p++){const f=c[p],g=parseInt(f.getAttribute("id"),10);let x=f.getAttribute("letter")??f.getAttribute("char")??String.fromCharCode(g);x==="space"&&(x=" "),d[g]=x,t.chars[x]={id:g,page:parseInt(f.getAttribute("page"),10)||0,x:parseInt(f.getAttribute("x"),10),y:parseInt(f.getAttribute("y"),10),width:parseInt(f.getAttribute("width"),10),height:parseInt(f.getAttribute("height"),10),xOffset:parseInt(f.getAttribute("xoffset"),10),yOffset:parseInt(f.getAttribute("yoffset"),10),xAdvance:parseInt(f.getAttribute("xadvance"),10),kerning:{}}}for(let p=0;p<u.length;p++){const f=parseInt(u[p].getAttribute("first"),10),g=parseInt(u[p].getAttribute("second"),10),x=parseInt(u[p].getAttribute("amount"),10);t.chars[d[g]].kerning[d[f]]=x}return t}},zg={test(n){return typeof n=="string"&&n.match(/<font(\s|>)/)?Og.test(Jt.get().parseXML(n)):!1},parse(n){return Og.parse(Jt.get().parseXML(n))}},ak=[".xml",".fnt"],lk={extension:{type:_t.CacheParser,name:"cacheBitmapFont"},test:n=>n instanceof W0,getCacheableAssets(n,t){const e={};return n.forEach(s=>{e[s]=t,e[`${s}-bitmap`]=t}),e[`${t.fontFamily}-bitmap`]=t,e}},ck={extension:{type:_t.LoadParser,priority:rs.Normal},name:"loadBitmapFont",id:"bitmap-font",test(n){return ak.includes(fn.extname(n).toLowerCase())},async testParse(n){return gh.test(n)||zg.test(n)},async parse(n,t,e){const s=gh.test(n)?gh.parse(n):zg.parse(n),{src:o}=t,{pages:a}=s,c=[],u=s.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let g=0;g<a.length;++g){const x=a[g].file;let v=fn.join(fn.dirname(o),x);v=zh(v,o),c.push({src:v,data:u})}const d=await e.load(c),p=c.map(g=>d[g.src]);return new W0({data:s,textures:p},o)},async load(n,t){return await(await Jt.get().fetch(n)).text()},async unload(n,t,e){await Promise.all(n.pages.map(s=>e.unload(s.texture.source._sourceOrigin))),n.destroy()}};class uk{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<e;s++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}const hk={extension:{type:_t.CacheParser,name:"cacheTextureArray"},test:n=>Array.isArray(n)&&n.every(t=>t instanceof Ot),getCacheableAssets:(n,t)=>{const e={};return n.forEach(s=>{t.forEach((o,a)=>{e[s+(a===0?"":a+1)]=o})}),e}};async function V0(n){if("Image"in globalThis)return new Promise(t=>{const e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=n});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(n)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const dk={extension:{type:_t.DetectionParser,priority:1},test:async()=>V0("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async n=>[...n,"avif"],remove:async n=>n.filter(t=>t!=="avif")},Dg=["png","jpg","jpeg"],fk={extension:{type:_t.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async n=>[...n,...Dg],remove:async n=>n.filter(t=>!Dg.includes(t))},pk="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Vl(n){return pk?!1:document.createElement("video").canPlayType(n)!==""}const mk={extension:{type:_t.DetectionParser,priority:0},test:async()=>Vl("video/mp4"),add:async n=>[...n,"mp4","m4v"],remove:async n=>n.filter(t=>t!=="mp4"&&t!=="m4v")},gk={extension:{type:_t.DetectionParser,priority:0},test:async()=>Vl("video/ogg"),add:async n=>[...n,"ogv"],remove:async n=>n.filter(t=>t!=="ogv")},yk={extension:{type:_t.DetectionParser,priority:0},test:async()=>Vl("video/webm"),add:async n=>[...n,"webm"],remove:async n=>n.filter(t=>t!=="webm")},xk={extension:{type:_t.DetectionParser,priority:0},test:async()=>V0("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async n=>[...n,"webp"],remove:async n=>n.filter(t=>t!=="webp")},H0=class kl{constructor(){this.loadOptions={...kl.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,s)=>(this._parsersValidated=!1,t[e]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const s={promise:null,parser:null};return s.promise=(async()=>{let o=null,a=null;if((e.parser||e.loadParser)&&(a=this._parserHash[e.parser||e.loadParser],e.loadParser&&ie(`[Assets] "loadParser" is deprecated, use "parser" instead for ${t}`),a||ie(`[Assets] specified load parser "${e.parser||e.loadParser}" not found while loading ${t}`)),!a){for(let c=0;c<this.parsers.length;c++){const u=this.parsers[c];if(u.load&&u.test?.(t,e,this)){a=u;break}}if(!a)return ie(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}o=await a.load(t,e,this),s.parser=a;for(let c=0;c<this.parsers.length;c++){const u=this.parsers[c];u.parse&&u.parse&&await u.testParse?.(o,e,this)&&(o=await u.parse(o,e,this)||o,s.parser=u)}return o})(),s}async load(t,e){this._parsersValidated||this._validateParsers();const s=typeof e=="function"?{...kl.defaultOptions,...this.loadOptions,onProgress:e}:{...kl.defaultOptions,...this.loadOptions,...e||{}},{onProgress:o,onError:a,strategy:c,retryCount:u,retryDelay:d}=s;let p=0;const f={},g=Ml(t),x=Gn(t,b=>({alias:[b],src:b,data:{}})),v=x.reduce((b,w)=>b+(w.progressSize||1),0),_=x.map(async b=>{const w=fn.toAbsolute(b.src);f[b.src]||(await this._loadAssetWithRetry(w,b,{onProgress:o,onError:a,strategy:c,retryCount:u,retryDelay:d},f),p+=b.progressSize||1,o&&o(p/v))});return await Promise.all(_),g?f[x[0].src]:f}async unload(t){const s=Gn(t,o=>({alias:[o],src:o})).map(async o=>{const a=fn.toAbsolute(o.src),c=this.promiseCache[a];if(c){const u=await c.promise;delete this.promiseCache[a],await c.parser?.unload?.(u,o,this)}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name||t.id).reduce((t,e)=>(!e.name&&!e.id?ie("[Assets] parser should have an id"):(t[e.name]||t[e.id])&&ie(`[Assets] parser id conflict "${e.id}"`),t[e.name]=e,e.id&&(t[e.id]=e),t),{})}async _loadAssetWithRetry(t,e,s,o){let a=0;const{onError:c,strategy:u,retryCount:d,retryDelay:p}=s,f=g=>new Promise(x=>setTimeout(x,g));for(;;)try{this.promiseCache[t]||(this.promiseCache[t]=this._getLoadPromiseAndParser(t,e)),o[e.src]=await this.promiseCache[t].promise;return}catch(g){delete this.promiseCache[t],delete o[e.src],a++;const x=u!=="retry"||a>d;if(u==="retry"&&!x){c&&c(g,e),await f(p);continue}if(u==="skip"){c&&c(g,e);return}throw c&&c(g,e),new Error(`[Loader.load] Failed to load ${t}.
${g}`)}}};H0.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let vk=H0;function Ai(n,t){if(Array.isArray(t)){for(const e of t)if(n.startsWith(`data:${e}`))return!0;return!1}return n.startsWith(`data:${t}`)}function Pi(n,t){const e=n.split("?")[0],s=fn.extname(e).toLowerCase();return Array.isArray(t)?t.includes(s):s===t}const wk=".json",_k="application/json",Sk={extension:{type:_t.LoadParser,priority:rs.Low},name:"loadJson",id:"json",test(n){return Ai(n,_k)||Pi(n,wk)},async load(n){return await(await Jt.get().fetch(n)).json()}},bk=".txt",kk="text/plain",Ck={name:"loadTxt",id:"text",extension:{type:_t.LoadParser,priority:rs.Low,name:"loadTxt"},test(n){return Ai(n,kk)||Pi(n,bk)},async load(n){return await(await Jt.get().fetch(n)).text()}},Ak=["normal","bold","100","200","300","400","500","600","700","800","900"],Pk=[".ttf",".otf",".woff",".woff2"],Tk=["font/ttf","font/otf","font/woff","font/woff2"],Mk=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function Ek(n){const t=fn.extname(n),o=fn.basename(n,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1));let a=o.length>0;for(const u of o)if(!u.match(Mk)){a=!1;break}let c=o.join(" ");return a||(c=`"${c.replace(/[\\"]/g,"\\$&")}"`),c}const Ik=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function Rk(n){return Ik.test(n)?n:encodeURI(n)}const Fk={extension:{type:_t.LoadParser,priority:rs.Low},name:"loadWebFont",id:"web-font",test(n){return Ai(n,Tk)||Pi(n,Pk)},async load(n,t){const e=Jt.get().getFontFaceSet();if(e){const s=[],o=t.data?.family??Ek(n),a=t.data?.weights?.filter(u=>Ak.includes(u))??["normal"],c=t.data??{};for(let u=0;u<a.length;u++){const d=a[u],p=new FontFace(o,`url(${Rk(n)})`,{...c,weight:d});await p.load(),e.add(p),s.push(p)}return se.has(`${o}-and-url`)?se.get(`${o}-and-url`).entries.push({url:n,faces:s}):se.set(`${o}-and-url`,{entries:[{url:n,faces:s}]}),s.length===1?s[0]:s}return ie("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(n){const t=Array.isArray(n)?n:[n],e=t[0].family,s=se.get(`${e}-and-url`),o=s.entries.find(a=>a.faces.some(c=>t.indexOf(c)!==-1));o.faces=o.faces.filter(a=>t.indexOf(a)===-1),o.faces.length===0&&(s.entries=s.entries.filter(a=>a!==o)),t.forEach(a=>{Jt.get().getFontFaceSet().delete(a)}),s.entries.length===0&&se.remove(`${e}-and-url`)}};function bd(n,t=1){const e=ki.RETINA_PREFIX?.exec(n);return e?parseFloat(e[1]):t}function kd(n,t,e){n.label=e,n._sourceOrigin=e;const s=new Ot({source:n,label:e}),o=()=>{delete t.promiseCache[e],se.has(e)&&se.remove(e)};return s.source.once("destroy",()=>{t.promiseCache[e]&&(ie("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),o())}),s.once("destroy",()=>{n.destroyed||(ie("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),o())}),s}const Lk=".svg",Nk="image/svg+xml",Bk={extension:{type:_t.LoadParser,priority:rs.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(n){return Ai(n,Nk)||Pi(n,Lk)},async load(n,t,e){return t.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?zk(n):Ok(n,t,e,this.config.crossOrigin)},unload(n){n.destroy(!0)}};async function Ok(n,t,e,s){const o=await Jt.get().fetch(n),a=Jt.get().createImage();a.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await o.text())}`,a.crossOrigin=s,await a.decode();const c=t.data?.width??a.width,u=t.data?.height??a.height,d=t.data?.resolution||bd(n),p=Math.ceil(c*d),f=Math.ceil(u*d),g=Jt.get().createCanvas(p,f),x=g.getContext("2d");x.imageSmoothingEnabled=!0,x.imageSmoothingQuality="high",x.drawImage(a,0,0,c*d,u*d);const{parseAsGraphicsContext:v,..._}=t.data??{},b=new Rs({resource:g,alphaMode:"premultiply-alpha-on-upload",resolution:d,..._});return kd(b,e,n)}async function zk(n){const e=await(await Jt.get().fetch(n)).text(),s=new Pn;return s.svg(e),s}const Dk=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let fi=null,Qh=class{constructor(){fi||(fi=URL.createObjectURL(new Blob([Dk],{type:"application/javascript"}))),this.worker=new Worker(fi)}};Qh.revokeObjectURL=function(){fi&&(URL.revokeObjectURL(fi),fi=null)};const jk=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let pi=null;class Y0{constructor(){pi||(pi=URL.createObjectURL(new Blob([jk],{type:"application/javascript"}))),this.worker=new Worker(pi)}}Y0.revokeObjectURL=function(){pi&&(URL.revokeObjectURL(pi),pi=null)};let jg=0,yh;class Gk{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:e}=new Qh;e.addEventListener("message",s=>{e.terminate(),Qh.revokeObjectURL(),t(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t,e){return this._run("loadImageBitmap",[t,e?.data?.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){yh===void 0&&(yh=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<yh&&(this._createdWorkers++,t=new Y0().worker,t.addEventListener("message",e=>{this._complete(e.data),this._returnWorker(e.target),this._next()})),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){this._resolveHash[t.uuid]&&(t.error!==void 0?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),delete this._resolveHash[t.uuid])}async _run(t,e){await this._initWorkers();const s=new Promise((o,a)=>{this._queue.push({id:t,arguments:e,resolve:o,reject:a})});return this._next(),s}_next(){if(!this._queue.length)return;const t=this._getWorker();if(!t)return;const e=this._queue.pop(),s=e.id;this._resolveHash[jg]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:jg++,id:s})}reset(){this._workerPool.forEach(t=>t.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:t})=>{t?.(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const Gg=new Gk,Uk=[".jpeg",".jpg",".png",".webp",".avif"],$k=["image/jpeg","image/png","image/webp","image/avif"];async function Wk(n,t){const e=await Jt.get().fetch(n);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${n}: ${e.status} ${e.statusText}`);const s=await e.blob();return t?.data?.alphaMode==="premultiplied-alpha"?createImageBitmap(s,{premultiplyAlpha:"none"}):createImageBitmap(s)}const X0={name:"loadTextures",id:"texture",extension:{type:_t.LoadParser,priority:rs.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(n){return Ai(n,$k)||Pi(n,Uk)},async load(n,t,e){let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Gg.isImageBitmapSupported()?s=await Gg.loadImageBitmap(n,t):s=await Wk(n,t):s=await new Promise((a,c)=>{s=Jt.get().createImage(),s.crossOrigin=this.config.crossOrigin,s.src=n,s.complete?a(s):(s.onload=()=>{a(s)},s.onerror=c)});const o=new Rs({resource:s,alphaMode:"premultiply-alpha-on-upload",resolution:t.data?.resolution||bd(n),...t.data});return kd(o,e,n)},unload(n){n.destroy(!0)}},Vk=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let xh,vh;function Hk(n,t,e){e===void 0&&!t.startsWith("data:")?n.crossOrigin=Xk(t):e!==!1&&(n.crossOrigin=typeof e=="string"?e:"anonymous")}function Yk(n){return new Promise((t,e)=>{n.addEventListener("canplaythrough",s),n.addEventListener("error",o),n.load();function s(){a(),t()}function o(c){a(),e(c)}function a(){n.removeEventListener("canplaythrough",s),n.removeEventListener("error",o)}})}function Xk(n,t=globalThis.location){if(n.startsWith("data:"))return"";t||(t=globalThis.location);const e=new URL(n,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}function qk(){const n=[],t=[];for(const e of Vk){const s=Po.MIME_TYPES[e.substring(1)]||`video/${e.substring(1)}`;Vl(s)&&(n.push(e),t.includes(s)||t.push(s))}return{validVideoExtensions:n,validVideoMime:t}}const Qk={name:"loadVideo",id:"video",extension:{type:_t.LoadParser,name:"loadVideo"},test(n){if(!xh||!vh){const{validVideoExtensions:s,validVideoMime:o}=qk();xh=s,vh=o}const t=Ai(n,vh),e=Pi(n,xh);return t||e},async load(n,t,e){const s={...Po.defaultOptions,resolution:t.data?.resolution||bd(n),alphaMode:t.data?.alphaMode||await Qy(),...t.data},o=document.createElement("video"),a={preload:s.autoLoad!==!1?"auto":void 0,"webkit-playsinline":s.playsinline!==!1?"":void 0,playsinline:s.playsinline!==!1?"":void 0,muted:s.muted===!0?"":void 0,loop:s.loop===!0?"":void 0,autoplay:s.autoPlay!==!1?"":void 0};Object.keys(a).forEach(d=>{const p=a[d];p!==void 0&&o.setAttribute(d,p)}),s.muted===!0&&(o.muted=!0),Hk(o,n,s.crossorigin);const c=document.createElement("source");let u;if(s.mime)u=s.mime;else if(n.startsWith("data:"))u=n.slice(5,n.indexOf(";"));else if(!n.startsWith("blob:")){const d=n.split("?")[0].slice(n.lastIndexOf(".")+1).toLowerCase();u=Po.MIME_TYPES[d]||`video/${d}`}return c.src=n,u&&(c.type=u),new Promise(d=>{const p=async()=>{const f=new Po({...s,resource:o});o.removeEventListener("canplay",p),t.data.preload&&await Yk(o),d(kd(f,e,n))};s.preload&&!s.autoPlay&&o.load(),o.addEventListener("canplay",p),o.appendChild(c)})},unload(n){n.destroy(!0)}},q0={extension:{type:_t.ResolveParser,name:"resolveTexture"},test:X0.test,parse:n=>({resolution:parseFloat(ki.RETINA_PREFIX.exec(n)?.[1]??"1"),format:n.split(".").pop(),src:n})},Kk={extension:{type:_t.ResolveParser,priority:-2,name:"resolveJson"},test:n=>ki.RETINA_PREFIX.test(n)&&n.endsWith(".json"),parse:q0.parse};class Zk{constructor(){this._detections=[],this._initialized=!1,this.resolver=new ki,this.loader=new vk,this.cache=se,this._backgroundLoader=new uk(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized){ie("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let a=t.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const e=t.texturePreference?.resolution??1,s=typeof e=="number"?[e]:e,o=await this._detectFormats({preferredFormats:t.texturePreference?.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:o,resolution:s}}),t.preferences&&this.setPreferences(t.preferences),t.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...t.loadOptions})}add(t){this.resolver.add(t)}async load(t,e){this._initialized||await this.init();const s=Ml(t),o=Gn(t).map(u=>{if(typeof u!="string"){const d=this.resolver.getAlias(u);return d.some(p=>!this.resolver.hasKey(p))&&this.add(u),Array.isArray(d)?d[0]:d}return this.resolver.hasKey(u)||this.add({alias:u,src:u}),u}),a=this.resolver.resolve(o),c=await this._mapLoadToResolve(a,e);return s?c[o[0]]:c}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let s=!1;typeof t=="string"&&(s=!0,t=[t]);const o=this.resolver.resolveBundle(t),a={},c=Object.keys(o);let u=0;const d=[],p=()=>{e?.(d.reduce((g,x)=>g+x,0)/u)},f=c.map((g,x)=>{const v=o[g],_=Object.values(v),w=[...new Set(_.flat())].reduce((C,A)=>C+(A.progressSize||1),0);return d.push(0),u+=w,this._mapLoadToResolve(v,C=>{d[x]=C*w,p()}).then(C=>{a[g]=C})});return await Promise.all(f),s?a[t[0]]:a}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return se.get(t);const e={};for(let s=0;s<t.length;s++)e[s]=se.get(t[s]);return e}async _mapLoadToResolve(t,e){const s=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;const o=await this.loader.load(s,e);this._backgroundLoader.active=!0;const a={};return s.forEach(c=>{const u=o[c.src],d=[c.src];c.alias&&d.push(...c.alias),d.forEach(p=>{a[p]=u}),se.set(d,u)}),a}async unload(t){this._initialized||await this.init();const e=Gn(t).map(o=>typeof o!="string"?o.src:o),s=this.resolver.resolve(e);await this._unloadFromResolved(s)}async unloadBundle(t){this._initialized||await this.init(),t=Gn(t);const e=this.resolver.resolveBundle(t),s=Object.keys(e).map(o=>this._unloadFromResolved(e[o]));await Promise.all(s)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(s=>{se.remove(s.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const s of t.detections)t.skipDetections||await s.test()?e=await s.add(e):t.skipDetections||(e=await s.remove(e));return e=e.filter((s,o)=>e.indexOf(s)===o),e}get detections(){return this._detections}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(s=>s in t).forEach(s=>{e.config[s]=t[s]})})}}const $n=new Zk;Ne.handleByList(_t.LoadParser,$n.loader.parsers).handleByList(_t.ResolveParser,$n.resolver.parsers).handleByList(_t.CacheParser,$n.cache.parsers).handleByList(_t.DetectionParser,$n.detections);Ne.add(hk,fk,dk,xk,mk,gk,yk,Sk,Ck,Fk,Bk,X0,Qk,ck,lk,q0,Kk);const Ug={loader:_t.LoadParser,resolver:_t.ResolveParser,cache:_t.CacheParser,detection:_t.DetectionParser};Ne.handle(_t.Asset,n=>{const t=n.ref;Object.entries(Ug).filter(([e])=>!!t[e]).forEach(([e,s])=>Ne.add(Object.assign(t[e],{extension:t[e].extension??s})))},n=>{const t=n.ref;Object.keys(Ug).filter(e=>!!t[e]).forEach(e=>Ne.remove(t[e]))});const Q0={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Jk=["in vec2 vBlurTexCoords[%size%];","uniform sampler2D uTexture;","out vec4 finalColor;","void main(void)","{","    finalColor = vec4(0.0);","    %blur%","}"].join(`
`);function t2(n){const t=Q0[n],e=t.length;let s=Jk,o="";const a="finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;";let c;for(let u=0;u<n;u++){let d=a.replace("%index%",u.toString());c=u,u>=e&&(c=n-u-1),d=d.replace("%value%",t[c].toString()),o+=d,o+=`
`}return s=s.replace("%blur%",o),s=s.replace("%size%",n.toString()),s}const e2=`
    in vec2 aPosition;

    uniform float uStrength;

    out vec2 vBlurTexCoords[%size%];

    uniform vec4 uInputSize;
    uniform vec4 uOutputFrame;
    uniform vec4 uOutputTexture;

    vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

    vec2 filterTextureCoord( void )
    {
        return aPosition * (uOutputFrame.zw * uInputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        float pixelStrength = uInputSize.%dimension% * uStrength;

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function n2(n,t){const e=Math.ceil(n/2);let s=e2,o="",a;t?a="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);":a="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);";for(let c=0;c<n;c++){let u=a.replace("%index%",c.toString());u=u.replace("%sampleIndex%",`${c-(e-1)}.0`),o+=u,o+=`
`}return s=s.replace("%blur%",o),s=s.replace("%size%",n.toString()),s=s.replace("%dimension%",t?"z":"w"),s}function r2(n,t){const e=n2(t,n),s=t2(t);return Gl.from({vertex:e,fragment:s,name:`blur-${n?"horizontal":"vertical"}-pass-filter`})}var s2=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlurUniforms {
  uStrength:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    %blur-struct%
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}


@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {

  let filteredCord = filterTextureCoord(aPosition);

  let pixelStrength = gfu.uInputSize.%dimension% * blurUniforms.uStrength;

  return VSOutput(
   filterVertexPosition(aPosition),
    %blur-vertex-out%
  );
}

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  %blur-fragment-in%
) -> @location(0) vec4<f32> {

    var   finalColor = vec4(0.0);

    %blur-sampling%

    return finalColor;
}`;function i2(n,t){const e=Q0[t],s=e.length,o=[],a=[],c=[];for(let g=0;g<t;g++){o[g]=`@location(${g}) offset${g}: vec2<f32>,`,n?a[g]=`filteredCord + vec2(${g-s+1} * pixelStrength, 0.0),`:a[g]=`filteredCord + vec2(0.0, ${g-s+1} * pixelStrength),`;const x=g<s?g:t-g-1,v=e[x].toString();c[g]=`finalColor += textureSample(uTexture, uSampler, offset${g}) * ${v};`}const u=o.join(`
`),d=a.join(`
`),p=c.join(`
`),f=s2.replace("%blur-struct%",u).replace("%blur-vertex-out%",d).replace("%blur-fragment-in%",u).replace("%blur-sampling%",p).replace("%dimension%",n?"z":"w");return Ci.from({vertex:{source:f,entryPoint:"mainVertex"},fragment:{source:f,entryPoint:"mainFragment"}})}const K0=class Z0 extends u0{constructor(t){t={...Z0.defaultOptions,...t};const e=r2(t.horizontal,t.kernelSize),s=i2(t.horizontal,t.kernelSize);super({glProgram:e,gpuProgram:s,resources:{blurUniforms:{uStrength:{value:0,type:"f32"}}},...t}),this.horizontal=t.horizontal,this._quality=0,this.quality=t.quality,this.blur=t.strength,this._uniforms=this.resources.blurUniforms.uniforms}apply(t,e,s,o){if(this._uniforms.uStrength=this.strength/this.passes,this.passes===1)t.applyFilter(this,e,s,o);else{const a=wi.getSameSizeTexture(e);let c=e,u=a;this._state.blend=!1;const d=t.renderer.type===Ro.WEBGPU;for(let p=0;p<this.passes-1;p++){t.applyFilter(this,c,u,p===0?!0:d);const f=u;u=c,c=f}this._state.blend=!0,t.applyFilter(this,c,s,o),wi.returnTexture(a)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}};K0.defaultOptions={strength:8,quality:4,kernelSize:5};let wh=K0;class J0 extends u0{constructor(...t){let e=t[0]??{};typeof e=="number"&&(Et(Ut,"BlurFilter constructor params are now options object. See params: { strength, quality, resolution, kernelSize }"),e={strength:e},t[1]!==void 0&&(e.quality=t[1]),t[2]!==void 0&&(e.resolution=t[2]||"inherit"),t[3]!==void 0&&(e.kernelSize=t[3])),e={...wh.defaultOptions,...e};const{strength:s,strengthX:o,strengthY:a,quality:c,...u}=e;super({...u,compatibleRenderers:Ro.BOTH,resources:{}}),this._repeatEdgePixels=!1,this.blurXFilter=new wh({horizontal:!0,...e}),this.blurYFilter=new wh({horizontal:!1,...e}),this.quality=c,this.strengthX=o??s,this.strengthY=a??s,this.repeatEdgePixels=!1}apply(t,e,s,o){const a=Math.abs(this.blurXFilter.strength),c=Math.abs(this.blurYFilter.strength);if(a&&c){const u=wi.getSameSizeTexture(e);this.blurXFilter.blendMode="normal",this.blurXFilter.apply(t,e,u,!0),this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(t,u,s,o),wi.returnTexture(u)}else c?(this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(t,e,s,o)):(this.blurXFilter.blendMode=this.blendMode,this.blurXFilter.apply(t,e,s,o))}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.blur),Math.abs(this.blurYFilter.blur))*2}get strength(){if(this.strengthX!==this.strengthY)throw new Error("BlurFilter's strengthX and strengthY are different");return this.strengthX}set strength(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get strengthX(){return this.blurXFilter.blur}set strengthX(t){this.blurXFilter.blur=t,this.updatePadding()}get strengthY(){return this.blurYFilter.blur}set strengthY(t){this.blurYFilter.blur=t,this.updatePadding()}get blur(){return Et("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength}set blur(t){Et("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength=t}get blurX(){return Et("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX}set blurX(t){Et("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX=t}get blurY(){return Et("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY}set blurY(t){Et("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}J0.defaultOptions={strength:8,quality:4,kernelSize:5};class mn extends pd{constructor(t){t instanceof Pn&&(t={context:t});const{context:e,roundPixels:s,...o}=t||{};super({label:"Graphics",...o}),this.renderPipeId="graphics",e?this._context=e:this._context=this._ownedContext=new Pn,this._context.on("update",this.onViewUpdate,this),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=s??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(t){return this._context.containsPoint(t)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||t?.context===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,e){return this.context[t](...e),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new mn(this._context.clone()):(this._ownedContext=null,new mn(this._context))}lineStyle(t,e,s){Et(Ut,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const o={};return t&&(o.width=t),e&&(o.color=e),s&&(o.alpha=s),this.context.strokeStyle=o,this}beginFill(t,e){Et(Ut,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const s={};return t!==void 0&&(s.color=t),e!==void 0&&(s.alpha=e),this.context.fillStyle=s,this}endFill(){Et(Ut,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return(t.width!==Pn.defaultStrokeStyle.width||t.color!==Pn.defaultStrokeStyle.color||t.alpha!==Pn.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return Et(Ut,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return Et(Ut,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return Et(Ut,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return Et(Ut,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return Et(Ut,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return Et(Ut,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}class o2 extends pd{constructor(t,e){const{text:s,resolution:o,style:a,anchor:c,width:u,height:d,roundPixels:p,...f}=t;super({...f}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=e,this.text=s??"",this.style=a,this.resolution=o??null,this.allowChildren=!1,this._anchor=new Le({_onUpdate:()=>{this.onViewUpdate()}}),c&&(this.anchor=c),this.roundPixels=p??!1,u!==void 0&&(this.width=u),d!==void 0&&(this.height=d)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}set text(t){t=t.toString(),this._text!==t&&(this._text=t,this.onViewUpdate())}get text(){return this._text}set resolution(t){this._autoResolution=t===null,this._resolution=t,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(t){t||(t={}),this._style?.off("update",this.onViewUpdate,this),t instanceof this._styleClass?this._style=t:this._style=new this._styleClass(t),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(t){this._setWidth(t,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(t){this._setHeight(t,this.bounds.height)}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this.bounds.width,t.height=Math.abs(this.scale.y)*this.bounds.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this.bounds.width),e!==void 0&&this._setHeight(e,this.bounds.height)}containsPoint(t){const e=this.bounds.width,s=this.bounds.height,o=-e*this.anchor.x;let a=0;return t.x>=o&&t.x<=o+e&&(a=-s*this.anchor.y,t.y>=a&&t.y<=a+s)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(t=!1){super.destroy(t),this.owner=null,this._bounds=null,this._anchor=null,(typeof t=="boolean"?t:t?.style)&&this._style.destroy(t),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}}function a2(n,t){let e=n[0]??{};return(typeof e=="string"||n[1])&&(Et(Ut,`use new ${t}({ text: "hi!", style }) instead`),e={text:e,style:n[1]}),e}let Ss=null,Ar=null;function l2(n,t){Ss||(Ss=Jt.get().createCanvas(256,128),Ar=Ss.getContext("2d",{willReadFrequently:!0}),Ar.globalCompositeOperation="copy",Ar.globalAlpha=1),(Ss.width<n||Ss.height<t)&&(Ss.width=yi(n),Ss.height=yi(t))}function $g(n,t,e){for(let s=0,o=4*e*t;s<t;++s,o+=4)if(n[o+3]!==0)return!1;return!0}function Wg(n,t,e,s,o){const a=4*t;for(let c=s,u=s*a+4*e;c<=o;++c,u+=a)if(n[u+3]!==0)return!1;return!0}function c2(...n){let t=n[0];t.canvas||(t={canvas:n[0],resolution:n[1]});const{canvas:e}=t,s=Math.min(t.resolution??1,1),o=t.width??e.width,a=t.height??e.height;let c=t.output;if(l2(o,a),!Ar)throw new TypeError("Failed to get canvas 2D context");Ar.drawImage(e,0,0,o,a,0,0,o*s,a*s);const d=Ar.getImageData(0,0,o,a).data;let p=0,f=0,g=o-1,x=a-1;for(;f<a&&$g(d,o,f);)++f;if(f===a)return oe.EMPTY;for(;$g(d,o,x);)--x;for(;Wg(d,o,p,f,x);)++p;for(;Wg(d,o,g,f,x);)--g;return++g,++x,Ar.globalCompositeOperation="source-over",Ar.strokeRect(p,f,g-p,x-f),Ar.globalCompositeOperation="copy",c??(c=new oe),c.set(p/s,f/s,(g-p)/s,(x-f)/s),c}const Vg=new oe;class u2{getCanvasAndContext(t){const{text:e,style:s,resolution:o=1}=t,a=s._getFinalPadding(),c=cr.measureText(e||" ",s),u=Math.ceil(Math.ceil(Math.max(1,c.width)+a*2)*o),d=Math.ceil(Math.ceil(Math.max(1,c.height)+a*2)*o),p=zo.getOptimalCanvasAndContext(u,d);this._renderTextToCanvas(e,s,a,o,p);const f=s.trim?c2({canvas:p.canvas,width:u,height:d,resolution:1,output:Vg}):Vg.set(0,0,u,d);return{canvasAndContext:p,frame:f}}returnCanvasAndContext(t){zo.returnCanvasAndContext(t)}_renderTextToCanvas(t,e,s,o,a){const{canvas:c,context:u}=a,d=El(e),p=cr.measureText(t||" ",e),f=p.lines,g=p.lineHeight,x=p.lineWidths,v=p.maxLineWidth,_=p.fontProperties,b=c.height;if(u.resetTransform(),u.scale(o,o),u.textBaseline=e.textBaseline,e._stroke?.width){const T=e._stroke;u.lineWidth=T.width,u.miterLimit=T.miterLimit,u.lineJoin=T.join,u.lineCap=T.cap}u.font=d;let w,C;const A=e.dropShadow?2:1;for(let T=0;T<A;++T){const k=e.dropShadow&&T===0,L=k?Math.ceil(Math.max(1,b)+s*2):0,R=L*o;if(k){u.fillStyle="black",u.strokeStyle="black";const $=e.dropShadow,N=$.color,V=$.alpha;u.shadowColor=_e.shared.setValue(N).setAlpha(V).toRgbaString();const rt=$.blur*o,ct=$.distance*o;u.shadowBlur=rt,u.shadowOffsetX=Math.cos($.angle)*ct,u.shadowOffsetY=Math.sin($.angle)*ct+R}else{if(u.fillStyle=e._fill?Fl(e._fill,u,p,s*2):null,e._stroke?.width){const $=e._stroke.width*.5+s*2;u.strokeStyle=Fl(e._stroke,u,p,$)}u.shadowColor="black"}let F=(g-_.fontSize)/2;g-_.fontSize<0&&(F=0);const q=e._stroke?.width??0;for(let $=0;$<f.length;$++)w=q/2,C=q/2+$*g+_.ascent+F,e.align==="right"?w+=v-x[$]:e.align==="center"&&(w+=(v-x[$])/2),e._stroke?.width&&this._drawLetterSpacing(f[$],e,a,w+s,C+s-L,!0),e._fill!==void 0&&this._drawLetterSpacing(f[$],e,a,w+s,C+s-L)}}_drawLetterSpacing(t,e,s,o,a,c=!1){const{context:u}=s,d=e.letterSpacing;let p=!1;if(cr.experimentalLetterSpacingSupported&&(cr.experimentalLetterSpacing?(u.letterSpacing=`${d}px`,u.textLetterSpacing=`${d}px`,p=!0):(u.letterSpacing="0px",u.textLetterSpacing="0px")),d===0||p){c?u.strokeText(t,o,a):u.fillText(t,o,a);return}let f=o;const g=cr.graphemeSegmenter(t);let x=u.measureText(t).width,v=0;for(let _=0;_<g.length;++_){const b=g[_];c?u.strokeText(b,f,a):u.fillText(b,f,a);let w="";for(let C=_+1;C<g.length;++C)w+=g[C];v=u.measureText(w).width,f+=x-v+d,x=v}}}const Hg=new u2;class Do extends o2{constructor(...t){const e=a2(t,"Text");super(e,ns),this.renderPipeId="text",e.textureStyle&&(this.textureStyle=e.textureStyle instanceof xi?e.textureStyle:new xi(e.textureStyle))}updateBounds(){const t=this._bounds,e=this._anchor;let s=0,o=0;if(this._style.trim){const{frame:a,canvasAndContext:c}=Hg.getCanvasAndContext({text:this.text,style:this._style,resolution:1});Hg.returnCanvasAndContext(c),s=a.width,o=a.height}else{const a=cr.measureText(this._text,this._style);s=a.width,o=a.height}t.minX=-e._x*s,t.maxX=t.minX+s,t.minY=-e._y*o,t.maxY=t.minY+o}}Ne.add(lw,cw);const Yg=n=>{let t;const e=new Set,s=(p,f)=>{const g=typeof p=="function"?p(t):p;if(!Object.is(g,t)){const x=t;t=f??(typeof g!="object"||g===null)?g:Object.assign({},t,g),e.forEach(v=>v(t,x))}},o=()=>t,u={setState:s,getState:o,getInitialState:()=>d,subscribe:p=>(e.add(p),()=>e.delete(p))},d=t=n(s,o,u);return u},h2=(n=>n?Yg(n):Yg),d2=n=>n;function f2(n,t=d2){const e=ai.useSyncExternalStore(n.subscribe,ai.useCallback(()=>t(n.getState()),[n,t]),ai.useCallback(()=>t(n.getInitialState()),[n,t]));return ai.useDebugValue(e),e}const Xg=n=>{const t=h2(n),e=s=>f2(t,s);return Object.assign(e,t),e},p2=(n=>n?Xg(n):Xg);async function Cd(n,t={},e){return window.__TAURI_INTERNALS__.invoke(n,t,e)}var qg;(function(n){n[n.Audio=1]="Audio",n[n.Cache=2]="Cache",n[n.Config=3]="Config",n[n.Data=4]="Data",n[n.LocalData=5]="LocalData",n[n.Document=6]="Document",n[n.Download=7]="Download",n[n.Picture=8]="Picture",n[n.Public=9]="Public",n[n.Video=10]="Video",n[n.Resource=11]="Resource",n[n.Temp=12]="Temp",n[n.AppConfig=13]="AppConfig",n[n.AppData=14]="AppData",n[n.AppLocalData=15]="AppLocalData",n[n.AppCache=16]="AppCache",n[n.AppLog=17]="AppLog",n[n.Desktop=18]="Desktop",n[n.Executable=19]="Executable",n[n.Font=20]="Font",n[n.Home=21]="Home",n[n.Runtime=22]="Runtime",n[n.Template=23]="Template"})(qg||(qg={}));async function _h(...n){return Cd("plugin:path|join",{paths:n})}var Qg;(function(n){n[n.Start=0]="Start",n[n.Current=1]="Current",n[n.End=2]="End"})(Qg||(Qg={}));async function Sh(n,t){if(n instanceof URL&&n.protocol!=="file:")throw new TypeError("Must be a file URL.");const e=await Cd("plugin:fs|read_text_file",{path:n instanceof URL?n.toString():n,options:t}),s=e instanceof ArrayBuffer?e:Uint8Array.from(e);return new TextDecoder().decode(s)}const m2={0:16281969,1:16486972,2:16436245,3:6333946,4:10724259},tx={security:"#ef4444",tests:"#3b82f6",performance:"#f59e0b",farmhouse:"#8b5cf6",office:"#06b6d4",accessibility:"#10b981",garden:"#84cc16",compost:"#78716c",codeQuality:"#ec4899"},Ts={security:{x:85,y:50,width:240,height:185,dockX:185,dockY:195},tests:{x:435,y:50,width:240,height:185,dockX:415,dockY:195},performance:{x:700,y:50,width:240,height:185,dockX:790,dockY:195},farmhouse:{x:160,y:335,width:235,height:195,dockX:175,dockY:455},office:{x:492,y:335,width:160,height:195,dockX:415,dockY:455},accessibility:{x:745,y:335,width:200,height:195,dockX:760,dockY:455},garden:{x:35,y:700,width:345,height:270,dockX:235,dockY:530},compost:{x:430,y:890,width:100,height:100,dockX:490,dockY:620},codeQuality:{x:630,y:630,width:320,height:280,dockX:760,dockY:620}},Hl={security:"Security",tests:"Tests",performance:"Performance",farmhouse:"Farmhouse",office:"Home",accessibility:"Accessibility",garden:"Idea Garden",compost:"Compost",codeQuality:"Code Quality"},Kg=n=>{switch(n){case"garden":return"white-truck";case"compost":case"performance":return"tractor";default:return"blue-truck"}},g2={"blue-truck":{up:"tycoon/blue-truck-up.png",upFilled:"tycoon/blue-truck-up-filled.png",left:"tycoon/blue-truck-left.png",leftFilled:"tycoon/blue-truck-left-filled.png"},"white-truck":{up:"tycoon/white-truck-up.png",upFilled:"tycoon/white-truck-up-filled.png",left:"tycoon/white-truck-left.png",leftFilled:"tycoon/white-truck-left-filled.png"},tractor:{up:"tycoon/tractor-up.png",upFilled:"tycoon/tractor-up-filled.png",left:"tycoon/tractor-left.png",leftFilled:"tycoon/tractor-left-filled.png"}},yl={BASE:180,VARIANCE:90};function y2(n,t){const e=t?Hl[t]||t:"";switch(n){case"entering":return"Arriving...";case"traveling_to_pickup":return`Going to ${e}`;case"loading":return`Loading at ${e}`;case"traveling_to_delivery":return`Delivering to ${e}`;case"delivering":return`Unloading at ${e}`;case"waiting_for_completion":return`Working at ${e}...`;case"waiting_at_office":return"Ready to start";case"traveling_to_farmhouse":return"In progress...";case"bead_completing":return"Completed!";case"exiting":return"Task Complete!";case"finished":return"Done!";default:return""}}const Ad=[{id:"top-entry",position:{x:415,y:-30},direction:"enter",edge:"top"},{id:"bottom-entry",position:{x:415,y:1030},direction:"enter",edge:"bottom"},{id:"top-exit",position:{x:415,y:-30},direction:"exit",edge:"top"},{id:"bottom-exit",position:{x:415,y:1030},direction:"exit",edge:"bottom"}];function ex(n){return Ad.filter(t=>t.direction===n)}function Io(n){const t=ex(n);return t[Math.floor(Math.random()*t.length)]}function Zg(n){const t=ex("exit");let e=t[0],s=1/0;for(const o of t){const a=o.position.x-n.x,c=o.position.y-n.y,u=Math.sqrt(a*a+c*c);u<s&&(s=u,e=o)}return e}function x2(n){return Ad.find(t=>t.id===n)}const un=()=>({score:0,lastUpdated:null,status:null,openItems:[]}),v2=n=>{const t=un(),e=n.match(/\*\*Score:\*\*\s*(\d+(?:\.\d+)?)\s*\/\s*10/i);e&&(t.score=parseFloat(e[1]));const s=n.match(/\*\*Last Updated:\*\*\s*(\d{4}-\d{2}-\d{2})/i);s&&(t.lastUpdated=s[1]);const o=n.match(/\*\*Status:\*\*\s*(.+?)(?:\n|$)/i);o&&(t.status=o[1].trim());const a=n.match(/## Open Items\s*\n([\s\S]*?)(?=\n---|\n## |$)/i);if(a){const c=a[1];if(!c.match(/_None|No open items|Empty/i)){const u=c.split(`
`);for(const d of u){const p=d.match(/^[-*]\s+(.+)/);if(p){const f=p[1].trim();let g;f.match(/\[HIGH\]|\(HIGH\)|/i)?g="high":f.match(/\[MEDIUM\]|\(MEDIUM\)|/i)?g="medium":f.match(/\[LOW\]|\(LOW\)|/i)&&(g="low"),t.openItems.push({text:f.replace(/\[(HIGH|MEDIUM|LOW)\]|\((HIGH|MEDIUM|LOW)\)|[]/gi,"").trim(),priority:g})}}}}return t},w2=n=>{const t=[],e=n.split(`
`);let s=!1,o=!1,a=!1,c=0,u=0,d=0;const p=n.match(/\*\*Active Ideas:\*\*\s*(\d+)/i),f=p?parseInt(p[1],10):null;for(const g of e){if(g.match(/^##\s*Ideas\s*$/i)){s=!0,o=!1,a=!1;continue}if(g.match(/^##\s*Graduated to Plans/i)){s=!1,o=!0,a=!1;continue}if(g.match(/^##\s*Implemented/i)){s=!1,o=!1,a=!0;continue}if(g.startsWith("## ")||g.startsWith("---")){if(g.startsWith("---"))continue;s=!1,o=!1,a=!1;continue}if(s){const x=g.match(/^###\s+(.+)/);x&&(t.push(x[1]),c++)}o&&g.match(/^\|\s*[^|\-\s]/)&&!g.match(/^\|\s*Idea\s*\|/i)&&u++,a&&g.match(/^\|\s*[^|\-\s]/)&&!g.match(/^\|\s*Idea\s*\|/i)&&d++}return f!==null&&(c=f),{planted:c,growing:u,picked:d,ideas:t}},_2=n=>{const t=[],e=n.match(/^###\s+(.+)$/gm);if(e)for(const a of e){const c=a.replace(/^###\s+/,"").trim();c&&t.push(c)}const s=n.match(/\*\*Composted Ideas:\*\*\s*(\d+)/i);return{count:s?parseInt(s[1],10):t.length,ideas:t}},S2=45,b2=14,k2=180,C2=60,Jg={x:500,y:500},A2=800,P2=400,T2=500,M2=300,E2=200,I2=3e3,ty=250,R2=500,si=(n,t)=>`${n}-${t}`,F2=()=>({timeOfDay:"day",season:"summer",dayNightTimer:0,winterTimer:0,isWinter:!1,transitionProgress:0,isTransitioning:!1,transitionFrom:"day-summer",transitionTo:"day-summer",lastTickTime:0}),L2=()=>["security","tests","performance","farmhouse","office","accessibility","garden","compost","codeQuality"].map(t=>{const e=["garden","compost","office"].includes(t)?0:5;return{id:t,name:Hl[t],type:t,position:Ts[t],score:e,activity:"idle",color:tx[t]}}),tn=p2((n,t)=>({isInitialized:!1,isPaused:!1,showDebug:!1,hideTooltips:!1,showMiniPlayer:!1,wasOpenBeforePopupHide:!1,vehicles:[],buildings:L2(),auditScores:{security:un(),tests:un(),performance:un(),accessibility:un(),codeQuality:un(),farmhouse:un()},beadsStats:null,gardenStats:{activeIdeas:0,ideas:[],planted:0,growing:0,picked:0},compostStats:{rejectedIdeas:0,ideas:[]},activityFeed:[],navGraph:null,simulatedFlowerCount:null,celebrationQueue:[],mapCycle:F2(),pendingBuildingSelection:null,beadsEnabled:!1,beadVehicleMap:new Map,completedBeadIssueIds:new Set,initialize:async e=>{await t().refreshStats(),n({isInitialized:!0})},pause:()=>n({isPaused:!0}),resume:()=>n({isPaused:!1}),toggleDebug:()=>n(e=>({showDebug:!e.showDebug})),toggleHideTooltips:()=>n(e=>({hideTooltips:!e.hideTooltips})),showMiniPlayerFn:()=>n({showMiniPlayer:!0}),hideMiniPlayer:()=>n({showMiniPlayer:!1}),toggleMiniPlayer:()=>n(e=>({showMiniPlayer:!e.showMiniPlayer})),hideForPopup:()=>n(e=>e.showMiniPlayer?{showMiniPlayer:!1,wasOpenBeforePopupHide:!0}:{}),restoreAfterPopup:()=>n(e=>e.wasOpenBeforePopupHide?{showMiniPlayer:!0,wasOpenBeforePopupHide:!1}:{wasOpenBeforePopupHide:!1}),dispatchVehicle:(e,s)=>{n(o=>({vehicles:o.vehicles.map(a=>a.id===e?{...a,destination:s}:a)}))},updateBuildingScore:(e,s)=>{n(o=>({buildings:o.buildings.map(a=>a.id===e?{...a,score:s}:a)}))},addActivity:e=>{const s={...e,id:`event-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now()};n(o=>({activityFeed:[s,...o.activityFeed].slice(0,50)}))},refreshStats:async()=>{try{const e=window.__FARMWORK_PROJECT_PATH__;if(!e)return;try{const _=await Cd("beads_stats",{projectPath:e});n({beadsStats:_})}catch{}const s={security:un(),tests:un(),performance:un(),accessibility:un(),codeQuality:un(),farmhouse:un()},o=[["security","_AUDIT/SECURITY.md"],["tests","_AUDIT/TESTS.md"],["performance","_AUDIT/PERFORMANCE.md"],["accessibility","_AUDIT/ACCESSIBILITY.md"],["codeQuality","_AUDIT/CODE_QUALITY.md"],["farmhouse","_AUDIT/FARMHOUSE.md"]];for(const[_,b]of o)try{const w=await _h(e,b),C=await Sh(w),A=v2(C);s[_]=A}catch{}n({auditScores:s});let a=0,c=[],u=0,d=0,p=0;try{const _=await _h(e,"_AUDIT/GARDEN.md"),b=await Sh(_),w=w2(b);a=w.planted,c=w.ideas,u=w.planted,d=w.growing,p=w.picked,n({gardenStats:{activeIdeas:a,ideas:c,planted:u,growing:d,picked:p}})}catch{}let f=0,g=[];try{const _=await _h(e,"_AUDIT/COMPOST.md"),b=await Sh(_),w=_2(b);f=w.count,g=w.ideas,n({compostStats:{rejectedIdeas:f,ideas:g}})}catch{}const x=t().buildings,v=[];if(n(_=>({buildings:_.buildings.map(b=>{let w=0;switch(b.type){case"security":w=s.security.score;break;case"tests":w=s.tests.score;break;case"performance":w=s.performance.score;break;case"accessibility":w=s.accessibility.score;break;case"codeQuality":w=s.codeQuality.score;break;case"farmhouse":w=s.farmhouse.score;break;case"garden":w=a;break;case"compost":w=f;break;case"office":w=b.score;break}const A=x.find(T=>T.id===b.id)?.score??0;return w>=10&&A<10&&["security","tests","performance","accessibility","codeQuality","farmhouse"].includes(b.type)&&v.push(b.id),{...b,score:w}})})),v.length>0){const _=t().buildings;for(const b of v){const w=_.find(C=>C.id===b);w&&t().addActivity({type:"celebration",message:`${w.name} achieved perfect score!`,buildingId:b})}n(b=>({celebrationQueue:[...b.celebrationQueue,...v]}))}}catch(e){console.error("Failed to refresh farmwork stats:",e)}},setNavGraph:e=>n({navGraph:e}),updateVehiclePosition:(e,s)=>{n(o=>({vehicles:o.vehicles.map(a=>a.id===e?{...a,position:s}:a)}))},spawnVehicle:e=>{let s;if(e.route&&e.route.length>0)s=e.route;else if(e.destination)s=e.destination==="farmhouse"?[e.destination]:[e.destination,"farmhouse"];else return"";const o=`vehicle-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,a=Kg(s[0]),c=Io("enter"),u=t().buildings.find(g=>g.id===s[s.length-1]),d=u?{x:u.position.dockX,y:u.position.dockY}:Jg,p=Zg(d),f={id:o,type:a,position:{...c.position},destination:s[0],returnDestination:s.length>1?s[s.length-1]:null,route:s,currentRouteIndex:0,task:"entering",spawnPoint:c.id,exitPoint:p.id,path:[],pathIndex:0,speed:yl.BASE+Math.random()*yl.VARIANCE,carrying:!1,direction:c.edge==="top"?"down":"up",...e.tint!==void 0&&{tint:e.tint}};return n(g=>({vehicles:[...g.vehicles,f]})),o},incrementToolCount:()=>{n(e=>({buildings:e.buildings.map(s=>s.id==="office"?{...s,score:s.score+1}:s)}))},removeVehicle:e=>{n(s=>({vehicles:s.vehicles.filter(o=>o.id!==e)}))},setVehicleCarrying:(e,s)=>{n(o=>({vehicles:o.vehicles.map(a=>a.id===e?{...a,carrying:s}:a)}))},startTestRun:()=>{const s=t().buildings.filter(d=>d.type!=="farmhouse"&&d.type!=="office").map(d=>d.id);let o=0;s.forEach(d=>{setTimeout(()=>{t().spawnVehicle({destination:d}),t().addActivity({type:"vehicle_arrived",message:`Vehicle dispatched: ${Hl[d]}  Farmhouse`,buildingId:d})},o),o+=A2+Math.random()*P2}),n({simulatedFlowerCount:0});const a=20;let c=T2;for(let d=1;d<=a;d++)setTimeout(()=>{n({simulatedFlowerCount:d}),t().addActivity({type:"idea_added",message:`Idea ${d} planted in garden`,buildingId:"garden"})},c),c+=M2+Math.random()*E2;const u=c+I2;for(let d=a-1;d>=0;d--)setTimeout(()=>{n({simulatedFlowerCount:d}),d>0&&t().addActivity({type:"idea_composted",message:`Idea composted (${d} remaining)`,buildingId:"compost"})},u+(a-d)*ty);setTimeout(()=>{n({simulatedFlowerCount:null})},u+a*ty+R2)},clearAllVehicles:()=>{n({vehicles:[],simulatedFlowerCount:null})},setSimulatedFlowerCount:e=>{n({simulatedFlowerCount:e})},clearCelebrationQueue:()=>{n({celebrationQueue:[]})},tickMapCycle:e=>{const{mapCycle:s}=t(),o=performance.now();if(o-s.lastTickTime<10)return;if(s.isTransitioning){const d=s.transitionProgress+e/b2;d>=1?n({mapCycle:{...s,transitionProgress:1,isTransitioning:!1,lastTickTime:o}}):n({mapCycle:{...s,transitionProgress:d,lastTickTime:o}});return}const a=s.dayNightTimer+e,c=s.winterTimer+e;let u={dayNightTimer:a,winterTimer:c,lastTickTime:o};if(!s.isWinter&&c>=k2){const d=si(s.timeOfDay,"winter");u={...u,season:"winter",isWinter:!0,winterTimer:0,transitionProgress:0,isTransitioning:!0,transitionFrom:si(s.timeOfDay,s.season),transitionTo:d}}else if(s.isWinter&&c>=C2){const d=si(s.timeOfDay,"summer");u={...u,season:"summer",isWinter:!1,winterTimer:0,transitionProgress:0,isTransitioning:!0,transitionFrom:si(s.timeOfDay,s.season),transitionTo:d}}if(a>=S2){const d=s.timeOfDay==="day"?"night":"day",p=u.season??s.season,f=si(d,p);u={...u,timeOfDay:d,dayNightTimer:0,transitionProgress:0,isTransitioning:!0,transitionFrom:si(s.timeOfDay,p),transitionTo:f}}n({mapCycle:{...s,...u}})},signalVehicleExit:e=>{n(s=>({vehicles:s.vehicles.map(o=>o.id===e?{...o,shouldExit:!0}:o)}))},setPendingBuildingSelection:e=>{n({pendingBuildingSelection:e})},setBeadsEnabled:e=>{n({beadsEnabled:e})},syncBeadVehicles:e=>{const{beadVehicleMap:s,spawnBeadVehicle:o,signalVehicleExit:a,completedBeadIssueIds:c}=t(),d=e.filter(f=>(f.status==="open"||f.status==="in_progress")&&!c.has(f.id)).sort((f,g)=>f.priority-g.priority).slice(0,15),p=new Set(d.map(f=>f.id));for(const[f,g]of s)p.has(f)||(a(g.vehicleId),n(x=>{const v=new Map(x.beadVehicleMap);return v.delete(f),{beadVehicleMap:v}}));for(const f of d){const g=s.get(f.id);g?g.status!==f.status&&t().updateBeadVehicleStatus(f.id,f.status):o(f)}},spawnBeadVehicle:e=>{const s=e.status==="open"?"office":"farmhouse",o=m2[e.priority]??10724259,a=`bead-vehicle-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,c=Kg(s),u=Io("enter"),d=Zg(Jg),p=[s],f={id:a,type:c,position:{...u.position},destination:s,route:p,currentRouteIndex:0,task:"entering",spawnPoint:u.id,exitPoint:d.id,path:[],pathIndex:0,speed:yl.BASE+Math.random()*yl.VARIANCE,carrying:!1,direction:u.edge==="top"?"down":"up",tint:o,issueId:e.id,issueTitle:e.title};return n(g=>({vehicles:[...g.vehicles,f]})),n(g=>{const x=new Map(g.beadVehicleMap);return x.set(e.id,{issueId:e.id,vehicleId:a,status:e.status,priority:e.priority,title:e.title}),{beadVehicleMap:x}}),t().addActivity({type:"issue_created",message:`Issue: ${e.title.slice(0,30)}${e.title.length>30?"...":""}`,buildingId:s}),a},updateBeadVehicleStatus:(e,s)=>{const{beadVehicleMap:o,vehicles:a,signalVehicleExit:c}=t(),u=o.get(e);!u||!a.find(p=>p.id===u.vehicleId)||(s==="in_progress"&&u.status==="open"?(n(p=>({vehicles:p.vehicles.map(f=>f.id===u.vehicleId?{...f,route:["farmhouse"],currentRouteIndex:0,destination:"farmhouse",task:"traveling_to_farmhouse",path:[],pathIndex:0}:f),beadVehicleMap:new Map(p.beadVehicleMap).set(e,{...u,status:s})})),t().addActivity({type:"issue_started",message:`Started: ${u.title.slice(0,30)}${u.title.length>30?"...":""}`,buildingId:"farmhouse"})):s==="closed"&&(c(u.vehicleId),n(p=>{const f=new Map(p.beadVehicleMap);return f.delete(e),{beadVehicleMap:f}}),t().addActivity({type:"issue_closed",message:`Closed: ${u.title.slice(0,30)}${u.title.length>30?"...":""}`,buildingId:"farmhouse"})))},removeBeadVehicle:e=>{const{beadVehicleMap:s,signalVehicleExit:o}=t(),a=s.get(e);a&&(o(a.vehicleId),n(c=>{const u=new Map(c.beadVehicleMap);return u.delete(e),{beadVehicleMap:u}}))},markBeadIssueCompleted:e=>{n(s=>({completedBeadIssueIds:new Set(s.completedBeadIssueIds).add(e)}))},clearCompletedBeadIssues:()=>{n({completedBeadIssueIds:new Set})}}));async function N2(n){return new Promise((t,e)=>{const s=new Image;s.crossOrigin="anonymous",s.onload=()=>t(s),s.onerror=e,s.src=n})}async function B2(n,t=16,e=200){const s=await N2(n),o=s.width,a=s.height,c=document.createElement("canvas");c.width=o,c.height=a;const u=c.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("Could not get 2D context");u.drawImage(s,0,0);const p=u.getImageData(0,0,o,a).data,f=Math.ceil(o/t),g=Math.ceil(a/t),x=Array.from({length:g},()=>Array(f).fill(!1));for(let v=0;v<g;v++)for(let _=0;_<f;_++){let b=0,w=0;for(let A=0;A<3;A++)for(let T=0;T<3;T++){const k=Math.min(o-1,Math.floor((_+(T+.5)/3)*t)),R=(Math.min(a-1,Math.floor((v+(A+.5)/3)*t))*o+k)*4,F=p[R],q=p[R+1],$=p[R+2];if(p[R+3]<10)continue;const V=(F+q+$)/3;b+=V,w++}const C=w?b/w:0;x[v][_]=C>=e}return{width:o,height:a,cols:f,rows:g,cellSize:t,cells:x,isWalkable(v,_){return v<0||v>=f||_<0||_>=g?!1:x[_][v]}}}const O2=[{dx:0,dy:-1,name:"n"},{dx:1,dy:0,name:"e"},{dx:0,dy:1,name:"s"},{dx:-1,dy:0,name:"w"}];function z2(n){const{cols:t,rows:e,cellSize:s,width:o,height:a}=n,c=(f,g)=>f>=0&&f<t&&g>=0&&g<e&&n.isWalkable(f,g),u=(f,g)=>({n:c(f,g-1),e:c(f+1,g),s:c(f,g+1),w:c(f-1,g)}),d=(f,g)=>{if(!c(f,g))return!1;const x=u(f,g),v=[x.n,x.e,x.s,x.w].filter(Boolean).length;if(v===1||v>=3)return!0;if(v===2){const _=x.n&&x.s,b=x.e&&x.w;return!(_||b)}return!1},p=new Map;for(let f=0;f<e;f++)for(let g=0;g<t;g++)if(d(g,f)){const x=`${g},${f}`;p.set(x,{id:x,x:g*s+s/2,y:f*s+s/2,gridX:g,gridY:f,neighbors:[]})}for(const f of p.values())for(const g of O2){let x=f.gridX+g.dx,v=f.gridY+g.dy;if(c(x,v))for(;c(x,v);){const _=`${x},${v}`;if(p.has(_)){f.neighbors.push(_);break}x+=g.dx,v+=g.dy}}return{nodes:p,cellSize:s,width:o,height:a}}function ii(n,t,e){let s=null,o=1/0;for(const a of n.nodes.values()){const c=a.x-t,u=a.y-e,d=c*c+u*u;d<o&&(o=d,s=a)}return s}function ey(n,t){return Math.abs(n.gridX-t.gridX)+Math.abs(n.gridY-t.gridY)}function D2(n,t){const e=n.x-t.x,s=n.y-t.y;return Math.sqrt(e*e+s*s)}function bh(n,t,e,s={}){const{jitter:o=.08}=s,{nodes:a}=n,c=a.get(t),u=a.get(e);if(!c||!u)return null;const d=new Set([t]),p=new Map,f=new Map([[t,0]]),g=new Map([[t,ey(c,u)]]),x=()=>{let v=null,_=1/0;for(const b of d){const w=g.get(b)??1/0;w<_&&(_=w,v=b)}return v};for(;d.size>0;){const v=x();if(!v)break;if(v===e){const b=[v];let w=v;for(;p.has(w);)w=p.get(w),b.push(w);return b.reverse(),b}d.delete(v);const _=a.get(v);if(_)for(const b of _.neighbors){const w=a.get(b);if(!w)continue;const C=1+(Math.random()*2-1)*o,A=D2(_,w)*C,T=(f.get(v)??1/0)+A;T<(f.get(b)??1/0)&&(p.set(b,v),f.set(b,T),g.set(b,T+ey(w,u)),d.add(b))}}return null}function kh(n,t){return n.map(e=>{const s=t.nodes.get(e);return s?{x:s.x,y:s.y}:null}).filter(e=>e!==null)}function Ch(n,t=.5){if(n.length<3)return n;const e=[n[0]];for(let s=1;s<n.length-1;s++){const o=n[s-1],a=n[s],c=n[s+1];e.push({x:a.x+(o.x+c.x-2*a.x)*t*.5,y:a.y+(o.y+c.y-2*a.y)*t*.5})}return e.push(n[n.length-1]),e}function j2(n){const t=Array.from(n.nodes.values());return t.length===0?null:t[Math.floor(Math.random()*t.length)]}class G2{constructor(){dt(this,"grid",null);dt(this,"graph",null);dt(this,"initialized",!1)}async initialize(t,e=16){return this.grid=await B2(t,e,200),this.graph=z2(this.grid),this.addSpawnPointNodes(),this.initialized=!0,this.graph}addSpawnPointNodes(){if(this.graph)for(const t of Ad){const e=this.findNearestRoadToEdge(t.edge);if(e){const s={id:t.id,x:t.position.x,y:t.position.y,gridX:-1,gridY:t.edge==="top"?-1:999,neighbors:[e.id]};this.graph.nodes.set(t.id,s),e.neighbors.push(t.id)}}}findNearestRoadToEdge(t){if(!this.graph)return null;let e=null,s=1/0;const o=t==="top"?0:1e3,a=415;for(const c of this.graph.nodes.values()){if(c.id.startsWith("top-")||c.id.startsWith("bottom-"))continue;const u=c.x-a,d=c.y-o,p=Math.sqrt(u*u+d*d);p<s&&(s=p,e=c)}return e}isInitialized(){return this.initialized}getGraph(){return this.graph}getGrid(){return this.grid}findPath(t,e,s=.1){if(!this.graph)return console.warn("[Nav] No graph available"),null;const o=ii(this.graph,t.x,t.y),a=ii(this.graph,e.x,e.y);if(!o)return console.warn(`[Nav] No start node found near (${t.x.toFixed(0)}, ${t.y.toFixed(0)})`),null;if(!a)return console.warn(`[Nav] No end node found near (${e.x.toFixed(0)}, ${e.y.toFixed(0)})`),null;const c=bh(this.graph,o.id,a.id,{jitter:s});if(!c)return console.warn(`[Nav] A* found no path from ${o.id} to ${a.id}`),null;const u=kh(c,this.graph);return Ch(u,.3)}snapToRoad(t){if(!this.graph)return null;const e=ii(this.graph,t.x,t.y);return e?{x:e.x,y:e.y}:null}getRandomRoadPoint(){if(!this.graph)return null;const t=j2(this.graph);return t?{x:t.x,y:t.y}:null}getNearestNode(t){return this.graph?ii(this.graph,t.x,t.y):null}findPathFromSpawn(t,e,s=.1){if(!this.graph)return console.warn("[Nav] No graph available"),null;const o=this.graph.nodes.get(t);if(!o)return console.warn(`[Nav] Spawn point not found: ${t}`),null;const a=ii(this.graph,e.x,e.y);if(!a)return console.warn(`[Nav] No end node found near (${e.x.toFixed(0)}, ${e.y.toFixed(0)})`),null;const c=bh(this.graph,o.id,a.id,{jitter:s});if(!c)return console.warn(`[Nav] A* found no path from ${o.id} to ${a.id}`),null;const u=kh(c,this.graph);return Ch(u,.3)}findPathToExit(t,e,s=.1){if(!this.graph)return console.warn("[Nav] No graph available"),null;const o=this.graph.nodes.get(e);if(!o)return console.warn(`[Nav] Exit point not found: ${e}`),null;const a=ii(this.graph,t.x,t.y);if(!a)return console.warn(`[Nav] No start node found near (${t.x.toFixed(0)}, ${t.y.toFixed(0)})`),null;const c=bh(this.graph,a.id,o.id,{jitter:s});if(!c)return console.warn(`[Nav] A* found no path from ${a.id} to ${o.id}`),null;const u=kh(c,this.graph);return Ch(u,.3)}getSpawnPoint(t){return x2(t)}}const An=new G2;class nx extends Be{constructor(e){super();dt(this,"background");dt(this,"textLabel");dt(this,"config");dt(this,"bobPhase",0);dt(this,"bobAmplitude",3);dt(this,"bobSpeed",2);dt(this,"baseY",0);dt(this,"pulsePhase",0);dt(this,"isPulsing",!1);dt(this,"pulseScale",1);this.config={backgroundColor:1710638,textColor:16777215,floating:!0,minWidth:60,fontSize:10,padding:6,...e},this.background=new mn,this.addChild(this.background);const s=new ns({fontFamily:"monospace",fontSize:this.config.fontSize,fontWeight:"bold",fill:this.config.textColor});this.textLabel=new Do({text:this.config.text,style:s}),this.textLabel.anchor.set(.5),this.addChild(this.textLabel),this.drawBackground()}drawBackground(){const e=this.config.padding,s=this.textLabel.width,o=this.textLabel.height,a=Math.max(this.config.minWidth,s+e*2),c=o+e*2;this.background.clear(),this.background.roundRect(-a/2,-c/2,a,c,c/2),this.background.fill({color:this.config.backgroundColor,alpha:.9}),this.background.stroke({color:3816030,width:1,alpha:.5})}setText(e){this.textLabel.text!==e&&(this.textLabel.text=e,this.drawBackground())}setBackgroundColor(e){this.config.backgroundColor=e,this.drawBackground()}setTextColor(e){this.config.textColor=e,this.textLabel.style.fill=e}startPulse(){this.isPulsing=!0,this.pulsePhase=0}stopPulse(){this.isPulsing=!1,this.scale.set(1)}update(e){if(this.config.floating){this.bobPhase+=this.bobSpeed*e;const s=Math.sin(this.bobPhase)*this.bobAmplitude;this.y=this.baseY+s}if(this.isPulsing){this.pulsePhase+=e*8;const s=1+Math.sin(this.pulsePhase)*.08;this.scale.set(s),this.pulsePhase>Math.PI*4&&this.stopPulse()}}setBaseY(e){this.baseY=e,this.y=e}setFloating(e){this.config.floating=e}}class U2 extends nx{constructor(e){super({text:"",floating:!0,minWidth:100,fontSize:16,padding:12});dt(this,"buildingType");dt(this,"iconGraphic");dt(this,"scoreLabel");dt(this,"nameLabel");dt(this,"currentScore",0);this.buildingType=e.type,this.currentScore=e.score,this.textLabel.visible=!1,this.iconGraphic=new mn,this.addChild(this.iconGraphic);const s=new ns({fontFamily:"monospace",fontSize:16,fontWeight:"bold",fill:16777215});this.scoreLabel=new Do({text:this.formatScore(e.score),style:s}),this.scoreLabel.anchor.set(0,.5),this.addChild(this.scoreLabel);const o=new ns({fontFamily:"monospace",fontSize:10,fontWeight:"normal",fill:8947848});this.nameLabel=new Do({text:Hl[this.buildingType],style:o}),this.nameLabel.anchor.set(.5,0),this.addChild(this.nameLabel),this.drawBuildingBadge(),this.updateScore(e.score)}formatScore(e){return this.buildingType==="garden"||this.buildingType==="compost"||this.buildingType==="office"?`${Math.floor(e)}`:`${e%1===0?e.toString():e.toFixed(1)}/10`}drawBuildingBadge(){const e=this.getScoreColor(this.currentScore),s=22,o=this.scoreLabel.width,a=8,c=12,u=14,d=s+a+o,p=Math.max(d+c*2,this.nameLabel.width+c*2),f=36+u;this.background.clear(),this.background.roundRect(-p/2,-f/2,p,f,8),this.background.fill({color:1710638,alpha:.92}),this.background.stroke({color:e,width:2,alpha:.8}),this.drawIcon(e,s);const g=-d/2,x=-u/2;this.iconGraphic.x=g+s/2,this.iconGraphic.y=x,this.scoreLabel.x=g+s+a,this.scoreLabel.y=x,this.nameLabel.x=0,this.nameLabel.y=x+12}drawIcon(e,s){this.iconGraphic.clear();const o=s/2;switch(this.buildingType){case"security":this.iconGraphic.moveTo(0,-o),this.iconGraphic.lineTo(o,-o*.5),this.iconGraphic.lineTo(o,o*.3),this.iconGraphic.lineTo(0,o),this.iconGraphic.lineTo(-o,o*.3),this.iconGraphic.lineTo(-o,-o*.5),this.iconGraphic.closePath(),this.iconGraphic.fill({color:e,alpha:.9});break;case"tests":this.iconGraphic.roundRect(-o*.4,-o,o*.8,o*1.6,2),this.iconGraphic.fill({color:e,alpha:.9}),this.iconGraphic.circle(0,o*.5,o*.35),this.iconGraphic.fill({color:e,alpha:.9});break;case"performance":this.iconGraphic.circle(0,0,o),this.iconGraphic.stroke({color:e,width:2,alpha:.9}),this.iconGraphic.moveTo(0,0),this.iconGraphic.lineTo(o*.5,-o*.5),this.iconGraphic.stroke({color:e,width:2,alpha:.9});break;case"accessibility":this.iconGraphic.circle(0,-o*.5,o*.35),this.iconGraphic.fill({color:e,alpha:.9}),this.iconGraphic.moveTo(0,-o*.15),this.iconGraphic.lineTo(0,o*.4),this.iconGraphic.stroke({color:e,width:2,alpha:.9}),this.iconGraphic.moveTo(-o*.5,o),this.iconGraphic.lineTo(0,o*.4),this.iconGraphic.lineTo(o*.5,o),this.iconGraphic.stroke({color:e,width:2,alpha:.9});break;case"codeQuality":this.iconGraphic.moveTo(-o*.5,-o*.3),this.iconGraphic.lineTo(-o,0),this.iconGraphic.lineTo(-o*.5,o*.3),this.iconGraphic.stroke({color:e,width:2,alpha:.9}),this.iconGraphic.moveTo(o*.5,-o*.3),this.iconGraphic.lineTo(o,0),this.iconGraphic.lineTo(o*.5,o*.3),this.iconGraphic.stroke({color:e,width:2,alpha:.9});break;case"farmhouse":case"office":this.iconGraphic.moveTo(0,-o),this.iconGraphic.lineTo(o,-o*.2),this.iconGraphic.lineTo(o,o),this.iconGraphic.lineTo(-o,o),this.iconGraphic.lineTo(-o,-o*.2),this.iconGraphic.closePath(),this.iconGraphic.fill({color:e,alpha:.9});break;case"garden":this.iconGraphic.moveTo(0,o),this.iconGraphic.lineTo(0,0),this.iconGraphic.stroke({color:e,width:2,alpha:.9}),this.iconGraphic.moveTo(-o*.4,-o*.2),this.iconGraphic.quadraticCurveTo(-o*.8,-o,0,-o),this.iconGraphic.quadraticCurveTo(o*.8,-o,o*.4,-o*.2),this.iconGraphic.quadraticCurveTo(0,-o*.5,-o*.4,-o*.2),this.iconGraphic.fill({color:e,alpha:.9});break;case"compost":this.iconGraphic.roundRect(-o*.7,-o*.5,o*1.4,o*1.5,2),this.iconGraphic.fill({color:e,alpha:.9}),this.iconGraphic.moveTo(-o*.5,-o),this.iconGraphic.lineTo(o*.5,-o),this.iconGraphic.stroke({color:e,width:2,alpha:.9});break;default:this.iconGraphic.circle(0,0,o*.8),this.iconGraphic.fill({color:e,alpha:.9})}}getScoreColor(e){return this.buildingType==="garden"?8702998:this.buildingType==="compost"?7893356:this.buildingType==="office"?440020:e<3?15680580:e<6?16096779:e<8?3900150:2278750}updateScore(e){this.currentScore!==e&&(this.currentScore=e,this.scoreLabel.text=this.formatScore(e),this.drawBuildingBadge(),this.startPulse())}updateFromBuilding(e){this.updateScore(e.score)}getBuildingColor(){const e=tx[this.buildingType];return parseInt(e.replace("#",""),16)}}class $2 extends Be{constructor(e){super();dt(this,"data");dt(this,"background");dt(this,"nameLabel");dt(this,"scoreText");dt(this,"activityIndicator");dt(this,"badge");dt(this,"pulsePhase",0);dt(this,"activityPulseScale",1);this.data=e;const{x:s,y:o,width:a,height:c}=e.position;this.background=new mn,this.drawBackground(),this.background.visible=!1,this.addChild(this.background),this.nameLabel=new Do({text:e.name,style:{fontFamily:"Arial",fontSize:14,fill:16777215,align:"center",fontWeight:"bold"}}),this.nameLabel.anchor.set(.5),this.nameLabel.position.set(a/2,c/2-10),this.nameLabel.visible=!1,this.addChild(this.nameLabel),this.scoreText=new Do({text:`${e.score.toFixed(1)}/10`,style:{fontFamily:"Arial",fontSize:12,fill:16777215,align:"center"}}),this.scoreText.anchor.set(.5),this.scoreText.position.set(a/2,c/2+10),this.scoreText.visible=!1,this.addChild(this.scoreText),this.activityIndicator=new mn,this.activityIndicator.position.set(a-15,10),this.activityIndicator.visible=!1,this.addChild(this.activityIndicator),this.updateActivityIndicator(),this.badge=new U2(e),this.badge.position.set(a/2,-18),this.badge.setBaseY(-18),this.addChild(this.badge),this.position.set(s,o),this.eventMode="static",this.cursor="pointer"}drawBackground(){const{width:e,height:s}=this.data.position,o=parseInt(this.data.color.replace("#",""),16),a=this.getAlphaForScore(this.data.score);this.background.clear(),this.background.roundRect(0,0,e,s,8),this.background.fill({color:o,alpha:a}),this.background.stroke({color:16777215,width:2,alpha:.5})}getAlphaForScore(e){return e<3?.4:e<6?.6:e<8?.8:1}updateActivityIndicator(){this.activityIndicator.clear();const s={idle:7041664,working:2278750,alert:15680580}[this.data.activity];this.activityIndicator.circle(0,0,5),this.activityIndicator.fill(s),this.data.activity==="working"&&(this.activityIndicator.circle(0,0,7),this.activityIndicator.stroke({color:s,width:1,alpha:.5}))}update(e){this.badge.update(e),this.data.activity==="working"?(this.pulsePhase+=e*5,this.activityPulseScale=1+Math.sin(this.pulsePhase)*.3,this.activityIndicator.scale.set(this.activityPulseScale)):(this.activityIndicator.scale.set(1),this.pulsePhase=0)}updateData(e){const s=this.data.score!==e.score;this.data=e,this.drawBackground(),this.scoreText.text=`${e.score.toFixed(1)}/10`,this.updateActivityIndicator(),s&&this.badge.updateFromBuilding(e)}setActivity(e){this.data.activity=e,this.updateActivityIndicator()}highlight(e){e?this.background.tint=16777164:this.background.tint=16777215}setDebugMode(e){this.background.visible=e,this.nameLabel.visible=e,this.scoreText.visible=e,this.activityIndicator.visible=e}setBadgeVisible(e){this.badge.alpha=e?1:0}getData(){return this.data}}class W2 extends nx{constructor(){super({text:"Arriving...",floating:!1,minWidth:120,fontSize:14,padding:10,backgroundColor:1710638,textColor:16777215});dt(this,"currentTask","entering");dt(this,"currentDestination");this.bobAmplitude=2,this.bobSpeed=3}setTask(e,s){if(this.currentTask===e&&this.currentDestination===s)return;this.currentTask=e,this.currentDestination=s;const o=y2(e,s);this.setText(o);const a=this.getTaskBackgroundColor(e);this.setBackgroundColor(a),(e==="delivering"||e==="exiting"||e==="finished"||e==="bead_completing")&&this.startPulse()}getTaskBackgroundColor(e){switch(e){case"entering":case"traveling_to_pickup":return 1710638;case"loading":return 1981023;case"traveling_to_delivery":return 1981023;case"delivering":return 1984032;case"bead_completing":case"exiting":case"finished":return 2278750;default:return 1710638}}getTask(){return this.currentTask}}const V2={"blue-truck":3900150,"white-truck":16777215,tractor:2278750},ny=new Map;async function H2(n){const t=ny.get(n);if(t)return t;const e=g2[n],[s,o,a,c]=await Promise.all([$n.load(e.up),$n.load(e.upFilled),$n.load(e.left),$n.load(e.leftFilled)]),u={up:s,upFilled:o,left:a,leftFilled:c};return ny.set(n,u),u}class Y2 extends Be{constructor(e){super();dt(this,"data");dt(this,"sprite");dt(this,"fallbackGraphic");dt(this,"textures",null);dt(this,"arriveRadius",8);dt(this,"currentDirection","up");dt(this,"isCarrying",!1);dt(this,"isLoaded",!1);dt(this,"badge");dt(this,"isFinished",!1);dt(this,"tintColor",16777215);dt(this,"pulseTimer",0);this.data=e,this.currentDirection=e.direction,this.isCarrying=e.carrying,e.tint!==void 0&&(this.tintColor=e.tint),this.fallbackGraphic=new mn;const s=V2[e.type];this.fallbackGraphic.roundRect(-15,-20,30,40,4),this.fallbackGraphic.fill(s),this.fallbackGraphic.stroke({color:0,width:2}),this.fallbackGraphic.scale.set(.6),this.tintColor!==16777215&&(this.fallbackGraphic.tint=this.tintColor),this.addChild(this.fallbackGraphic),this.sprite=new hr,this.sprite.anchor.set(.5,.5),this.sprite.scale.set(.6),this.addChild(this.sprite),this.badge=new W2,this.badge.position.set(0,-30),this.badge.setBaseY(-30),this.addChild(this.badge);const o=e.route?.[e.currentRouteIndex]??e.destination;this.badge.setTask(e.task??"entering",o??void 0),this.position.set(e.position.x,e.position.y),this.loadTextures()}async loadTextures(){try{this.textures=await H2(this.data.type),this.isLoaded=!0,this.fallbackGraphic.visible=!1,this.updateTexture(),this.tintColor!==16777215&&(this.sprite.tint=this.tintColor)}catch(e){console.warn("Failed to load vehicle textures:",e)}}setTint(e){this.tintColor=e,this.sprite&&(this.sprite.tint=e),this.fallbackGraphic&&(this.fallbackGraphic.tint=e)}getTint(){return this.tintColor}updateTexture(){if(!this.textures||!this.isLoaded)return;let e;const s=this.isCarrying,o=.6;switch(this.currentDirection){case"up":e=s?this.textures.upFilled:this.textures.up,this.sprite.scale.set(o,o);break;case"down":e=s?this.textures.upFilled:this.textures.up,this.sprite.scale.set(o,-o);break;case"left":e=s?this.textures.leftFilled:this.textures.left,this.sprite.scale.set(-o,o);break;case"right":e=s?this.textures.leftFilled:this.textures.left,this.sprite.scale.set(o,o);break}this.sprite.texture=e}getDirectionFromVelocity(e,s){const o=Math.abs(e),a=Math.abs(s);return o>a?e>0?"right":"left":s>0?"down":"up"}update(e){if(this.badge.update(e),this.isFinished)return!1;if(this.data.task==="waiting_for_completion"||this.data.task==="waiting_at_office"||this.data.task==="bead_completing"){this.pulseTimer+=e;const g=Math.sin(this.pulseTimer*3)*.08+1;this.sprite.scale.set(.6*g),this.fallbackGraphic.scale.set(.6*g)}else this.pulseTimer=0;if(this.data.path.length===0)return!1;if(this.data.pathIndex>=this.data.path.length)return!0;const s=this.data.path[this.data.pathIndex],o=s.x-this.position.x,a=s.y-this.position.y,c=Math.hypot(o,a);if(c<=this.arriveRadius)return this.data.pathIndex++,this.data.position={x:this.position.x,y:this.position.y},this.data.pathIndex>=this.data.path.length;const u=this.data.speed,d=o/c*u,p=a/c*u;this.position.x+=d*e,this.position.y+=p*e,this.data.position={x:this.position.x,y:this.position.y};const f=this.getDirectionFromVelocity(d,p);return f!==this.currentDirection&&(this.currentDirection=f,this.data.direction=f,this.updateTexture()),!1}setPath(e){this.data.path=e,this.data.pathIndex=0}getData(){return this.data}updateData(e){if(this.isFinished)return;const s=this.isCarrying!==e.carrying,o=this.data.path,a=this.data.pathIndex,c=this.data.task,u=this.data.currentRouteIndex,d=this.data.waitStartTime;this.data=e,o.length>0&&(this.data.path=o,this.data.pathIndex=a),this.data.task=c,this.data.currentRouteIndex=u,d&&(this.data.waitStartTime=d),this.data.shouldExit=e.shouldExit,this.position.set(e.position.x,e.position.y),this.isCarrying=e.carrying,s&&this.updateTexture()}setCarrying(e){this.isCarrying!==e&&(this.isCarrying=e,this.data.carrying=e,this.updateTexture())}setTask(e,s){this.data.task=e,this.badge.setTask(e,s)}getTask(){return this.data.task}getCurrentDestination(){return this.data.route&&this.data.route.length>0?this.data.route[this.data.currentRouteIndex]:this.data.destination??void 0}advanceRoute(){if(!this.data.route||this.data.route.length===0)return!0;if(this.data.currentRouteIndex++,this.data.currentRouteIndex>=this.data.route.length){const s=this.data.route[this.data.route.length-1];return this.setTask("waiting_for_completion",s),this.data.waitStartTime=Date.now(),!0}const e=this.data.route[this.data.currentRouteIndex];return this.setTask("traveling_to_delivery",e),!1}isAtDestination(){return this.data.path.length===0||this.data.pathIndex>=this.data.path.length}markFinished(){this.isFinished=!0,this.setTask("finished")}isMarkedFinished(){return this.isFinished}setBadgeVisible(e){this.badge.visible=e}}const le=6,X2=["tycoon/flower1.png","tycoon/flower2.png","tycoon/flower3.png","tycoon/flower4.png"];class q2 extends Be{constructor(){super();dt(this,"flowers",[]);dt(this,"textures",[]);dt(this,"isLoaded",!1);dt(this,"gardenPos",Ts.garden);dt(this,"pendingFlowerCount",null);dt(this,"pendingIdeaNames",null);dt(this,"onFlowerHover",null);dt(this,"onGardenClick",null);dt(this,"clickArea",null);dt(this,"cellWidth");dt(this,"cellHeight");dt(this,"padding",20);dt(this,"flowerScale",.8);const e=this.gardenPos.width-this.padding*2,s=this.gardenPos.height-this.padding*2;this.cellWidth=e/le,this.cellHeight=s/le,this.loadTextures()}async loadTextures(){try{this.textures=await Promise.all(X2.map(e=>$n.load(e))),this.isLoaded=!0,this.initializeGrid()}catch(e){console.warn("Failed to load flower textures:",e)}}initializeGrid(){this.clickArea=new mn,this.clickArea.rect(this.gardenPos.x,this.gardenPos.y,this.gardenPos.width,this.gardenPos.height),this.clickArea.fill({color:0,alpha:0}),this.clickArea.eventMode="static",this.clickArea.cursor="pointer",this.clickArea.on("pointerdown",()=>{this.onGardenClick&&this.onGardenClick()}),this.addChild(this.clickArea);for(let e=0;e<le;e++){this.flowers[e]=[];for(let s=0;s<le;s++){const o=this.textures[Math.floor(Math.random()*this.textures.length)],a=new hr(o);a.anchor.set(.5,.5),a.scale.set(this.flowerScale),a.alpha=0;const c=this.gardenPos.x+this.padding+s*this.cellWidth+this.cellWidth/2,u=this.gardenPos.y+this.padding+e*this.cellHeight+this.cellHeight/2;a.position.set(c,u);const d=(Math.random()-.5)*.3;a.rotation=d,a.hitArea=new oe(-this.cellWidth/2,-this.cellHeight/2,this.cellWidth,this.cellHeight),a.eventMode="static",a.cursor="pointer";const p=e,f=s;a.on("pointerenter",()=>{const g=this.flowers[p]?.[f];g?.occupied&&g.ideaName&&this.onFlowerHover&&this.onFlowerHover(g.ideaName,a.x,a.y)}),a.on("pointerleave",()=>{this.onFlowerHover&&this.onFlowerHover(null,0,0)}),this.addChild(a),this.flowers[e][s]={sprite:a,occupied:!1,fadeTarget:0,ideaName:null}}}this.pendingFlowerCount!==null&&(this.setFlowerCount(this.pendingFlowerCount),this.pendingFlowerCount=null),this.pendingIdeaNames!==null&&(this.setIdeaNames(this.pendingIdeaNames),this.pendingIdeaNames=null)}setFlowerCount(e){if(!this.isLoaded){this.pendingFlowerCount=e;return}const s=le*le,o=Math.min(e,s);let a=0;for(let c=0;c<le;c++)for(let u=0;u<le;u++){const d=this.flowers[c]?.[u];if(!d)continue;const p=a<o;d.occupied=p,d.fadeTarget=p?1:0,a++}}showFlowerAt(e){if(!this.isLoaded)return;const s=Math.floor(e/le),o=e%le,a=this.flowers[s]?.[o];if(a){a.occupied=!0,a.fadeTarget=1;const c=this.textures[Math.floor(Math.random()*this.textures.length)];a.sprite.texture=c}}hideFlowerAt(e){if(!this.isLoaded)return;const s=Math.floor(e/le),o=e%le,a=this.flowers[s]?.[o];a&&(a.occupied=!1,a.fadeTarget=0)}showRandomFlower(){if(!this.isLoaded)return-1;const e=[];let s=0;for(let a=0;a<le;a++)for(let c=0;c<le;c++){const u=this.flowers[a]?.[c];u&&!u.occupied&&e.push(s),s++}if(e.length===0)return-1;const o=e[Math.floor(Math.random()*e.length)];return this.showFlowerAt(o),o}hideRandomFlower(){if(!this.isLoaded)return-1;const e=[];let s=0;for(let a=0;a<le;a++)for(let c=0;c<le;c++){const u=this.flowers[a]?.[c];u&&u.occupied&&e.push(s),s++}if(e.length===0)return-1;const o=e[Math.floor(Math.random()*e.length)];return this.hideFlowerAt(o),o}clearAll(){for(let e=0;e<le;e++)for(let s=0;s<le;s++){const o=this.flowers[e]?.[s];o&&(o.occupied=!1,o.fadeTarget=0)}}update(e){if(!this.isLoaded)return;const s=3;for(let o=0;o<le;o++)for(let a=0;a<le;a++){const c=this.flowers[o]?.[a];if(!c)continue;const u=c.fadeTarget-c.sprite.alpha;Math.abs(u)>.01?c.sprite.alpha+=u*s*e:c.sprite.alpha=c.fadeTarget}}getOccupiedCount(){let e=0;for(let s=0;s<le;s++)for(let o=0;o<le;o++)this.flowers[s]?.[o]?.occupied&&e++;return e}setIdeaNames(e){if(!this.isLoaded){this.pendingIdeaNames=e;return}let s=0;for(let o=0;o<le;o++)for(let a=0;a<le;a++){const c=this.flowers[o]?.[a];c&&(s<e.length?c.ideaName=e[s]:c.ideaName=null,s++)}}setOnFlowerHover(e){this.onFlowerHover=e}setOnGardenClick(e){this.onGardenClick=e}getGardenBounds(){return{x:this.gardenPos.x,y:this.gardenPos.y,width:this.gardenPos.width,height:this.gardenPos.height}}}const xl=[16776960,16753920,16737792,16729344,16711680,13369344];class Q2 extends Be{constructor(){super();dt(this,"particles",[]);dt(this,"glowGraphics");dt(this,"glowPhase",0);dt(this,"emitTimer",0);dt(this,"emitRate",.05);dt(this,"maxParticles",30);dt(this,"fireWidth",45);this.label="fireEffect",this.glowGraphics=new mn,this.glowGraphics.filters=[new J0({strength:15})],this.addChild(this.glowGraphics),this.drawGlow(1)}drawGlow(e){this.glowGraphics.clear(),this.glowGraphics.circle(0,-20,60*e),this.glowGraphics.fill({color:16729344,alpha:.15*e}),this.glowGraphics.circle(0,-15,40*e),this.glowGraphics.fill({color:16737792,alpha:.25*e}),this.glowGraphics.circle(0,-10,25*e),this.glowGraphics.fill({color:16753920,alpha:.4*e}),this.glowGraphics.circle(0,-5,15*e),this.glowGraphics.fill({color:16763904,alpha:.5*e})}createParticle(){if(this.particles.length>=this.maxParticles)return;const e=new mn,s=(Math.random()-.5)*this.fireWidth,o=0,a=(Math.random()-.5)*20,c=-25-Math.random()*25,u=1.2+Math.random()*.8,d=3+Math.random()*5,p=xl[0],f={graphics:e,x:s,y:o,vx:a,vy:c,life:u,maxLife:u,size:d,color:p};this.drawParticle(f),this.addChild(e),this.particles.push(f)}drawParticle(e){const{graphics:s,size:o,life:a,maxLife:c}=e,u=a/c;s.clear();const d=o*u,p=Math.min(xl.length-1,Math.floor((1-u)*xl.length)),f=xl[p];s.circle(0,0,d),s.fill({color:f,alpha:u*.8}),u>.5&&(s.circle(0,0,d*.5),s.fill({color:16777130,alpha:(u-.5)*.6}))}update(e){this.glowPhase+=e*1.5;const s=.85+Math.sin(this.glowPhase)*.15+Math.sin(this.glowPhase*2.3)*.08;for(this.drawGlow(s),this.emitTimer+=e;this.emitTimer>=this.emitRate;)this.emitTimer-=this.emitRate,this.createParticle(),Math.random()<.3&&this.createParticle();for(let o=this.particles.length-1;o>=0;o--){const a=this.particles[o];if(a.life-=e,a.life<=0){this.removeChild(a.graphics),a.graphics.destroy(),this.particles.splice(o,1);continue}const c=Math.sin(a.life*6+a.x)*6;a.x+=(a.vx+c)*e,a.y+=a.vy*e,a.vy*=.99,a.graphics.position.set(a.x,a.y),this.drawParticle(a)}}destroy(){for(const e of this.particles)e.graphics.destroy();this.particles=[],this.glowGraphics.destroy(),super.destroy()}}class K2{constructor(t,e,s=200,o=!1){dt(this,"pool",[]);dt(this,"active",new Set);dt(this,"container");dt(this,"textures");dt(this,"maxSize");dt(this,"useGraphics");this.container=t,this.textures=e,this.maxSize=s,this.useGraphics=o,this.preallocate(Math.min(50,s))}preallocate(t){for(let e=0;e<t;e++){const s=this.createParticle();s.sprite.visible=!1,this.pool.push(s)}}createParticle(){let t;if(this.useGraphics||this.textures.length===0){const e=new mn;e.circle(0,0,4),e.fill({color:16777215,alpha:1}),t=e}else{const e=this.textures[Math.floor(Math.random()*this.textures.length)];t=new hr(e),t.anchor.set(.5)}return t.visible=!1,this.container.addChild(t),{sprite:t,velocity:{x:0,y:0},life:0,maxLife:1,fadeOut:!0,rotationSpeed:0,gravity:0,initialAlpha:1}}acquire(t){if(this.active.size>=this.maxSize)return null;let e;return this.pool.length>0?e=this.pool.pop():e=this.createParticle(),e.velocity={...t.velocity},e.life=t.life,e.maxLife=t.life,e.fadeOut=t.fadeOut??!0,e.rotationSpeed=t.rotationSpeed??0,e.gravity=t.gravity??0,e.initialAlpha=t.alpha??1,e.sprite.visible=!0,e.sprite.alpha=e.initialAlpha,e.sprite.scale.set(t.scale??1),t.tint!==void 0&&(e.sprite.tint=t.tint),this.textures.length>0&&!this.useGraphics&&e.sprite instanceof hr&&(e.sprite.texture=this.textures[Math.floor(Math.random()*this.textures.length)]),this.active.add(e),e}release(t){this.active.has(t)&&(t.sprite.visible=!1,t.sprite.position.set(0,0),t.sprite.rotation=0,t.sprite.alpha=1,this.active.delete(t),this.pool.push(t))}update(t){const e=[];for(const s of this.active){if(s.life-=t,s.life<=0){e.push(s);continue}if(s.velocity.y+=s.gravity*t,s.sprite.x+=s.velocity.x*t,s.sprite.y+=s.velocity.y*t,s.sprite.rotation+=s.rotationSpeed*t,s.fadeOut){const o=s.life/s.maxLife;s.sprite.alpha=o*s.initialAlpha}}for(const s of e)this.release(s)}clear(){for(const t of this.active)t.sprite.visible=!1,this.pool.push(t);this.active.clear()}getActiveCount(){return this.active.size}destroy(){this.clear();for(const t of this.pool)t.sprite.destroy();this.pool=[]}}const Z2={hay:[14329120,16032864,13808780],leaves:[2263842,3329330,9498256,16747520,16753920],stars:[16766720,16776960,16775885],dust:[13808780,12888428,9139029],sparkle:[16777215,16766720,8900331],confetti:[15680580,16347926,15381256,2278750,3900150,11032055,15485081]};class J2 extends Be{constructor(){super();dt(this,"pools",new Map);this.label="particles",this.initPools()}initPools(){const e=["hay","leaves","stars","dust","sparkle","confetti"];for(const s of e){const o=s==="confetti"?100:50,a=new K2(this,[],o,!0);this.pools.set(s,a)}}getPool(e){return this.pools.get(e)}emitParticles(e){const s=this.getPool(e.type);if(!s)return;const o=e.spread??30,a=e.lifetime??1.2,c=e.speed??80,u=Z2[e.type];for(let d=0;d<e.count;d++){const p=Math.random()*Math.PI*2,f=c*(.5+Math.random()*.5),g={velocity:{x:Math.cos(p)*f*.3,y:-f*(.8+Math.random()*.4)},life:a*(.7+Math.random()*.6),fadeOut:!0,rotationSpeed:(Math.random()-.5)*4,gravity:e.type==="dust"?20:e.type==="hay"?60:40,scale:.5+Math.random()*.5,tint:u[Math.floor(Math.random()*u.length)]},x=s.acquire(g);if(x){const v=(Math.random()-.5)*o,_=(Math.random()-.5)*o*.5;x.sprite.position.set(e.position.x+v,e.position.y+_)}}}emitCargoDelivery(e){this.emitParticles({type:"sparkle",position:e,count:8,spread:25,lifetime:.8,speed:60}),this.emitParticles({type:"hay",position:e,count:5,spread:20,lifetime:1,speed:50}),this.emitParticles({type:"dust",position:{x:e.x,y:e.y+10},count:4,spread:30,lifetime:.6,speed:30})}emitBuildingActivity(e,s){let o="sparkle";switch(s){case"garden":o="leaves";break;case"compost":o="dust";break;case"farmhouse":case"office":o="sparkle";break;default:o="stars"}this.emitParticles({type:o,position:e,count:6,spread:20,lifetime:1,speed:50})}emitPickup(e){this.emitParticles({type:"sparkle",position:e,count:5,spread:15,lifetime:.6,speed:40})}emitCelebration(e){this.emitParticles({type:"confetti",position:e,count:30,spread:60,lifetime:2.5,speed:150}),this.emitParticles({type:"sparkle",position:e,count:20,spread:40,lifetime:1.5,speed:80}),this.emitParticles({type:"stars",position:e,count:15,spread:30,lifetime:2,speed:100}),setTimeout(()=>{this.emitParticles({type:"confetti",position:e,count:20,spread:50,lifetime:2,speed:120})},200)}update(e){for(const s of this.pools.values())s.update(e)}clear(){for(const e of this.pools.values())e.clear()}destroy(){for(const e of this.pools.values())e.destroy();this.pools.clear(),super.destroy()}getActiveParticleCount(){let e=0;for(const s of this.pools.values())e+=s.getActiveCount();return e}}/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rx=(...n)=>n.filter((t,e,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===e).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=ut.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:s,className:o="",children:a,iconNode:c,...u},d)=>ut.createElement("svg",{ref:d,...eC,width:t,height:t,stroke:n,strokeWidth:s?Number(e)*24/Number(t):e,className:rx("lucide",o),...u},[...c.map(([p,f])=>ut.createElement(p,f)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=(n,t)=>{const e=ut.forwardRef(({className:s,...o},a)=>ut.createElement(nC,{ref:a,iconNode:t,className:rx(`lucide-${tC(n)}`,s),...o}));return e.displayName=`${n}`,e};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=Ce("Accessibility",[["circle",{cx:"16",cy:"4",r:"1",key:"1grugj"}],["path",{d:"m18 19 1-7-6 1",key:"r0i19z"}],["path",{d:"m5 8 3-3 5.5 3-2.36 3.5",key:"9ptxx2"}],["path",{d:"M4.24 14.5a5 5 0 0 0 6.88 6",key:"10kmtu"}],["path",{d:"M13.76 17.5a5 5 0 0 0-6.88-6",key:"2qq6rc"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=Ce("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=Ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=Ce("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=Ce("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=Ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=Ce("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=Ce("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=Ce("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=Ce("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=Ce("LeafyGreen",[["path",{d:"M2 22c1.25-.987 2.27-1.975 3.9-2.2a5.56 5.56 0 0 1 3.8 1.5 4 4 0 0 0 6.187-2.353 3.5 3.5 0 0 0 3.69-5.116A3.5 3.5 0 0 0 20.95 8 3.5 3.5 0 1 0 16 3.05a3.5 3.5 0 0 0-5.831 1.373 3.5 3.5 0 0 0-5.116 3.69 4 4 0 0 0-2.348 6.155C3.499 15.42 4.409 16.712 4.2 18.1 3.926 19.743 3.014 20.732 2 22",key:"1134nt"}],["path",{d:"M2 22 17 7",key:"1q7jp2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=Ce("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=Ce("Sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=Ce("TestTubeDiagonal",[["path",{d:"M21 7 6.82 21.18a2.83 2.83 0 0 1-3.99-.01a2.83 2.83 0 0 1 0-4L17 3",key:"1ub6xw"}],["path",{d:"m16 2 6 6",key:"1gw87d"}],["path",{d:"M12 16H4",key:"1cjfip"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=Ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=Ce("TreeDeciduous",[["path",{d:"M8 19a4 4 0 0 1-2.24-7.32A3.5 3.5 0 0 1 9 6.03V6a3 3 0 1 1 6 0v.04a3.5 3.5 0 0 1 3.24 5.65A4 4 0 0 1 16 19Z",key:"oadzkq"}],["path",{d:"M12 19v3",key:"npa21l"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=Ce("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=Ce("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=Ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function hx(n){var t,e,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(t=0;t<o;t++)n[t]&&(e=hx(n[t]))&&(s&&(s+=" "),s+=e)}else for(e in n)n[e]&&(s&&(s+=" "),s+=e);return s}function mC(){for(var n,t,e=0,s="",o=arguments.length;e<o;e++)(n=arguments[e])&&(t=hx(n))&&(s&&(s+=" "),s+=t);return s}function Es(...n){return mC(n)}const gC={security:{icon:lx,color:"#f38ba8",description:"Monitors OWASP Top 10 vulnerabilities, injection attacks, XSS, and security best practices in your codebase.",type:"audit"},tests:{icon:ux,color:"#89b4fa",description:"Tracks test coverage, test scaffolding, and ensures your code has proper test suites.",type:"audit"},performance:{icon:ox,color:"#fab387",description:"Identifies memory leaks, unnecessary re-renders, bundle size issues, and performance anti-patterns.",type:"audit"},farmhouse:{icon:fC,color:"#cba6f7",description:"The central hub of your project. Tracks overall project health metrics and completed issues.",type:"audit"},office:{icon:ax,color:"#06b6d4",description:"Home base for tool operations. Tracks the total number of tool calls made during this session.",type:"count"},accessibility:{icon:sx,color:"#94e2d5",description:"Audits WCAG 2.1 compliance, screen reader compatibility, keyboard navigation, and color contrast.",type:"audit"},garden:{icon:cx,color:"#a6e3a1",description:"Your idea garden where new features and improvements are planted before becoming plans.",type:"count"},compost:{icon:uC,color:"#78716c",description:"Ideas that didn't make the cut. Sometimes good ideas need to rest before their time comes.",type:"count"},codeQuality:{icon:ix,color:"#f5c2e7",description:"Detects DRY violations, code smells, complexity issues, naming problems, and technical debt.",type:"audit"}},yC={security:"security",tests:"tests",performance:"performance",farmhouse:"farmhouse",accessibility:"accessibility",codeQuality:"codeQuality"},ry={security:"_AUDIT/SECURITY.md",tests:"_AUDIT/TESTS.md",performance:"_AUDIT/PERFORMANCE.md",accessibility:"_AUDIT/ACCESSIBILITY.md",codeQuality:"_AUDIT/CODE_QUALITY.md",farmhouse:"_AUDIT/FARMHOUSE.md",garden:"_AUDIT/GARDEN.md",compost:"_AUDIT/COMPOST.md"};function xC({buildingId:n,onClose:t,onOpenAuditFile:e}){const[s,o]=ut.useState(!1),[a,c]=ut.useState(!1),{buildings:u,auditScores:d,gardenStats:p,compostStats:f}=tn(),g=u.find(k=>k.id===n),x=g?gC[g.type]:null;ut.useEffect(()=>{if(n)c(!0),requestAnimationFrame(()=>{o(!0)});else{o(!1);const k=setTimeout(()=>c(!1),200);return()=>clearTimeout(k)}},[n]),ut.useEffect(()=>{const k=L=>{L.key==="Escape"&&n&&t()};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[n,t]);const v=ut.useCallback(()=>{!g||!ry[g.type]||!e||e(g.type)},[g,e]);if(!a||!g||!x)return null;const _=x.icon,b=yC[g.type],w=b?d[b]:null,C=ry[g.type],A=()=>{switch(g.type){case"garden":return p.activeIdeas;case"compost":return f.rejectedIdeas;case"office":return g.score;default:return 0}},T=()=>{switch(g.type){case"garden":return"Active Ideas";case"compost":return"Composted Ideas";case"office":return"Tool Calls";default:return"Count"}};return z.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/20",onClick:k=>{k.target===k.currentTarget&&t()},children:z.jsxs("div",{className:Es("bg-bg-secondary/95 backdrop-blur-sm rounded-xl border border-border/50 shadow-2xl","w-[300px] max-h-[80%] flex flex-col","transition-all duration-200 ease-out",s?"opacity-100 scale-100":"opacity-0 scale-95"),onClick:k=>k.stopPropagation(),children:[z.jsxs("div",{className:"p-4 pb-3 border-b border-border/30 shrink-0 relative",children:[z.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1",children:[C&&z.jsx("button",{onClick:v,className:"p-1.5 rounded-md hover:bg-bg-tertiary transition-colors",title:"Open audit file",children:z.jsx(lC,{className:"w-4 h-4 text-text-tertiary"})}),z.jsx("button",{onClick:t,className:"p-1.5 rounded-md hover:bg-bg-tertiary transition-colors",children:z.jsx(pC,{className:"w-4 h-4 text-text-tertiary"})})]}),z.jsxs("div",{className:"flex items-center gap-3 pr-16",children:[z.jsx("div",{className:"p-2.5 rounded-lg shrink-0",style:{backgroundColor:`${x.color}20`},children:z.jsx(_,{className:"w-6 h-6",style:{color:x.color}})}),z.jsxs("div",{className:"min-w-0",children:[z.jsx("h3",{className:"text-sm font-semibold text-text-primary truncate",children:g.name}),z.jsx("span",{className:"text-xs font-mono",style:{color:x.color},children:x.type==="audit"&&w?`${w.score%1===0?w.score:w.score.toFixed(1)}/10`:`${A()} ${T().toLowerCase()}`})]})]})]}),z.jsxs("div",{className:"p-4 pt-3 overflow-y-auto flex-1 min-h-0",children:[x.type==="audit"&&w&&z.jsxs("div",{className:"space-y-2",children:[z.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[z.jsx("span",{className:"text-text-tertiary uppercase tracking-wider",children:"Score"}),z.jsxs("span",{className:"font-mono font-bold",style:{color:x.color},children:[w.score%1===0?w.score:w.score.toFixed(1),"/10"]})]}),z.jsx("div",{className:"flex gap-[3px] h-3",children:Array.from({length:10}).map((k,L)=>{const R=L<Math.floor(w.score),F=L===Math.floor(w.score)&&w.score%1>0,q=w.score%1*100;return z.jsxs("div",{className:"flex-1 rounded-[4px] relative overflow-hidden",style:{backgroundColor:`${x.color}15`,boxShadow:"inset 0 1px 2px rgba(0,0,0,0.3)"},children:[R&&z.jsx("div",{className:"absolute inset-0 rounded-[4px]",style:{backgroundColor:x.color,boxShadow:"inset 0 1px 0 rgba(255,255,255,0.3), inset 0 -1px 1px rgba(0,0,0,0.2)"}}),F&&z.jsx("div",{className:"absolute inset-y-0 left-0 rounded-[4px]",style:{backgroundColor:x.color,width:`${q}%`,boxShadow:"inset 0 1px 0 rgba(255,255,255,0.3), inset 0 -1px 1px rgba(0,0,0,0.2)"}})]},L)})}),(w.lastUpdated||w.status)&&z.jsxs("div",{className:"mt-3 pt-2 border-t border-border/30 space-y-1",children:[w.lastUpdated&&z.jsxs("div",{className:"flex justify-between text-[10px]",children:[z.jsx("span",{className:"text-text-tertiary",children:"Last Updated"}),z.jsx("span",{className:"text-text-secondary",children:w.lastUpdated})]}),w.status&&z.jsxs("div",{className:"flex justify-between text-[10px]",children:[z.jsx("span",{className:"text-text-tertiary",children:"Status"}),z.jsx("span",{className:"text-text-secondary truncate ml-2",children:w.status})]})]}),w.openItems.length>0&&z.jsxs("div",{className:"mt-3 pt-2 border-t border-border/30",children:[z.jsxs("div",{className:"text-[10px] text-text-tertiary uppercase tracking-wider mb-1.5",children:["Open Items (",w.openItems.length,")"]}),z.jsx("div",{className:"space-y-1",children:w.openItems.map((k,L)=>z.jsx("div",{className:Es("text-[10px] leading-snug py-1 px-2 rounded","bg-bg-tertiary/50 truncate",k.priority==="high"&&"text-red-400 border-l-2 border-red-400/50",k.priority==="medium"&&"text-yellow-400 border-l-2 border-yellow-400/50",!k.priority&&"text-text-secondary border-l-2 border-border/50"),title:k.text,children:k.text},L))})]}),z.jsx("p",{className:"mt-3 pt-2 border-t border-border/30 text-[10px] text-text-tertiary leading-relaxed",children:x.description})]}),x.type==="count"&&z.jsxs("div",{className:"space-y-2",children:[z.jsxs("div",{className:"flex items-center justify-between",children:[z.jsx("span",{className:"text-[10px] text-text-tertiary uppercase tracking-wider",children:T()}),z.jsx("span",{className:"text-2xl font-mono font-bold",style:{color:x.color},children:A()})]}),g.type==="garden"&&p.ideas.length>0&&z.jsxs("div",{className:"mt-3 pt-2 border-t border-border/30",children:[z.jsx("div",{className:"text-[10px] text-text-tertiary uppercase tracking-wider mb-1.5",children:"Ideas"}),z.jsx("div",{className:"space-y-1",children:p.ideas.map((k,L)=>z.jsx("div",{className:"text-[10px] leading-snug py-1 px-2 rounded bg-bg-tertiary/50 text-text-secondary truncate",title:k,children:k},L))})]}),g.type==="compost"&&f.ideas.length>0&&z.jsxs("div",{className:"mt-3 pt-2 border-t border-border/30",children:[z.jsx("div",{className:"text-[10px] text-text-tertiary uppercase tracking-wider mb-1.5",children:"Rejected Ideas"}),z.jsx("div",{className:"space-y-1 max-h-[200px] overflow-y-auto",children:f.ideas.map((k,L)=>z.jsx("div",{className:"text-[10px] leading-snug py-1 px-2 rounded bg-bg-tertiary/50 text-text-secondary truncate",title:k,children:k},L))})]}),z.jsx("p",{className:"mt-3 pt-2 border-t border-border/30 text-[10px] text-text-tertiary leading-relaxed",children:x.description})]})]})]})})}const wo=1e3,sy={"day-summer":"tycoon/map.png","night-summer":"tycoon/map-night.png","day-winter":"tycoon/map-day-winter.png","night-winter":"tycoon/map-night-winter.png"};function vC({containerWidth:n,containerHeight:t,autoScale:e=!0,isMiniPlayer:s=!1,onBuildingClick:o,initialSelectedBuilding:a=null,onOpenAuditFile:c}){const u=ut.useRef(null),d=ut.useRef(null),p=ut.useRef(!1),f=ut.useRef(!1),g=ut.useRef(!0),x=ut.useRef(new Map),v=ut.useRef(new Map),_=ut.useRef(null),b=ut.useRef(null),w=ut.useRef(null),C=ut.useRef(null),A=ut.useRef(new Map),[T,k]=ut.useState(1),[L,R]=ut.useState(a),[F,q]=ut.useState(null),{buildings:$,vehicles:N,showDebug:V,hideTooltips:rt,isPaused:ct,navGraph:lt,setNavGraph:kt,updateVehiclePosition:Q,removeVehicle:K,addActivity:J,gardenStats:X,simulatedFlowerCount:et,celebrationQueue:M,clearCelebrationQueue:O}=tn(),G=ut.useCallback(async()=>{if(!An.isInitialized()){const W=await An.initialize("tycoon/map-mask.png",16);kt(W)}},[kt]),Z=ut.useCallback(W=>{if(W.clear(),!V)return;const j=An.getGrid();if(j){for(let H=0;H<j.rows;H++)for(let Y=0;Y<j.cols;Y++)if(j.isWalkable(Y,H)){const at=Y*j.cellSize,St=H*j.cellSize;W.rect(at,St,j.cellSize,j.cellSize),W.fill({color:16776960,alpha:.3})}}if(lt){for(const H of lt.nodes.values())for(const Y of H.neighbors){const at=lt.nodes.get(Y);at&&(W.moveTo(H.x,H.y),W.lineTo(at.x,at.y),W.stroke({color:65280,width:3,alpha:.7}))}for(const H of lt.nodes.values())W.circle(H.x,H.y,5),W.fill(65280);for(const H of $){const Y=H.position;W.circle(Y.dockX,Y.dockY,8),W.fill(16711935),W.stroke({color:16777215,width:2})}}},[V,lt,$]);ut.useEffect(()=>{if(!u.current)return;let W=!1,j=null;return g.current=!0,(async()=>{const Y=new S0;j=Y;const at=n!==void 0&&t!==void 0?Math.min(n,t):600;if(await Y.init({width:at,height:at,backgroundColor:1710618,antialias:!0,resolution:1,sharedTicker:!1,preference:"webgl"}),typeof window<"u"&&window.FARMWORK_STANDALONE_MODE&&($n.resolver.basePath="/farmwork/"),W||!Y.stage){try{Y.destroy(!0,{children:!0,texture:!1})}catch{}return}if(u.current?.querySelector("canvas")){try{Y.destroy(!0,{children:!0,texture:!1})}catch{}return}const yt=at/wo;Y.stage.scale.set(yt,yt),d.current=Y,f.current=!0,p.current=!0,u.current?.appendChild(Y.canvas);try{const $t=new Be;$t.label="mapContainer",Y.stage.addChild($t);const Kt=Object.keys(sy),Ae=tn.getState().mapCycle,yn=`${Ae.timeOfDay}-${Ae.season}`;for(const Ct of Kt){const Se=await $n.load(sy[Ct]);if(W||!Y.stage)return;const bt=new hr(Se);bt.width=1e3,bt.height=1e3,bt.alpha=Ct===yn?1:0,$t.addChild(bt),A.current.set(Ct,bt)}}catch($t){console.warn("Could not load map backgrounds:",$t)}if(W||!Y.stage)return;const wt=new Be;wt.label="buildings",Y.stage.addChild(wt);const pt=new q2;pt.label="gardenFlowers",Y.stage.addChild(pt),b.current=pt;const{gardenStats:It,simulatedFlowerCount:Rt}=tn.getState(),Gt=Rt!==null?Rt:It.activeIdeas;pt.setFlowerCount(Gt);const ce=new Be;ce.label="vehicles",Y.stage.addChild(ce);const qt=new J2;qt.label="particles",Y.stage.addChild(qt),w.current=qt;const Yt=new Q2;Yt.label="fireEffect",Yt.position.set(480,940),Y.stage.addChild(Yt),C.current=Yt;const Nt=new mn;Nt.label="debug",Y.stage.addChild(Nt),_.current=Nt;const Bt=tn.getState().hideTooltips;for(const $t of $){const Kt=new $2($t);Kt.setDebugMode(tn.getState().showDebug),Kt.setBadgeVisible(!Bt),wt.addChild(Kt),x.current.set($t.id,Kt),s&&o?Kt.on("pointerdown",()=>{o($t.id)}):s||Kt.on("pointerdown",()=>{R($t.id)})}if(await G(),W)return;const Qt=$t=>$t<.5?4*$t*$t*$t:1-Math.pow(-2*$t+2,3)/2;Y.ticker.add($t=>{const Kt=$t.deltaMS/1e3,Ae=A.current;if(Ae.size>0){tn.getState().tickMapCycle(Kt);const Ct=tn.getState().mapCycle;if(Ct.isTransitioning){const Se=Qt(Ct.transitionProgress),bt=Ae.get(Ct.transitionFrom),He=Ae.get(Ct.transitionTo);bt&&(bt.alpha=1-Se),He&&(He.alpha=Se);for(const[In,te]of Ae)In!==Ct.transitionFrom&&In!==Ct.transitionTo&&(te.alpha=0)}else{const Se=`${Ct.timeOfDay}-${Ct.season}`;for(const[bt,He]of Ae)He.alpha=bt===Se?1:0}}b.current&&b.current.update(Kt),w.current&&w.current.update(Kt),C.current&&C.current.update(Kt);for(const Ct of x.current.values())Ct.update(Kt);if(!tn.getState().isPaused)for(const Ct of v.current.values()){if(Ct.isMarkedFinished())continue;const Se=Ct.update(Kt),bt=Ct.getData();if(Q(bt.id,bt.position),(bt.task==="waiting_for_completion"||bt.task==="waiting_at_office")&&bt.shouldExit){Ct.setTask("exiting");const te=Io("exit"),Xt=An.findPathToExit(bt.position,te.id);Xt&&Xt.length>0?Ct.setPath(Xt):(Ct.markFinished(),setTimeout(()=>K(bt.id),500));continue}if(bt.task==="traveling_to_farmhouse"&&bt.path.length===0){const te=Ts.farmhouse;if(te){const Xt=An.findPath(bt.position,{x:te.dockX,y:te.dockY});Xt&&Xt.length>0&&Ct.setPath(Xt)}}const He=300*1e3;if(bt.task==="waiting_for_completion"&&!bt.issueId&&bt.waitStartTime&&Date.now()-bt.waitStartTime>He){Ct.setTask("exiting");const te=Io("exit"),Xt=An.findPathToExit(bt.position,te.id);Xt&&Xt.length>0?Ct.setPath(Xt):(Ct.markFinished(),setTimeout(()=>K(bt.id),500));continue}if(bt.task==="bead_completing"&&bt.issueId&&bt.waitStartTime&&Date.now()-bt.waitStartTime>1e3){tn.getState().markBeadIssueCompleted(bt.issueId),tn.getState().removeBeadVehicle(bt.issueId),Ct.setTask("exiting");const te=Io("exit"),Xt=An.findPathToExit(bt.position,te.id);Xt&&Xt.length>0?Ct.setPath(Xt):(Ct.markFinished(),setTimeout(()=>K(bt.id),500));continue}if(Se){const te=Ct.getCurrentDestination(),Xt=Ct.getTask();if(Xt==="exiting"&&!te){Ct.markFinished(),setTimeout(()=>{K(bt.id)},100);continue}if(Xt==="traveling_to_farmhouse"){Ct.setTask("bead_completing","farmhouse"),Ct.setPath([]),Ct.getData().waitStartTime=Date.now();continue}if(bt.issueId&&te==="office"&&Xt!=="bead_completing"&&Xt!=="exiting"){Ct.setTask("bead_completing","office"),Ct.setPath([]),Ct.getData().waitStartTime=Date.now();continue}if(te&&w.current&&Xt==="traveling_to_delivery"){const Ye=Ts[te];Ye&&w.current.emitCargoDelivery({x:Ye.dockX,y:Ye.dockY})}J({type:"vehicle_arrived",message:`Vehicle arrived at ${te||"destination"}`,buildingId:te||bt.destination||void 0});const Kn=Ct.advanceRoute(),Pe=Ct.getTask();if(Kn&&Pe==="waiting_for_completion")Ct.setCarrying(!1),Ct.setPath([]);else if(Kn)Ct.markFinished(),setTimeout(()=>{K(bt.id)},1e3);else{const Ye=Ct.getCurrentDestination();if(Ye){Pe==="traveling_to_delivery"&&Ct.setCarrying(!0);const xn=Ts[Ye];if(xn){const Zn=bt.position,vn={x:xn.dockX,y:xn.dockY},Ue=An.findPath(Zn,vn);Ue&&Ue.length>0&&Ct.setPath(Ue)}}}}}}),Y.ticker.start();const ye=setInterval(()=>{W||!Y.ticker||Y.ticker.started||(console.log("[TycoonGame] Restarting paused ticker"),Y.ticker.start())},1e3);Y._tickerWatchdog=ye})(),()=>{if(W=!0,g.current=!1,j)try{const Y=j._tickerWatchdog;Y&&clearInterval(Y),j.ticker?.stop(),j.stage&&j.stage.removeChildren(),j.canvas?.parentNode&&j.canvas.parentNode.removeChild(j.canvas),j.destroy(!1,{children:!1,texture:!1})}catch(Y){const at=String(Y);["_cancelResize","textureBatch","renderer.canvas","this.renderer"].some(yt=>at.includes(yt))||console.warn("Error destroying PixiJS app:",Y)}if(u.current)for(;u.current.firstChild;)u.current.removeChild(u.current.firstChild);p.current=!1,f.current=!1,d.current=null,x.current.clear(),v.current.clear(),A.current.clear()}},[]),ut.useEffect(()=>{if(!e){k(1);return}const W=()=>{if(n!==void 0&&t!==void 0){const j=Math.min(n,t)/wo;k(Math.min(1,j))}else if(u.current){const j=u.current.parentElement?.getBoundingClientRect();if(j){const H=Math.min(j.width,j.height)/wo;k(Math.min(1,H))}}};if(W(),n===void 0||t===void 0){const j=new ResizeObserver(W);return u.current?.parentElement&&j.observe(u.current.parentElement),()=>j.disconnect()}},[n,t,e]),ut.useEffect(()=>{if(!d.current||!f.current)return;const W=d.current;if(!W.stage||!W.renderer)return;const j=Math.round(wo*T);W.renderer.resize(j,j),W.stage.scale.set(T,T)},[T]),ut.useEffect(()=>{if(!(M.length===0||!w.current)){for(const W of M){const j=$.find(H=>H.id===W);if(j){const H={x:Ts[j.type].dockX,y:Ts[j.type].dockY-30};w.current.emitCelebration(H)}}O()}},[M,$,O]),ut.useEffect(()=>{for(const W of $){const j=x.current.get(W.id);j&&j.updateData(W)}},[$]),ut.useEffect(()=>{if(!d.current?.stage)return;const W=d.current.stage.children.find(H=>H.label==="vehicles");if(!W)return;const j=new Set(N.map(H=>H.id));for(const[H,Y]of v.current)j.has(H)||(W.removeChild(Y),v.current.delete(H));for(const H of N){let Y=v.current.get(H.id);if(Y){if(Y.updateData(H),Y.getData().path.length===0&&lt&&!Y.isMarkedFinished()){const at=Y.getTask();if(at!=="exiting"&&at!=="finished"){const St=H.route?.[0]||H.destination,yt=$.find(wt=>wt.id===St);if(yt){const wt={x:yt.position.dockX,y:yt.position.dockY};let pt=null;if(H.spawnPoint)pt=An.findPathFromSpawn(H.spawnPoint,wt);else{const It=H.position;pt=An.findPath(It,wt)}pt&&pt.length>0&&(Y.setPath(pt),Y.setTask("traveling_to_pickup",St||void 0))}}}}else{Y=new Y2(H),Y.setBadgeVisible(!rt),W.addChild(Y),v.current.set(H.id,Y);const at=H.route?.[0]||H.destination;if(at&&lt){const St=$.find(yt=>yt.id===at);if(St){const yt={x:St.position.dockX,y:St.position.dockY};let wt=null;if(H.spawnPoint)wt=An.findPathFromSpawn(H.spawnPoint,yt);else{const pt=H.position;wt=An.findPath(pt,yt)}wt&&wt.length>0&&(Y.setPath(wt),Y.setTask("traveling_to_pickup",at))}}}}},[N,lt,$,s,rt]),ut.useEffect(()=>{_.current&&Z(_.current);for(const W of x.current.values())W.setDebugMode(V)},[V,Z,lt]),ut.useEffect(()=>{const W=!rt;for(const j of x.current.values())j.setBadgeVisible(W);for(const j of v.current.values())j.setBadgeVisible(W)},[rt]),ut.useEffect(()=>{if(!b.current)return;const W=et!==null?et:X.activeIdeas;b.current.setFlowerCount(W),b.current.setIdeaNames(X.ideas),s||(b.current.setOnFlowerHover((j,H,Y)=>{q(j?{text:j,x:H*T,y:Y*T}:null)}),b.current.setOnGardenClick(()=>{R("garden")}))},[X.activeIdeas,X.ideas,et,T,s]);const st=Math.round(wo*T);return z.jsxs("div",{ref:u,className:"relative bg-bg-tertiary rounded-lg overflow-hidden",style:{width:st,height:st},children:[!s&&z.jsx(xC,{buildingId:L,onClose:()=>R(null),onOpenAuditFile:c}),!s&&!rt&&F&&z.jsx("div",{className:"absolute pointer-events-none z-40 px-2 py-1 bg-bg-secondary/95 backdrop-blur-sm rounded-md border border-border/50 shadow-lg text-xs text-text-primary max-w-[200px] truncate",style:{left:F.x,top:F.y-30,transform:"translateX(-50%)"},children:F.text})]})}var wC=ky();function _C({content:n,children:t,side:e="top",className:s,wrapperClassName:o}){const[a,c]=ut.useState(!1),[u,d]=ut.useState(!1),[p,f]=ut.useState({x:0,y:0}),g=ut.useRef(null),x=ut.useRef(null),v=ut.useCallback(()=>{if(!g.current||!x.current)return;const _=g.current.getBoundingClientRect(),b=x.current.getBoundingClientRect(),w=8,C=8;let A=e,T=0,k=0;switch(e==="top"&&_.top-b.height-C<w?A="bottom":e==="bottom"&&_.bottom+b.height+C>window.innerHeight-w?A="top":e==="left"&&_.left-b.width-C<w?A="right":e==="right"&&_.right+b.width+C>window.innerWidth-w&&(A="left"),A){case"top":T=_.left+_.width/2-b.width/2,k=_.top-b.height-C;break;case"bottom":T=_.left+_.width/2-b.width/2,k=_.bottom+C;break;case"left":T=_.left-b.width-C,k=_.top+_.height/2-b.height/2;break;case"right":T=_.right+C,k=_.top+_.height/2-b.height/2;break}T=Math.max(w,Math.min(T,window.innerWidth-b.width-w)),k=Math.max(w,Math.min(k,window.innerHeight-b.height-w)),f({x:T,y:k}),d(!0)},[e]);return ut.useEffect(()=>{a&&(d(!1),requestAnimationFrame(v))},[a,v]),z.jsxs("div",{ref:g,className:Es("relative inline-flex",o),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onFocus:()=>c(!0),onBlur:()=>c(!1),children:[t,a&&wC.createPortal(z.jsx("div",{ref:x,style:{position:"fixed",left:p.x,top:p.y,opacity:u?1:0},className:Es("tooltip-content z-[99999] px-2.5 py-1.5 text-sm font-medium rounded-md shadow-lg","bg-bg-tertiary border border-border text-text-primary","pointer-events-none max-w-xs",s),children:n}),document.body)]})}function br(n){return n<1e3?n.toString():n<1e4?(n/1e3).toFixed(1).replace(/\.0$/,"")+"k":n<1e6?Math.round(n/1e3)+"k":(n/1e6).toFixed(1).replace(/\.0$/,"")+"M"}function SC({name:n,metadata:t,icon:e,color:s,isExpanded:o,onToggle:a,hideTooltip:c}){const{score:u,lastUpdated:d,status:p,openItems:f}=t,g=10,x=Math.floor(u),v=u%1*100,_=f.length>0,b=z.jsxs("div",{className:"text-[10px] space-y-0.5",children:[d&&z.jsxs("div",{children:["Updated: ",d]}),p&&z.jsxs("div",{children:["Status: ",p]}),f.length>0&&z.jsxs("div",{children:[f.length," open item",f.length!==1?"s":""]}),!d&&!p&&f.length===0&&z.jsx("div",{children:"No audit data"})]}),w=z.jsxs("button",{onClick:_?a:void 0,className:Es("w-full text-left block",_&&"cursor-pointer"),children:[z.jsxs("div",{className:"flex items-center justify-between mb-1 w-full",children:[z.jsxs("div",{className:"flex items-center gap-1.5",children:[z.jsx(e,{className:"w-3.5 h-3.5",style:{color:s}}),z.jsx("span",{className:"text-[11px] text-text-secondary",children:n})]}),z.jsxs("div",{className:"flex items-center gap-1",children:[z.jsx("span",{className:"text-[11px] font-mono font-bold",style:{color:s},children:u.toFixed(1)}),_&&z.jsx(sC,{className:Es("w-3 h-3 text-text-tertiary transition-transform",o&&"rotate-180")})]})]}),z.jsx("div",{className:"flex gap-[3px] h-2 w-full",children:Array.from({length:g}).map((C,A)=>{const T=A<x,k=A===x&&v>0;return z.jsxs("div",{className:"flex-1 rounded-[3px] relative overflow-hidden",style:{backgroundColor:`${s}15`,boxShadow:"inset 0 1px 2px rgba(0,0,0,0.3)"},children:[T&&z.jsx("div",{className:"absolute inset-0 rounded-[3px]",style:{backgroundColor:s,boxShadow:"inset 0 1px 0 rgba(255,255,255,0.3), inset 0 -1px 1px rgba(0,0,0,0.2)"}}),k&&z.jsx("div",{className:"absolute inset-y-0 left-0 rounded-[3px]",style:{backgroundColor:s,width:`${v}%`,boxShadow:"inset 0 1px 0 rgba(255,255,255,0.3), inset 0 -1px 1px rgba(0,0,0,0.2)"}})]},A)})})]});return z.jsxs("div",{className:"py-2 w-full border-b border-border/30 last:border-b-0",children:[c?w:z.jsx(_C,{content:b,side:"left",wrapperClassName:"w-full block",children:w}),o&&f.length>0&&z.jsx("div",{className:"mt-2 space-y-0.5 bg-bg-primary/50 rounded-md p-2 border border-border/30",children:f.map((C,A)=>z.jsx("div",{className:Es("text-[10px] leading-snug py-0.5 px-1.5 rounded truncate","bg-bg-tertiary/50",C.priority==="high"&&"text-red-400 border-l-2 border-red-400/50",C.priority==="medium"&&"text-yellow-400 border-l-2 border-yellow-400/50",!C.priority&&"text-text-secondary border-l-2 border-border/50"),title:C.text,children:C.text},A))})]})}const bC=[{key:"security",name:"Security",icon:lx,color:"#f38ba8"},{key:"tests",name:"Tests",icon:ux,color:"#89b4fa"},{key:"performance",name:"Performance",icon:ox,color:"#fab387"},{key:"farmhouse",name:"Farmhouse",icon:ax,color:"#cba6f7"},{key:"accessibility",name:"Accessibility",icon:sx,color:"#94e2d5"},{key:"codeQuality",name:"Code Quality",icon:ix,color:"#f5c2e7"}];function kC(){const{auditScores:n,beadsStats:t,gardenStats:e,compostStats:s,activityFeed:o,hideTooltips:a}=tn(),[c,u]=ut.useState(null),d=p=>{u(c===p?null:p)};return z.jsxs("div",{className:"p-3 h-full flex flex-col gap-3",children:[z.jsxs("section",{className:"shrink-0",children:[z.jsx("h3",{className:"text-[10px] font-medium text-text-tertiary uppercase tracking-wider mb-1.5",children:"Ideas"}),z.jsx("div",{className:"bg-bg-tertiary rounded-lg p-2 border border-border/50",children:z.jsxs("div",{className:"grid grid-cols-4 gap-1",children:[z.jsxs("div",{className:"flex flex-col items-center gap-0.5 py-1",children:[z.jsx(cx,{className:"w-3.5 h-3.5",style:{color:"#a6e3a1"}}),z.jsx("span",{className:"text-xs font-mono font-bold",style:{color:"#a6e3a1"},children:br(e.planted)}),z.jsx("span",{className:"text-[7px] text-text-tertiary uppercase",children:"Planted"})]}),z.jsxs("div",{className:"flex flex-col items-center gap-0.5 py-1",children:[z.jsx(hC,{className:"w-3.5 h-3.5",style:{color:"#94e2d5"}}),z.jsx("span",{className:"text-xs font-mono font-bold",style:{color:"#94e2d5"},children:br(e.growing)}),z.jsx("span",{className:"text-[7px] text-text-tertiary uppercase",children:"Growing"})]}),z.jsxs("div",{className:"flex flex-col items-center gap-0.5 py-1",children:[z.jsx(rC,{className:"w-3.5 h-3.5",style:{color:"#f38ba8"}}),z.jsx("span",{className:"text-xs font-mono font-bold",style:{color:"#f38ba8"},children:br(e.picked)}),z.jsx("span",{className:"text-[7px] text-text-tertiary uppercase",children:"Picked"})]}),z.jsxs("div",{className:"flex flex-col items-center gap-0.5 py-1",children:[z.jsx(cC,{className:"w-3.5 h-3.5",style:{color:"#fab387"}}),z.jsx("span",{className:"text-xs font-mono font-bold",style:{color:"#fab387"},children:br(s.rejectedIdeas)}),z.jsx("span",{className:"text-[7px] text-text-tertiary uppercase",children:"Compost"})]})]})})]}),t&&z.jsxs("section",{className:"shrink-0",children:[z.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[z.jsx("h3",{className:"text-[10px] font-medium text-text-tertiary uppercase tracking-wider",children:"Issues"}),z.jsxs("span",{className:"text-[9px] font-mono text-text-tertiary",children:[br(t.total)," total"]})]}),z.jsx("div",{className:"bg-bg-tertiary rounded-lg p-2 border border-border/50",children:z.jsxs("div",{className:"grid grid-cols-4 gap-1",children:[z.jsxs("div",{className:"flex flex-col items-center gap-0.5 py-1",children:[z.jsx(oC,{className:"w-3.5 h-3.5",style:{color:"#a6e3a1"}}),z.jsx("span",{className:"text-xs font-mono font-bold",style:{color:"#a6e3a1"},children:br(t.open)}),z.jsx("span",{className:"text-[7px] text-text-tertiary uppercase",children:"Open"})]}),z.jsxs("div",{className:"flex flex-col items-center gap-0.5 py-1",children:[z.jsx(aC,{className:"w-3.5 h-3.5",style:{color:"#f9e2af"}}),z.jsx("span",{className:"text-xs font-mono font-bold",style:{color:"#f9e2af"},children:br(t.in_progress)}),z.jsx("span",{className:"text-[7px] text-text-tertiary uppercase",children:"Progress"})]}),z.jsxs("div",{className:"flex flex-col items-center gap-0.5 py-1",children:[z.jsx(dC,{className:"w-3.5 h-3.5",style:{color:"#f38ba8"}}),z.jsx("span",{className:"text-xs font-mono font-bold",style:{color:"#f38ba8"},children:br(t.blocked)}),z.jsx("span",{className:"text-[7px] text-text-tertiary uppercase",children:"Blocked"})]}),z.jsxs("div",{className:"flex flex-col items-center gap-0.5 py-1",children:[z.jsx(iC,{className:"w-3.5 h-3.5",style:{color:"#6c7086"}}),z.jsx("span",{className:"text-xs font-mono font-bold",style:{color:"#6c7086"},children:br(t.closed)}),z.jsx("span",{className:"text-[7px] text-text-tertiary uppercase",children:"Closed"})]})]})})]}),z.jsxs("section",{className:"shrink-0",children:[z.jsx("h3",{className:"text-[10px] font-medium text-text-tertiary uppercase tracking-wider mb-1.5",children:"Audit"}),z.jsx("div",{className:"bg-bg-tertiary rounded-lg px-2.5 border border-border/50",children:bC.map(p=>z.jsx(SC,{auditKey:p.key,name:p.name,metadata:n[p.key],icon:p.icon,color:p.color,isExpanded:c===p.key,onToggle:()=>d(p.key),hideTooltip:a},p.key))})]}),z.jsxs("section",{className:"flex-1 min-h-0 flex flex-col",children:[z.jsx("h3",{className:"text-[10px] font-medium text-text-tertiary uppercase tracking-wider mb-1.5 shrink-0",children:"Log"}),z.jsx("div",{className:"bg-bg-tertiary rounded-lg border border-border/50 overflow-hidden flex-1 min-h-0",children:z.jsx("div",{className:"h-full overflow-y-auto",children:o.length===0?z.jsx("p",{className:"text-[10px] text-text-secondary italic p-2",children:"Awaiting events..."}):z.jsx("div",{className:"divide-y divide-border/50",children:o.map(p=>z.jsxs("div",{className:"flex items-center gap-3 px-2.5 py-1.5",children:[z.jsx("span",{className:"text-[9px] text-text-tertiary font-mono tabular-nums shrink-0",children:new Date(p.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}),z.jsx("span",{className:"text-[10px] text-text-secondary leading-snug truncate",children:p.message})]},p.id))})})})]})]})}class CC{constructor(){dt(this,"config",null)}configure(t){this.config=t,window.__FARMWORK_PROJECT_PATH__=t.projectPath}getConfig(){return this.config}getBaseUrl(){if(!this.config)throw new Error("API not configured");return`http://${this.config.host}:${this.config.port}`}async fetch(t){if(!this.config)throw new Error("API not configured");const e=await fetch(`${this.getBaseUrl()}${t}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.config.token}`}});if(!e.ok)throw new Error(`API error: ${e.status}`);return e.json()}async fetchStats(){if(!this.config)throw new Error("API not configured");const t=encodeURIComponent(this.config.projectPath);return this.fetch(`/api/v1/farmwork/stats?project_path=${t}`)}async fetchActivity(){if(!this.config)throw new Error("API not configured");const t=encodeURIComponent(this.config.projectPath);return this.fetch(`/api/v1/farmwork/activity?project_path=${t}`)}async fetchBeadsIssues(){if(!this.config)throw new Error("API not configured");const t=encodeURIComponent(this.config.projectPath);return this.fetch(`/api/v1/projects/current/beads?project_path=${t}`)}async fetchBeadsStats(){if(!this.config)throw new Error("API not configured");const t=encodeURIComponent(this.config.projectPath);return this.fetch(`/api/v1/projects/current/beads/stats?project_path=${t}`)}connectWebSocket(t){if(!this.config)throw new Error("API not configured");const e=new WebSocket(`ws://${this.config.host}:${this.config.port}/api/v1/ws?token=${this.config.token}`);return e.onmessage=s=>{try{const o=JSON.parse(s.data);t(o)}catch{console.error("Failed to parse WebSocket message")}},e}}const vl=new CC;/*!
 * OverlayScrollbars
 * Version: 2.13.0
 *
 * Copyright (c) Rene Haas | KingSora.
 * https://github.com/KingSora
 *
 * Released under the MIT license.
 */const hn=(n,t)=>{const{o:e,i:s,u:o}=n;let a=e,c;const u=(f,g)=>{const x=a,v=f,_=g||(s?!s(x,v):x!==v);return(_||o)&&(a=v,c=x),[a,_,c]};return[t?f=>u(t(a,c),f):u,f=>[a,!!f,c]]},AC=typeof window<"u"&&typeof HTMLElement<"u"&&!!window.document,rn=AC?window:{},dx=Math.max,PC=Math.min,Kh=Math.round,Ll=Math.abs,iy=Math.sign,fx=rn.cancelAnimationFrame,Pd=rn.requestAnimationFrame,Td=rn.setTimeout,px=rn.clearTimeout,Yl=n=>typeof rn[n]<"u"?rn[n]:void 0,TC=Yl("MutationObserver"),oy=Yl("IntersectionObserver"),ci=Yl("ResizeObserver"),Co=Yl("ScrollTimeline"),Md=n=>n===void 0,Xl=n=>n===null,ts=n=>typeof n=="number",Ho=n=>typeof n=="string",ql=n=>typeof n=="boolean",Qn=n=>typeof n=="function",En=n=>Array.isArray(n),Nl=n=>typeof n=="object"&&!En(n)&&!Xl(n),Ed=n=>{const t=!!n&&n.length,e=ts(t)&&t>-1&&t%1==0;return En(n)||!Qn(n)&&e?t>0&&Nl(n)?t-1 in n:!0:!1},jo=n=>!!n&&n.constructor===Object,Bl=n=>n instanceof HTMLElement,Ql=n=>n instanceof Element;function Ht(n,t){if(Ed(n))for(let e=0;e<n.length&&t(n[e],e,n)!==!1;e++);else n&&Ht(Object.keys(n),(e=>t(n[e],e,n)));return n}const mx=(n,t)=>n.indexOf(t)>=0,Go=(n,t)=>n.concat(t),fe=(n,t,e)=>(!Ho(t)&&Ed(t)?Array.prototype.push.apply(n,t):n.push(t),n),ss=n=>Array.from(n||[]),Id=n=>En(n)?n:!Ho(n)&&Ed(n)?ss(n):[n],Ol=n=>!!n&&!n.length,Zh=n=>ss(new Set(n)),pn=(n,t,e)=>{Ht(n,o=>o?o.apply(void 0,t||[]):!0),e||(n.length=0)},gx="paddingTop",yx="paddingRight",xx="paddingLeft",vx="paddingBottom",wx="marginLeft",_x="marginRight",Sx="marginBottom",Rd="overflowX",Fd="overflowY",Kl="width",Zl="height",Pr="visible",Un="hidden",Si="scroll",MC=n=>{const t=String(n||"");return t?t[0].toUpperCase()+t.slice(1):""},Jl=(n,t,e,s)=>{if(n&&t){let o=!0;return Ht(e,(a=>{const c=n[a],u=t[a];c!==u&&(o=!1)})),o}return!1},bx=(n,t)=>Jl(n,t,["w","h"]),Cl=(n,t)=>Jl(n,t,["x","y"]),EC=(n,t)=>Jl(n,t,["t","r","b","l"]),Mt=(n,...t)=>n.bind(0,...t),ui=n=>{let t;const e=n?Td:Pd,s=n?px:fx;return[o=>{s(t),t=e((()=>o()),Qn(n)?n():n)},()=>s(t)]},ay=n=>{const t=Qn(n)?n():n;if(ts(t)){const e=t?Td:Pd,s=t?px:fx;return o=>{const a=e((()=>o()),t);return()=>{s(a)}}}return t&&t._},kx=(n,t)=>{const{p:e,v:s,S:o,m:a}=t||{};let c,u,d,p;const f=function(b){u&&u(),c&&c(),p=u=c=d=void 0,n.apply(this,b)},g=_=>a&&d?a(d,_):_,x=()=>{u&&d&&f(g(d)||d)},v=function(){const b=ss(arguments),w=ay(e);if(w){const C=typeof o=="function"?o():o,A=ay(s),k=g(b)||b,L=f.bind(0,k);u&&u(),C&&!p?(L(),p=!0,u=w((()=>p=void 0))):(u=w(L),A&&!c&&(c=A(x))),d=k}else f(b)};return v.O=x,v},Cx=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),Hn=n=>n?Object.keys(n):[],jt=(n,t,e,s,o,a,c)=>{const u=[t,e,s,o,a,c];return(typeof n!="object"||Xl(n))&&!Qn(n)&&(n={}),Ht(u,(d=>{Ht(d,((p,f)=>{const g=d[f];if(n===g)return!0;const x=En(g);if(g&&jo(g)){const v=n[f];let _=v;x&&!En(v)?_=[]:!x&&!jo(v)&&(_={}),n[f]=jt(_,g)}else n[f]=x?g.slice():g}))})),n},Ax=(n,t)=>Ht(jt({},n),((e,s,o)=>{e===void 0?delete o[s]:e&&jo(e)&&(o[s]=Ax(e))})),Ld=n=>!Hn(n).length,Uo=()=>{},Px=(n,t,e)=>dx(n,PC(t,e)),Is=n=>Zh((En(n)?n:(n||"").split(" ")).filter((t=>t))),Nd=(n,t)=>n&&n.getAttribute(t),ly=(n,t)=>n&&n.hasAttribute(t),kr=(n,t,e)=>{Ht(Is(t),(s=>{n&&n.setAttribute(s,String(e||""))}))},lr=(n,t)=>{Ht(Is(t),(e=>n&&n.removeAttribute(e)))},tc=(n,t)=>{const e=Is(Nd(n,t)),s=Mt(kr,n,t),o=(a,c)=>{const u=new Set(e);return Ht(Is(a),(d=>{u[c](d)})),ss(u).join(" ")};return{C:a=>s(o(a,"delete")),$:a=>s(o(a,"add")),H:a=>{const c=Is(a);return c.reduce(((u,d)=>u&&e.includes(d)),c.length>0)}}},Tx=(n,t,e)=>(tc(n,t).C(e),Mt(Bd,n,t,e)),Bd=(n,t,e)=>(tc(n,t).$(e),Mt(Tx,n,t,e)),zl=(n,t,e,s)=>(s?Bd:Tx)(n,t,e),Od=(n,t,e)=>tc(n,t).H(e),Mx=n=>tc(n,"class"),Ex=(n,t)=>{Mx(n).C(t)},zd=(n,t)=>(Mx(n).$(t),Mt(Ex,n,t)),Ix=(n,t)=>{const e=t?Ql(t)&&t:document;return e?ss(e.querySelectorAll(n)):[]},IC=(n,t)=>{const e=t?Ql(t)&&t:document;return e&&e.querySelector(n)},Jh=(n,t)=>Ql(n)&&n.matches(t),Rx=n=>Jh(n,"body"),td=n=>n?ss(n.childNodes):[],$o=n=>n&&n.parentElement,hi=(n,t)=>Ql(n)&&n.closest(t),ed=n=>document.activeElement,RC=(n,t,e)=>{const s=hi(n,t),o=n&&IC(e,s),a=hi(o,t)===s;return s&&o?s===n||o===n||a&&hi(hi(n,e),t)!==s:!1},bi=n=>{Ht(Id(n),(t=>{const e=$o(t);t&&e&&e.removeChild(t)}))},nn=(n,t)=>Mt(bi,n&&t&&Ht(Id(t),(e=>{e&&n.appendChild(e)})));let Fx;const FC=()=>Fx,LC=n=>{Fx=n},mi=n=>{const t=document.createElement("div");return kr(t,"class",n),t},Lx=n=>{const t=mi(),e=FC(),s=n.trim();return t.innerHTML=e?e.createHTML(s):s,Ht(td(t),(o=>bi(o)))},cy=(n,t)=>n.getPropertyValue(t)||n[t]||"",Nx=n=>{const t=n||0;return isFinite(t)?t:0},wl=n=>Nx(parseFloat(n||"")),nd=n=>Math.round(n*1e4)/1e4,Bx=n=>`${nd(Nx(n))}px`;function Wo(n,t){n&&t&&Ht(t,((e,s)=>{try{const o=n.style,a=Xl(e)||ql(e)?"":ts(e)?Bx(e):e;s.indexOf("--")===0?o.setProperty(s,a):o[s]=a}catch{}}))}function dr(n,t,e){const s=Ho(t);let o=s?"":{};if(n){const a=rn.getComputedStyle(n,e)||n.style;o=s?cy(a,t):ss(t).reduce(((c,u)=>(c[u]=cy(a,u),c)),o)}return o}const uy=(n,t,e)=>{const s=t?`${t}-`:"",o=e?`-${e}`:"",a=`${s}top${o}`,c=`${s}right${o}`,u=`${s}bottom${o}`,d=`${s}left${o}`,p=dr(n,[a,c,u,d]);return{t:wl(p[a]),r:wl(p[c]),b:wl(p[u]),l:wl(p[d])}},Ah=(n,t)=>`translate${Nl(n)?`(${n.x},${n.y})`:`${t?"X":"Y"}(${n})`}`,NC=n=>!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length),BC={w:0,h:0},ec=(n,t)=>t?{w:t[`${n}Width`],h:t[`${n}Height`]}:BC,OC=n=>ec("inner",n||rn),gi=Mt(ec,"offset"),Ox=Mt(ec,"client"),Dl=Mt(ec,"scroll"),Dd=n=>{const t=parseFloat(dr(n,Kl))||0,e=parseFloat(dr(n,Zl))||0;return{w:t-Kh(t),h:e-Kh(e)}},Ph=n=>n.getBoundingClientRect(),zC=n=>!!n&&NC(n),rd=n=>!!(n&&(n[Zl]||n[Kl])),zx=(n,t)=>{const e=rd(n);return!rd(t)&&e},hy=(n,t,e,s)=>{Ht(Is(t),(o=>{n&&n.removeEventListener(o,e,s)}))},re=(n,t,e,s)=>{var o;const a=(o=s&&s.I)!=null?o:!0,c=s&&s.A||!1,u=s&&s.T||!1,d={passive:a,capture:c};return Mt(pn,Is(t).map((p=>{const f=u?g=>{hy(n,p,f,c),e&&e(g)}:e;return n&&n.addEventListener(p,f,d),Mt(hy,n,p,f,c)})))},Dx=n=>n.stopPropagation(),sd=n=>n.preventDefault(),jx=n=>Dx(n)||sd(n),ur=(n,t)=>{const{x:e,y:s}=ts(t)?{x:t,y:t}:t||{};ts(e)&&(n.scrollLeft=e),ts(s)&&(n.scrollTop=s)},dn=n=>({x:n.scrollLeft,y:n.scrollTop}),Gx=()=>({D:{x:0,y:0},M:{x:0,y:0}}),DC=(n,t)=>{const{D:e,M:s}=n,{w:o,h:a}=t,c=(g,x,v)=>{let _=iy(g)*v,b=iy(x)*v;if(_===b){const w=Ll(g),C=Ll(x);b=w>C?0:b,_=w<C?0:_}return _=_===b?0:_,[_+0,b+0]},[u,d]=c(e.x,s.x,o),[p,f]=c(e.y,s.y,a);return{D:{x:u,y:p},M:{x:d,y:f}}},Th=({D:n,M:t})=>{const e=(s,o)=>s===0&&s<=o;return{x:e(n.x,t.x),y:e(n.y,t.y)}},dy=({D:n,M:t},e)=>{const s=(o,a,c)=>Px(0,1,(o-c)/(o-a)||0);return{x:s(n.x,t.x,e.x),y:s(n.y,t.y,e.y)}},id=n=>{n&&n.focus&&n.focus({preventScroll:!0,focusVisible:!1})},fy=(n,t)=>{Ht(Id(t),n)},od=n=>{const t=new Map,e=(a,c)=>{if(a){const u=t.get(a);fy((d=>{u&&u[d?"delete":"clear"](d)}),c)}else t.forEach((u=>{u.clear()})),t.clear()},s=(a,c)=>{if(Ho(a)){const p=t.get(a)||new Set;return t.set(a,p),fy((f=>{Qn(f)&&p.add(f)}),c),Mt(e,a,c)}ql(c)&&c&&e();const u=Hn(a),d=[];return Ht(u,(p=>{const f=a[p];f&&fe(d,s(p,f))})),Mt(pn,d)},o=(a,c)=>{Ht(ss(t.get(a)),(u=>{c&&!Ol(c)?u.apply(0,c):u()}))};return s(n||{}),[s,e,o]},Ux={},$x={},jC=n=>{Ht(n,(t=>Ht(t,((e,s)=>{Ux[s]=t[s]}))))},Wx=(n,t,e)=>Hn(n).map((s=>{const{static:o,instance:a}=n[s],[c,u,d]=e||[],p=e?a:o;if(p){const f=e?p(c,u,t):p(t);return(d||$x)[s]=f}})),Ti=n=>$x[n],GC="__osOptionsValidationPlugin",Mi="data-overlayscrollbars",Al="os-environment",_l=`${Al}-scrollbar-hidden`,Mh=`${Mi}-initialize`,Pl="noClipping",py=`${Mi}-body`,es=Mi,UC="host",Cr=`${Mi}-viewport`,$C=Rd,WC=Fd,VC="arrange",Vx="measuring",HC="scrolling",Hx="scrollbarHidden",YC="noContent",ad=`${Mi}-padding`,my=`${Mi}-content`,jd="os-size-observer",XC=`${jd}-appear`,qC=`${jd}-listener`,QC="os-trinsic-observer",KC="os-theme-none",gn="os-scrollbar",ZC=`${gn}-rtl`,JC=`${gn}-horizontal`,tA=`${gn}-vertical`,Yx=`${gn}-track`,Gd=`${gn}-handle`,eA=`${gn}-visible`,nA=`${gn}-cornerless`,gy=`${gn}-interaction`,yy=`${gn}-unusable`,ld=`${gn}-auto-hide`,xy=`${ld}-hidden`,vy=`${gn}-wheel`,rA=`${Yx}-interactive`,sA=`${Gd}-interactive`,iA="__osSizeObserverPlugin",oA=(n,t)=>{const{k:e}=t,[s,o]=n("showNativeOverlaidScrollbars");return[s&&e.x&&e.y,o]},di=n=>n.indexOf(Pr)===0,aA=n=>n.replace(`${Pr}-`,""),cd=(n,t)=>{if(n==="auto")return t?Si:Un;const e=n||Un;return[Un,Si,Pr].includes(e)?e:Un},lA=(n,t)=>{const{overflowX:e,overflowY:s}=dr(n,[Rd,Fd]);return{x:cd(e,t.x),y:cd(s,t.y)}},Ud="__osScrollbarsHidingPlugin",cA="__osClickScrollPlugin",wy=n=>JSON.stringify(n,((t,e)=>{if(Qn(e))throw 0;return e})),_y=(n,t)=>n?`${t}`.split(".").reduce(((e,s)=>e&&Cx(e,s)?e[s]:void 0),n):void 0,uA=[0,33],Xx=[33,99],qx=[222,666,!0],hA={paddingAbsolute:!1,showNativeOverlaidScrollbars:!1,update:{elementEvents:[["img","load"]],debounce:{mutation:uA,resize:null,event:Xx,env:qx},attributes:null,ignoreMutation:null},overflow:{x:"scroll",y:"scroll"},scrollbars:{theme:"os-theme-dark",visibility:"auto",autoHide:"never",autoHideDelay:1300,autoHideSuspend:!1,dragScroll:!0,clickScroll:!1,pointers:["mouse","touch","pen"]}},Qx=(n,t)=>{const e={},s=Go(Hn(t),Hn(n));return Ht(s,(o=>{const a=n[o],c=t[o];if(Nl(a)&&Nl(c))jt(e[o]={},Qx(a,c)),Ld(e[o])&&delete e[o];else if(Cx(t,o)&&c!==a){let u=!0;if(En(a)||En(c))try{wy(a)===wy(c)&&(u=!1)}catch{}u&&(e[o]=c)}})),e},Sy=(n,t,e)=>s=>[_y(n,s),e||_y(t,s)!==void 0];let Kx;const dA=()=>Kx,fA=n=>{Kx=n};let Eh;const pA=()=>{const n=(k,L,R)=>{nn(document.body,k),nn(document.body,k);const F=Ox(k),q=gi(k),$=Dd(L);return R&&bi(k),{x:q.h-F.h+$.h,y:q.w-F.w+$.w}},t=k=>{let L=!1;const R=zd(k,_l);try{L=dr(k,"scrollbar-width")==="none"||dr(k,"display","::-webkit-scrollbar")==="none"}catch{}return R(),L},e=`.${Al}{scroll-behavior:auto!important;position:fixed;opacity:0;visibility:hidden;overflow:scroll;height:200px;width:200px;z-index:-1}.${Al} div{width:200%;height:200%;margin:10px 0}.${_l}{scrollbar-width:none!important}.${_l}::-webkit-scrollbar,.${_l}::-webkit-scrollbar-corner{appearance:none!important;display:none!important;width:0!important;height:0!important}`,o=Lx(`<div class="${Al}"><div></div><style>${e}</style></div>`)[0],a=o.firstChild,c=o.lastChild,u=dA();u&&(c.nonce=u);const[d,,p]=od(),[f,g]=hn({o:n(o,a),i:Cl},Mt(n,o,a,!0)),[x]=g(),v=t(o),_={x:x.x===0,y:x.y===0},b={elements:{host:null,padding:!v,viewport:k=>v&&Rx(k)&&k,content:!1},scrollbars:{slot:!0},cancel:{nativeScrollbarsOverlaid:!1,body:null}},w=jt({},hA),C=Mt(jt,{},w),A=Mt(jt,{},b),T={P:x,k:_,U:v,J:!!Co,G:Mt(d,"r"),K:A,Z:k=>jt(b,k)&&A(),tt:C,nt:k=>jt(w,k)&&C(),ot:jt({},b),st:jt({},w)};if(lr(o,"style"),bi(o),re(rn,"resize",(()=>{p("r",[])})),Qn(rn.matchMedia)&&!v&&(!_.x||!_.y)){const k=L=>{const R=rn.matchMedia(`(resolution: ${rn.devicePixelRatio}dppx)`);re(R,"change",(()=>{L(),k(L)}),{T:!0})};k((()=>{const[L,R]=f();jt(T.P,L),p("r",[R])}))}return T},fr=()=>(Eh||(Eh=pA()),Eh),mA=(n,t,e)=>{let s=!1;const o=e?new WeakMap:!1,a=()=>{s=!0},c=u=>{if(o&&e){const d=e.map((p=>{const[f,g]=p||[];return[g&&f?(u||Ix)(f,n):[],g]}));Ht(d,(p=>Ht(p[0],(f=>{const g=p[1],x=o.get(f)||[];if(n.contains(f)&&g){const _=re(f,g,(b=>{s?(_(),o.delete(f)):t(b)}));o.set(f,fe(x,_))}else pn(x),o.delete(f)}))))}};return c(),[a,c]},by=(n,t,e,s)=>{let o=!1;const{et:a,ct:c,rt:u,it:d,lt:p,ut:f}=s||{},[g,x]=mA(n,(()=>o&&e(!0)),u),v=a||[],_=c||[],b=Go(v,_),w=(A,T)=>{if(!Ol(T)){const k=p||Uo,L=f||Uo,R=[],F=[];let q=!1,$=!1;if(Ht(T,(N=>{const{attributeName:V,target:rt,type:ct,oldValue:lt,addedNodes:kt,removedNodes:Q}=N,K=ct==="attributes",J=ct==="childList",X=n===rt,et=K&&V,M=et&&Nd(rt,V||""),O=Ho(M)?M:null,G=et&&lt!==O,Z=mx(_,V)&&G;if(t&&(J||!X)){const st=K&&G,W=st&&d&&Jh(rt,d),H=(W?!k(rt,V,lt,O):!K||st)&&!L(N,!!W,n,s);Ht(kt,(Y=>fe(R,Y))),Ht(Q,(Y=>fe(R,Y))),$=$||H}!t&&X&&G&&!k(rt,V,lt,O)&&(fe(F,V),q=q||Z)})),x((N=>Zh(R).reduce(((V,rt)=>(fe(V,Ix(N,rt)),Jh(rt,N)?fe(V,rt):V)),[]))),t)return!A&&$&&e(!1),[!1];if(!Ol(F)||q){const N=[Zh(F),q];return A||e.apply(0,N),N}}},C=new TC(Mt(w,!1));return[()=>(C.observe(n,{attributes:!0,attributeOldValue:!0,attributeFilter:b,subtree:t,childList:t,characterData:t}),o=!0,()=>{o&&(g(),C.disconnect(),o=!1)}),()=>{if(o)return w(!0,C.takeRecords())}]};let bs=null;const Zx=(n,t,e)=>{const{ft:s}=e||{},o=Ti(iA),[a]=hn({o:!1,u:!0});return()=>{const c=[],d=Lx(`<div class="${jd}"><div class="${qC}"></div></div>`)[0],p=d.firstChild,f=g=>{const x=En(g)&&!Ol(g);let v=!1,_=!1;if(x){const b=g[0],[w,,C]=a(b.contentRect),A=rd(w);_=zx(w,C),v=!_&&!A}else _=g===!0;v||t({_t:!0,ft:_})};if(ci){if(!ql(bs)){const _=new ci(Uo);_.observe(n,{get box(){bs=!0}}),bs=bs||!1,_.disconnect()}const g=kx(f,{p:0,v:0}),x=_=>g(_),v=new ci(x);if(v.observe(bs?n:p),fe(c,[()=>{v.disconnect()},!bs&&nn(n,d)]),bs){const _=new ci(x);_.observe(n,{box:"border-box"}),fe(c,(()=>_.disconnect()))}}else if(o){const[g,x]=o(p,f,s);fe(c,Go([zd(d,XC),re(d,"animationstart",g),nn(n,d)],x))}else return Uo;return Mt(pn,c)}},gA=(n,t)=>{let e;const s=d=>d.h===0||d.isIntersecting||d.intersectionRatio>0,o=mi(QC),[a]=hn({o:!1}),c=(d,p)=>{if(d){const f=a(s(d)),[,g]=f;return g&&!p&&t(f)&&[f]}},u=(d,p)=>c(p.pop(),d);return[()=>{const d=[];if(oy)e=new oy(Mt(u,!1),{root:n}),e.observe(o),fe(d,(()=>{e.disconnect()}));else{const p=()=>{const f=gi(o);c(f)};fe(d,Zx(o,p)()),p()}return Mt(pn,fe(d,nn(n,o)))},()=>e&&u(!0,e.takeRecords())]},yA=(n,t,e,s)=>{let o,a,c,u,d,p,f,g;const x=`[${es}]`,v=`[${Cr}]`,_=["id","class","style","open","wrap","cols","rows"],{dt:b,vt:w,L:C,gt:A,ht:T,V:k,bt:L,wt:R,yt:F,St:q}=n,$=j=>dr(j,"direction")==="rtl",N=()=>{let j,H,Y;const at=kx(s,{p:()=>j,v:()=>H,S:()=>Y,m(yt,wt){const[pt]=yt,[It]=wt;return[Go(Hn(pt),Hn(It)).reduce(((Rt,Gt)=>(Rt[Gt]=pt[Gt]||It[Gt],Rt)),{})]}}),St=(yt,wt)=>{if(En(wt)){const[pt,It,Rt]=wt;j=pt,H=It,Y=Rt}else ts(wt)?(j=wt,H=!1,Y=!1):(j=!1,H=!1,Y=!1);at(yt)};return St.O=at.O,St},V={Ot:!1,B:$(b)},rt=fr(),ct=Ti(Ud),[lt]=hn({i:bx,o:{w:0,h:0}},(()=>{const j=ct&&ct.R(n,t,V,rt,e).Y,Y=!(L&&k)&&Od(w,es,Pl),at=!k&&R(VC),St=at&&dn(A),yt=St&&q(),wt=F(Vx,Y),pt=at&&j&&j(),It=Dl(C),Rt=Dd(C);return pt&&pt(),ur(A,St),yt&&yt(),Y&&wt(),{w:It.w+Rt.w,h:It.h+Rt.h}})),kt=N(),Q=j=>{const H=$(b);jt(j,{Ct:g!==H}),jt(V,{B:H}),g=H},K=(j,H)=>{const[Y,at]=j,St={$t:at};return jt(V,{Ot:Y}),H||s(St),St},J=({_t:j,ft:H})=>{const Y=H?s:kt,at={_t:j||H,ft:H};Q(at),Y(at,a)},X=(j,H)=>{const[,Y]=lt(),at={xt:Y};return Q(at),Y&&!H&&kt(at,j?c:o),at},et=(j,H,Y)=>{const at={Ht:H};return Q(at),H&&!Y&&kt(at,o),at},[M,O]=T?gA(w,K):[],G=!k&&Zx(w,J,{ft:!0}),[Z,st]=by(w,!1,et,{ct:_,et:_}),W=k&&ci&&new ci((j=>{const H=j[j.length-1].contentRect;J({_t:!0,ft:zx(H,f)}),f=H}));return[()=>{W&&W.observe(w);const j=G&&G(),H=M&&M(),Y=Z(),at=rt.G((St=>{const[,yt]=lt();kt({Et:St,xt:yt,_t:L},u)}));return()=>{W&&W.disconnect(),j&&j(),H&&H(),p&&p(),Y(),at()}},({zt:j,It:H,At:Y})=>{const at={},[St]=j("update.ignoreMutation"),[yt,wt]=j("update.attributes"),[pt,It]=j("update.elementEvents"),[Rt,Gt]=j("update.debounce"),ce=It||wt,qt=H||Y,Yt=Nt=>Qn(St)&&St(Nt);if(ce){d&&d(),p&&p();const[Nt,Bt]=by(T||C,!0,X,{et:Go(_,yt||[]),rt:pt,it:x,ut:(Qt,ye)=>{const{target:$t,attributeName:Kt}=Qt;return(!ye&&Kt&&!k?RC($t,x,v):!1)||!!hi($t,`.${gn}`)||!!Yt(Qt)}});p=Nt(),d=Bt}if(Gt&&(kt.O(),En(Rt)||ts(Rt)?(o=Rt,a=!1,c=Xx,u=qx):jo(Rt)?(o=Rt.mutation,a=Rt.resize,c=Rt.event,u=Rt.env):(o=!1,a=!1,c=!1,u=!1)),qt){const Nt=st(),Bt=O&&O(),Qt=d&&d();Nt&&jt(at,et(Nt[0],Nt[1],qt)),Bt&&jt(at,K(Bt[0],qt)),Qt&&jt(at,X(Qt[0],qt))}return Q(at),at},V]},Jx=(n,t)=>Qn(t)?t.apply(0,n):t,xA=(n,t,e,s)=>{const o=Md(s)?e:s;return Jx(n,o)||t.apply(0,n)},tv=(n,t,e,s)=>{const o=Md(s)?e:s,a=Jx(n,o);return!!a&&(Bl(a)?a:t.apply(0,n))},vA=(n,t)=>{const{nativeScrollbarsOverlaid:e,body:s}=t||{},{k:o,U:a,K:c}=fr(),{nativeScrollbarsOverlaid:u,body:d}=c().cancel,p=e??u,f=Md(s)?d:s,g=(o.x||o.y)&&p,x=n&&(Xl(f)?!a:f);return!!g||!!x},wA=(n,t,e,s)=>{const o="--os-viewport-percent",a="--os-scroll-percent",c="--os-scroll-direction",{K:u}=fr(),{scrollbars:d}=u(),{slot:p}=d,{dt:f,vt:g,L:x,Tt:v,gt:_,bt:b,V:w}=t,{scrollbars:C}=v?{}:n,{slot:A}=C||{},T=[],k=[],L=[],R=tv([f,g,x],(()=>w&&b?f:g),p,A),F=M=>{if(Co){let O=null,G=[];const Z=new Co({source:_,axis:M}),st=()=>{O&&O.cancel(),O=null};return{kt:j=>{const{Dt:H}=e,Y=Th(H)[M],at=M==="x",St=[Ah(0,at),Ah(`calc(-100% + 100cq${at?"w":"h"})`,at)],yt=Y?St:St.reverse();return G[0]===yt[0]&&G[1]===yt[1]||(G=yt,st(),O=j.Mt.animate({clear:["left"],transform:yt},{timeline:Z})),st}}}},q={x:F("x"),y:F("y")},$=()=>{const{Rt:M,Vt:O}=e,G=(Z,st)=>Px(0,1,Z/(Z+st)||0);return{x:G(O.x,M.x),y:G(O.y,M.y)}},N=(M,O,G)=>{const Z=G?zd:Ex;Ht(M,(st=>{Z(st.Lt,O)}))},V=(M,O)=>{Ht(M,(G=>{const[Z,st]=O(G);Wo(Z,st)}))},rt=(M,O,G)=>{const Z=ql(G),st=Z?G:!0,W=Z?!G:!0;st&&N(k,M,O),W&&N(L,M,O)},ct=()=>{const M=$(),O=G=>Z=>[Z.Lt,{[o]:nd(G)+""}];V(k,O(M.x)),V(L,O(M.y))},lt=()=>{if(!Co){const{Dt:M}=e,O=dy(M,dn(_)),G=Z=>st=>[st.Lt,{[a]:nd(Z)+""}];V(k,G(O.x)),V(L,G(O.y))}},kt=()=>{const{Dt:M}=e,O=Th(M),G=Z=>st=>[st.Lt,{[c]:Z?"0":"1"}];V(k,G(O.x)),V(L,G(O.y)),Co&&(k.forEach(q.x.kt),L.forEach(q.y.kt))},Q=()=>{if(w&&!b){const{Rt:M,Dt:O}=e,G=Th(O),Z=dy(O,dn(_)),st=W=>{const{Lt:j}=W,H=$o(j)===x&&j,Y=(at,St,yt)=>{const wt=St*at;return Bx(yt?wt:-wt)};return[H,H&&{transform:Ah({x:Y(Z.x,M.x,G.x),y:Y(Z.y,M.y,G.y)})}]};V(k,st),V(L,st)}},K=M=>{const O=M?"x":"y",Z=mi(`${gn} ${M?JC:tA}`),st=mi(Yx),W=mi(Gd),j={Lt:Z,Ut:st,Mt:W},H=q[O];return fe(M?k:L,j),fe(T,[nn(Z,st),nn(st,W),Mt(bi,Z),H&&H.kt(j),s(j,rt,M)]),j},J=Mt(K,!0),X=Mt(K,!1),et=()=>(nn(R,k[0].Lt),nn(R,L[0].Lt),Mt(pn,T));return J(),X(),[{Pt:ct,Nt:lt,qt:kt,Bt:Q,Ft:rt,jt:{Xt:k,Yt:J,Wt:Mt(V,k)},Jt:{Xt:L,Yt:X,Wt:Mt(V,L)}},et]},_A=(n,t,e,s)=>(o,a,c)=>{const{vt:u,L:d,V:p,gt:f,Gt:g,St:x}=t,{Lt:v,Ut:_,Mt:b}=o,[w,C]=ui(333),[A,T]=ui(444),k=F=>{Qn(f.scrollBy)&&f.scrollBy({behavior:"smooth",left:F.x,top:F.y})},L=()=>{const F="pointerup pointercancel lostpointercapture",q=`client${c?"X":"Y"}`,$=c?Kl:Zl,N=c?"left":"top",V=c?"w":"h",rt=c?"x":"y",ct=(kt,Q)=>K=>{const{Rt:J}=e,X=gi(_)[V]-gi(b)[V],M=Q*K/X*J[rt];ur(f,{[rt]:kt+M})},lt=[];return re(_,"pointerdown",(kt=>{const Q=hi(kt.target,`.${Gd}`)===b,K=Q?b:_,J=n.scrollbars,X=J[Q?"dragScroll":"clickScroll"],{button:et,isPrimary:M,pointerType:O}=kt,{pointers:G}=J;if(et===0&&M&&X&&(G||[]).includes(O)){pn(lt),T();const st=!Q&&(kt.shiftKey||X==="instant"),W=Mt(Ph,b),j=Mt(Ph,_),H=(Bt,Qt)=>(Bt||W())[N]-(Qt||j())[N],Y=Kh(Ph(f)[$])/gi(f)[V]||1,at=ct(dn(f)[rt],1/Y),St=kt[q],yt=W(),wt=j(),pt=yt[$],It=H(yt,wt)+pt/2,Rt=St-wt[N],Gt=Q?0:Rt-It,ce=Bt=>{pn(Nt),K.releasePointerCapture(Bt.pointerId)},qt=Q||st,Yt=x(),Nt=[re(g,F,ce),re(g,"selectstart",(Bt=>sd(Bt)),{I:!1}),re(_,F,ce),qt&&re(_,"pointermove",(Bt=>at(Gt+(Bt[q]-St)))),qt&&(()=>{const Bt=dn(f);Yt();const Qt=dn(f),ye={x:Qt.x-Bt.x,y:Qt.y-Bt.y};(Ll(ye.x)>3||Ll(ye.y)>3)&&(x(),ur(f,Bt),k(ye),A(Yt))})];if(K.setPointerCapture(kt.pointerId),st)at(Gt);else if(!Q){const Bt=Ti(cA);if(Bt){const Qt=Bt(at,Gt,pt,(ye=>{ye?Yt():fe(Nt,Yt)}));fe(Nt,Qt),fe(lt,Mt(Qt,!0))}}}}))};let R=!0;return Mt(pn,[re(b,"pointermove pointerleave",s),re(v,"pointerenter",(()=>{a(gy,!0)})),re(v,"pointerleave pointercancel",(()=>{a(gy,!1)})),!p&&re(v,"mousedown",(()=>{const F=ed();(ly(F,Cr)||ly(F,es)||F===document.body)&&Td(Mt(id,d),25)})),re(v,"wheel",(F=>{const{deltaX:q,deltaY:$,deltaMode:N}=F;R&&N===0&&$o(v)===u&&k({x:q,y:$}),R=!1,a(vy,!0),w((()=>{R=!0,a(vy)})),sd(F)}),{I:!1,A:!0}),re(v,"pointerdown",(()=>{const F=re(g,"click",($=>{q(),jx($)}),{T:!0,A:!0,I:!1}),q=re(g,"pointerup pointercancel",(()=>{q(),setTimeout(F,150)}),{A:!0,I:!0})}),{A:!0,I:!0}),L(),C,T])},SA=(n,t,e,s,o,a)=>{let c,u,d,p,f,g=Uo,x=0;const v=["mouse","pen"],_=G=>v.includes(G.pointerType),[b,w]=ui(),[C,A]=ui(100),[T,k]=ui(100),[L,R]=ui((()=>x)),[F,q]=wA(n,o,s,_A(t,o,s,(G=>_(G)&&J()))),{vt:$,Kt:N,bt:V}=o,{Ft:rt,Pt:ct,Nt:lt,qt:kt,Bt:Q}=F,K=(G,Z)=>{if(R(),G)rt(xy);else{const st=Mt(rt,xy,!0);x>0&&!Z?L(st):st()}},J=()=>{(d?!c:!p)&&(K(!0),C((()=>{K(!1)})))},X=G=>{rt(ld,G,!0),rt(ld,G,!1)},et=G=>{_(G)&&(c=d,d&&K(!0))},M=[R,A,k,w,()=>g(),re($,"pointerover",et,{T:!0}),re($,"pointerenter",et),re($,"pointerleave",(G=>{_(G)&&(c=!1,d&&K(!1))})),re($,"pointermove",(G=>{_(G)&&u&&J()})),re(N,"scroll",(G=>{b((()=>{lt(),J()})),a(G),Q()}))],O=Ti(Ud);return[()=>Mt(pn,fe(M,q())),({zt:G,At:Z,Qt:st,Zt:W})=>{const{tn:j,nn:H,sn:Y,en:at}=W||{},{Ct:St,ft:yt}=st||{},{B:wt}=e,{k:pt,U:It}=fr(),{cn:Rt,j:Gt}=s,[ce,qt]=G("showNativeOverlaidScrollbars"),[Yt,Nt]=G("scrollbars.theme"),[Bt,Qt]=G("scrollbars.visibility"),[ye,$t]=G("scrollbars.autoHide"),[Kt,Ae]=G("scrollbars.autoHideSuspend"),[yn]=G("scrollbars.autoHideDelay"),[Ct,Se]=G("scrollbars.dragScroll"),[bt,He]=G("scrollbars.clickScroll"),[In,te]=G("overflow"),Xt=yt&&!Z,Kn=Gt.x||Gt.y,Pe=j||H||at||St||Z,Ye=Y||Qt||te,xn=ce&&pt.x&&pt.y,Zn=!It&&!O,vn=xn||Zn,Ue=(Ir,Rr,is)=>{const Rn=Ir.includes(Si)&&(Bt===Pr||Bt==="auto"&&Rr===Si);return rt(eA,Rn,is),Rn};if(x=yn,Xt&&(Kt&&Kn?(X(!1),g(),T((()=>{g=re(N,"scroll",Mt(X,!0),{T:!0})}))):X(!0)),(qt||Zn)&&rt(KC,vn),Nt&&(rt(f),rt(Yt,!0),f=Yt),Ae&&!Kt&&X(!0),$t&&(u=ye==="move",d=ye==="leave",p=ye==="never",K(p,!0)),Se&&rt(sA,Ct),He&&rt(rA,!!bt),Ye){const Ir=Ue(In.x,Rt.x,!0),Rr=Ue(In.y,Rt.y,!1);rt(nA,!(Ir&&Rr))}Pe&&(lt(),ct(),Q(),at&&kt(),rt(yy,!Gt.x,!0),rt(yy,!Gt.y,!1),rt(ZC,wt&&!V))},{},F]},bA=n=>{const t=fr(),{K:e,U:s}=t,{elements:o}=e(),{padding:a,viewport:c,content:u}=o,d=Bl(n),p=d?{}:n,{elements:f}=p,{padding:g,viewport:x,content:v}=f||{},_=d?n:p.target,b=Rx(_),w=_.ownerDocument,C=w.documentElement,A=()=>w.defaultView||rn,T=Mt(xA,[_]),k=Mt(tv,[_]),L=Mt(mi,""),R=Mt(T,L,c),F=Mt(k,L,u),q=pt=>{const It=gi(pt),Rt=Dl(pt),Gt=dr(pt,Rd),ce=dr(pt,Fd);return Rt.w-It.w>0&&!di(Gt)||Rt.h-It.h>0&&!di(ce)},$=R(x),N=$===_,V=N&&b,rt=!N&&F(v),ct=!N&&$===rt,lt=V?C:$,kt=V?lt:_,Q=!N&&k(L,a,g),K=!ct&&rt,J=[K,lt,Q,kt].map((pt=>Bl(pt)&&!$o(pt)&&pt)),X=pt=>pt&&mx(J,pt),et=!X(lt)&&q(lt)?lt:_,M=V?C:lt,G={dt:_,vt:kt,L:lt,rn:Q,ht:K,gt:M,Kt:V?w:lt,ln:b?C:et,Gt:w,bt:b,Tt:d,V:N,an:A,wt:pt=>Od(lt,Cr,pt),yt:(pt,It)=>zl(lt,Cr,pt,It),St:()=>zl(M,Cr,HC,!0)},{dt:Z,vt:st,rn:W,L:j,ht:H}=G,Y=[()=>{lr(st,[es,Mh]),lr(Z,Mh),b&&lr(C,[Mh,es])}];let at=td([H,j,W,st,Z].find((pt=>pt&&!X(pt))));const St=V?Z:H||j,yt=Mt(pn,Y);return[G,()=>{const pt=A(),It=ed(),Rt=Nt=>{nn($o(Nt),td(Nt)),bi(Nt)},Gt=Nt=>re(Nt,"focusin focusout focus blur",jx,{A:!0,I:!1}),ce="tabindex",qt=Nd(j,ce),Yt=Gt(It);return kr(st,es,N?"":UC),kr(W,ad,""),kr(j,Cr,""),kr(H,my,""),N||(kr(j,ce,qt||"-1"),b&&kr(C,py,"")),nn(St,at),nn(st,W),nn(W||st,!N&&j),nn(j,H),fe(Y,[Yt,()=>{const Nt=ed(),Bt=X(j),Qt=Bt&&Nt===j?Z:Nt,ye=Gt(Qt);lr(W,ad),lr(H,my),lr(j,Cr),b&&lr(C,py),qt?kr(j,ce,qt):lr(j,ce),X(H)&&Rt(H),Bt&&Rt(j),X(W)&&Rt(W),id(Qt),ye()}]),s&&!N&&(Bd(j,Cr,Hx),fe(Y,Mt(lr,j,Cr))),id(!N&&b&&It===Z&&pt.top===pt?j:It),Yt(),at=0,yt},yt]},kA=({ht:n})=>({Qt:t,un:e,At:s})=>{const{$t:o}=t||{},{Ot:a}=e;n&&(o||s)&&Wo(n,{[Zl]:a&&"100%"})},CA=({vt:n,rn:t,L:e,V:s},o)=>{const[a,c]=hn({i:EC,o:uy()},Mt(uy,n,"padding",""));return({zt:u,Qt:d,un:p,At:f})=>{let[g,x]=c(f);const{U:v}=fr(),{_t:_,xt:b,Ct:w}=d||{},{B:C}=p,[A,T]=u("paddingAbsolute");(_||x||(f||b))&&([g,x]=a(f));const L=!s&&(T||w||x);if(L){const R=!A||!t&&!v,F=g.r+g.l,q=g.t+g.b,$={[_x]:R&&!C?-F:0,[Sx]:R?-q:0,[wx]:R&&C?-F:0,top:R?-g.t:0,right:R?C?-g.r:"auto":0,left:R?C?"auto":-g.l:0,[Kl]:R&&`calc(100% + ${F}px)`},N={[gx]:R?g.t:0,[yx]:R?g.r:0,[vx]:R?g.b:0,[xx]:R?g.l:0};Wo(t||e,$),Wo(e,N),jt(o,{rn:g,fn:!R,F:t?N:jt({},$,N)})}return{_n:L}}},AA=(n,t)=>{const e=fr(),{vt:s,rn:o,L:a,V:c,Kt:u,gt:d,bt:p,yt:f,an:g}=n,{U:x}=e,v=p&&c,_=Mt(dx,0),b={display:()=>!1,direction:G=>G!=="ltr",flexDirection:G=>G.endsWith("-reverse"),writingMode:G=>G!=="horizontal-tb"},w=Hn(b),C={i:bx,o:{w:0,h:0}},A={i:Cl,o:{}},T=G=>{f(Vx,!v&&G)},k=G=>{if(!w.some((yt=>{const wt=G[yt];return wt&&b[yt](wt)})))return{D:{x:0,y:0},M:{x:1,y:1}};T(!0);const st=dn(d),W=f(YC,!0),j=re(u,Si,(yt=>{const wt=dn(d);yt.isTrusted&&wt.x===st.x&&wt.y===st.y&&Dx(yt)}),{A:!0,T:!0});ur(d,{x:0,y:0}),W();const H=dn(d),Y=Dl(d);ur(d,{x:Y.w,y:Y.h});const at=dn(d);ur(d,{x:at.x-H.x<1&&-Y.w,y:at.y-H.y<1&&-Y.h});const St=dn(d);return ur(d,st),Pd((()=>j())),{D:H,M:St}},L=(G,Z)=>{const st=rn.devicePixelRatio%1!==0?1:0,W={w:_(G.w-Z.w),h:_(G.h-Z.h)};return{w:W.w>st?W.w:0,h:W.h>st?W.h:0}},R=(G,Z)=>{const st=(W,j,H,Y)=>{const at=W===Pr?Un:aA(W),St=di(W),yt=di(H);return!j&&!Y?Un:St&&yt?Pr:St?j&&Y?at:j?Pr:Un:j?at:yt&&Y?Pr:Un};return{x:st(Z.x,G.x,Z.y,G.y),y:st(Z.y,G.y,Z.x,G.x)}},F=G=>{const Z=W=>[Pr,Un,Si].map((j=>O(cd(j),W))),st=Z(!0).concat(Z()).join(" ");f(st),f(Hn(G).map((W=>O(G[W],W==="x"))).join(" "),!0)},[q,$]=hn(C,Mt(Dd,a)),[N,V]=hn(C,Mt(Dl,a)),[rt,ct]=hn(C),[lt]=hn(A),[kt,Q]=hn(C),[K]=hn(A),[J]=hn({i:(G,Z)=>Jl(G,Z,w),o:{}},(()=>zC(a)?dr(a,w):{})),[X,et]=hn({i:(G,Z)=>Cl(G.D,Z.D)&&Cl(G.M,Z.M),o:Gx()}),M=Ti(Ud),O=(G,Z)=>`${Z?$C:WC}${MC(G)}`;return({zt:G,Qt:Z,un:st,At:W},{_n:j})=>{const{_t:H,Ht:Y,xt:at,Ct:St,ft:yt,Et:wt}=Z||{},pt=M&&M.R(n,t,st,e,G),{X:It,Y:Rt,W:Gt}=pt||{},[ce,qt]=oA(G,e),[Yt,Nt]=G("overflow"),Bt=di(Yt.x),Qt=di(Yt.y),ye=H||j||at||St||wt||qt;let $t=$(W),Kt=V(W),Ae=ct(W),yn=Q(W);if(qt&&x&&f(Hx,!ce),ye){Od(s,es,Pl)&&T(!0);const Ii=Rt&&Rt(),[Jn]=$t=q(W),[Fr]=Kt=N(W),tr=Ox(a),Ls=v&&OC(g()),os={w:_(Fr.w+Jn.w),h:_(Fr.h+Jn.h)},as={w:_((Ls?Ls.w:tr.w+_(tr.w-Fr.w))+Jn.w),h:_((Ls?Ls.h:tr.h+_(tr.h-Fr.h))+Jn.h)};Ii&&Ii(),yn=kt(as),Ae=rt(L(os,as),W)}const[Ct,Se]=yn,[bt,He]=Ae,[In,te]=Kt,[Xt,Kn]=$t,[Pe,Ye]=lt({x:bt.w>0,y:bt.h>0}),xn=Bt&&Qt&&(Pe.x||Pe.y)||Bt&&Pe.x&&!Pe.y||Qt&&Pe.y&&!Pe.x,Zn=j||St||wt||Kn||te||Se||He||Nt||qt||ye||Y&&v,[vn,Ue]=J(W),Ir=St||yt||Ue||Ye||W,[Rr,is]=Ir?X(k(vn),W):et();let Rn=R(Pe,Yt);T(!1),Zn&&(F(Rn),Rn=lA(a,Pe),Gt&&It&&(It(Rn,In,Xt),Wo(a,Gt(Rn))));const[Yo,Ei]=K(Rn);return zl(s,es,Pl,xn),zl(o,ad,Pl,xn),jt(t,{cn:Yo,Vt:{x:Ct.w,y:Ct.h},Rt:{x:bt.w,y:bt.h},j:Pe,Dt:DC(Rr,bt)}),{sn:Ei,tn:Se,nn:He,en:is||He}}},PA=n=>{const[t,e,s]=bA(n),o={rn:{t:0,r:0,b:0,l:0},fn:!1,F:{[_x]:0,[Sx]:0,[wx]:0,[gx]:0,[yx]:0,[vx]:0,[xx]:0},Vt:{x:0,y:0},Rt:{x:0,y:0},cn:{x:Un,y:Un},j:{x:!1,y:!1},Dt:Gx()},{dt:a,gt:c,V:u,St:d}=t,{U:p,k:f}=fr(),g=!p&&(f.x||f.y),x=[kA(t),CA(t,o),AA(t,o)];return[e,v=>{const _={},w=g&&dn(c),C=w&&d();return Ht(x,(A=>{jt(_,A(v,_)||{})})),ur(c,w),C&&C(),u||ur(a,0),_},o,t,s]},TA=(n,t,e,s,o)=>{let a=!1;const c=Sy(t,{}),[u,d,p,f,g]=PA(n),[x,v,_]=yA(f,p,c,(k=>{T({},k)})),[b,w,,C]=SA(n,t,_,p,f,o),A=k=>Hn(k).some((L=>!!k[L])),T=(k,L)=>{if(e())return!1;const{dn:R,At:F,It:q,pn:$}=k,N=R||{},V=!!F||!a,rt={zt:Sy(t,N,V),dn:N,At:V};if($)return w(rt),!1;const ct=L||v(jt({},rt,{It:q})),lt=d(jt({},rt,{un:_,Qt:ct}));w(jt({},rt,{Qt:ct,Zt:lt}));const kt=A(ct),Q=A(lt),K=kt||Q||!Ld(N)||V;return a=!0,K&&s(k,{Qt:ct,Zt:lt}),K};return[()=>{const{ln:k,gt:L,St:R}=f,F=dn(k),q=[x(),u(),b()],$=R();return ur(L,F),$(),Mt(pn,q)},T,()=>({vn:_,gn:p}),{hn:f,bn:C},g]},$d=new WeakMap,MA=(n,t)=>{$d.set(n,t)},EA=n=>{$d.delete(n)},ev=n=>$d.get(n),Wn=(n,t,e)=>{const{tt:s}=fr(),o=Bl(n),a=o?n:n.target,c=ev(a);if(t&&!c){let u=!1;const d=[],p={},f=N=>{const V=Ax(N),rt=Ti(GC);return rt?rt(V,!0):V},g=jt({},s(),f(t)),[x,v,_]=od(),[b,w,C]=od(e),A=(N,V)=>{C(N,V),_(N,V)},[T,k,L,R,F]=TA(n,g,(()=>u),(({dn:N,At:V},{Qt:rt,Zt:ct})=>{const{_t:lt,Ct:kt,$t:Q,xt:K,Ht:J,ft:X}=rt,{tn:et,nn:M,sn:O,en:G}=ct;A("updated",[$,{updateHints:{sizeChanged:!!lt,directionChanged:!!kt,heightIntrinsicChanged:!!Q,overflowEdgeChanged:!!et,overflowAmountChanged:!!M,overflowStyleChanged:!!O,scrollCoordinatesChanged:!!G,contentMutation:!!K,hostMutation:!!J,appear:!!X},changedOptions:N||{},force:!!V}])}),(N=>A("scroll",[$,N]))),q=N=>{EA(a),pn(d),u=!0,A("destroyed",[$,N]),v(),w()},$={options(N,V){if(N){const rt=V?s():{},ct=Qx(g,jt(rt,f(N)));Ld(ct)||(jt(g,ct),k({dn:ct}))}return jt({},g)},on:b,off:(N,V)=>{N&&V&&w(N,V)},state(){const{vn:N,gn:V}=L(),{B:rt}=N,{Vt:ct,Rt:lt,cn:kt,j:Q,rn:K,fn:J,Dt:X}=V;return jt({},{overflowEdge:ct,overflowAmount:lt,overflowStyle:kt,hasOverflow:Q,scrollCoordinates:{start:X.D,end:X.M},padding:K,paddingAbsolute:J,directionRTL:rt,destroyed:u})},elements(){const{dt:N,vt:V,rn:rt,L:ct,ht:lt,gt:kt,Kt:Q}=R.hn,{jt:K,Jt:J}=R.bn,X=M=>{const{Mt:O,Ut:G,Lt:Z}=M;return{scrollbar:Z,track:G,handle:O}},et=M=>{const{Xt:O,Yt:G}=M,Z=X(O[0]);return jt({},Z,{clone:()=>{const st=X(G());return k({pn:!0}),st}})};return jt({},{target:N,host:V,padding:rt||ct,viewport:ct,content:lt||ct,scrollOffsetElement:kt,scrollEventElement:Q,scrollbarHorizontal:et(K),scrollbarVertical:et(J)})},update:N=>k({At:N,It:!0}),destroy:Mt(q,!1),plugin:N=>p[Hn(N)[0]]};return fe(d,[F]),MA(a,$),Wx(Ux,Wn,[$,x,p]),vA(R.hn.bt,!o&&n.cancel)?(q(!0),$):(fe(d,T()),A("initialized",[$]),$.update(),$)}return c};Wn.plugin=n=>{const t=En(n),e=t?n:[n],s=e.map((o=>Wx(o,Wn)[0]));return jC(e),t?s:s[0]};Wn.valid=n=>{const t=n&&n.elements,e=Qn(t)&&t();return jo(e)&&!!ev(e.target)};Wn.env=()=>{const{P:n,k:t,U:e,J:s,ot:o,st:a,K:c,Z:u,tt:d,nt:p}=fr();return jt({},{scrollbarsSize:n,scrollbarsOverlaid:t,scrollbarsHiding:e,scrollTimeline:s,staticDefaultInitialization:o,staticDefaultOptions:a,getDefaultInitialization:c,setDefaultInitialization:u,getDefaultOptions:d,setDefaultOptions:p})};Wn.nonce=fA;Wn.trustedTypePolicy=LC;const IA=()=>{if(typeof window>"u"){const p=()=>{};return[p,p]}let n,t;const e=window,s=typeof e.requestIdleCallback=="function",o=e.requestAnimationFrame,a=e.cancelAnimationFrame,c=s?e.requestIdleCallback:o,u=s?e.cancelIdleCallback:a,d=()=>{u(n),a(t)};return[(p,f)=>{d(),n=c(s?()=>{d(),t=o(p)}:p,typeof f=="object"?f:{timeout:2233})},d]},RA=n=>{const{options:t,events:e,defer:s}=n||{},[o,a]=ut.useMemo(IA,[]),c=ut.useRef(null),u=ut.useRef(s),d=ut.useRef(t),p=ut.useRef(e);return ut.useEffect(()=>{u.current=s},[s]),ut.useEffect(()=>{const{current:f}=c;d.current=t,Wn.valid(f)&&f.options(t||{},!0)},[t]),ut.useEffect(()=>{const{current:f}=c;p.current=e,Wn.valid(f)&&f.on(e||{},!0)},[e]),ut.useEffect(()=>()=>{var f;a(),(f=c.current)==null||f.destroy()},[]),ut.useMemo(()=>[f=>{const g=c.current;if(Wn.valid(g))return;const x=u.current,v=d.current||{},_=p.current||{},b=()=>c.current=Wn(f,v,_);x?o(b,x):b()},()=>c.current],[])},FA=(n,t)=>{const{element:e="div",options:s,events:o,defer:a,children:c,...u}=n,d=e,p=ut.useRef(null),f=ut.useRef(null),[g,x]=RA({options:s,events:o,defer:a});return ut.useEffect(()=>{const{current:v}=p,{current:_}=f;if(!v)return;const b=v;return g(e==="body"?{target:b,cancel:{body:null}}:{target:b,elements:{viewport:_,content:_}}),()=>{var w;return(w=x())==null?void 0:w.destroy()}},[g,e]),ut.useImperativeHandle(t,()=>({osInstance:x,getElement:()=>p.current}),[]),ai.createElement(d,{"data-overlayscrollbars-initialize":"",ref:p,...u},e==="body"?c:ai.createElement("div",{"data-overlayscrollbars-contents":"",ref:f},c))},LA=ut.forwardRef(FA);function NA(){const n=new URLSearchParams(window.location.search),t=n.get("host"),e=n.get("port"),s=n.get("token"),o=n.get("project_path");return!t||!e||!s||!o?null:{host:t,port:parseInt(e,10),token:s,projectPath:o}}function BA(){return z.jsx("div",{className:"h-screen w-screen bg-neutral-950 flex items-center justify-center",children:z.jsxs("div",{className:"text-center",children:[z.jsx("div",{className:"w-12 h-12 border-4 border-lime-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),z.jsx("p",{className:"text-neutral-400 text-sm",children:"Loading Farmwork Tycoon..."})]})})}function OA({message:n}){return z.jsx("div",{className:"h-screen w-screen bg-neutral-950 flex items-center justify-center p-6",children:z.jsxs("div",{className:"text-center max-w-md",children:[z.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:z.jsx("svg",{className:"w-8 h-8 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),z.jsx("h2",{className:"text-white text-lg font-semibold mb-2",children:"Connection Error"}),z.jsx("p",{className:"text-neutral-400 text-sm",children:n})]})})}function zA(){const[n,t]=ut.useState(!0),[e,s]=ut.useState(null),[o,a]=ut.useState({width:400,height:400}),[c,u]=ut.useState(!1),d=ut.useRef(null),{isInitialized:p,buildings:f,auditScores:g,gardenStats:x,compostStats:v,beadsStats:_}=tn(),b=tn,w=ut.useCallback(k=>{const L=b.getState(),R={security:{score:k.audit_scores.security.score,openItems:k.audit_scores.security.open_items},tests:{score:k.audit_scores.tests.score,openItems:k.audit_scores.tests.open_items},performance:{score:k.audit_scores.performance.score,openItems:k.audit_scores.performance.open_items},accessibility:{score:k.audit_scores.accessibility.score,openItems:k.audit_scores.accessibility.open_items},codeQuality:{score:k.audit_scores.code_quality.score,openItems:k.audit_scores.code_quality.open_items},farmhouse:{score:k.audit_scores.farmhouse.score,openItems:k.audit_scores.farmhouse.open_items}},F=k.garden_stats?{activeIdeas:k.garden_stats.active_ideas,ideas:[],planted:k.garden_stats.planted,growing:k.garden_stats.growing,picked:k.garden_stats.picked}:void 0,q=k.compost_stats?{rejectedIdeas:k.compost_stats.rejected_ideas,ideas:[]}:void 0;b.setState({auditScores:R}),F&&b.setState({gardenStats:F}),q&&b.setState({compostStats:q}),k.beads_stats&&b.setState({beadsStats:k.beads_stats}),b.setState({buildings:L.buildings.map($=>{let N=0;switch($.type){case"security":N=k.audit_scores.security.score;break;case"tests":N=k.audit_scores.tests.score;break;case"performance":N=k.audit_scores.performance.score;break;case"accessibility":N=k.audit_scores.accessibility.score;break;case"codeQuality":N=k.audit_scores.code_quality.score;break;case"farmhouse":N=k.audit_scores.farmhouse.score;break;case"garden":N=k.garden_stats?.active_ideas??0;break;case"compost":N=k.compost_stats?.rejected_ideas??0;break;default:N=$.score}return{...$,score:N}})})},[b]);ut.useEffect(()=>{const k=NA();if(!k){s("Missing connection parameters. Please open from the mobile app."),t(!1);return}vl.configure(k),(async()=>{try{const F=await vl.fetchStats();w(F),b.setState({isInitialized:!0}),t(!1)}catch(F){console.error("Failed to fetch stats:",F),s("Failed to connect to desktop. Make sure Wynter Code is running."),t(!1)}})();const R=setInterval(async()=>{try{const F=await vl.fetchStats();w(F)}catch(F){console.error("Poll failed:",F)}},5e3);try{const F=vl.connectWebSocket(q=>{console.log("WebSocket update:",q)});return()=>{clearInterval(R),F.close()}}catch{return()=>clearInterval(R)}},[w,b]),ut.useEffect(()=>{const k=()=>{const L=window.innerWidth,R=window.innerHeight,q=L-(c?280:0),N=Math.min(q,R);a({width:N,height:N})};return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[c]),ut.useEffect(()=>{const k=()=>{document.visibilityState==="visible"?(b.getState().resume(),a(F=>({...F}))):b.getState().pause()},L=()=>{b.getState().resume()},R=()=>{};return document.addEventListener("visibilitychange",k),window.addEventListener("focus",L),window.addEventListener("blur",R),window.addEventListener("pageshow",L),b.getState().resume(),()=>{document.removeEventListener("visibilitychange",k),window.removeEventListener("focus",L),window.removeEventListener("blur",R),window.removeEventListener("pageshow",L)}},[b]);const C=ut.useCallback((k,L)=>{window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({type:k,data:L}))},[]),A=ut.useCallback(k=>{C("building_click",{buildingId:k}),u(!0)},[C]),T=ut.useCallback(k=>{const R={security:"_AUDIT/SECURITY.md",tests:"_AUDIT/TESTS.md",performance:"_AUDIT/PERFORMANCE.md",accessibility:"_AUDIT/ACCESSIBILITY.md",codeQuality:"_AUDIT/CODE_QUALITY.md",farmhouse:"_AUDIT/FARMHOUSE.md",garden:"_AUDIT/GARDEN.md",compost:"_AUDIT/COMPOST.md"}[k];R&&C("open_doc",{filePath:R})},[C]);return n?z.jsx(BA,{}):e?z.jsx(OA,{message:e}):z.jsxs("div",{ref:d,className:"h-screen w-screen bg-neutral-950 overflow-hidden flex",children:[z.jsxs("div",{className:"flex-1 flex items-center justify-center relative",style:{minWidth:0},children:[z.jsx(vC,{containerWidth:o.width,containerHeight:o.height,autoScale:!0,isMiniPlayer:!1,onBuildingClick:A,onOpenAuditFile:T}),z.jsx("button",{onClick:()=>u(!c),className:"absolute top-4 right-4 z-50 bg-neutral-800 hover:bg-neutral-700 text-white p-2 rounded-lg shadow-lg",children:z.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c?z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),c&&z.jsxs("div",{className:"w-72 flex-shrink-0 bg-neutral-900 border-l border-neutral-800 flex flex-col overflow-hidden",children:[z.jsxs("div",{className:"p-3 border-b border-neutral-800 flex items-center justify-between",children:[z.jsx("span",{className:"text-sm font-medium text-white",children:"Stats"}),z.jsx("button",{onClick:()=>u(!1),className:"text-neutral-400 hover:text-white",children:z.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),z.jsx(LA,{className:"flex-1 min-h-0",options:{scrollbars:{autoHide:"scroll"}},children:z.jsx(kC,{})})]})]})}window.FARMWORK_STANDALONE_MODE=!0;const nv=document.getElementById("root");if(!nv)throw new Error("Root element not found");const DA=iw.createRoot(nv);DA.render(z.jsx(zA,{}));export{xi as $,x0 as A,en as B,Be as C,Jt as D,_t as E,u0 as F,Ci as G,Vn as H,wi as I,Hm as J,hr as K,__ as L,Lt as M,R_ as N,Vo as O,Ge as P,ge as Q,Ro as R,E_ as S,al as T,Bh as U,oe as V,Q_ as W,Xm as X,Ku as Y,qm as Z,t_ as _,Yn as a,_e as a0,Zw as a1,zy as a2,v0 as a3,Et as a4,Ut as a5,eS as a6,CS as a7,xS as a8,WS as a9,HS as aa,KS as ab,JS as ac,tb as ad,L0 as ae,ug as af,lg as ag,Bg as ah,cr as ai,ek as aj,se as ak,mn as al,_w as am,ns as an,Hg as ao,O0 as ap,mS as b,Bo as c,bl as d,Ne as e,cg as f,dS as g,md as h,m0 as i,Xy as j,Xn as k,a0 as l,zo as m,$S as n,VS as o,qS as p,ZS as q,Nw as r,Ul as s,Ot as t,ww as u,Gl as v,ie as w,eb as x,Mn as y,Ny as z};
