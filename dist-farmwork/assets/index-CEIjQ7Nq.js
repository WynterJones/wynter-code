const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-COuUjqRY.js","assets/webworkerAll-Dj9s7PQ9.js","assets/colorToUniform-BXaCBwVl.js","assets/WebGPURenderer-DDPYzyNS.js","assets/SharedSystems-BhIujWX_.js","assets/WebGLRenderer-DDCf91wd.js"])))=>i.map(i=>d[i]);
var K1=Object.defineProperty;var Z1=(n,e,t)=>e in n?K1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var de=(n,e,t)=>Z1(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function hd(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var zu={exports:{}},fo={},Du={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bm;function J1(){if(bm)return Ie;bm=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function x(M){return M===null||typeof M!="object"?null:(M=g&&M[g]||M["@@iterator"],typeof M=="function"?M:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,b={};function w(M,O,j){this.props=M,this.context=O,this.refs=b,this.updater=j||v}w.prototype.isReactComponent={},w.prototype.setState=function(M,O){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,O,"setState")},w.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function k(){}k.prototype=w.prototype;function A(M,O,j){this.props=M,this.context=O,this.refs=b,this.updater=j||v}var P=A.prototype=new k;P.constructor=A,_(P,w.prototype),P.isPureReactComponent=!0;var C=Array.isArray,F=Object.prototype.hasOwnProperty,R={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function Q(M,O,j){var K,se={},H=null,U=null;if(O!=null)for(K in O.ref!==void 0&&(U=O.ref),O.key!==void 0&&(H=""+O.key),O)F.call(O,K)&&!L.hasOwnProperty(K)&&(se[K]=O[K]);var Y=arguments.length-2;if(Y===1)se.children=j;else if(1<Y){for(var V=Array(Y),ae=0;ae<Y;ae++)V[ae]=arguments[ae+2];se.children=V}if(M&&M.defaultProps)for(K in Y=M.defaultProps,Y)se[K]===void 0&&(se[K]=Y[K]);return{$$typeof:n,type:M,key:H,ref:U,props:se,_owner:R.current}}function W(M,O){return{$$typeof:n,type:M.type,key:O,ref:M.ref,props:M.props,_owner:M._owner}}function B(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function $(M){var O={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(j){return O[j]})}var re=/\/+/g;function le(M,O){return typeof M=="object"&&M!==null&&M.key!=null?$(""+M.key):O.toString(36)}function ce(M,O,j,K,se){var H=typeof M;(H==="undefined"||H==="boolean")&&(M=null);var U=!1;if(M===null)U=!0;else switch(H){case"string":case"number":U=!0;break;case"object":switch(M.$$typeof){case n:case e:U=!0}}if(U)return U=M,se=se(U),M=K===""?"."+le(U,0):K,C(se)?(j="",M!=null&&(j=M.replace(re,"$&/")+"/"),ce(se,O,j,"",function(ae){return ae})):se!=null&&(B(se)&&(se=W(se,j+(!se.key||U&&U.key===se.key?"":(""+se.key).replace(re,"$&/")+"/")+M)),O.push(se)),1;if(U=0,K=K===""?".":K+":",C(M))for(var Y=0;Y<M.length;Y++){H=M[Y];var V=K+le(H,Y);U+=ce(H,O,j,V,se)}else if(V=x(M),typeof V=="function")for(M=V.call(M),Y=0;!(H=M.next()).done;)H=H.value,V=K+le(H,Y++),U+=ce(H,O,j,V,se);else if(H==="object")throw O=String(M),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return U}function Se(M,O,j){if(M==null)return M;var K=[],se=0;return ce(M,K,"","",function(H){return O.call(j,H,se++)}),K}function q(M){if(M._status===-1){var O=M._result;O=O(),O.then(function(j){(M._status===0||M._status===-1)&&(M._status=1,M._result=j)},function(j){(M._status===0||M._status===-1)&&(M._status=2,M._result=j)}),M._status===-1&&(M._status=0,M._result=O)}if(M._status===1)return M._result.default;throw M._result}var Z={current:null},J={transition:null},X={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:J,ReactCurrentOwner:R};function te(){throw Error("act(...) is not supported in production builds of React.")}return Ie.Children={map:Se,forEach:function(M,O,j){Se(M,function(){O.apply(this,arguments)},j)},count:function(M){var O=0;return Se(M,function(){O++}),O},toArray:function(M){return Se(M,function(O){return O})||[]},only:function(M){if(!B(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Ie.Component=w,Ie.Fragment=t,Ie.Profiler=o,Ie.PureComponent=A,Ie.StrictMode=s,Ie.Suspense=d,Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,Ie.act=te,Ie.cloneElement=function(M,O,j){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var K=_({},M.props),se=M.key,H=M.ref,U=M._owner;if(O!=null){if(O.ref!==void 0&&(H=O.ref,U=R.current),O.key!==void 0&&(se=""+O.key),M.type&&M.type.defaultProps)var Y=M.type.defaultProps;for(V in O)F.call(O,V)&&!L.hasOwnProperty(V)&&(K[V]=O[V]===void 0&&Y!==void 0?Y[V]:O[V])}var V=arguments.length-2;if(V===1)K.children=j;else if(1<V){Y=Array(V);for(var ae=0;ae<V;ae++)Y[ae]=arguments[ae+2];K.children=Y}return{$$typeof:n,type:M.type,key:se,ref:H,props:K,_owner:U}},Ie.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:a,_context:M},M.Consumer=M},Ie.createElement=Q,Ie.createFactory=function(M){var O=Q.bind(null,M);return O.type=M,O},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(M){return{$$typeof:u,render:M}},Ie.isValidElement=B,Ie.lazy=function(M){return{$$typeof:p,_payload:{_status:-1,_result:M},_init:q}},Ie.memo=function(M,O){return{$$typeof:f,type:M,compare:O===void 0?null:O}},Ie.startTransition=function(M){var O=J.transition;J.transition={};try{M()}finally{J.transition=O}},Ie.unstable_act=te,Ie.useCallback=function(M,O){return Z.current.useCallback(M,O)},Ie.useContext=function(M){return Z.current.useContext(M)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(M){return Z.current.useDeferredValue(M)},Ie.useEffect=function(M,O){return Z.current.useEffect(M,O)},Ie.useId=function(){return Z.current.useId()},Ie.useImperativeHandle=function(M,O,j){return Z.current.useImperativeHandle(M,O,j)},Ie.useInsertionEffect=function(M,O){return Z.current.useInsertionEffect(M,O)},Ie.useLayoutEffect=function(M,O){return Z.current.useLayoutEffect(M,O)},Ie.useMemo=function(M,O){return Z.current.useMemo(M,O)},Ie.useReducer=function(M,O,j){return Z.current.useReducer(M,O,j)},Ie.useRef=function(M){return Z.current.useRef(M)},Ie.useState=function(M){return Z.current.useState(M)},Ie.useSyncExternalStore=function(M,O,j){return Z.current.useSyncExternalStore(M,O,j)},Ie.useTransition=function(){return Z.current.useTransition()},Ie.version="18.3.1",Ie}var km;function dd(){return km||(km=1,Du.exports=J1()),Du.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cm;function e_(){if(Cm)return fo;Cm=1;var n=dd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(u,d,f){var p,g={},x=null,v=null;f!==void 0&&(x=""+f),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(v=d.ref);for(p in d)s.call(d,p)&&!a.hasOwnProperty(p)&&(g[p]=d[p]);if(u&&u.defaultProps)for(p in d=u.defaultProps,d)g[p]===void 0&&(g[p]=d[p]);return{$$typeof:e,type:u,key:x,ref:v,props:g,_owner:o.current}}return fo.Fragment=t,fo.jsx=c,fo.jsxs=c,fo}var Am;function t_(){return Am||(Am=1,zu.exports=e_()),zu.exports}var z=t_(),tl={},ju={exports:{}},Yt={},Gu={exports:{}},Uu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tm;function n_(){return Tm||(Tm=1,(function(n){function e(J,X){var te=J.length;J.push(X);e:for(;0<te;){var M=te-1>>>1,O=J[M];if(0<o(O,X))J[M]=X,J[te]=O,te=M;else break e}}function t(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var X=J[0],te=J.pop();if(te!==X){J[0]=te;e:for(var M=0,O=J.length,j=O>>>1;M<j;){var K=2*(M+1)-1,se=J[K],H=K+1,U=J[H];if(0>o(se,te))H<O&&0>o(U,se)?(J[M]=U,J[H]=te,M=H):(J[M]=se,J[K]=te,M=K);else if(H<O&&0>o(U,te))J[M]=U,J[H]=te,M=H;else break e}}return X}function o(J,X){var te=J.sortIndex-X.sortIndex;return te!==0?te:J.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var d=[],f=[],p=1,g=null,x=3,v=!1,_=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(J){for(var X=t(f);X!==null;){if(X.callback===null)s(f);else if(X.startTime<=J)s(f),X.sortIndex=X.expirationTime,e(d,X);else break;X=t(f)}}function C(J){if(b=!1,P(J),!_)if(t(d)!==null)_=!0,q(F);else{var X=t(f);X!==null&&Z(C,X.startTime-J)}}function F(J,X){_=!1,b&&(b=!1,k(Q),Q=-1),v=!0;var te=x;try{for(P(X),g=t(d);g!==null&&(!(g.expirationTime>X)||J&&!$());){var M=g.callback;if(typeof M=="function"){g.callback=null,x=g.priorityLevel;var O=M(g.expirationTime<=X);X=n.unstable_now(),typeof O=="function"?g.callback=O:g===t(d)&&s(d),P(X)}else s(d);g=t(d)}if(g!==null)var j=!0;else{var K=t(f);K!==null&&Z(C,K.startTime-X),j=!1}return j}finally{g=null,x=te,v=!1}}var R=!1,L=null,Q=-1,W=5,B=-1;function $(){return!(n.unstable_now()-B<W)}function re(){if(L!==null){var J=n.unstable_now();B=J;var X=!0;try{X=L(!0,J)}finally{X?le():(R=!1,L=null)}}else R=!1}var le;if(typeof A=="function")le=function(){A(re)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,Se=ce.port2;ce.port1.onmessage=re,le=function(){Se.postMessage(null)}}else le=function(){w(re,0)};function q(J){L=J,R||(R=!0,le())}function Z(J,X){Q=w(function(){J(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_continueExecution=function(){_||v||(_=!0,q(F))},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(J){switch(x){case 1:case 2:case 3:var X=3;break;default:X=x}var te=x;x=X;try{return J()}finally{x=te}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(J,X){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var te=x;x=J;try{return X()}finally{x=te}},n.unstable_scheduleCallback=function(J,X,te){var M=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?M+te:M):te=M,J){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=te+O,J={id:p++,callback:X,priorityLevel:J,startTime:te,expirationTime:O,sortIndex:-1},te>M?(J.sortIndex=te,e(f,J),t(d)===null&&J===t(f)&&(b?(k(Q),Q=-1):b=!0,Z(C,te-M))):(J.sortIndex=O,e(d,J),_||v||(_=!0,q(F))),J},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(J){var X=x;return function(){var te=x;x=X;try{return J.apply(this,arguments)}finally{x=te}}}})(Uu)),Uu}var Pm;function r_(){return Pm||(Pm=1,Gu.exports=n_()),Gu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm;function s_(){if(Mm)return Yt;Mm=1;var n=dd(),e=r_();function t(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function a(r,i){c(r,i),c(r+"Capture",i)}function c(r,i){for(o[r]=i,r=0;r<i.length;r++)s.add(i[r])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function x(r){return d.call(g,r)?!0:d.call(p,r)?!1:f.test(r)?g[r]=!0:(p[r]=!0,!1)}function v(r,i,l,h){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function _(r,i,l,h){if(i===null||typeof i>"u"||v(r,i,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function b(r,i,l,h,m,y,S){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=m,this.mustUseProperty=l,this.propertyName=r,this.type=i,this.sanitizeURL=y,this.removeEmptyString=S}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){w[r]=new b(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];w[i]=new b(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){w[r]=new b(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){w[r]=new b(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){w[r]=new b(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){w[r]=new b(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){w[r]=new b(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){w[r]=new b(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){w[r]=new b(r,5,!1,r.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function A(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(k,A);w[i]=new b(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(k,A);w[i]=new b(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(k,A);w[i]=new b(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){w[r]=new b(r,1,!1,r.toLowerCase(),null,!1,!1)}),w.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){w[r]=new b(r,1,!1,r.toLowerCase(),null,!0,!0)});function P(r,i,l,h){var m=w.hasOwnProperty(i)?w[i]:null;(m!==null?m.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(_(i,l,m,h)&&(l=null),h||m===null?x(i)&&(l===null?r.removeAttribute(i):r.setAttribute(i,""+l)):m.mustUseProperty?r[m.propertyName]=l===null?m.type===3?!1:"":l:(i=m.attributeName,h=m.attributeNamespace,l===null?r.removeAttribute(i):(m=m.type,l=m===3||m===4&&l===!0?"":""+l,h?r.setAttributeNS(h,i,l):r.setAttribute(i,l))))}var C=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),R=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),$=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),Se=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),J=Symbol.iterator;function X(r){return r===null||typeof r!="object"?null:(r=J&&r[J]||r["@@iterator"],typeof r=="function"?r:null)}var te=Object.assign,M;function O(r){if(M===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);M=i&&i[1]||""}return`
`+M+r}var j=!1;function K(r,i){if(!r||j)return"";j=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(G){var h=G}Reflect.construct(r,[],i)}else{try{i.call()}catch(G){h=G}r.call(i.prototype)}else{try{throw Error()}catch(G){h=G}r()}}catch(G){if(G&&h&&typeof G.stack=="string"){for(var m=G.stack.split(`
`),y=h.stack.split(`
`),S=m.length-1,T=y.length-1;1<=S&&0<=T&&m[S]!==y[T];)T--;for(;1<=S&&0<=T;S--,T--)if(m[S]!==y[T]){if(S!==1||T!==1)do if(S--,T--,0>T||m[S]!==y[T]){var E=`
`+m[S].replace(" at new "," at ");return r.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",r.displayName)),E}while(1<=S&&0<=T);break}}}finally{j=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?O(r):""}function se(r){switch(r.tag){case 5:return O(r.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return r=K(r.type,!1),r;case 11:return r=K(r.type.render,!1),r;case 1:return r=K(r.type,!0),r;default:return""}}function H(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case L:return"Fragment";case R:return"Portal";case W:return"Profiler";case Q:return"StrictMode";case le:return"Suspense";case ce:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case $:return(r.displayName||"Context")+".Consumer";case B:return(r._context.displayName||"Context")+".Provider";case re:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Se:return i=r.displayName||null,i!==null?i:H(r.type)||"Memo";case q:i=r._payload,r=r._init;try{return H(r(i))}catch{}}return null}function U(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(i);case 8:return i===Q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Y(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function V(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ae(r){var i=V(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),h=""+r[i];if(!r.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,y=l.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return m.call(this)},set:function(S){h=""+S,y.call(this,S)}}),Object.defineProperty(r,i,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(S){h=""+S},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function be(r){r._valueTracker||(r._valueTracker=ae(r))}function ye(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var l=i.getValue(),h="";return r&&(h=V(r)?r.checked?"true":"false":r.value),r=h,r!==l?(i.setValue(r),!0):!1}function _e(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function pe(r,i){var l=i.checked;return te({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function Me(r,i){var l=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;l=Y(i.value!=null?i.value:l),r._wrapperState={initialChecked:h,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Ee(r,i){i=i.checked,i!=null&&P(r,"checked",i,!1)}function De(r,i){Ee(r,i);var l=Y(i.value),h=i.type;if(l!=null)h==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?Ve(r,i.type,l):i.hasOwnProperty("defaultValue")&&Ve(r,i.type,Y(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function st(r,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,l||i===r.value||(r.value=i),r.defaultValue=i}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function Ve(r,i,l){(i!=="number"||_e(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var We=Array.isArray;function Fe(r,i,l,h){if(r=r.options,i){i={};for(var m=0;m<l.length;m++)i["$"+l[m]]=!0;for(l=0;l<r.length;l++)m=i.hasOwnProperty("$"+r[l].value),r[l].selected!==m&&(r[l].selected=m),m&&h&&(r[l].defaultSelected=!0)}else{for(l=""+Y(l),i=null,m=0;m<r.length;m++){if(r[m].value===l){r[m].selected=!0,h&&(r[m].defaultSelected=!0);return}i!==null||r[m].disabled||(i=r[m])}i!==null&&(i.selected=!0)}}function Le(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return te({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function He(r,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(t(92));if(We(l)){if(1<l.length)throw Error(t(93));l=l[0]}i=l}i==null&&(i=""),l=i}r._wrapperState={initialValue:Y(l)}}function ft(r,i){var l=Y(i.value),h=Y(i.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),i.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),h!=null&&(r.defaultValue=""+h)}function it(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function Ye(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gt(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?Ye(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var bn,kn=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,h,m){MSApp.execUnsafeLocalFunction(function(){return r(i,l,h,m)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(bn=bn||document.createElement("div"),bn.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=bn.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function hn(r,i){if(i){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=i;return}}r.textContent=i}var xt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},es=["Webkit","ms","Moz","O"];Object.keys(xt).forEach(function(r){es.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),xt[i]=xt[r]})});function ts(r,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||xt.hasOwnProperty(r)&&xt[r]?(""+i).trim():i+"px"}function Fs(r,i){r=r.style;for(var l in i)if(i.hasOwnProperty(l)){var h=l.indexOf("--")===0,m=ts(l,i[l],h);l==="float"&&(l="cssFloat"),h?r.setProperty(l,m):r[l]=m}}var Ei=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ns(r,i){if(i){if(Ei[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Ot(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rs=null;function kr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Cr=null,Vn=null,Cn=null;function Ar(r){if(r=Ki(r)){if(typeof Cr!="function")throw Error(t(280));var i=r.stateNode;i&&(i=ga(i),Cr(r.stateNode,r.type,i))}}function Tr(r){Vn?Cn?Cn.push(r):Cn=[r]:Vn=r}function ss(){if(Vn){var r=Vn,i=Cn;if(Cn=Vn=null,Ar(r),i)for(r=0;r<i.length;r++)Ar(i[r])}}function An(r,i){return r(i)}function Xo(){}var Ii=!1;function Ri(r,i,l){if(Ii)return r(i,l);Ii=!0;try{return An(r,i,l)}finally{Ii=!1,(Vn!==null||Cn!==null)&&(Xo(),ss())}}function Hn(r,i){var l=r.stateNode;if(l===null)return null;var h=ga(l);if(h===null)return null;l=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(t(231,i,typeof l));return l}var Pr=!1;if(u)try{var Yn={};Object.defineProperty(Yn,"passive",{get:function(){Pr=!0}}),window.addEventListener("test",Yn,Yn),window.removeEventListener("test",Yn,Yn)}catch{Pr=!1}function Ls(r,i,l,h,m,y,S,T,E){var G=Array.prototype.slice.call(arguments,3);try{i.apply(l,G)}catch(ne){this.onError(ne)}}var is=!1,os=null,qo=!1,rc=null,sv={onError:function(r){is=!0,os=r}};function iv(r,i,l,h,m,y,S,T,E){is=!1,os=null,Ls.apply(sv,arguments)}function ov(r,i,l,h,m,y,S,T,E){if(iv.apply(this,arguments),is){if(is){var G=os;is=!1,os=null}else throw Error(t(198));qo||(qo=!0,rc=G)}}function as(r){var i=r,l=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(l=i.return),r=i.return;while(r)}return i.tag===3?l:null}function Vd(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function Hd(r){if(as(r)!==r)throw Error(t(188))}function av(r){var i=r.alternate;if(!i){if(i=as(r),i===null)throw Error(t(188));return i!==r?null:r}for(var l=r,h=i;;){var m=l.return;if(m===null)break;var y=m.alternate;if(y===null){if(h=m.return,h!==null){l=h;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===l)return Hd(m),r;if(y===h)return Hd(m),i;y=y.sibling}throw Error(t(188))}if(l.return!==h.return)l=m,h=y;else{for(var S=!1,T=m.child;T;){if(T===l){S=!0,l=m,h=y;break}if(T===h){S=!0,h=m,l=y;break}T=T.sibling}if(!S){for(T=y.child;T;){if(T===l){S=!0,l=y,h=m;break}if(T===h){S=!0,h=y,l=m;break}T=T.sibling}if(!S)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?r:i}function Yd(r){return r=av(r),r!==null?Xd(r):null}function Xd(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=Xd(r);if(i!==null)return i;r=r.sibling}return null}var qd=e.unstable_scheduleCallback,Qd=e.unstable_cancelCallback,lv=e.unstable_shouldYield,cv=e.unstable_requestPaint,pt=e.unstable_now,uv=e.unstable_getCurrentPriorityLevel,sc=e.unstable_ImmediatePriority,Kd=e.unstable_UserBlockingPriority,Qo=e.unstable_NormalPriority,hv=e.unstable_LowPriority,Zd=e.unstable_IdlePriority,Ko=null,Xn=null;function dv(r){if(Xn&&typeof Xn.onCommitFiberRoot=="function")try{Xn.onCommitFiberRoot(Ko,r,void 0,(r.current.flags&128)===128)}catch{}}var Tn=Math.clz32?Math.clz32:mv,fv=Math.log,pv=Math.LN2;function mv(r){return r>>>=0,r===0?32:31-(fv(r)/pv|0)|0}var Zo=64,Jo=4194304;function Fi(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function ea(r,i){var l=r.pendingLanes;if(l===0)return 0;var h=0,m=r.suspendedLanes,y=r.pingedLanes,S=l&268435455;if(S!==0){var T=S&~m;T!==0?h=Fi(T):(y&=S,y!==0&&(h=Fi(y)))}else S=l&~m,S!==0?h=Fi(S):y!==0&&(h=Fi(y));if(h===0)return 0;if(i!==0&&i!==h&&(i&m)===0&&(m=h&-h,y=i&-i,m>=y||m===16&&(y&4194240)!==0))return i;if((h&4)!==0&&(h|=l&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=h;0<i;)l=31-Tn(i),m=1<<l,h|=r[l],i&=~m;return h}function gv(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yv(r,i){for(var l=r.suspendedLanes,h=r.pingedLanes,m=r.expirationTimes,y=r.pendingLanes;0<y;){var S=31-Tn(y),T=1<<S,E=m[S];E===-1?((T&l)===0||(T&h)!==0)&&(m[S]=gv(T,i)):E<=i&&(r.expiredLanes|=T),y&=~T}}function ic(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Jd(){var r=Zo;return Zo<<=1,(Zo&4194240)===0&&(Zo=64),r}function oc(r){for(var i=[],l=0;31>l;l++)i.push(r);return i}function Li(r,i,l){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-Tn(i),r[i]=l}function xv(r,i){var l=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<l;){var m=31-Tn(l),y=1<<m;i[m]=0,h[m]=-1,r[m]=-1,l&=~y}}function ac(r,i){var l=r.entangledLanes|=i;for(r=r.entanglements;l;){var h=31-Tn(l),m=1<<h;m&i|r[h]&i&&(r[h]|=i),l&=~m}}var Ge=0;function ef(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var tf,lc,nf,rf,sf,cc=!1,ta=[],Mr=null,Er=null,Ir=null,Ni=new Map,Bi=new Map,Rr=[],vv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function of(r,i){switch(r){case"focusin":case"focusout":Mr=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":Ni.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bi.delete(i.pointerId)}}function Oi(r,i,l,h,m,y){return r===null||r.nativeEvent!==y?(r={blockedOn:i,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[m]},i!==null&&(i=Ki(i),i!==null&&lc(i)),r):(r.eventSystemFlags|=h,i=r.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),r)}function _v(r,i,l,h,m){switch(i){case"focusin":return Mr=Oi(Mr,r,i,l,h,m),!0;case"dragenter":return Er=Oi(Er,r,i,l,h,m),!0;case"mouseover":return Ir=Oi(Ir,r,i,l,h,m),!0;case"pointerover":var y=m.pointerId;return Ni.set(y,Oi(Ni.get(y)||null,r,i,l,h,m)),!0;case"gotpointercapture":return y=m.pointerId,Bi.set(y,Oi(Bi.get(y)||null,r,i,l,h,m)),!0}return!1}function af(r){var i=ls(r.target);if(i!==null){var l=as(i);if(l!==null){if(i=l.tag,i===13){if(i=Vd(l),i!==null){r.blockedOn=i,sf(r.priority,function(){nf(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function na(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var l=hc(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var h=new l.constructor(l.type,l);rs=h,l.target.dispatchEvent(h),rs=null}else return i=Ki(l),i!==null&&lc(i),r.blockedOn=l,!1;i.shift()}return!0}function lf(r,i,l){na(r)&&l.delete(i)}function wv(){cc=!1,Mr!==null&&na(Mr)&&(Mr=null),Er!==null&&na(Er)&&(Er=null),Ir!==null&&na(Ir)&&(Ir=null),Ni.forEach(lf),Bi.forEach(lf)}function zi(r,i){r.blockedOn===i&&(r.blockedOn=null,cc||(cc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,wv)))}function Di(r){function i(m){return zi(m,r)}if(0<ta.length){zi(ta[0],r);for(var l=1;l<ta.length;l++){var h=ta[l];h.blockedOn===r&&(h.blockedOn=null)}}for(Mr!==null&&zi(Mr,r),Er!==null&&zi(Er,r),Ir!==null&&zi(Ir,r),Ni.forEach(i),Bi.forEach(i),l=0;l<Rr.length;l++)h=Rr[l],h.blockedOn===r&&(h.blockedOn=null);for(;0<Rr.length&&(l=Rr[0],l.blockedOn===null);)af(l),l.blockedOn===null&&Rr.shift()}var Ns=C.ReactCurrentBatchConfig,ra=!0;function Sv(r,i,l,h){var m=Ge,y=Ns.transition;Ns.transition=null;try{Ge=1,uc(r,i,l,h)}finally{Ge=m,Ns.transition=y}}function bv(r,i,l,h){var m=Ge,y=Ns.transition;Ns.transition=null;try{Ge=4,uc(r,i,l,h)}finally{Ge=m,Ns.transition=y}}function uc(r,i,l,h){if(ra){var m=hc(r,i,l,h);if(m===null)Pc(r,i,h,sa,l),of(r,h);else if(_v(m,r,i,l,h))h.stopPropagation();else if(of(r,h),i&4&&-1<vv.indexOf(r)){for(;m!==null;){var y=Ki(m);if(y!==null&&tf(y),y=hc(r,i,l,h),y===null&&Pc(r,i,h,sa,l),y===m)break;m=y}m!==null&&h.stopPropagation()}else Pc(r,i,h,null,l)}}var sa=null;function hc(r,i,l,h){if(sa=null,r=kr(h),r=ls(r),r!==null)if(i=as(r),i===null)r=null;else if(l=i.tag,l===13){if(r=Vd(i),r!==null)return r;r=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return sa=r,null}function cf(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uv()){case sc:return 1;case Kd:return 4;case Qo:case hv:return 16;case Zd:return 536870912;default:return 16}default:return 16}}var Fr=null,dc=null,ia=null;function uf(){if(ia)return ia;var r,i=dc,l=i.length,h,m="value"in Fr?Fr.value:Fr.textContent,y=m.length;for(r=0;r<l&&i[r]===m[r];r++);var S=l-r;for(h=1;h<=S&&i[l-h]===m[y-h];h++);return ia=m.slice(r,1<h?1-h:void 0)}function oa(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function aa(){return!0}function hf(){return!1}function Kt(r){function i(l,h,m,y,S){this._reactName=l,this._targetInst=m,this.type=h,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var T in r)r.hasOwnProperty(T)&&(l=r[T],this[T]=l?l(y):y[T]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?aa:hf,this.isPropagationStopped=hf,this}return te(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=aa)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=aa)},persist:function(){},isPersistent:aa}),i}var Bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fc=Kt(Bs),ji=te({},Bs,{view:0,detail:0}),kv=Kt(ji),pc,mc,Gi,la=te({},ji,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yc,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Gi&&(Gi&&r.type==="mousemove"?(pc=r.screenX-Gi.screenX,mc=r.screenY-Gi.screenY):mc=pc=0,Gi=r),pc)},movementY:function(r){return"movementY"in r?r.movementY:mc}}),df=Kt(la),Cv=te({},la,{dataTransfer:0}),Av=Kt(Cv),Tv=te({},ji,{relatedTarget:0}),gc=Kt(Tv),Pv=te({},Bs,{animationName:0,elapsedTime:0,pseudoElement:0}),Mv=Kt(Pv),Ev=te({},Bs,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Iv=Kt(Ev),Rv=te({},Bs,{data:0}),ff=Kt(Rv),Fv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bv(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Nv[r])?!!i[r]:!1}function yc(){return Bv}var Ov=te({},ji,{key:function(r){if(r.key){var i=Fv[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=oa(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Lv[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yc,charCode:function(r){return r.type==="keypress"?oa(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?oa(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),zv=Kt(Ov),Dv=te({},la,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pf=Kt(Dv),jv=te({},ji,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yc}),Gv=Kt(jv),Uv=te({},Bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),$v=Kt(Uv),Wv=te({},la,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Vv=Kt(Wv),Hv=[9,13,27,32],xc=u&&"CompositionEvent"in window,Ui=null;u&&"documentMode"in document&&(Ui=document.documentMode);var Yv=u&&"TextEvent"in window&&!Ui,mf=u&&(!xc||Ui&&8<Ui&&11>=Ui),gf=" ",yf=!1;function xf(r,i){switch(r){case"keyup":return Hv.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vf(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Os=!1;function Xv(r,i){switch(r){case"compositionend":return vf(i);case"keypress":return i.which!==32?null:(yf=!0,gf);case"textInput":return r=i.data,r===gf&&yf?null:r;default:return null}}function qv(r,i){if(Os)return r==="compositionend"||!xc&&xf(r,i)?(r=uf(),ia=dc=Fr=null,Os=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return mf&&i.locale!=="ko"?null:i.data;default:return null}}var Qv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _f(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!Qv[r.type]:i==="textarea"}function wf(r,i,l,h){Tr(h),i=fa(i,"onChange"),0<i.length&&(l=new fc("onChange","change",null,l,h),r.push({event:l,listeners:i}))}var $i=null,Wi=null;function Kv(r){Df(r,0)}function ca(r){var i=Us(r);if(ye(i))return r}function Zv(r,i){if(r==="change")return i}var Sf=!1;if(u){var vc;if(u){var _c="oninput"in document;if(!_c){var bf=document.createElement("div");bf.setAttribute("oninput","return;"),_c=typeof bf.oninput=="function"}vc=_c}else vc=!1;Sf=vc&&(!document.documentMode||9<document.documentMode)}function kf(){$i&&($i.detachEvent("onpropertychange",Cf),Wi=$i=null)}function Cf(r){if(r.propertyName==="value"&&ca(Wi)){var i=[];wf(i,Wi,r,kr(r)),Ri(Kv,i)}}function Jv(r,i,l){r==="focusin"?(kf(),$i=i,Wi=l,$i.attachEvent("onpropertychange",Cf)):r==="focusout"&&kf()}function e1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ca(Wi)}function t1(r,i){if(r==="click")return ca(i)}function n1(r,i){if(r==="input"||r==="change")return ca(i)}function r1(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Pn=typeof Object.is=="function"?Object.is:r1;function Vi(r,i){if(Pn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var l=Object.keys(r),h=Object.keys(i);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var m=l[h];if(!d.call(i,m)||!Pn(r[m],i[m]))return!1}return!0}function Af(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Tf(r,i){var l=Af(r);r=0;for(var h;l;){if(l.nodeType===3){if(h=r+l.textContent.length,r<=i&&h>=i)return{node:l,offset:i-r};r=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Af(l)}}function Pf(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Pf(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Mf(){for(var r=window,i=_e();i instanceof r.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)r=i.contentWindow;else break;i=_e(r.document)}return i}function wc(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function s1(r){var i=Mf(),l=r.focusedElem,h=r.selectionRange;if(i!==l&&l&&l.ownerDocument&&Pf(l.ownerDocument.documentElement,l)){if(h!==null&&wc(l)){if(i=h.start,r=h.end,r===void 0&&(r=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(r,l.value.length);else if(r=(i=l.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var m=l.textContent.length,y=Math.min(h.start,m);h=h.end===void 0?y:Math.min(h.end,m),!r.extend&&y>h&&(m=h,h=y,y=m),m=Tf(l,y);var S=Tf(l,h);m&&S&&(r.rangeCount!==1||r.anchorNode!==m.node||r.anchorOffset!==m.offset||r.focusNode!==S.node||r.focusOffset!==S.offset)&&(i=i.createRange(),i.setStart(m.node,m.offset),r.removeAllRanges(),y>h?(r.addRange(i),r.extend(S.node,S.offset)):(i.setEnd(S.node,S.offset),r.addRange(i)))}}for(i=[],r=l;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)r=i[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var i1=u&&"documentMode"in document&&11>=document.documentMode,zs=null,Sc=null,Hi=null,bc=!1;function Ef(r,i,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;bc||zs==null||zs!==_e(h)||(h=zs,"selectionStart"in h&&wc(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Hi&&Vi(Hi,h)||(Hi=h,h=fa(Sc,"onSelect"),0<h.length&&(i=new fc("onSelect","select",null,i,l),r.push({event:i,listeners:h}),i.target=zs)))}function ua(r,i){var l={};return l[r.toLowerCase()]=i.toLowerCase(),l["Webkit"+r]="webkit"+i,l["Moz"+r]="moz"+i,l}var Ds={animationend:ua("Animation","AnimationEnd"),animationiteration:ua("Animation","AnimationIteration"),animationstart:ua("Animation","AnimationStart"),transitionend:ua("Transition","TransitionEnd")},kc={},If={};u&&(If=document.createElement("div").style,"AnimationEvent"in window||(delete Ds.animationend.animation,delete Ds.animationiteration.animation,delete Ds.animationstart.animation),"TransitionEvent"in window||delete Ds.transitionend.transition);function ha(r){if(kc[r])return kc[r];if(!Ds[r])return r;var i=Ds[r],l;for(l in i)if(i.hasOwnProperty(l)&&l in If)return kc[r]=i[l];return r}var Rf=ha("animationend"),Ff=ha("animationiteration"),Lf=ha("animationstart"),Nf=ha("transitionend"),Bf=new Map,Of="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(r,i){Bf.set(r,i),a(i,[r])}for(var Cc=0;Cc<Of.length;Cc++){var Ac=Of[Cc],o1=Ac.toLowerCase(),a1=Ac[0].toUpperCase()+Ac.slice(1);Lr(o1,"on"+a1)}Lr(Rf,"onAnimationEnd"),Lr(Ff,"onAnimationIteration"),Lr(Lf,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(Nf,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yi));function zf(r,i,l){var h=r.type||"unknown-event";r.currentTarget=l,ov(h,i,void 0,r),r.currentTarget=null}function Df(r,i){i=(i&4)!==0;for(var l=0;l<r.length;l++){var h=r[l],m=h.event;h=h.listeners;e:{var y=void 0;if(i)for(var S=h.length-1;0<=S;S--){var T=h[S],E=T.instance,G=T.currentTarget;if(T=T.listener,E!==y&&m.isPropagationStopped())break e;zf(m,T,G),y=E}else for(S=0;S<h.length;S++){if(T=h[S],E=T.instance,G=T.currentTarget,T=T.listener,E!==y&&m.isPropagationStopped())break e;zf(m,T,G),y=E}}}if(qo)throw r=rc,qo=!1,rc=null,r}function Qe(r,i){var l=i[Lc];l===void 0&&(l=i[Lc]=new Set);var h=r+"__bubble";l.has(h)||(jf(i,r,2,!1),l.add(h))}function Tc(r,i,l){var h=0;i&&(h|=4),jf(l,r,h,i)}var da="_reactListening"+Math.random().toString(36).slice(2);function Xi(r){if(!r[da]){r[da]=!0,s.forEach(function(l){l!=="selectionchange"&&(l1.has(l)||Tc(l,!1,r),Tc(l,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[da]||(i[da]=!0,Tc("selectionchange",!1,i))}}function jf(r,i,l,h){switch(cf(i)){case 1:var m=Sv;break;case 4:m=bv;break;default:m=uc}l=m.bind(null,i,l,r),m=void 0,!Pr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),h?m!==void 0?r.addEventListener(i,l,{capture:!0,passive:m}):r.addEventListener(i,l,!0):m!==void 0?r.addEventListener(i,l,{passive:m}):r.addEventListener(i,l,!1)}function Pc(r,i,l,h,m){var y=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var S=h.tag;if(S===3||S===4){var T=h.stateNode.containerInfo;if(T===m||T.nodeType===8&&T.parentNode===m)break;if(S===4)for(S=h.return;S!==null;){var E=S.tag;if((E===3||E===4)&&(E=S.stateNode.containerInfo,E===m||E.nodeType===8&&E.parentNode===m))return;S=S.return}for(;T!==null;){if(S=ls(T),S===null)return;if(E=S.tag,E===5||E===6){h=y=S;continue e}T=T.parentNode}}h=h.return}Ri(function(){var G=y,ne=kr(l),ie=[];e:{var ee=Bf.get(r);if(ee!==void 0){var he=fc,me=r;switch(r){case"keypress":if(oa(l)===0)break e;case"keydown":case"keyup":he=zv;break;case"focusin":me="focus",he=gc;break;case"focusout":me="blur",he=gc;break;case"beforeblur":case"afterblur":he=gc;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=df;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Av;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=Gv;break;case Rf:case Ff:case Lf:he=Mv;break;case Nf:he=$v;break;case"scroll":he=kv;break;case"wheel":he=Vv;break;case"copy":case"cut":case"paste":he=Iv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=pf}var ge=(i&4)!==0,mt=!ge&&r==="scroll",N=ge?ee!==null?ee+"Capture":null:ee;ge=[];for(var I=G,D;I!==null;){D=I;var oe=D.stateNode;if(D.tag===5&&oe!==null&&(D=oe,N!==null&&(oe=Hn(I,N),oe!=null&&ge.push(qi(I,oe,D)))),mt)break;I=I.return}0<ge.length&&(ee=new he(ee,me,null,l,ne),ie.push({event:ee,listeners:ge}))}}if((i&7)===0){e:{if(ee=r==="mouseover"||r==="pointerover",he=r==="mouseout"||r==="pointerout",ee&&l!==rs&&(me=l.relatedTarget||l.fromElement)&&(ls(me)||me[ar]))break e;if((he||ee)&&(ee=ne.window===ne?ne:(ee=ne.ownerDocument)?ee.defaultView||ee.parentWindow:window,he?(me=l.relatedTarget||l.toElement,he=G,me=me?ls(me):null,me!==null&&(mt=as(me),me!==mt||me.tag!==5&&me.tag!==6)&&(me=null)):(he=null,me=G),he!==me)){if(ge=df,oe="onMouseLeave",N="onMouseEnter",I="mouse",(r==="pointerout"||r==="pointerover")&&(ge=pf,oe="onPointerLeave",N="onPointerEnter",I="pointer"),mt=he==null?ee:Us(he),D=me==null?ee:Us(me),ee=new ge(oe,I+"leave",he,l,ne),ee.target=mt,ee.relatedTarget=D,oe=null,ls(ne)===G&&(ge=new ge(N,I+"enter",me,l,ne),ge.target=D,ge.relatedTarget=mt,oe=ge),mt=oe,he&&me)t:{for(ge=he,N=me,I=0,D=ge;D;D=js(D))I++;for(D=0,oe=N;oe;oe=js(oe))D++;for(;0<I-D;)ge=js(ge),I--;for(;0<D-I;)N=js(N),D--;for(;I--;){if(ge===N||N!==null&&ge===N.alternate)break t;ge=js(ge),N=js(N)}ge=null}else ge=null;he!==null&&Gf(ie,ee,he,ge,!1),me!==null&&mt!==null&&Gf(ie,mt,me,ge,!0)}}e:{if(ee=G?Us(G):window,he=ee.nodeName&&ee.nodeName.toLowerCase(),he==="select"||he==="input"&&ee.type==="file")var xe=Zv;else if(_f(ee))if(Sf)xe=n1;else{xe=e1;var ke=Jv}else(he=ee.nodeName)&&he.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(xe=t1);if(xe&&(xe=xe(r,G))){wf(ie,xe,l,ne);break e}ke&&ke(r,ee,G),r==="focusout"&&(ke=ee._wrapperState)&&ke.controlled&&ee.type==="number"&&Ve(ee,"number",ee.value)}switch(ke=G?Us(G):window,r){case"focusin":(_f(ke)||ke.contentEditable==="true")&&(zs=ke,Sc=G,Hi=null);break;case"focusout":Hi=Sc=zs=null;break;case"mousedown":bc=!0;break;case"contextmenu":case"mouseup":case"dragend":bc=!1,Ef(ie,l,ne);break;case"selectionchange":if(i1)break;case"keydown":case"keyup":Ef(ie,l,ne)}var Ce;if(xc)e:{switch(r){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else Os?xf(r,l)&&(Ae="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Ae="onCompositionStart");Ae&&(mf&&l.locale!=="ko"&&(Os||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&Os&&(Ce=uf()):(Fr=ne,dc="value"in Fr?Fr.value:Fr.textContent,Os=!0)),ke=fa(G,Ae),0<ke.length&&(Ae=new ff(Ae,r,null,l,ne),ie.push({event:Ae,listeners:ke}),Ce?Ae.data=Ce:(Ce=vf(l),Ce!==null&&(Ae.data=Ce)))),(Ce=Yv?Xv(r,l):qv(r,l))&&(G=fa(G,"onBeforeInput"),0<G.length&&(ne=new ff("onBeforeInput","beforeinput",null,l,ne),ie.push({event:ne,listeners:G}),ne.data=Ce))}Df(ie,i)})}function qi(r,i,l){return{instance:r,listener:i,currentTarget:l}}function fa(r,i){for(var l=i+"Capture",h=[];r!==null;){var m=r,y=m.stateNode;m.tag===5&&y!==null&&(m=y,y=Hn(r,l),y!=null&&h.unshift(qi(r,y,m)),y=Hn(r,i),y!=null&&h.push(qi(r,y,m))),r=r.return}return h}function js(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Gf(r,i,l,h,m){for(var y=i._reactName,S=[];l!==null&&l!==h;){var T=l,E=T.alternate,G=T.stateNode;if(E!==null&&E===h)break;T.tag===5&&G!==null&&(T=G,m?(E=Hn(l,y),E!=null&&S.unshift(qi(l,E,T))):m||(E=Hn(l,y),E!=null&&S.push(qi(l,E,T)))),l=l.return}S.length!==0&&r.push({event:i,listeners:S})}var c1=/\r\n?/g,u1=/\u0000|\uFFFD/g;function Uf(r){return(typeof r=="string"?r:""+r).replace(c1,`
`).replace(u1,"")}function pa(r,i,l){if(i=Uf(i),Uf(r)!==i&&l)throw Error(t(425))}function ma(){}var Mc=null,Ec=null;function Ic(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Rc=typeof setTimeout=="function"?setTimeout:void 0,h1=typeof clearTimeout=="function"?clearTimeout:void 0,$f=typeof Promise=="function"?Promise:void 0,d1=typeof queueMicrotask=="function"?queueMicrotask:typeof $f<"u"?function(r){return $f.resolve(null).then(r).catch(f1)}:Rc;function f1(r){setTimeout(function(){throw r})}function Fc(r,i){var l=i,h=0;do{var m=l.nextSibling;if(r.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(h===0){r.removeChild(m),Di(i);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=m}while(l);Di(i)}function Nr(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function Wf(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return r;i--}else l==="/$"&&i++}r=r.previousSibling}return null}var Gs=Math.random().toString(36).slice(2),qn="__reactFiber$"+Gs,Qi="__reactProps$"+Gs,ar="__reactContainer$"+Gs,Lc="__reactEvents$"+Gs,p1="__reactListeners$"+Gs,m1="__reactHandles$"+Gs;function ls(r){var i=r[qn];if(i)return i;for(var l=r.parentNode;l;){if(i=l[ar]||l[qn]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(r=Wf(r);r!==null;){if(l=r[qn])return l;r=Wf(r)}return i}r=l,l=r.parentNode}return null}function Ki(r){return r=r[qn]||r[ar],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Us(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function ga(r){return r[Qi]||null}var Nc=[],$s=-1;function Br(r){return{current:r}}function Ke(r){0>$s||(r.current=Nc[$s],Nc[$s]=null,$s--)}function Xe(r,i){$s++,Nc[$s]=r.current,r.current=i}var Or={},It=Br(Or),Ut=Br(!1),cs=Or;function Ws(r,i){var l=r.type.contextTypes;if(!l)return Or;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var m={},y;for(y in l)m[y]=i[y];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=m),m}function $t(r){return r=r.childContextTypes,r!=null}function ya(){Ke(Ut),Ke(It)}function Vf(r,i,l){if(It.current!==Or)throw Error(t(168));Xe(It,i),Xe(Ut,l)}function Hf(r,i,l){var h=r.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var m in h)if(!(m in i))throw Error(t(108,U(r)||"Unknown",m));return te({},l,h)}function xa(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Or,cs=It.current,Xe(It,r),Xe(Ut,Ut.current),!0}function Yf(r,i,l){var h=r.stateNode;if(!h)throw Error(t(169));l?(r=Hf(r,i,cs),h.__reactInternalMemoizedMergedChildContext=r,Ke(Ut),Ke(It),Xe(It,r)):Ke(Ut),Xe(Ut,l)}var lr=null,va=!1,Bc=!1;function Xf(r){lr===null?lr=[r]:lr.push(r)}function g1(r){va=!0,Xf(r)}function zr(){if(!Bc&&lr!==null){Bc=!0;var r=0,i=Ge;try{var l=lr;for(Ge=1;r<l.length;r++){var h=l[r];do h=h(!0);while(h!==null)}lr=null,va=!1}catch(m){throw lr!==null&&(lr=lr.slice(r+1)),qd(sc,zr),m}finally{Ge=i,Bc=!1}}return null}var Vs=[],Hs=0,_a=null,wa=0,dn=[],fn=0,us=null,cr=1,ur="";function hs(r,i){Vs[Hs++]=wa,Vs[Hs++]=_a,_a=r,wa=i}function qf(r,i,l){dn[fn++]=cr,dn[fn++]=ur,dn[fn++]=us,us=r;var h=cr;r=ur;var m=32-Tn(h)-1;h&=~(1<<m),l+=1;var y=32-Tn(i)+m;if(30<y){var S=m-m%5;y=(h&(1<<S)-1).toString(32),h>>=S,m-=S,cr=1<<32-Tn(i)+m|l<<m|h,ur=y+r}else cr=1<<y|l<<m|h,ur=r}function Oc(r){r.return!==null&&(hs(r,1),qf(r,1,0))}function zc(r){for(;r===_a;)_a=Vs[--Hs],Vs[Hs]=null,wa=Vs[--Hs],Vs[Hs]=null;for(;r===us;)us=dn[--fn],dn[fn]=null,ur=dn[--fn],dn[fn]=null,cr=dn[--fn],dn[fn]=null}var Zt=null,Jt=null,nt=!1,Mn=null;function Qf(r,i){var l=yn(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=r,i=r.deletions,i===null?(r.deletions=[l],r.flags|=16):i.push(l)}function Kf(r,i){switch(r.tag){case 5:var l=r.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,Zt=r,Jt=Nr(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,Zt=r,Jt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=us!==null?{id:cr,overflow:ur}:null,r.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=yn(18,null,null,0),l.stateNode=i,l.return=r,r.child=l,Zt=r,Jt=null,!0):!1;default:return!1}}function Dc(r){return(r.mode&1)!==0&&(r.flags&128)===0}function jc(r){if(nt){var i=Jt;if(i){var l=i;if(!Kf(r,i)){if(Dc(r))throw Error(t(418));i=Nr(l.nextSibling);var h=Zt;i&&Kf(r,i)?Qf(h,l):(r.flags=r.flags&-4097|2,nt=!1,Zt=r)}}else{if(Dc(r))throw Error(t(418));r.flags=r.flags&-4097|2,nt=!1,Zt=r}}}function Zf(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Zt=r}function Sa(r){if(r!==Zt)return!1;if(!nt)return Zf(r),nt=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!Ic(r.type,r.memoizedProps)),i&&(i=Jt)){if(Dc(r))throw Jf(),Error(t(418));for(;i;)Qf(r,i),i=Nr(i.nextSibling)}if(Zf(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(i===0){Jt=Nr(r.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}r=r.nextSibling}Jt=null}}else Jt=Zt?Nr(r.stateNode.nextSibling):null;return!0}function Jf(){for(var r=Jt;r;)r=Nr(r.nextSibling)}function Ys(){Jt=Zt=null,nt=!1}function Gc(r){Mn===null?Mn=[r]:Mn.push(r)}var y1=C.ReactCurrentBatchConfig;function Zi(r,i,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,r));var m=h,y=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===y?i.ref:(i=function(S){var T=m.refs;S===null?delete T[y]:T[y]=S},i._stringRef=y,i)}if(typeof r!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,r))}return r}function ba(r,i){throw r=Object.prototype.toString.call(i),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function ep(r){var i=r._init;return i(r._payload)}function tp(r){function i(N,I){if(r){var D=N.deletions;D===null?(N.deletions=[I],N.flags|=16):D.push(I)}}function l(N,I){if(!r)return null;for(;I!==null;)i(N,I),I=I.sibling;return null}function h(N,I){for(N=new Map;I!==null;)I.key!==null?N.set(I.key,I):N.set(I.index,I),I=I.sibling;return N}function m(N,I){return N=Hr(N,I),N.index=0,N.sibling=null,N}function y(N,I,D){return N.index=D,r?(D=N.alternate,D!==null?(D=D.index,D<I?(N.flags|=2,I):D):(N.flags|=2,I)):(N.flags|=1048576,I)}function S(N){return r&&N.alternate===null&&(N.flags|=2),N}function T(N,I,D,oe){return I===null||I.tag!==6?(I=Ru(D,N.mode,oe),I.return=N,I):(I=m(I,D),I.return=N,I)}function E(N,I,D,oe){var xe=D.type;return xe===L?ne(N,I,D.props.children,oe,D.key):I!==null&&(I.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===q&&ep(xe)===I.type)?(oe=m(I,D.props),oe.ref=Zi(N,I,D),oe.return=N,oe):(oe=Ya(D.type,D.key,D.props,null,N.mode,oe),oe.ref=Zi(N,I,D),oe.return=N,oe)}function G(N,I,D,oe){return I===null||I.tag!==4||I.stateNode.containerInfo!==D.containerInfo||I.stateNode.implementation!==D.implementation?(I=Fu(D,N.mode,oe),I.return=N,I):(I=m(I,D.children||[]),I.return=N,I)}function ne(N,I,D,oe,xe){return I===null||I.tag!==7?(I=vs(D,N.mode,oe,xe),I.return=N,I):(I=m(I,D),I.return=N,I)}function ie(N,I,D){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Ru(""+I,N.mode,D),I.return=N,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case F:return D=Ya(I.type,I.key,I.props,null,N.mode,D),D.ref=Zi(N,null,I),D.return=N,D;case R:return I=Fu(I,N.mode,D),I.return=N,I;case q:var oe=I._init;return ie(N,oe(I._payload),D)}if(We(I)||X(I))return I=vs(I,N.mode,D,null),I.return=N,I;ba(N,I)}return null}function ee(N,I,D,oe){var xe=I!==null?I.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return xe!==null?null:T(N,I,""+D,oe);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case F:return D.key===xe?E(N,I,D,oe):null;case R:return D.key===xe?G(N,I,D,oe):null;case q:return xe=D._init,ee(N,I,xe(D._payload),oe)}if(We(D)||X(D))return xe!==null?null:ne(N,I,D,oe,null);ba(N,D)}return null}function he(N,I,D,oe,xe){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return N=N.get(D)||null,T(I,N,""+oe,xe);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case F:return N=N.get(oe.key===null?D:oe.key)||null,E(I,N,oe,xe);case R:return N=N.get(oe.key===null?D:oe.key)||null,G(I,N,oe,xe);case q:var ke=oe._init;return he(N,I,D,ke(oe._payload),xe)}if(We(oe)||X(oe))return N=N.get(D)||null,ne(I,N,oe,xe,null);ba(I,oe)}return null}function me(N,I,D,oe){for(var xe=null,ke=null,Ce=I,Ae=I=0,kt=null;Ce!==null&&Ae<D.length;Ae++){Ce.index>Ae?(kt=Ce,Ce=null):kt=Ce.sibling;var Oe=ee(N,Ce,D[Ae],oe);if(Oe===null){Ce===null&&(Ce=kt);break}r&&Ce&&Oe.alternate===null&&i(N,Ce),I=y(Oe,I,Ae),ke===null?xe=Oe:ke.sibling=Oe,ke=Oe,Ce=kt}if(Ae===D.length)return l(N,Ce),nt&&hs(N,Ae),xe;if(Ce===null){for(;Ae<D.length;Ae++)Ce=ie(N,D[Ae],oe),Ce!==null&&(I=y(Ce,I,Ae),ke===null?xe=Ce:ke.sibling=Ce,ke=Ce);return nt&&hs(N,Ae),xe}for(Ce=h(N,Ce);Ae<D.length;Ae++)kt=he(Ce,N,Ae,D[Ae],oe),kt!==null&&(r&&kt.alternate!==null&&Ce.delete(kt.key===null?Ae:kt.key),I=y(kt,I,Ae),ke===null?xe=kt:ke.sibling=kt,ke=kt);return r&&Ce.forEach(function(Yr){return i(N,Yr)}),nt&&hs(N,Ae),xe}function ge(N,I,D,oe){var xe=X(D);if(typeof xe!="function")throw Error(t(150));if(D=xe.call(D),D==null)throw Error(t(151));for(var ke=xe=null,Ce=I,Ae=I=0,kt=null,Oe=D.next();Ce!==null&&!Oe.done;Ae++,Oe=D.next()){Ce.index>Ae?(kt=Ce,Ce=null):kt=Ce.sibling;var Yr=ee(N,Ce,Oe.value,oe);if(Yr===null){Ce===null&&(Ce=kt);break}r&&Ce&&Yr.alternate===null&&i(N,Ce),I=y(Yr,I,Ae),ke===null?xe=Yr:ke.sibling=Yr,ke=Yr,Ce=kt}if(Oe.done)return l(N,Ce),nt&&hs(N,Ae),xe;if(Ce===null){for(;!Oe.done;Ae++,Oe=D.next())Oe=ie(N,Oe.value,oe),Oe!==null&&(I=y(Oe,I,Ae),ke===null?xe=Oe:ke.sibling=Oe,ke=Oe);return nt&&hs(N,Ae),xe}for(Ce=h(N,Ce);!Oe.done;Ae++,Oe=D.next())Oe=he(Ce,N,Ae,Oe.value,oe),Oe!==null&&(r&&Oe.alternate!==null&&Ce.delete(Oe.key===null?Ae:Oe.key),I=y(Oe,I,Ae),ke===null?xe=Oe:ke.sibling=Oe,ke=Oe);return r&&Ce.forEach(function(Q1){return i(N,Q1)}),nt&&hs(N,Ae),xe}function mt(N,I,D,oe){if(typeof D=="object"&&D!==null&&D.type===L&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case F:e:{for(var xe=D.key,ke=I;ke!==null;){if(ke.key===xe){if(xe=D.type,xe===L){if(ke.tag===7){l(N,ke.sibling),I=m(ke,D.props.children),I.return=N,N=I;break e}}else if(ke.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===q&&ep(xe)===ke.type){l(N,ke.sibling),I=m(ke,D.props),I.ref=Zi(N,ke,D),I.return=N,N=I;break e}l(N,ke);break}else i(N,ke);ke=ke.sibling}D.type===L?(I=vs(D.props.children,N.mode,oe,D.key),I.return=N,N=I):(oe=Ya(D.type,D.key,D.props,null,N.mode,oe),oe.ref=Zi(N,I,D),oe.return=N,N=oe)}return S(N);case R:e:{for(ke=D.key;I!==null;){if(I.key===ke)if(I.tag===4&&I.stateNode.containerInfo===D.containerInfo&&I.stateNode.implementation===D.implementation){l(N,I.sibling),I=m(I,D.children||[]),I.return=N,N=I;break e}else{l(N,I);break}else i(N,I);I=I.sibling}I=Fu(D,N.mode,oe),I.return=N,N=I}return S(N);case q:return ke=D._init,mt(N,I,ke(D._payload),oe)}if(We(D))return me(N,I,D,oe);if(X(D))return ge(N,I,D,oe);ba(N,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,I!==null&&I.tag===6?(l(N,I.sibling),I=m(I,D),I.return=N,N=I):(l(N,I),I=Ru(D,N.mode,oe),I.return=N,N=I),S(N)):l(N,I)}return mt}var Xs=tp(!0),np=tp(!1),ka=Br(null),Ca=null,qs=null,Uc=null;function $c(){Uc=qs=Ca=null}function Wc(r){var i=ka.current;Ke(ka),r._currentValue=i}function Vc(r,i,l){for(;r!==null;){var h=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),r===l)break;r=r.return}}function Qs(r,i){Ca=r,Uc=qs=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(Wt=!0),r.firstContext=null)}function pn(r){var i=r._currentValue;if(Uc!==r)if(r={context:r,memoizedValue:i,next:null},qs===null){if(Ca===null)throw Error(t(308));qs=r,Ca.dependencies={lanes:0,firstContext:r}}else qs=qs.next=r;return i}var ds=null;function Hc(r){ds===null?ds=[r]:ds.push(r)}function rp(r,i,l,h){var m=i.interleaved;return m===null?(l.next=l,Hc(i)):(l.next=m.next,m.next=l),i.interleaved=l,hr(r,h)}function hr(r,i){r.lanes|=i;var l=r.alternate;for(l!==null&&(l.lanes|=i),l=r,r=r.return;r!==null;)r.childLanes|=i,l=r.alternate,l!==null&&(l.childLanes|=i),l=r,r=r.return;return l.tag===3?l.stateNode:null}var Dr=!1;function Yc(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sp(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function dr(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function jr(r,i,l){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(Be&2)!==0){var m=h.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),h.pending=i,hr(r,l)}return m=h.interleaved,m===null?(i.next=i,Hc(h)):(i.next=m.next,m.next=i),h.interleaved=i,hr(r,l)}function Aa(r,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var h=i.lanes;h&=r.pendingLanes,l|=h,i.lanes=l,ac(r,l)}}function ip(r,i){var l=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var m=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var S={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?m=y=S:y=y.next=S,l=l.next}while(l!==null);y===null?m=y=i:y=y.next=i}else m=y=i;l={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:h.shared,effects:h.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=i:r.next=i,l.lastBaseUpdate=i}function Ta(r,i,l,h){var m=r.updateQueue;Dr=!1;var y=m.firstBaseUpdate,S=m.lastBaseUpdate,T=m.shared.pending;if(T!==null){m.shared.pending=null;var E=T,G=E.next;E.next=null,S===null?y=G:S.next=G,S=E;var ne=r.alternate;ne!==null&&(ne=ne.updateQueue,T=ne.lastBaseUpdate,T!==S&&(T===null?ne.firstBaseUpdate=G:T.next=G,ne.lastBaseUpdate=E))}if(y!==null){var ie=m.baseState;S=0,ne=G=E=null,T=y;do{var ee=T.lane,he=T.eventTime;if((h&ee)===ee){ne!==null&&(ne=ne.next={eventTime:he,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var me=r,ge=T;switch(ee=i,he=l,ge.tag){case 1:if(me=ge.payload,typeof me=="function"){ie=me.call(he,ie,ee);break e}ie=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ge.payload,ee=typeof me=="function"?me.call(he,ie,ee):me,ee==null)break e;ie=te({},ie,ee);break e;case 2:Dr=!0}}T.callback!==null&&T.lane!==0&&(r.flags|=64,ee=m.effects,ee===null?m.effects=[T]:ee.push(T))}else he={eventTime:he,lane:ee,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ne===null?(G=ne=he,E=ie):ne=ne.next=he,S|=ee;if(T=T.next,T===null){if(T=m.shared.pending,T===null)break;ee=T,T=ee.next,ee.next=null,m.lastBaseUpdate=ee,m.shared.pending=null}}while(!0);if(ne===null&&(E=ie),m.baseState=E,m.firstBaseUpdate=G,m.lastBaseUpdate=ne,i=m.shared.interleaved,i!==null){m=i;do S|=m.lane,m=m.next;while(m!==i)}else y===null&&(m.shared.lanes=0);ms|=S,r.lanes=S,r.memoizedState=ie}}function op(r,i,l){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var h=r[i],m=h.callback;if(m!==null){if(h.callback=null,h=l,typeof m!="function")throw Error(t(191,m));m.call(h)}}}var Ji={},Qn=Br(Ji),eo=Br(Ji),to=Br(Ji);function fs(r){if(r===Ji)throw Error(t(174));return r}function Xc(r,i){switch(Xe(to,i),Xe(eo,r),Xe(Qn,Ji),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Gt(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=Gt(i,r)}Ke(Qn),Xe(Qn,i)}function Ks(){Ke(Qn),Ke(eo),Ke(to)}function ap(r){fs(to.current);var i=fs(Qn.current),l=Gt(i,r.type);i!==l&&(Xe(eo,r),Xe(Qn,l))}function qc(r){eo.current===r&&(Ke(Qn),Ke(eo))}var ot=Br(0);function Pa(r){for(var i=r;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Qc=[];function Kc(){for(var r=0;r<Qc.length;r++)Qc[r]._workInProgressVersionPrimary=null;Qc.length=0}var Ma=C.ReactCurrentDispatcher,Zc=C.ReactCurrentBatchConfig,ps=0,at=null,vt=null,St=null,Ea=!1,no=!1,ro=0,x1=0;function Rt(){throw Error(t(321))}function Jc(r,i){if(i===null)return!1;for(var l=0;l<i.length&&l<r.length;l++)if(!Pn(r[l],i[l]))return!1;return!0}function eu(r,i,l,h,m,y){if(ps=y,at=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Ma.current=r===null||r.memoizedState===null?S1:b1,r=l(h,m),no){y=0;do{if(no=!1,ro=0,25<=y)throw Error(t(301));y+=1,St=vt=null,i.updateQueue=null,Ma.current=k1,r=l(h,m)}while(no)}if(Ma.current=Fa,i=vt!==null&&vt.next!==null,ps=0,St=vt=at=null,Ea=!1,i)throw Error(t(300));return r}function tu(){var r=ro!==0;return ro=0,r}function Kn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?at.memoizedState=St=r:St=St.next=r,St}function mn(){if(vt===null){var r=at.alternate;r=r!==null?r.memoizedState:null}else r=vt.next;var i=St===null?at.memoizedState:St.next;if(i!==null)St=i,vt=r;else{if(r===null)throw Error(t(310));vt=r,r={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},St===null?at.memoizedState=St=r:St=St.next=r}return St}function so(r,i){return typeof i=="function"?i(r):i}function nu(r){var i=mn(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=vt,m=h.baseQueue,y=l.pending;if(y!==null){if(m!==null){var S=m.next;m.next=y.next,y.next=S}h.baseQueue=m=y,l.pending=null}if(m!==null){y=m.next,h=h.baseState;var T=S=null,E=null,G=y;do{var ne=G.lane;if((ps&ne)===ne)E!==null&&(E=E.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),h=G.hasEagerState?G.eagerState:r(h,G.action);else{var ie={lane:ne,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};E===null?(T=E=ie,S=h):E=E.next=ie,at.lanes|=ne,ms|=ne}G=G.next}while(G!==null&&G!==y);E===null?S=h:E.next=T,Pn(h,i.memoizedState)||(Wt=!0),i.memoizedState=h,i.baseState=S,i.baseQueue=E,l.lastRenderedState=h}if(r=l.interleaved,r!==null){m=r;do y=m.lane,at.lanes|=y,ms|=y,m=m.next;while(m!==r)}else m===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function ru(r){var i=mn(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=l.dispatch,m=l.pending,y=i.memoizedState;if(m!==null){l.pending=null;var S=m=m.next;do y=r(y,S.action),S=S.next;while(S!==m);Pn(y,i.memoizedState)||(Wt=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),l.lastRenderedState=y}return[y,h]}function lp(){}function cp(r,i){var l=at,h=mn(),m=i(),y=!Pn(h.memoizedState,m);if(y&&(h.memoizedState=m,Wt=!0),h=h.queue,su(dp.bind(null,l,h,r),[r]),h.getSnapshot!==i||y||St!==null&&St.memoizedState.tag&1){if(l.flags|=2048,io(9,hp.bind(null,l,h,m,i),void 0,null),bt===null)throw Error(t(349));(ps&30)!==0||up(l,i,m)}return m}function up(r,i,l){r.flags|=16384,r={getSnapshot:i,value:l},i=at.updateQueue,i===null?(i={lastEffect:null,stores:null},at.updateQueue=i,i.stores=[r]):(l=i.stores,l===null?i.stores=[r]:l.push(r))}function hp(r,i,l,h){i.value=l,i.getSnapshot=h,fp(i)&&pp(r)}function dp(r,i,l){return l(function(){fp(i)&&pp(r)})}function fp(r){var i=r.getSnapshot;r=r.value;try{var l=i();return!Pn(r,l)}catch{return!0}}function pp(r){var i=hr(r,1);i!==null&&Fn(i,r,1,-1)}function mp(r){var i=Kn();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:r},i.queue=r,r=r.dispatch=w1.bind(null,at,r),[i.memoizedState,r]}function io(r,i,l,h){return r={tag:r,create:i,destroy:l,deps:h,next:null},i=at.updateQueue,i===null?(i={lastEffect:null,stores:null},at.updateQueue=i,i.lastEffect=r.next=r):(l=i.lastEffect,l===null?i.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,i.lastEffect=r)),r}function gp(){return mn().memoizedState}function Ia(r,i,l,h){var m=Kn();at.flags|=r,m.memoizedState=io(1|i,l,void 0,h===void 0?null:h)}function Ra(r,i,l,h){var m=mn();h=h===void 0?null:h;var y=void 0;if(vt!==null){var S=vt.memoizedState;if(y=S.destroy,h!==null&&Jc(h,S.deps)){m.memoizedState=io(i,l,y,h);return}}at.flags|=r,m.memoizedState=io(1|i,l,y,h)}function yp(r,i){return Ia(8390656,8,r,i)}function su(r,i){return Ra(2048,8,r,i)}function xp(r,i){return Ra(4,2,r,i)}function vp(r,i){return Ra(4,4,r,i)}function _p(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function wp(r,i,l){return l=l!=null?l.concat([r]):null,Ra(4,4,_p.bind(null,i,r),l)}function iu(){}function Sp(r,i){var l=mn();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&Jc(i,h[1])?h[0]:(l.memoizedState=[r,i],r)}function bp(r,i){var l=mn();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&Jc(i,h[1])?h[0]:(r=r(),l.memoizedState=[r,i],r)}function kp(r,i,l){return(ps&21)===0?(r.baseState&&(r.baseState=!1,Wt=!0),r.memoizedState=l):(Pn(l,i)||(l=Jd(),at.lanes|=l,ms|=l,r.baseState=!0),i)}function v1(r,i){var l=Ge;Ge=l!==0&&4>l?l:4,r(!0);var h=Zc.transition;Zc.transition={};try{r(!1),i()}finally{Ge=l,Zc.transition=h}}function Cp(){return mn().memoizedState}function _1(r,i,l){var h=Wr(r);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Ap(r))Tp(i,l);else if(l=rp(r,i,l,h),l!==null){var m=Dt();Fn(l,r,h,m),Pp(l,i,h)}}function w1(r,i,l){var h=Wr(r),m={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ap(r))Tp(i,m);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var S=i.lastRenderedState,T=y(S,l);if(m.hasEagerState=!0,m.eagerState=T,Pn(T,S)){var E=i.interleaved;E===null?(m.next=m,Hc(i)):(m.next=E.next,E.next=m),i.interleaved=m;return}}catch{}finally{}l=rp(r,i,m,h),l!==null&&(m=Dt(),Fn(l,r,h,m),Pp(l,i,h))}}function Ap(r){var i=r.alternate;return r===at||i!==null&&i===at}function Tp(r,i){no=Ea=!0;var l=r.pending;l===null?i.next=i:(i.next=l.next,l.next=i),r.pending=i}function Pp(r,i,l){if((l&4194240)!==0){var h=i.lanes;h&=r.pendingLanes,l|=h,i.lanes=l,ac(r,l)}}var Fa={readContext:pn,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},S1={readContext:pn,useCallback:function(r,i){return Kn().memoizedState=[r,i===void 0?null:i],r},useContext:pn,useEffect:yp,useImperativeHandle:function(r,i,l){return l=l!=null?l.concat([r]):null,Ia(4194308,4,_p.bind(null,i,r),l)},useLayoutEffect:function(r,i){return Ia(4194308,4,r,i)},useInsertionEffect:function(r,i){return Ia(4,2,r,i)},useMemo:function(r,i){var l=Kn();return i=i===void 0?null:i,r=r(),l.memoizedState=[r,i],r},useReducer:function(r,i,l){var h=Kn();return i=l!==void 0?l(i):i,h.memoizedState=h.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},h.queue=r,r=r.dispatch=_1.bind(null,at,r),[h.memoizedState,r]},useRef:function(r){var i=Kn();return r={current:r},i.memoizedState=r},useState:mp,useDebugValue:iu,useDeferredValue:function(r){return Kn().memoizedState=r},useTransition:function(){var r=mp(!1),i=r[0];return r=v1.bind(null,r[1]),Kn().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,l){var h=at,m=Kn();if(nt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=i(),bt===null)throw Error(t(349));(ps&30)!==0||up(h,i,l)}m.memoizedState=l;var y={value:l,getSnapshot:i};return m.queue=y,yp(dp.bind(null,h,y,r),[r]),h.flags|=2048,io(9,hp.bind(null,h,y,l,i),void 0,null),l},useId:function(){var r=Kn(),i=bt.identifierPrefix;if(nt){var l=ur,h=cr;l=(h&~(1<<32-Tn(h)-1)).toString(32)+l,i=":"+i+"R"+l,l=ro++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=x1++,i=":"+i+"r"+l.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},b1={readContext:pn,useCallback:Sp,useContext:pn,useEffect:su,useImperativeHandle:wp,useInsertionEffect:xp,useLayoutEffect:vp,useMemo:bp,useReducer:nu,useRef:gp,useState:function(){return nu(so)},useDebugValue:iu,useDeferredValue:function(r){var i=mn();return kp(i,vt.memoizedState,r)},useTransition:function(){var r=nu(so)[0],i=mn().memoizedState;return[r,i]},useMutableSource:lp,useSyncExternalStore:cp,useId:Cp,unstable_isNewReconciler:!1},k1={readContext:pn,useCallback:Sp,useContext:pn,useEffect:su,useImperativeHandle:wp,useInsertionEffect:xp,useLayoutEffect:vp,useMemo:bp,useReducer:ru,useRef:gp,useState:function(){return ru(so)},useDebugValue:iu,useDeferredValue:function(r){var i=mn();return vt===null?i.memoizedState=r:kp(i,vt.memoizedState,r)},useTransition:function(){var r=ru(so)[0],i=mn().memoizedState;return[r,i]},useMutableSource:lp,useSyncExternalStore:cp,useId:Cp,unstable_isNewReconciler:!1};function En(r,i){if(r&&r.defaultProps){i=te({},i),r=r.defaultProps;for(var l in r)i[l]===void 0&&(i[l]=r[l]);return i}return i}function ou(r,i,l,h){i=r.memoizedState,l=l(h,i),l=l==null?i:te({},i,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var La={isMounted:function(r){return(r=r._reactInternals)?as(r)===r:!1},enqueueSetState:function(r,i,l){r=r._reactInternals;var h=Dt(),m=Wr(r),y=dr(h,m);y.payload=i,l!=null&&(y.callback=l),i=jr(r,y,m),i!==null&&(Fn(i,r,m,h),Aa(i,r,m))},enqueueReplaceState:function(r,i,l){r=r._reactInternals;var h=Dt(),m=Wr(r),y=dr(h,m);y.tag=1,y.payload=i,l!=null&&(y.callback=l),i=jr(r,y,m),i!==null&&(Fn(i,r,m,h),Aa(i,r,m))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var l=Dt(),h=Wr(r),m=dr(l,h);m.tag=2,i!=null&&(m.callback=i),i=jr(r,m,h),i!==null&&(Fn(i,r,h,l),Aa(i,r,h))}};function Mp(r,i,l,h,m,y,S){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,y,S):i.prototype&&i.prototype.isPureReactComponent?!Vi(l,h)||!Vi(m,y):!0}function Ep(r,i,l){var h=!1,m=Or,y=i.contextType;return typeof y=="object"&&y!==null?y=pn(y):(m=$t(i)?cs:It.current,h=i.contextTypes,y=(h=h!=null)?Ws(r,m):Or),i=new i(l,y),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=La,r.stateNode=i,i._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=m,r.__reactInternalMemoizedMaskedChildContext=y),i}function Ip(r,i,l,h){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,h),i.state!==r&&La.enqueueReplaceState(i,i.state,null)}function au(r,i,l,h){var m=r.stateNode;m.props=l,m.state=r.memoizedState,m.refs={},Yc(r);var y=i.contextType;typeof y=="object"&&y!==null?m.context=pn(y):(y=$t(i)?cs:It.current,m.context=Ws(r,y)),m.state=r.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(ou(r,i,y,l),m.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(i=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),i!==m.state&&La.enqueueReplaceState(m,m.state,null),Ta(r,l,m,h),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308)}function Zs(r,i){try{var l="",h=i;do l+=se(h),h=h.return;while(h);var m=l}catch(y){m=`
Error generating stack: `+y.message+`
`+y.stack}return{value:r,source:i,stack:m,digest:null}}function lu(r,i,l){return{value:r,source:null,stack:l??null,digest:i??null}}function cu(r,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var C1=typeof WeakMap=="function"?WeakMap:Map;function Rp(r,i,l){l=dr(-1,l),l.tag=3,l.payload={element:null};var h=i.value;return l.callback=function(){Ga||(Ga=!0,ku=h),cu(r,i)},l}function Fp(r,i,l){l=dr(-1,l),l.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var m=i.value;l.payload=function(){return h(m)},l.callback=function(){cu(r,i)}}var y=r.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){cu(r,i),typeof h!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var S=i.stack;this.componentDidCatch(i.value,{componentStack:S!==null?S:""})}),l}function Lp(r,i,l){var h=r.pingCache;if(h===null){h=r.pingCache=new C1;var m=new Set;h.set(i,m)}else m=h.get(i),m===void 0&&(m=new Set,h.set(i,m));m.has(l)||(m.add(l),r=D1.bind(null,r,i,l),i.then(r,r))}function Np(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function Bp(r,i,l,h,m){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=dr(-1,1),i.tag=2,jr(l,i,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=m,r)}var A1=C.ReactCurrentOwner,Wt=!1;function zt(r,i,l,h){i.child=r===null?np(i,null,l,h):Xs(i,r.child,l,h)}function Op(r,i,l,h,m){l=l.render;var y=i.ref;return Qs(i,m),h=eu(r,i,l,h,y,m),l=tu(),r!==null&&!Wt?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~m,fr(r,i,m)):(nt&&l&&Oc(i),i.flags|=1,zt(r,i,h,m),i.child)}function zp(r,i,l,h,m){if(r===null){var y=l.type;return typeof y=="function"&&!Iu(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=y,Dp(r,i,y,h,m)):(r=Ya(l.type,null,h,i,i.mode,m),r.ref=i.ref,r.return=i,i.child=r)}if(y=r.child,(r.lanes&m)===0){var S=y.memoizedProps;if(l=l.compare,l=l!==null?l:Vi,l(S,h)&&r.ref===i.ref)return fr(r,i,m)}return i.flags|=1,r=Hr(y,h),r.ref=i.ref,r.return=i,i.child=r}function Dp(r,i,l,h,m){if(r!==null){var y=r.memoizedProps;if(Vi(y,h)&&r.ref===i.ref)if(Wt=!1,i.pendingProps=h=y,(r.lanes&m)!==0)(r.flags&131072)!==0&&(Wt=!0);else return i.lanes=r.lanes,fr(r,i,m)}return uu(r,i,l,h,m)}function jp(r,i,l){var h=i.pendingProps,m=h.children,y=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(ei,en),en|=l;else{if((l&1073741824)===0)return r=y!==null?y.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,Xe(ei,en),en|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:l,Xe(ei,en),en|=h}else y!==null?(h=y.baseLanes|l,i.memoizedState=null):h=l,Xe(ei,en),en|=h;return zt(r,i,m,l),i.child}function Gp(r,i){var l=i.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function uu(r,i,l,h,m){var y=$t(l)?cs:It.current;return y=Ws(i,y),Qs(i,m),l=eu(r,i,l,h,y,m),h=tu(),r!==null&&!Wt?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~m,fr(r,i,m)):(nt&&h&&Oc(i),i.flags|=1,zt(r,i,l,m),i.child)}function Up(r,i,l,h,m){if($t(l)){var y=!0;xa(i)}else y=!1;if(Qs(i,m),i.stateNode===null)Ba(r,i),Ep(i,l,h),au(i,l,h,m),h=!0;else if(r===null){var S=i.stateNode,T=i.memoizedProps;S.props=T;var E=S.context,G=l.contextType;typeof G=="object"&&G!==null?G=pn(G):(G=$t(l)?cs:It.current,G=Ws(i,G));var ne=l.getDerivedStateFromProps,ie=typeof ne=="function"||typeof S.getSnapshotBeforeUpdate=="function";ie||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(T!==h||E!==G)&&Ip(i,S,h,G),Dr=!1;var ee=i.memoizedState;S.state=ee,Ta(i,h,S,m),E=i.memoizedState,T!==h||ee!==E||Ut.current||Dr?(typeof ne=="function"&&(ou(i,l,ne,h),E=i.memoizedState),(T=Dr||Mp(i,l,T,h,ee,E,G))?(ie||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(i.flags|=4194308)):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=E),S.props=h,S.state=E,S.context=G,h=T):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{S=i.stateNode,sp(r,i),T=i.memoizedProps,G=i.type===i.elementType?T:En(i.type,T),S.props=G,ie=i.pendingProps,ee=S.context,E=l.contextType,typeof E=="object"&&E!==null?E=pn(E):(E=$t(l)?cs:It.current,E=Ws(i,E));var he=l.getDerivedStateFromProps;(ne=typeof he=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(T!==ie||ee!==E)&&Ip(i,S,h,E),Dr=!1,ee=i.memoizedState,S.state=ee,Ta(i,h,S,m);var me=i.memoizedState;T!==ie||ee!==me||Ut.current||Dr?(typeof he=="function"&&(ou(i,l,he,h),me=i.memoizedState),(G=Dr||Mp(i,l,G,h,ee,me,E)||!1)?(ne||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(h,me,E),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(h,me,E)),typeof S.componentDidUpdate=="function"&&(i.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof S.componentDidUpdate!="function"||T===r.memoizedProps&&ee===r.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&ee===r.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=me),S.props=h,S.state=me,S.context=E,h=G):(typeof S.componentDidUpdate!="function"||T===r.memoizedProps&&ee===r.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&ee===r.memoizedState||(i.flags|=1024),h=!1)}return hu(r,i,l,h,y,m)}function hu(r,i,l,h,m,y){Gp(r,i);var S=(i.flags&128)!==0;if(!h&&!S)return m&&Yf(i,l,!1),fr(r,i,y);h=i.stateNode,A1.current=i;var T=S&&typeof l.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,r!==null&&S?(i.child=Xs(i,r.child,null,y),i.child=Xs(i,null,T,y)):zt(r,i,T,y),i.memoizedState=h.state,m&&Yf(i,l,!0),i.child}function $p(r){var i=r.stateNode;i.pendingContext?Vf(r,i.pendingContext,i.pendingContext!==i.context):i.context&&Vf(r,i.context,!1),Xc(r,i.containerInfo)}function Wp(r,i,l,h,m){return Ys(),Gc(m),i.flags|=256,zt(r,i,l,h),i.child}var du={dehydrated:null,treeContext:null,retryLane:0};function fu(r){return{baseLanes:r,cachePool:null,transitions:null}}function Vp(r,i,l){var h=i.pendingProps,m=ot.current,y=!1,S=(i.flags&128)!==0,T;if((T=S)||(T=r!==null&&r.memoizedState===null?!1:(m&2)!==0),T?(y=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(m|=1),Xe(ot,m&1),r===null)return jc(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(S=h.children,r=h.fallback,y?(h=i.mode,y=i.child,S={mode:"hidden",children:S},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=S):y=Xa(S,h,0,null),r=vs(r,h,l,null),y.return=i,r.return=i,y.sibling=r,i.child=y,i.child.memoizedState=fu(l),i.memoizedState=du,r):pu(i,S));if(m=r.memoizedState,m!==null&&(T=m.dehydrated,T!==null))return T1(r,i,S,h,T,m,l);if(y){y=h.fallback,S=i.mode,m=r.child,T=m.sibling;var E={mode:"hidden",children:h.children};return(S&1)===0&&i.child!==m?(h=i.child,h.childLanes=0,h.pendingProps=E,i.deletions=null):(h=Hr(m,E),h.subtreeFlags=m.subtreeFlags&14680064),T!==null?y=Hr(T,y):(y=vs(y,S,l,null),y.flags|=2),y.return=i,h.return=i,h.sibling=y,i.child=h,h=y,y=i.child,S=r.child.memoizedState,S=S===null?fu(l):{baseLanes:S.baseLanes|l,cachePool:null,transitions:S.transitions},y.memoizedState=S,y.childLanes=r.childLanes&~l,i.memoizedState=du,h}return y=r.child,r=y.sibling,h=Hr(y,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=l),h.return=i,h.sibling=null,r!==null&&(l=i.deletions,l===null?(i.deletions=[r],i.flags|=16):l.push(r)),i.child=h,i.memoizedState=null,h}function pu(r,i){return i=Xa({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function Na(r,i,l,h){return h!==null&&Gc(h),Xs(i,r.child,null,l),r=pu(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function T1(r,i,l,h,m,y,S){if(l)return i.flags&256?(i.flags&=-257,h=lu(Error(t(422))),Na(r,i,S,h)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(y=h.fallback,m=i.mode,h=Xa({mode:"visible",children:h.children},m,0,null),y=vs(y,m,S,null),y.flags|=2,h.return=i,y.return=i,h.sibling=y,i.child=h,(i.mode&1)!==0&&Xs(i,r.child,null,S),i.child.memoizedState=fu(S),i.memoizedState=du,y);if((i.mode&1)===0)return Na(r,i,S,null);if(m.data==="$!"){if(h=m.nextSibling&&m.nextSibling.dataset,h)var T=h.dgst;return h=T,y=Error(t(419)),h=lu(y,h,void 0),Na(r,i,S,h)}if(T=(S&r.childLanes)!==0,Wt||T){if(h=bt,h!==null){switch(S&-S){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(h.suspendedLanes|S))!==0?0:m,m!==0&&m!==y.retryLane&&(y.retryLane=m,hr(r,m),Fn(h,r,m,-1))}return Eu(),h=lu(Error(t(421))),Na(r,i,S,h)}return m.data==="$?"?(i.flags|=128,i.child=r.child,i=j1.bind(null,r),m._reactRetry=i,null):(r=y.treeContext,Jt=Nr(m.nextSibling),Zt=i,nt=!0,Mn=null,r!==null&&(dn[fn++]=cr,dn[fn++]=ur,dn[fn++]=us,cr=r.id,ur=r.overflow,us=i),i=pu(i,h.children),i.flags|=4096,i)}function Hp(r,i,l){r.lanes|=i;var h=r.alternate;h!==null&&(h.lanes|=i),Vc(r.return,i,l)}function mu(r,i,l,h,m){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:m}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=m)}function Yp(r,i,l){var h=i.pendingProps,m=h.revealOrder,y=h.tail;if(zt(r,i,h.children,l),h=ot.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Hp(r,l,i);else if(r.tag===19)Hp(r,l,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Xe(ot,h),(i.mode&1)===0)i.memoizedState=null;else switch(m){case"forwards":for(l=i.child,m=null;l!==null;)r=l.alternate,r!==null&&Pa(r)===null&&(m=l),l=l.sibling;l=m,l===null?(m=i.child,i.child=null):(m=l.sibling,l.sibling=null),mu(i,!1,m,l,y);break;case"backwards":for(l=null,m=i.child,i.child=null;m!==null;){if(r=m.alternate,r!==null&&Pa(r)===null){i.child=m;break}r=m.sibling,m.sibling=l,l=m,m=r}mu(i,!0,l,null,y);break;case"together":mu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ba(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function fr(r,i,l){if(r!==null&&(i.dependencies=r.dependencies),ms|=i.lanes,(l&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(t(153));if(i.child!==null){for(r=i.child,l=Hr(r,r.pendingProps),i.child=l,l.return=i;r.sibling!==null;)r=r.sibling,l=l.sibling=Hr(r,r.pendingProps),l.return=i;l.sibling=null}return i.child}function P1(r,i,l){switch(i.tag){case 3:$p(i),Ys();break;case 5:ap(i);break;case 1:$t(i.type)&&xa(i);break;case 4:Xc(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,m=i.memoizedProps.value;Xe(ka,h._currentValue),h._currentValue=m;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(Xe(ot,ot.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?Vp(r,i,l):(Xe(ot,ot.current&1),r=fr(r,i,l),r!==null?r.sibling:null);Xe(ot,ot.current&1);break;case 19:if(h=(l&i.childLanes)!==0,(r.flags&128)!==0){if(h)return Yp(r,i,l);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Xe(ot,ot.current),h)break;return null;case 22:case 23:return i.lanes=0,jp(r,i,l)}return fr(r,i,l)}var Xp,gu,qp,Qp;Xp=function(r,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},gu=function(){},qp=function(r,i,l,h){var m=r.memoizedProps;if(m!==h){r=i.stateNode,fs(Qn.current);var y=null;switch(l){case"input":m=pe(r,m),h=pe(r,h),y=[];break;case"select":m=te({},m,{value:void 0}),h=te({},h,{value:void 0}),y=[];break;case"textarea":m=Le(r,m),h=Le(r,h),y=[];break;default:typeof m.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=ma)}ns(l,h);var S;l=null;for(G in m)if(!h.hasOwnProperty(G)&&m.hasOwnProperty(G)&&m[G]!=null)if(G==="style"){var T=m[G];for(S in T)T.hasOwnProperty(S)&&(l||(l={}),l[S]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(o.hasOwnProperty(G)?y||(y=[]):(y=y||[]).push(G,null));for(G in h){var E=h[G];if(T=m?.[G],h.hasOwnProperty(G)&&E!==T&&(E!=null||T!=null))if(G==="style")if(T){for(S in T)!T.hasOwnProperty(S)||E&&E.hasOwnProperty(S)||(l||(l={}),l[S]="");for(S in E)E.hasOwnProperty(S)&&T[S]!==E[S]&&(l||(l={}),l[S]=E[S])}else l||(y||(y=[]),y.push(G,l)),l=E;else G==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,T=T?T.__html:void 0,E!=null&&T!==E&&(y=y||[]).push(G,E)):G==="children"?typeof E!="string"&&typeof E!="number"||(y=y||[]).push(G,""+E):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(o.hasOwnProperty(G)?(E!=null&&G==="onScroll"&&Qe("scroll",r),y||T===E||(y=[])):(y=y||[]).push(G,E))}l&&(y=y||[]).push("style",l);var G=y;(i.updateQueue=G)&&(i.flags|=4)}},Qp=function(r,i,l,h){l!==h&&(i.flags|=4)};function oo(r,i){if(!nt)switch(r.tailMode){case"hidden":i=r.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Ft(r){var i=r.alternate!==null&&r.alternate.child===r.child,l=0,h=0;if(i)for(var m=r.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags&14680064,h|=m.flags&14680064,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=h,r.childLanes=l,i}function M1(r,i,l){var h=i.pendingProps;switch(zc(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(i),null;case 1:return $t(i.type)&&ya(),Ft(i),null;case 3:return h=i.stateNode,Ks(),Ke(Ut),Ke(It),Kc(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(Sa(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Mn!==null&&(Tu(Mn),Mn=null))),gu(r,i),Ft(i),null;case 5:qc(i);var m=fs(to.current);if(l=i.type,r!==null&&i.stateNode!=null)qp(r,i,l,h,m),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return Ft(i),null}if(r=fs(Qn.current),Sa(i)){h=i.stateNode,l=i.type;var y=i.memoizedProps;switch(h[qn]=i,h[Qi]=y,r=(i.mode&1)!==0,l){case"dialog":Qe("cancel",h),Qe("close",h);break;case"iframe":case"object":case"embed":Qe("load",h);break;case"video":case"audio":for(m=0;m<Yi.length;m++)Qe(Yi[m],h);break;case"source":Qe("error",h);break;case"img":case"image":case"link":Qe("error",h),Qe("load",h);break;case"details":Qe("toggle",h);break;case"input":Me(h,y),Qe("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},Qe("invalid",h);break;case"textarea":He(h,y),Qe("invalid",h)}ns(l,y),m=null;for(var S in y)if(y.hasOwnProperty(S)){var T=y[S];S==="children"?typeof T=="string"?h.textContent!==T&&(y.suppressHydrationWarning!==!0&&pa(h.textContent,T,r),m=["children",T]):typeof T=="number"&&h.textContent!==""+T&&(y.suppressHydrationWarning!==!0&&pa(h.textContent,T,r),m=["children",""+T]):o.hasOwnProperty(S)&&T!=null&&S==="onScroll"&&Qe("scroll",h)}switch(l){case"input":be(h),st(h,y,!0);break;case"textarea":be(h),it(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=ma)}h=m,i.updateQueue=h,h!==null&&(i.flags|=4)}else{S=m.nodeType===9?m:m.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Ye(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=S.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=S.createElement(l,{is:h.is}):(r=S.createElement(l),l==="select"&&(S=r,h.multiple?S.multiple=!0:h.size&&(S.size=h.size))):r=S.createElementNS(r,l),r[qn]=i,r[Qi]=h,Xp(r,i,!1,!1),i.stateNode=r;e:{switch(S=Ot(l,h),l){case"dialog":Qe("cancel",r),Qe("close",r),m=h;break;case"iframe":case"object":case"embed":Qe("load",r),m=h;break;case"video":case"audio":for(m=0;m<Yi.length;m++)Qe(Yi[m],r);m=h;break;case"source":Qe("error",r),m=h;break;case"img":case"image":case"link":Qe("error",r),Qe("load",r),m=h;break;case"details":Qe("toggle",r),m=h;break;case"input":Me(r,h),m=pe(r,h),Qe("invalid",r);break;case"option":m=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},m=te({},h,{value:void 0}),Qe("invalid",r);break;case"textarea":He(r,h),m=Le(r,h),Qe("invalid",r);break;default:m=h}ns(l,m),T=m;for(y in T)if(T.hasOwnProperty(y)){var E=T[y];y==="style"?Fs(r,E):y==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&kn(r,E)):y==="children"?typeof E=="string"?(l!=="textarea"||E!=="")&&hn(r,E):typeof E=="number"&&hn(r,""+E):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?E!=null&&y==="onScroll"&&Qe("scroll",r):E!=null&&P(r,y,E,S))}switch(l){case"input":be(r),st(r,h,!1);break;case"textarea":be(r),it(r);break;case"option":h.value!=null&&r.setAttribute("value",""+Y(h.value));break;case"select":r.multiple=!!h.multiple,y=h.value,y!=null?Fe(r,!!h.multiple,y,!1):h.defaultValue!=null&&Fe(r,!!h.multiple,h.defaultValue,!0);break;default:typeof m.onClick=="function"&&(r.onclick=ma)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Ft(i),null;case 6:if(r&&i.stateNode!=null)Qp(r,i,r.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(l=fs(to.current),fs(Qn.current),Sa(i)){if(h=i.stateNode,l=i.memoizedProps,h[qn]=i,(y=h.nodeValue!==l)&&(r=Zt,r!==null))switch(r.tag){case 3:pa(h.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&pa(h.nodeValue,l,(r.mode&1)!==0)}y&&(i.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[qn]=i,i.stateNode=h}return Ft(i),null;case 13:if(Ke(ot),h=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(nt&&Jt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Jf(),Ys(),i.flags|=98560,y=!1;else if(y=Sa(i),h!==null&&h.dehydrated!==null){if(r===null){if(!y)throw Error(t(318));if(y=i.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[qn]=i}else Ys(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ft(i),y=!1}else Mn!==null&&(Tu(Mn),Mn=null),y=!0;if(!y)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(ot.current&1)!==0?_t===0&&(_t=3):Eu())),i.updateQueue!==null&&(i.flags|=4),Ft(i),null);case 4:return Ks(),gu(r,i),r===null&&Xi(i.stateNode.containerInfo),Ft(i),null;case 10:return Wc(i.type._context),Ft(i),null;case 17:return $t(i.type)&&ya(),Ft(i),null;case 19:if(Ke(ot),y=i.memoizedState,y===null)return Ft(i),null;if(h=(i.flags&128)!==0,S=y.rendering,S===null)if(h)oo(y,!1);else{if(_t!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(S=Pa(r),S!==null){for(i.flags|=128,oo(y,!1),h=S.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=l,l=i.child;l!==null;)y=l,r=h,y.flags&=14680066,S=y.alternate,S===null?(y.childLanes=0,y.lanes=r,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=S.childLanes,y.lanes=S.lanes,y.child=S.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=S.memoizedProps,y.memoizedState=S.memoizedState,y.updateQueue=S.updateQueue,y.type=S.type,r=S.dependencies,y.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Xe(ot,ot.current&1|2),i.child}r=r.sibling}y.tail!==null&&pt()>ti&&(i.flags|=128,h=!0,oo(y,!1),i.lanes=4194304)}else{if(!h)if(r=Pa(S),r!==null){if(i.flags|=128,h=!0,l=r.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),oo(y,!0),y.tail===null&&y.tailMode==="hidden"&&!S.alternate&&!nt)return Ft(i),null}else 2*pt()-y.renderingStartTime>ti&&l!==1073741824&&(i.flags|=128,h=!0,oo(y,!1),i.lanes=4194304);y.isBackwards?(S.sibling=i.child,i.child=S):(l=y.last,l!==null?l.sibling=S:i.child=S,y.last=S)}return y.tail!==null?(i=y.tail,y.rendering=i,y.tail=i.sibling,y.renderingStartTime=pt(),i.sibling=null,l=ot.current,Xe(ot,h?l&1|2:l&1),i):(Ft(i),null);case 22:case 23:return Mu(),h=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(en&1073741824)!==0&&(Ft(i),i.subtreeFlags&6&&(i.flags|=8192)):Ft(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function E1(r,i){switch(zc(i),i.tag){case 1:return $t(i.type)&&ya(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Ks(),Ke(Ut),Ke(It),Kc(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return qc(i),null;case 13:if(Ke(ot),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Ys()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return Ke(ot),null;case 4:return Ks(),null;case 10:return Wc(i.type._context),null;case 22:case 23:return Mu(),null;case 24:return null;default:return null}}var Oa=!1,Lt=!1,I1=typeof WeakSet=="function"?WeakSet:Set,fe=null;function Js(r,i){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){ut(r,i,h)}else l.current=null}function yu(r,i,l){try{l()}catch(h){ut(r,i,h)}}var Kp=!1;function R1(r,i){if(Mc=ra,r=Mf(),wc(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var m=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var S=0,T=-1,E=-1,G=0,ne=0,ie=r,ee=null;t:for(;;){for(var he;ie!==l||m!==0&&ie.nodeType!==3||(T=S+m),ie!==y||h!==0&&ie.nodeType!==3||(E=S+h),ie.nodeType===3&&(S+=ie.nodeValue.length),(he=ie.firstChild)!==null;)ee=ie,ie=he;for(;;){if(ie===r)break t;if(ee===l&&++G===m&&(T=S),ee===y&&++ne===h&&(E=S),(he=ie.nextSibling)!==null)break;ie=ee,ee=ie.parentNode}ie=he}l=T===-1||E===-1?null:{start:T,end:E}}else l=null}l=l||{start:0,end:0}}else l=null;for(Ec={focusedElem:r,selectionRange:l},ra=!1,fe=i;fe!==null;)if(i=fe,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,fe=r;else for(;fe!==null;){i=fe;try{var me=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ge=me.memoizedProps,mt=me.memoizedState,N=i.stateNode,I=N.getSnapshotBeforeUpdate(i.elementType===i.type?ge:En(i.type,ge),mt);N.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var D=i.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(oe){ut(i,i.return,oe)}if(r=i.sibling,r!==null){r.return=i.return,fe=r;break}fe=i.return}return me=Kp,Kp=!1,me}function ao(r,i,l){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var m=h=h.next;do{if((m.tag&r)===r){var y=m.destroy;m.destroy=void 0,y!==void 0&&yu(i,l,y)}m=m.next}while(m!==h)}}function za(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&r)===r){var h=l.create;l.destroy=h()}l=l.next}while(l!==i)}}function xu(r){var i=r.ref;if(i!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof i=="function"?i(r):i.current=r}}function Zp(r){var i=r.alternate;i!==null&&(r.alternate=null,Zp(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[qn],delete i[Qi],delete i[Lc],delete i[p1],delete i[m1])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Jp(r){return r.tag===5||r.tag===3||r.tag===4}function em(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Jp(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function vu(r,i,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(r,i):l.insertBefore(r,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(r,l)):(i=l,i.appendChild(r)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=ma));else if(h!==4&&(r=r.child,r!==null))for(vu(r,i,l),r=r.sibling;r!==null;)vu(r,i,l),r=r.sibling}function _u(r,i,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?l.insertBefore(r,i):l.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(_u(r,i,l),r=r.sibling;r!==null;)_u(r,i,l),r=r.sibling}var At=null,In=!1;function Gr(r,i,l){for(l=l.child;l!==null;)tm(r,i,l),l=l.sibling}function tm(r,i,l){if(Xn&&typeof Xn.onCommitFiberUnmount=="function")try{Xn.onCommitFiberUnmount(Ko,l)}catch{}switch(l.tag){case 5:Lt||Js(l,i);case 6:var h=At,m=In;At=null,Gr(r,i,l),At=h,In=m,At!==null&&(In?(r=At,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):At.removeChild(l.stateNode));break;case 18:At!==null&&(In?(r=At,l=l.stateNode,r.nodeType===8?Fc(r.parentNode,l):r.nodeType===1&&Fc(r,l),Di(r)):Fc(At,l.stateNode));break;case 4:h=At,m=In,At=l.stateNode.containerInfo,In=!0,Gr(r,i,l),At=h,In=m;break;case 0:case 11:case 14:case 15:if(!Lt&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){m=h=h.next;do{var y=m,S=y.destroy;y=y.tag,S!==void 0&&((y&2)!==0||(y&4)!==0)&&yu(l,i,S),m=m.next}while(m!==h)}Gr(r,i,l);break;case 1:if(!Lt&&(Js(l,i),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(T){ut(l,i,T)}Gr(r,i,l);break;case 21:Gr(r,i,l);break;case 22:l.mode&1?(Lt=(h=Lt)||l.memoizedState!==null,Gr(r,i,l),Lt=h):Gr(r,i,l);break;default:Gr(r,i,l)}}function nm(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new I1),i.forEach(function(h){var m=G1.bind(null,r,h);l.has(h)||(l.add(h),h.then(m,m))})}}function Rn(r,i){var l=i.deletions;if(l!==null)for(var h=0;h<l.length;h++){var m=l[h];try{var y=r,S=i,T=S;e:for(;T!==null;){switch(T.tag){case 5:At=T.stateNode,In=!1;break e;case 3:At=T.stateNode.containerInfo,In=!0;break e;case 4:At=T.stateNode.containerInfo,In=!0;break e}T=T.return}if(At===null)throw Error(t(160));tm(y,S,m),At=null,In=!1;var E=m.alternate;E!==null&&(E.return=null),m.return=null}catch(G){ut(m,i,G)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)rm(i,r),i=i.sibling}function rm(r,i){var l=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Rn(i,r),Zn(r),h&4){try{ao(3,r,r.return),za(3,r)}catch(ge){ut(r,r.return,ge)}try{ao(5,r,r.return)}catch(ge){ut(r,r.return,ge)}}break;case 1:Rn(i,r),Zn(r),h&512&&l!==null&&Js(l,l.return);break;case 5:if(Rn(i,r),Zn(r),h&512&&l!==null&&Js(l,l.return),r.flags&32){var m=r.stateNode;try{hn(m,"")}catch(ge){ut(r,r.return,ge)}}if(h&4&&(m=r.stateNode,m!=null)){var y=r.memoizedProps,S=l!==null?l.memoizedProps:y,T=r.type,E=r.updateQueue;if(r.updateQueue=null,E!==null)try{T==="input"&&y.type==="radio"&&y.name!=null&&Ee(m,y),Ot(T,S);var G=Ot(T,y);for(S=0;S<E.length;S+=2){var ne=E[S],ie=E[S+1];ne==="style"?Fs(m,ie):ne==="dangerouslySetInnerHTML"?kn(m,ie):ne==="children"?hn(m,ie):P(m,ne,ie,G)}switch(T){case"input":De(m,y);break;case"textarea":ft(m,y);break;case"select":var ee=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!y.multiple;var he=y.value;he!=null?Fe(m,!!y.multiple,he,!1):ee!==!!y.multiple&&(y.defaultValue!=null?Fe(m,!!y.multiple,y.defaultValue,!0):Fe(m,!!y.multiple,y.multiple?[]:"",!1))}m[Qi]=y}catch(ge){ut(r,r.return,ge)}}break;case 6:if(Rn(i,r),Zn(r),h&4){if(r.stateNode===null)throw Error(t(162));m=r.stateNode,y=r.memoizedProps;try{m.nodeValue=y}catch(ge){ut(r,r.return,ge)}}break;case 3:if(Rn(i,r),Zn(r),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Di(i.containerInfo)}catch(ge){ut(r,r.return,ge)}break;case 4:Rn(i,r),Zn(r);break;case 13:Rn(i,r),Zn(r),m=r.child,m.flags&8192&&(y=m.memoizedState!==null,m.stateNode.isHidden=y,!y||m.alternate!==null&&m.alternate.memoizedState!==null||(bu=pt())),h&4&&nm(r);break;case 22:if(ne=l!==null&&l.memoizedState!==null,r.mode&1?(Lt=(G=Lt)||ne,Rn(i,r),Lt=G):Rn(i,r),Zn(r),h&8192){if(G=r.memoizedState!==null,(r.stateNode.isHidden=G)&&!ne&&(r.mode&1)!==0)for(fe=r,ne=r.child;ne!==null;){for(ie=fe=ne;fe!==null;){switch(ee=fe,he=ee.child,ee.tag){case 0:case 11:case 14:case 15:ao(4,ee,ee.return);break;case 1:Js(ee,ee.return);var me=ee.stateNode;if(typeof me.componentWillUnmount=="function"){h=ee,l=ee.return;try{i=h,me.props=i.memoizedProps,me.state=i.memoizedState,me.componentWillUnmount()}catch(ge){ut(h,l,ge)}}break;case 5:Js(ee,ee.return);break;case 22:if(ee.memoizedState!==null){om(ie);continue}}he!==null?(he.return=ee,fe=he):om(ie)}ne=ne.sibling}e:for(ne=null,ie=r;;){if(ie.tag===5){if(ne===null){ne=ie;try{m=ie.stateNode,G?(y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(T=ie.stateNode,E=ie.memoizedProps.style,S=E!=null&&E.hasOwnProperty("display")?E.display:null,T.style.display=ts("display",S))}catch(ge){ut(r,r.return,ge)}}}else if(ie.tag===6){if(ne===null)try{ie.stateNode.nodeValue=G?"":ie.memoizedProps}catch(ge){ut(r,r.return,ge)}}else if((ie.tag!==22&&ie.tag!==23||ie.memoizedState===null||ie===r)&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===r)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===r)break e;ne===ie&&(ne=null),ie=ie.return}ne===ie&&(ne=null),ie.sibling.return=ie.return,ie=ie.sibling}}break;case 19:Rn(i,r),Zn(r),h&4&&nm(r);break;case 21:break;default:Rn(i,r),Zn(r)}}function Zn(r){var i=r.flags;if(i&2){try{e:{for(var l=r.return;l!==null;){if(Jp(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var m=h.stateNode;h.flags&32&&(hn(m,""),h.flags&=-33);var y=em(r);_u(r,y,m);break;case 3:case 4:var S=h.stateNode.containerInfo,T=em(r);vu(r,T,S);break;default:throw Error(t(161))}}catch(E){ut(r,r.return,E)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function F1(r,i,l){fe=r,sm(r)}function sm(r,i,l){for(var h=(r.mode&1)!==0;fe!==null;){var m=fe,y=m.child;if(m.tag===22&&h){var S=m.memoizedState!==null||Oa;if(!S){var T=m.alternate,E=T!==null&&T.memoizedState!==null||Lt;T=Oa;var G=Lt;if(Oa=S,(Lt=E)&&!G)for(fe=m;fe!==null;)S=fe,E=S.child,S.tag===22&&S.memoizedState!==null?am(m):E!==null?(E.return=S,fe=E):am(m);for(;y!==null;)fe=y,sm(y),y=y.sibling;fe=m,Oa=T,Lt=G}im(r)}else(m.subtreeFlags&8772)!==0&&y!==null?(y.return=m,fe=y):im(r)}}function im(r){for(;fe!==null;){var i=fe;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Lt||za(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!Lt)if(l===null)h.componentDidMount();else{var m=i.elementType===i.type?l.memoizedProps:En(i.type,l.memoizedProps);h.componentDidUpdate(m,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=i.updateQueue;y!==null&&op(i,y,h);break;case 3:var S=i.updateQueue;if(S!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}op(i,S,l)}break;case 5:var T=i.stateNode;if(l===null&&i.flags&4){l=T;var E=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&l.focus();break;case"img":E.src&&(l.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var G=i.alternate;if(G!==null){var ne=G.memoizedState;if(ne!==null){var ie=ne.dehydrated;ie!==null&&Di(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Lt||i.flags&512&&xu(i)}catch(ee){ut(i,i.return,ee)}}if(i===r){fe=null;break}if(l=i.sibling,l!==null){l.return=i.return,fe=l;break}fe=i.return}}function om(r){for(;fe!==null;){var i=fe;if(i===r){fe=null;break}var l=i.sibling;if(l!==null){l.return=i.return,fe=l;break}fe=i.return}}function am(r){for(;fe!==null;){var i=fe;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{za(4,i)}catch(E){ut(i,l,E)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var m=i.return;try{h.componentDidMount()}catch(E){ut(i,m,E)}}var y=i.return;try{xu(i)}catch(E){ut(i,y,E)}break;case 5:var S=i.return;try{xu(i)}catch(E){ut(i,S,E)}}}catch(E){ut(i,i.return,E)}if(i===r){fe=null;break}var T=i.sibling;if(T!==null){T.return=i.return,fe=T;break}fe=i.return}}var L1=Math.ceil,Da=C.ReactCurrentDispatcher,wu=C.ReactCurrentOwner,gn=C.ReactCurrentBatchConfig,Be=0,bt=null,gt=null,Tt=0,en=0,ei=Br(0),_t=0,lo=null,ms=0,ja=0,Su=0,co=null,Vt=null,bu=0,ti=1/0,pr=null,Ga=!1,ku=null,Ur=null,Ua=!1,$r=null,$a=0,uo=0,Cu=null,Wa=-1,Va=0;function Dt(){return(Be&6)!==0?pt():Wa!==-1?Wa:Wa=pt()}function Wr(r){return(r.mode&1)===0?1:(Be&2)!==0&&Tt!==0?Tt&-Tt:y1.transition!==null?(Va===0&&(Va=Jd()),Va):(r=Ge,r!==0||(r=window.event,r=r===void 0?16:cf(r.type)),r)}function Fn(r,i,l,h){if(50<uo)throw uo=0,Cu=null,Error(t(185));Li(r,l,h),((Be&2)===0||r!==bt)&&(r===bt&&((Be&2)===0&&(ja|=l),_t===4&&Vr(r,Tt)),Ht(r,h),l===1&&Be===0&&(i.mode&1)===0&&(ti=pt()+500,va&&zr()))}function Ht(r,i){var l=r.callbackNode;yv(r,i);var h=ea(r,r===bt?Tt:0);if(h===0)l!==null&&Qd(l),r.callbackNode=null,r.callbackPriority=0;else if(i=h&-h,r.callbackPriority!==i){if(l!=null&&Qd(l),i===1)r.tag===0?g1(cm.bind(null,r)):Xf(cm.bind(null,r)),d1(function(){(Be&6)===0&&zr()}),l=null;else{switch(ef(h)){case 1:l=sc;break;case 4:l=Kd;break;case 16:l=Qo;break;case 536870912:l=Zd;break;default:l=Qo}l=ym(l,lm.bind(null,r))}r.callbackPriority=i,r.callbackNode=l}}function lm(r,i){if(Wa=-1,Va=0,(Be&6)!==0)throw Error(t(327));var l=r.callbackNode;if(ni()&&r.callbackNode!==l)return null;var h=ea(r,r===bt?Tt:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||i)i=Ha(r,h);else{i=h;var m=Be;Be|=2;var y=hm();(bt!==r||Tt!==i)&&(pr=null,ti=pt()+500,ys(r,i));do try{O1();break}catch(T){um(r,T)}while(!0);$c(),Da.current=y,Be=m,gt!==null?i=0:(bt=null,Tt=0,i=_t)}if(i!==0){if(i===2&&(m=ic(r),m!==0&&(h=m,i=Au(r,m))),i===1)throw l=lo,ys(r,0),Vr(r,h),Ht(r,pt()),l;if(i===6)Vr(r,h);else{if(m=r.current.alternate,(h&30)===0&&!N1(m)&&(i=Ha(r,h),i===2&&(y=ic(r),y!==0&&(h=y,i=Au(r,y))),i===1))throw l=lo,ys(r,0),Vr(r,h),Ht(r,pt()),l;switch(r.finishedWork=m,r.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:xs(r,Vt,pr);break;case 3:if(Vr(r,h),(h&130023424)===h&&(i=bu+500-pt(),10<i)){if(ea(r,0)!==0)break;if(m=r.suspendedLanes,(m&h)!==h){Dt(),r.pingedLanes|=r.suspendedLanes&m;break}r.timeoutHandle=Rc(xs.bind(null,r,Vt,pr),i);break}xs(r,Vt,pr);break;case 4:if(Vr(r,h),(h&4194240)===h)break;for(i=r.eventTimes,m=-1;0<h;){var S=31-Tn(h);y=1<<S,S=i[S],S>m&&(m=S),h&=~y}if(h=m,h=pt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*L1(h/1960))-h,10<h){r.timeoutHandle=Rc(xs.bind(null,r,Vt,pr),h);break}xs(r,Vt,pr);break;case 5:xs(r,Vt,pr);break;default:throw Error(t(329))}}}return Ht(r,pt()),r.callbackNode===l?lm.bind(null,r):null}function Au(r,i){var l=co;return r.current.memoizedState.isDehydrated&&(ys(r,i).flags|=256),r=Ha(r,i),r!==2&&(i=Vt,Vt=l,i!==null&&Tu(i)),r}function Tu(r){Vt===null?Vt=r:Vt.push.apply(Vt,r)}function N1(r){for(var i=r;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var m=l[h],y=m.getSnapshot;m=m.value;try{if(!Pn(y(),m))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Vr(r,i){for(i&=~Su,i&=~ja,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var l=31-Tn(i),h=1<<l;r[l]=-1,i&=~h}}function cm(r){if((Be&6)!==0)throw Error(t(327));ni();var i=ea(r,0);if((i&1)===0)return Ht(r,pt()),null;var l=Ha(r,i);if(r.tag!==0&&l===2){var h=ic(r);h!==0&&(i=h,l=Au(r,h))}if(l===1)throw l=lo,ys(r,0),Vr(r,i),Ht(r,pt()),l;if(l===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,xs(r,Vt,pr),Ht(r,pt()),null}function Pu(r,i){var l=Be;Be|=1;try{return r(i)}finally{Be=l,Be===0&&(ti=pt()+500,va&&zr())}}function gs(r){$r!==null&&$r.tag===0&&(Be&6)===0&&ni();var i=Be;Be|=1;var l=gn.transition,h=Ge;try{if(gn.transition=null,Ge=1,r)return r()}finally{Ge=h,gn.transition=l,Be=i,(Be&6)===0&&zr()}}function Mu(){en=ei.current,Ke(ei)}function ys(r,i){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,h1(l)),gt!==null)for(l=gt.return;l!==null;){var h=l;switch(zc(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&ya();break;case 3:Ks(),Ke(Ut),Ke(It),Kc();break;case 5:qc(h);break;case 4:Ks();break;case 13:Ke(ot);break;case 19:Ke(ot);break;case 10:Wc(h.type._context);break;case 22:case 23:Mu()}l=l.return}if(bt=r,gt=r=Hr(r.current,null),Tt=en=i,_t=0,lo=null,Su=ja=ms=0,Vt=co=null,ds!==null){for(i=0;i<ds.length;i++)if(l=ds[i],h=l.interleaved,h!==null){l.interleaved=null;var m=h.next,y=l.pending;if(y!==null){var S=y.next;y.next=m,h.next=S}l.pending=h}ds=null}return r}function um(r,i){do{var l=gt;try{if($c(),Ma.current=Fa,Ea){for(var h=at.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}Ea=!1}if(ps=0,St=vt=at=null,no=!1,ro=0,wu.current=null,l===null||l.return===null){_t=1,lo=i,gt=null;break}e:{var y=r,S=l.return,T=l,E=i;if(i=Tt,T.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var G=E,ne=T,ie=ne.tag;if((ne.mode&1)===0&&(ie===0||ie===11||ie===15)){var ee=ne.alternate;ee?(ne.updateQueue=ee.updateQueue,ne.memoizedState=ee.memoizedState,ne.lanes=ee.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var he=Np(S);if(he!==null){he.flags&=-257,Bp(he,S,T,y,i),he.mode&1&&Lp(y,G,i),i=he,E=G;var me=i.updateQueue;if(me===null){var ge=new Set;ge.add(E),i.updateQueue=ge}else me.add(E);break e}else{if((i&1)===0){Lp(y,G,i),Eu();break e}E=Error(t(426))}}else if(nt&&T.mode&1){var mt=Np(S);if(mt!==null){(mt.flags&65536)===0&&(mt.flags|=256),Bp(mt,S,T,y,i),Gc(Zs(E,T));break e}}y=E=Zs(E,T),_t!==4&&(_t=2),co===null?co=[y]:co.push(y),y=S;do{switch(y.tag){case 3:y.flags|=65536,i&=-i,y.lanes|=i;var N=Rp(y,E,i);ip(y,N);break e;case 1:T=E;var I=y.type,D=y.stateNode;if((y.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Ur===null||!Ur.has(D)))){y.flags|=65536,i&=-i,y.lanes|=i;var oe=Fp(y,T,i);ip(y,oe);break e}}y=y.return}while(y!==null)}fm(l)}catch(xe){i=xe,gt===l&&l!==null&&(gt=l=l.return);continue}break}while(!0)}function hm(){var r=Da.current;return Da.current=Fa,r===null?Fa:r}function Eu(){(_t===0||_t===3||_t===2)&&(_t=4),bt===null||(ms&268435455)===0&&(ja&268435455)===0||Vr(bt,Tt)}function Ha(r,i){var l=Be;Be|=2;var h=hm();(bt!==r||Tt!==i)&&(pr=null,ys(r,i));do try{B1();break}catch(m){um(r,m)}while(!0);if($c(),Be=l,Da.current=h,gt!==null)throw Error(t(261));return bt=null,Tt=0,_t}function B1(){for(;gt!==null;)dm(gt)}function O1(){for(;gt!==null&&!lv();)dm(gt)}function dm(r){var i=gm(r.alternate,r,en);r.memoizedProps=r.pendingProps,i===null?fm(r):gt=i,wu.current=null}function fm(r){var i=r;do{var l=i.alternate;if(r=i.return,(i.flags&32768)===0){if(l=M1(l,i,en),l!==null){gt=l;return}}else{if(l=E1(l,i),l!==null){l.flags&=32767,gt=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{_t=6,gt=null;return}}if(i=i.sibling,i!==null){gt=i;return}gt=i=r}while(i!==null);_t===0&&(_t=5)}function xs(r,i,l){var h=Ge,m=gn.transition;try{gn.transition=null,Ge=1,z1(r,i,l,h)}finally{gn.transition=m,Ge=h}return null}function z1(r,i,l,h){do ni();while($r!==null);if((Be&6)!==0)throw Error(t(327));l=r.finishedWork;var m=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var y=l.lanes|l.childLanes;if(xv(r,y),r===bt&&(gt=bt=null,Tt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Ua||(Ua=!0,ym(Qo,function(){return ni(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=gn.transition,gn.transition=null;var S=Ge;Ge=1;var T=Be;Be|=4,wu.current=null,R1(r,l),rm(l,r),s1(Ec),ra=!!Mc,Ec=Mc=null,r.current=l,F1(l),cv(),Be=T,Ge=S,gn.transition=y}else r.current=l;if(Ua&&(Ua=!1,$r=r,$a=m),y=r.pendingLanes,y===0&&(Ur=null),dv(l.stateNode),Ht(r,pt()),i!==null)for(h=r.onRecoverableError,l=0;l<i.length;l++)m=i[l],h(m.value,{componentStack:m.stack,digest:m.digest});if(Ga)throw Ga=!1,r=ku,ku=null,r;return($a&1)!==0&&r.tag!==0&&ni(),y=r.pendingLanes,(y&1)!==0?r===Cu?uo++:(uo=0,Cu=r):uo=0,zr(),null}function ni(){if($r!==null){var r=ef($a),i=gn.transition,l=Ge;try{if(gn.transition=null,Ge=16>r?16:r,$r===null)var h=!1;else{if(r=$r,$r=null,$a=0,(Be&6)!==0)throw Error(t(331));var m=Be;for(Be|=4,fe=r.current;fe!==null;){var y=fe,S=y.child;if((fe.flags&16)!==0){var T=y.deletions;if(T!==null){for(var E=0;E<T.length;E++){var G=T[E];for(fe=G;fe!==null;){var ne=fe;switch(ne.tag){case 0:case 11:case 15:ao(8,ne,y)}var ie=ne.child;if(ie!==null)ie.return=ne,fe=ie;else for(;fe!==null;){ne=fe;var ee=ne.sibling,he=ne.return;if(Zp(ne),ne===G){fe=null;break}if(ee!==null){ee.return=he,fe=ee;break}fe=he}}}var me=y.alternate;if(me!==null){var ge=me.child;if(ge!==null){me.child=null;do{var mt=ge.sibling;ge.sibling=null,ge=mt}while(ge!==null)}}fe=y}}if((y.subtreeFlags&2064)!==0&&S!==null)S.return=y,fe=S;else e:for(;fe!==null;){if(y=fe,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:ao(9,y,y.return)}var N=y.sibling;if(N!==null){N.return=y.return,fe=N;break e}fe=y.return}}var I=r.current;for(fe=I;fe!==null;){S=fe;var D=S.child;if((S.subtreeFlags&2064)!==0&&D!==null)D.return=S,fe=D;else e:for(S=I;fe!==null;){if(T=fe,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:za(9,T)}}catch(xe){ut(T,T.return,xe)}if(T===S){fe=null;break e}var oe=T.sibling;if(oe!==null){oe.return=T.return,fe=oe;break e}fe=T.return}}if(Be=m,zr(),Xn&&typeof Xn.onPostCommitFiberRoot=="function")try{Xn.onPostCommitFiberRoot(Ko,r)}catch{}h=!0}return h}finally{Ge=l,gn.transition=i}}return!1}function pm(r,i,l){i=Zs(l,i),i=Rp(r,i,1),r=jr(r,i,1),i=Dt(),r!==null&&(Li(r,1,i),Ht(r,i))}function ut(r,i,l){if(r.tag===3)pm(r,r,l);else for(;i!==null;){if(i.tag===3){pm(i,r,l);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ur===null||!Ur.has(h))){r=Zs(l,r),r=Fp(i,r,1),i=jr(i,r,1),r=Dt(),i!==null&&(Li(i,1,r),Ht(i,r));break}}i=i.return}}function D1(r,i,l){var h=r.pingCache;h!==null&&h.delete(i),i=Dt(),r.pingedLanes|=r.suspendedLanes&l,bt===r&&(Tt&l)===l&&(_t===4||_t===3&&(Tt&130023424)===Tt&&500>pt()-bu?ys(r,0):Su|=l),Ht(r,i)}function mm(r,i){i===0&&((r.mode&1)===0?i=1:(i=Jo,Jo<<=1,(Jo&130023424)===0&&(Jo=4194304)));var l=Dt();r=hr(r,i),r!==null&&(Li(r,i,l),Ht(r,l))}function j1(r){var i=r.memoizedState,l=0;i!==null&&(l=i.retryLane),mm(r,l)}function G1(r,i){var l=0;switch(r.tag){case 13:var h=r.stateNode,m=r.memoizedState;m!==null&&(l=m.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),mm(r,l)}var gm;gm=function(r,i,l){if(r!==null)if(r.memoizedProps!==i.pendingProps||Ut.current)Wt=!0;else{if((r.lanes&l)===0&&(i.flags&128)===0)return Wt=!1,P1(r,i,l);Wt=(r.flags&131072)!==0}else Wt=!1,nt&&(i.flags&1048576)!==0&&qf(i,wa,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;Ba(r,i),r=i.pendingProps;var m=Ws(i,It.current);Qs(i,l),m=eu(null,i,h,r,m,l);var y=tu();return i.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,$t(h)?(y=!0,xa(i)):y=!1,i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Yc(i),m.updater=La,i.stateNode=m,m._reactInternals=i,au(i,h,r,l),i=hu(null,i,h,!0,y,l)):(i.tag=0,nt&&y&&Oc(i),zt(null,i,m,l),i=i.child),i;case 16:h=i.elementType;e:{switch(Ba(r,i),r=i.pendingProps,m=h._init,h=m(h._payload),i.type=h,m=i.tag=$1(h),r=En(h,r),m){case 0:i=uu(null,i,h,r,l);break e;case 1:i=Up(null,i,h,r,l);break e;case 11:i=Op(null,i,h,r,l);break e;case 14:i=zp(null,i,h,En(h.type,r),l);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,m=i.pendingProps,m=i.elementType===h?m:En(h,m),uu(r,i,h,m,l);case 1:return h=i.type,m=i.pendingProps,m=i.elementType===h?m:En(h,m),Up(r,i,h,m,l);case 3:e:{if($p(i),r===null)throw Error(t(387));h=i.pendingProps,y=i.memoizedState,m=y.element,sp(r,i),Ta(i,h,null,l);var S=i.memoizedState;if(h=S.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){m=Zs(Error(t(423)),i),i=Wp(r,i,h,l,m);break e}else if(h!==m){m=Zs(Error(t(424)),i),i=Wp(r,i,h,l,m);break e}else for(Jt=Nr(i.stateNode.containerInfo.firstChild),Zt=i,nt=!0,Mn=null,l=np(i,null,h,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ys(),h===m){i=fr(r,i,l);break e}zt(r,i,h,l)}i=i.child}return i;case 5:return ap(i),r===null&&jc(i),h=i.type,m=i.pendingProps,y=r!==null?r.memoizedProps:null,S=m.children,Ic(h,m)?S=null:y!==null&&Ic(h,y)&&(i.flags|=32),Gp(r,i),zt(r,i,S,l),i.child;case 6:return r===null&&jc(i),null;case 13:return Vp(r,i,l);case 4:return Xc(i,i.stateNode.containerInfo),h=i.pendingProps,r===null?i.child=Xs(i,null,h,l):zt(r,i,h,l),i.child;case 11:return h=i.type,m=i.pendingProps,m=i.elementType===h?m:En(h,m),Op(r,i,h,m,l);case 7:return zt(r,i,i.pendingProps,l),i.child;case 8:return zt(r,i,i.pendingProps.children,l),i.child;case 12:return zt(r,i,i.pendingProps.children,l),i.child;case 10:e:{if(h=i.type._context,m=i.pendingProps,y=i.memoizedProps,S=m.value,Xe(ka,h._currentValue),h._currentValue=S,y!==null)if(Pn(y.value,S)){if(y.children===m.children&&!Ut.current){i=fr(r,i,l);break e}}else for(y=i.child,y!==null&&(y.return=i);y!==null;){var T=y.dependencies;if(T!==null){S=y.child;for(var E=T.firstContext;E!==null;){if(E.context===h){if(y.tag===1){E=dr(-1,l&-l),E.tag=2;var G=y.updateQueue;if(G!==null){G=G.shared;var ne=G.pending;ne===null?E.next=E:(E.next=ne.next,ne.next=E),G.pending=E}}y.lanes|=l,E=y.alternate,E!==null&&(E.lanes|=l),Vc(y.return,l,i),T.lanes|=l;break}E=E.next}}else if(y.tag===10)S=y.type===i.type?null:y.child;else if(y.tag===18){if(S=y.return,S===null)throw Error(t(341));S.lanes|=l,T=S.alternate,T!==null&&(T.lanes|=l),Vc(S,l,i),S=y.sibling}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===i){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}zt(r,i,m.children,l),i=i.child}return i;case 9:return m=i.type,h=i.pendingProps.children,Qs(i,l),m=pn(m),h=h(m),i.flags|=1,zt(r,i,h,l),i.child;case 14:return h=i.type,m=En(h,i.pendingProps),m=En(h.type,m),zp(r,i,h,m,l);case 15:return Dp(r,i,i.type,i.pendingProps,l);case 17:return h=i.type,m=i.pendingProps,m=i.elementType===h?m:En(h,m),Ba(r,i),i.tag=1,$t(h)?(r=!0,xa(i)):r=!1,Qs(i,l),Ep(i,h,m),au(i,h,m,l),hu(null,i,h,!0,r,l);case 19:return Yp(r,i,l);case 22:return jp(r,i,l)}throw Error(t(156,i.tag))};function ym(r,i){return qd(r,i)}function U1(r,i,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(r,i,l,h){return new U1(r,i,l,h)}function Iu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function $1(r){if(typeof r=="function")return Iu(r)?1:0;if(r!=null){if(r=r.$$typeof,r===re)return 11;if(r===Se)return 14}return 2}function Hr(r,i){var l=r.alternate;return l===null?(l=yn(r.tag,i,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=i,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,i=r.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function Ya(r,i,l,h,m,y){var S=2;if(h=r,typeof r=="function")Iu(r)&&(S=1);else if(typeof r=="string")S=5;else e:switch(r){case L:return vs(l.children,m,y,i);case Q:S=8,m|=8;break;case W:return r=yn(12,l,i,m|2),r.elementType=W,r.lanes=y,r;case le:return r=yn(13,l,i,m),r.elementType=le,r.lanes=y,r;case ce:return r=yn(19,l,i,m),r.elementType=ce,r.lanes=y,r;case Z:return Xa(l,m,y,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case B:S=10;break e;case $:S=9;break e;case re:S=11;break e;case Se:S=14;break e;case q:S=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return i=yn(S,l,i,m),i.elementType=r,i.type=h,i.lanes=y,i}function vs(r,i,l,h){return r=yn(7,r,h,i),r.lanes=l,r}function Xa(r,i,l,h){return r=yn(22,r,h,i),r.elementType=Z,r.lanes=l,r.stateNode={isHidden:!1},r}function Ru(r,i,l){return r=yn(6,r,null,i),r.lanes=l,r}function Fu(r,i,l){return i=yn(4,r.children!==null?r.children:[],r.key,i),i.lanes=l,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function W1(r,i,l,h,m){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=oc(0),this.expirationTimes=oc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oc(0),this.identifierPrefix=h,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Lu(r,i,l,h,m,y,S,T,E){return r=new W1(r,i,l,T,E),i===1?(i=1,y===!0&&(i|=8)):i=0,y=yn(3,null,null,i),r.current=y,y.stateNode=r,y.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yc(y),r}function V1(r,i,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:h==null?null:""+h,children:r,containerInfo:i,implementation:l}}function xm(r){if(!r)return Or;r=r._reactInternals;e:{if(as(r)!==r||r.tag!==1)throw Error(t(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if($t(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(r.tag===1){var l=r.type;if($t(l))return Hf(r,l,i)}return i}function vm(r,i,l,h,m,y,S,T,E){return r=Lu(l,h,!0,r,m,y,S,T,E),r.context=xm(null),l=r.current,h=Dt(),m=Wr(l),y=dr(h,m),y.callback=i??null,jr(l,y,m),r.current.lanes=m,Li(r,m,h),Ht(r,h),r}function qa(r,i,l,h){var m=i.current,y=Dt(),S=Wr(m);return l=xm(l),i.context===null?i.context=l:i.pendingContext=l,i=dr(y,S),i.payload={element:r},h=h===void 0?null:h,h!==null&&(i.callback=h),r=jr(m,i,S),r!==null&&(Fn(r,m,S,y),Aa(r,m,S)),S}function Qa(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function _m(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<i?l:i}}function Nu(r,i){_m(r,i),(r=r.alternate)&&_m(r,i)}function H1(){return null}var wm=typeof reportError=="function"?reportError:function(r){console.error(r)};function Bu(r){this._internalRoot=r}Ka.prototype.render=Bu.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(t(409));qa(r,i,null,null)},Ka.prototype.unmount=Bu.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;gs(function(){qa(null,r,null,null)}),i[ar]=null}};function Ka(r){this._internalRoot=r}Ka.prototype.unstable_scheduleHydration=function(r){if(r){var i=rf();r={blockedOn:null,target:r,priority:i};for(var l=0;l<Rr.length&&i!==0&&i<Rr[l].priority;l++);Rr.splice(l,0,r),l===0&&af(r)}};function Ou(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Za(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Sm(){}function Y1(r,i,l,h,m){if(m){if(typeof h=="function"){var y=h;h=function(){var G=Qa(S);y.call(G)}}var S=vm(i,h,r,0,null,!1,!1,"",Sm);return r._reactRootContainer=S,r[ar]=S.current,Xi(r.nodeType===8?r.parentNode:r),gs(),S}for(;m=r.lastChild;)r.removeChild(m);if(typeof h=="function"){var T=h;h=function(){var G=Qa(E);T.call(G)}}var E=Lu(r,0,!1,null,null,!1,!1,"",Sm);return r._reactRootContainer=E,r[ar]=E.current,Xi(r.nodeType===8?r.parentNode:r),gs(function(){qa(i,E,l,h)}),E}function Ja(r,i,l,h,m){var y=l._reactRootContainer;if(y){var S=y;if(typeof m=="function"){var T=m;m=function(){var E=Qa(S);T.call(E)}}qa(i,S,r,m)}else S=Y1(l,i,r,m,h);return Qa(S)}tf=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var l=Fi(i.pendingLanes);l!==0&&(ac(i,l|1),Ht(i,pt()),(Be&6)===0&&(ti=pt()+500,zr()))}break;case 13:gs(function(){var h=hr(r,1);if(h!==null){var m=Dt();Fn(h,r,1,m)}}),Nu(r,1)}},lc=function(r){if(r.tag===13){var i=hr(r,134217728);if(i!==null){var l=Dt();Fn(i,r,134217728,l)}Nu(r,134217728)}},nf=function(r){if(r.tag===13){var i=Wr(r),l=hr(r,i);if(l!==null){var h=Dt();Fn(l,r,i,h)}Nu(r,i)}},rf=function(){return Ge},sf=function(r,i){var l=Ge;try{return Ge=r,i()}finally{Ge=l}},Cr=function(r,i,l){switch(i){case"input":if(De(r,l),i=l.name,l.type==="radio"&&i!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var h=l[i];if(h!==r&&h.form===r.form){var m=ga(h);if(!m)throw Error(t(90));ye(h),De(h,m)}}}break;case"textarea":ft(r,l);break;case"select":i=l.value,i!=null&&Fe(r,!!l.multiple,i,!1)}},An=Pu,Xo=gs;var X1={usingClientEntryPoint:!1,Events:[Ki,Us,ga,Tr,ss,Pu]},ho={findFiberByHostInstance:ls,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},q1={bundleType:ho.bundleType,version:ho.version,rendererPackageName:ho.rendererPackageName,rendererConfig:ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Yd(r),r===null?null:r.stateNode},findFiberByHostInstance:ho.findFiberByHostInstance||H1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var el=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!el.isDisabled&&el.supportsFiber)try{Ko=el.inject(q1),Xn=el}catch{}}return Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X1,Yt.createPortal=function(r,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ou(i))throw Error(t(200));return V1(r,i,null,l)},Yt.createRoot=function(r,i){if(!Ou(r))throw Error(t(299));var l=!1,h="",m=wm;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(m=i.onRecoverableError)),i=Lu(r,1,!1,null,null,l,!1,h,m),r[ar]=i.current,Xi(r.nodeType===8?r.parentNode:r),new Bu(i)},Yt.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Yd(i),r=r===null?null:r.stateNode,r},Yt.flushSync=function(r){return gs(r)},Yt.hydrate=function(r,i,l){if(!Za(i))throw Error(t(200));return Ja(null,r,i,!0,l)},Yt.hydrateRoot=function(r,i,l){if(!Ou(r))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,m=!1,y="",S=wm;if(l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),i=vm(i,null,r,1,l??null,m,!1,y,S),r[ar]=i.current,Xi(r),h)for(r=0;r<h.length;r++)l=h[r],m=l._getVersion,m=m(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,m]:i.mutableSourceEagerHydrationData.push(l,m);return new Ka(i)},Yt.render=function(r,i,l){if(!Za(i))throw Error(t(200));return Ja(null,r,i,!1,l)},Yt.unmountComponentAtNode=function(r){if(!Za(r))throw Error(t(40));return r._reactRootContainer?(gs(function(){Ja(null,null,r,!1,function(){r._reactRootContainer=null,r[ar]=null})}),!0):!1},Yt.unstable_batchedUpdates=Pu,Yt.unstable_renderSubtreeIntoContainer=function(r,i,l,h){if(!Za(l))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Ja(r,i,l,!1,h)},Yt.version="18.3.1-next-f1338f8080-20240426",Yt}var Em;function Cy(){if(Em)return ju.exports;Em=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ju.exports=s_(),ju.exports}var Im;function i_(){if(Im)return tl;Im=1;var n=Cy();return tl.createRoot=n.createRoot,tl.hydrateRoot=n.hydrateRoot,tl}var o_=i_(),ue=dd();const ai=hd(ue),a_="modulepreload",l_=function(n){return"/farmwork/"+n},Rm={},Ml=function(e,t,s){let o=Promise.resolve();if(t&&t.length>0){let c=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");o=c(t.map(f=>{if(f=l_(f),f in Rm)return;Rm[f]=!0;const p=f.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":a_,p||(x.as="script"),x.crossOrigin="",x.href=f,d&&x.setAttribute("nonce",d),document.head.appendChild(x),p)return new Promise((v,_)=>{x.addEventListener("load",v),x.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return o.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};var we=(n=>(n.Application="application",n.WebGLPipes="webgl-pipes",n.WebGLPipesAdaptor="webgl-pipes-adaptor",n.WebGLSystem="webgl-system",n.WebGPUPipes="webgpu-pipes",n.WebGPUPipesAdaptor="webgpu-pipes-adaptor",n.WebGPUSystem="webgpu-system",n.CanvasSystem="canvas-system",n.CanvasPipesAdaptor="canvas-pipes-adaptor",n.CanvasPipes="canvas-pipes",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n.MaskEffect="mask-effect",n.BlendMode="blend-mode",n.TextureSource="texture-source",n.Environment="environment",n.ShapeBuilder="shape-builder",n.Batcher="batcher",n))(we||{});const Rh=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},nl=(n,e)=>Rh(n).priority??e,Mt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(Rh).forEach(e=>{e.type.forEach(t=>this._removeHandlers[t]?.(e))}),this},add(...n){return n.map(Rh).forEach(e=>{e.type.forEach(t=>{const s=this._addHandlers,o=this._queue;s[t]?s[t]?.(e):(o[t]=o[t]||[],o[t]?.push(e))})}),this},handle(n,e,t){const s=this._addHandlers,o=this._removeHandlers;if(s[n]||o[n])throw new Error(`Extension type ${n} already has a handler`);s[n]=e,o[n]=t;const a=this._queue;return a[n]&&(a[n]?.forEach(c=>e(c)),delete a[n]),this},handleByMap(n,e){return this.handle(n,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(n,e,t=-1){return this.handle(n,s=>{e.findIndex(a=>a.name===s.name)>=0||(e.push({name:s.name,value:s.ref}),e.sort((a,c)=>nl(c.value,t)-nl(a.value,t)))},s=>{const o=e.findIndex(a=>a.name===s.name);o!==-1&&e.splice(o,1)})},handleByList(n,e,t=-1){return this.handle(n,s=>{e.includes(s.ref)||(e.push(s.ref),e.sort((o,a)=>nl(a,t)-nl(o,t)))},s=>{const o=e.indexOf(s.ref);o!==-1&&e.splice(o,1)})},mixin(n,...e){for(const t of e)Object.defineProperties(n.prototype,Object.getOwnPropertyDescriptors(t))}},c_={extension:{type:we.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Ml(()=>import("./browserAll-COuUjqRY.js"),__vite__mapDeps([0,1,2]))}},u_={extension:{type:we.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Ml(()=>import("./webworkerAll-Dj9s7PQ9.js"),__vite__mapDeps([1,2]))}};class Pt{constructor(e,t,s){this._x=t||0,this._y=s||0,this._observer=e}clone(e){return new Pt(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var $u={exports:{}},Fm;function h_(){return Fm||(Fm=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function o(d,f,p){this.fn=d,this.context=f,this.once=p||!1}function a(d,f,p,g,x){if(typeof p!="function")throw new TypeError("The listener must be a function");var v=new o(p,g||d,x),_=t?t+f:f;return d._events[_]?d._events[_].fn?d._events[_]=[d._events[_],v]:d._events[_].push(v):(d._events[_]=v,d._eventsCount++),d}function c(d,f){--d._eventsCount===0?d._events=new s:delete d._events[f]}function u(){this._events=new s,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],p,g;if(this._eventsCount===0)return f;for(g in p=this._events)e.call(p,g)&&f.push(t?g.slice(1):g);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(p)):f},u.prototype.listeners=function(f){var p=t?t+f:f,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var x=0,v=g.length,_=new Array(v);x<v;x++)_[x]=g[x].fn;return _},u.prototype.listenerCount=function(f){var p=t?t+f:f,g=this._events[p];return g?g.fn?1:g.length:0},u.prototype.emit=function(f,p,g,x,v,_){var b=t?t+f:f;if(!this._events[b])return!1;var w=this._events[b],k=arguments.length,A,P;if(w.fn){switch(w.once&&this.removeListener(f,w.fn,void 0,!0),k){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,p),!0;case 3:return w.fn.call(w.context,p,g),!0;case 4:return w.fn.call(w.context,p,g,x),!0;case 5:return w.fn.call(w.context,p,g,x,v),!0;case 6:return w.fn.call(w.context,p,g,x,v,_),!0}for(P=1,A=new Array(k-1);P<k;P++)A[P-1]=arguments[P];w.fn.apply(w.context,A)}else{var C=w.length,F;for(P=0;P<C;P++)switch(w[P].once&&this.removeListener(f,w[P].fn,void 0,!0),k){case 1:w[P].fn.call(w[P].context);break;case 2:w[P].fn.call(w[P].context,p);break;case 3:w[P].fn.call(w[P].context,p,g);break;case 4:w[P].fn.call(w[P].context,p,g,x);break;default:if(!A)for(F=1,A=new Array(k-1);F<k;F++)A[F-1]=arguments[F];w[P].fn.apply(w[P].context,A)}}return!0},u.prototype.on=function(f,p,g){return a(this,f,p,g,!1)},u.prototype.once=function(f,p,g){return a(this,f,p,g,!0)},u.prototype.removeListener=function(f,p,g,x){var v=t?t+f:f;if(!this._events[v])return this;if(!p)return c(this,v),this;var _=this._events[v];if(_.fn)_.fn===p&&(!x||_.once)&&(!g||_.context===g)&&c(this,v);else{for(var b=0,w=[],k=_.length;b<k;b++)(_[b].fn!==p||x&&!_[b].once||g&&_[b].context!==g)&&w.push(_[b]);w.length?this._events[v]=w.length===1?w[0]:w:c(this,v)}return this},u.prototype.removeAllListeners=function(f){var p;return f?(p=t?t+f:f,this._events[p]&&c(this,p)):(this._events=new s,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=t,u.EventEmitter=u,n.exports=u})($u)),$u.exports}var d_=h_();const Gn=hd(d_),f_=Math.PI*2,p_=180/Math.PI,m_=Math.PI/180;class Bt{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new Bt(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Wu.x=0,Wu.y=0,Wu}}const Wu=new Bt;class Re{constructor(e=1,t=0,s=0,o=1,a=0,c=0){this.array=null,this.a=e,this.b=t,this.c=s,this.d=o,this.tx=a,this.ty=c}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,s,o,a,c){return this.a=e,this.b=t,this.c=s,this.d=o,this.tx=a,this.ty=c,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const s=t||this.array;return e?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(e,t){t=t||new Bt;const s=e.x,o=e.y;return t.x=this.a*s+this.c*o+this.tx,t.y=this.b*s+this.d*o+this.ty,t}applyInverse(e,t){t=t||new Bt;const s=this.a,o=this.b,a=this.c,c=this.d,u=this.tx,d=this.ty,f=1/(s*c+a*-o),p=e.x,g=e.y;return t.x=c*f*p+-a*f*g+(d*a-u*c)*f,t.y=s*f*g+-o*f*p+(-d*s+u*o)*f,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),s=Math.sin(e),o=this.a,a=this.c,c=this.tx;return this.a=o*t-this.b*s,this.b=o*s+this.b*t,this.c=a*t-this.d*s,this.d=a*s+this.d*t,this.tx=c*t-this.ty*s,this.ty=c*s+this.ty*t,this}append(e){const t=this.a,s=this.b,o=this.c,a=this.d;return this.a=e.a*t+e.b*o,this.b=e.a*s+e.b*a,this.c=e.c*t+e.d*o,this.d=e.c*s+e.d*a,this.tx=e.tx*t+e.ty*o+this.tx,this.ty=e.tx*s+e.ty*a+this.ty,this}appendFrom(e,t){const s=e.a,o=e.b,a=e.c,c=e.d,u=e.tx,d=e.ty,f=t.a,p=t.b,g=t.c,x=t.d;return this.a=s*f+o*g,this.b=s*p+o*x,this.c=a*f+c*g,this.d=a*p+c*x,this.tx=u*f+d*g+t.tx,this.ty=u*p+d*x+t.ty,this}setTransform(e,t,s,o,a,c,u,d,f){return this.a=Math.cos(u+f)*a,this.b=Math.sin(u+f)*a,this.c=-Math.sin(u-d)*c,this.d=Math.cos(u-d)*c,this.tx=e-(s*this.a+o*this.c),this.ty=t-(s*this.b+o*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const s=this.a,o=this.c;this.a=s*e.a+this.b*e.c,this.b=s*e.b+this.b*e.d,this.c=o*e.a+this.d*e.c,this.d=o*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,s=this.b,o=this.c,a=this.d,c=e.pivot,u=-Math.atan2(-o,a),d=Math.atan2(s,t),f=Math.abs(u+d);return f<1e-5||Math.abs(f_-f)<1e-5?(e.rotation=d,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=u,e.skew.y=d),e.scale.x=Math.sqrt(t*t+s*s),e.scale.y=Math.sqrt(o*o+a*a),e.position.x=this.tx+(c.x*t+c.y*o),e.position.y=this.ty+(c.x*s+c.y*a),e}invert(){const e=this.a,t=this.b,s=this.c,o=this.d,a=this.tx,c=e*o-t*s;return this.a=o/c,this.b=-t/c,this.c=-s/c,this.d=e/c,this.tx=(s*this.ty-o*a)/c,this.ty=-(e*this.ty-t*a)/c,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Re;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return y_.identity()}static get shared(){return g_.identity()}}const g_=new Re,y_=new Re,bs=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ks=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Cs=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],As=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Fh=[],Ay=[],rl=Math.sign;function x_(){for(let n=0;n<16;n++){const e=[];Fh.push(e);for(let t=0;t<16;t++){const s=rl(bs[n]*bs[t]+Cs[n]*ks[t]),o=rl(ks[n]*bs[t]+As[n]*ks[t]),a=rl(bs[n]*Cs[t]+Cs[n]*As[t]),c=rl(ks[n]*Cs[t]+As[n]*As[t]);for(let u=0;u<16;u++)if(bs[u]===s&&ks[u]===o&&Cs[u]===a&&As[u]===c){e.push(u);break}}}for(let n=0;n<16;n++){const e=new Re;e.set(bs[n],ks[n],Cs[n],As[n],0,0),Ay.push(e)}}x_();const Ue={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>bs[n],uY:n=>ks[n],vX:n=>Cs[n],vY:n=>As[n],inv:n=>n&8?n&15:-n&7,add:(n,e)=>Fh[n][e],sub:(n,e)=>Fh[n][Ue.inv(e)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,e)=>Math.abs(n)*2<=Math.abs(e)?e>=0?Ue.S:Ue.N:Math.abs(e)*2<=Math.abs(n)?n>0?Ue.E:Ue.W:e>0?n>0?Ue.SE:Ue.SW:n>0?Ue.NE:Ue.NW,matrixAppendRotationInv:(n,e,t=0,s=0)=>{const o=Ay[Ue.inv(e)];o.tx=t,o.ty=s,n.append(o)},transformRectCoords:(n,e,t,s)=>{const{x:o,y:a,width:c,height:u}=n,{x:d,y:f,width:p,height:g}=e;return t===Ue.E?(s.set(o+d,a+f,c,u),s):t===Ue.S?s.set(p-a-u+d,o+f,u,c):t===Ue.W?s.set(p-o-c+d,g-a-u+f,c,u):t===Ue.N?s.set(a+d,g-o-c+f,u,c):s.set(o+d,a+f,c,u)}},sl=[new Bt,new Bt,new Bt,new Bt];class tt{constructor(e=0,t=0,s=0,o=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(s),this.height=Number(o)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new tt(0,0,0,0)}clone(){return new tt(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,s,o=.5){const{width:a,height:c}=this;if(a<=0||c<=0)return!1;const u=this.x,d=this.y,f=s*(1-o),p=s-f,g=u-f,x=u+a+f,v=d-f,_=d+c+f,b=u+p,w=u+a-p,k=d+p,A=d+c-p;return e>=g&&e<=x&&t>=v&&t<=_&&!(e>b&&e<w&&t>k&&t<A)}intersects(e,t){if(!t){const Q=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=Q)return!1;const B=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>B}const s=this.left,o=this.right,a=this.top,c=this.bottom;if(o<=s||c<=a)return!1;const u=sl[0].set(e.left,e.top),d=sl[1].set(e.left,e.bottom),f=sl[2].set(e.right,e.top),p=sl[3].set(e.right,e.bottom);if(f.x<=u.x||d.y<=u.y)return!1;const g=Math.sign(t.a*t.d-t.b*t.c);if(g===0||(t.apply(u,u),t.apply(d,d),t.apply(f,f),t.apply(p,p),Math.max(u.x,d.x,f.x,p.x)<=s||Math.min(u.x,d.x,f.x,p.x)>=o||Math.max(u.y,d.y,f.y,p.y)<=a||Math.min(u.y,d.y,f.y,p.y)>=c))return!1;const x=g*(d.y-u.y),v=g*(u.x-d.x),_=x*s+v*a,b=x*o+v*a,w=x*s+v*c,k=x*o+v*c;if(Math.max(_,b,w,k)<=x*u.x+v*u.y||Math.min(_,b,w,k)>=x*p.x+v*p.y)return!1;const A=g*(u.y-f.y),P=g*(f.x-u.x),C=A*s+P*a,F=A*o+P*a,R=A*s+P*c,L=A*o+P*c;return!(Math.max(C,F,R,L)<=A*u.x+P*u.y||Math.min(C,F,R,L)>=A*p.x+P*p.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),s=Math.min(this.x+this.width,e.x+e.width),o=Math.max(this.y,e.y),a=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(s-t,0),this.y=o,this.height=Math.max(a-o,0),this}ceil(e=1,t=.001){const s=Math.ceil((this.x+this.width-t)*e)/e,o=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=s-this.x,this.height=o-this.y,this}scale(e,t=e){return this.x*=e,this.y*=t,this.width*=e,this.height*=t,this}enlarge(e){const t=Math.min(this.x,e.x),s=Math.max(this.x+this.width,e.x+e.width),o=Math.min(this.y,e.y),a=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=s-t,this.y=o,this.height=a-o,this}getBounds(e){return e||(e=new tt),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const t=e.x,s=e.y,o=e.x+e.width,a=e.y+e.height;return t>=this.x&&t<this.x+this.width&&s>=this.y&&s<this.y+this.height&&o>=this.x&&o<this.x+this.width&&a>=this.y&&a<this.y+this.height}set(e,t,s,o){return this.x=e,this.y=t,this.width=s,this.height=o,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const Vu={default:-1};function dt(n="default"){return Vu[n]===void 0&&(Vu[n]=-1),++Vu[n]}const Lm=new Set,je="8.0.0",v_="8.3.4",li={quiet:!1,noColor:!1},Pe=(n,e,t=3)=>{if(li.quiet||Lm.has(e))return;let s=new Error().stack;const o=`${e}
Deprecated since v${n}`,a=typeof console.groupCollapsed=="function"&&!li.noColor;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",o):(s=s.split(`
`).splice(t).join(`
`),a?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",o),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",o),console.warn(s))),Lm.add(e)};Object.defineProperties(Pe,{quiet:{get:()=>li.quiet,set:n=>{li.quiet=n},enumerable:!0,configurable:!1},noColor:{get:()=>li.noColor,set:n=>{li.noColor=n},enumerable:!0,configurable:!1}});const Ty=()=>{};function yi(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function Nm(n){return!(n&n-1)&&!!n}function Py(n){const e={};for(const t in n)n[t]!==void 0&&(e[t]=n[t]);return e}const Bm=Object.create(null);function __(n){const e=Bm[n];return e===void 0&&(Bm[n]=dt("resource")),e}const My=class Ey extends Gn{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...Ey.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){Pe(je,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=__(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};My.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let xi=My;const Iy=class Ry extends Gn{constructor(e={}){super(),this.options=e,this.uid=dt("textureSource"),this._resourceType="textureSource",this._resourceId=dt("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...Ry.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new xi(Py(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){this.style!==e&&(this._style?.off("change",this._onStyleChange,this),this._style=e,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=dt("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,s){s||(s=this._resolution),e||(e=this.width),t||(t=this.height);const o=Math.round(e*s),a=Math.round(t*s);return this.width=o/s,this.height=a/s,this._resolution=s,this.pixelWidth===o&&this.pixelHeight===a?!1:(this._refreshPOT(),this.pixelWidth=o,this.pixelHeight=a,this.emit("resize",this),this._resourceId=dt("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Nm(this.pixelWidth)&&Nm(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};Iy.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Un=Iy;class fd extends Un{constructor(e){const t=e.resource||new Float32Array(e.width*e.height*4);let s=e.format;s||(t instanceof Float32Array?s="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?s="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?s="rgba16uint":(t instanceof Int8Array,s="bgra8unorm")),super({...e,resource:t,format:s}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}fd.extension=we.TextureSource;const Om=new Re;class w_{constructor(e,t){this.mapCoord=new Re,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){this.texture!==e&&(this._texture?.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);const s=this.mapCoord;for(let o=0;o<e.length;o+=2){const a=e[o],c=e[o+1];t[o]=a*s.a+c*s.c+s.tx,t[o+1]=a*s.b+c*s.d+s.ty}return t}update(){const e=this._texture;this._updateID++;const t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);const s=e.orig,o=e.trim;o&&(Om.set(s.width/o.width,0,0,s.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(Om));const a=e.source,c=this.uClampFrame,u=this.clampMargin/a._resolution,d=this.clampOffset/a._resolution;return c[0]=(e.frame.x+u+d)/a.width,c[1]=(e.frame.y+u+d)/a.height,c[2]=(e.frame.x+e.frame.width-u+d)/a.width,c[3]=(e.frame.y+e.frame.height-u+d)/a.height,this.uClampOffset[0]=this.clampOffset/a.pixelWidth,this.uClampOffset[1]=this.clampOffset/a.pixelHeight,this.isSimple=e.frame.width===a.width&&e.frame.height===a.height&&e.rotate===0,!0}}class Ne extends Gn{constructor({source:e,label:t,frame:s,orig:o,trim:a,defaultAnchor:c,defaultBorders:u,rotate:d,dynamic:f}={}){if(super(),this.uid=dt("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new tt,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=e?.source??new Un,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:p,height:g}=this._source;this.frame.width=p,this.frame.height=g}this.orig=o||this.frame,this.trim=a,this.rotate=d??0,this.defaultAnchor=c,this.defaultBorders=u,this.destroyed=!1,this.dynamic=f||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new w_(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:t}=this,{width:s,height:o}=this._source,a=t.x/s,c=t.y/o,u=t.width/s,d=t.height/o;let f=this.rotate;if(f){const p=u/2,g=d/2,x=a+p,v=c+g;f=Ue.add(f,Ue.NW),e.x0=x+p*Ue.uX(f),e.y0=v+g*Ue.uY(f),f=Ue.add(f,2),e.x1=x+p*Ue.uX(f),e.y1=v+g*Ue.uY(f),f=Ue.add(f,2),e.x2=x+p*Ue.uX(f),e.y2=v+g*Ue.uY(f),f=Ue.add(f,2),e.x3=x+p*Ue.uX(f),e.y3=v+g*Ue.uY(f)}else e.x0=a,e.y0=c,e.x1=a+u,e.y1=c,e.x2=a+u,e.y2=c+d,e.x3=a,e.y3=c+d}destroy(e=!1){this._source&&(this._source.off("resize",this.update,this),e&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Pe(je,"Texture.baseTexture is now Texture.source"),this._source}}Ne.EMPTY=new Ne({label:"EMPTY",source:new Un({label:"EMPTY"})});Ne.EMPTY.destroy=Ty;Ne.WHITE=new Ne({source:new fd({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Ne.WHITE.destroy=Ty;function S_(n,e,t){const{width:s,height:o}=t.orig,a=t.trim;if(a){const c=a.width,u=a.height;n.minX=a.x-e._x*s,n.maxX=n.minX+c,n.minY=a.y-e._y*o,n.maxY=n.minY+u}else n.minX=-e._x*s,n.maxX=n.minX+s,n.minY=-e._y*o,n.maxY=n.minY+o}const zm=new Re;class Dn{constructor(e=1/0,t=1/0,s=-1/0,o=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=zm,this.minX=e,this.minY=t,this.maxX=s,this.maxY=o}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new tt);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=zm,this}set(e,t,s,o){this.minX=e,this.minY=t,this.maxX=s,this.maxY=o}addFrame(e,t,s,o,a){a||(a=this.matrix);const c=a.a,u=a.b,d=a.c,f=a.d,p=a.tx,g=a.ty;let x=this.minX,v=this.minY,_=this.maxX,b=this.maxY,w=c*e+d*t+p,k=u*e+f*t+g;w<x&&(x=w),k<v&&(v=k),w>_&&(_=w),k>b&&(b=k),w=c*s+d*t+p,k=u*s+f*t+g,w<x&&(x=w),k<v&&(v=k),w>_&&(_=w),k>b&&(b=k),w=c*e+d*o+p,k=u*e+f*o+g,w<x&&(x=w),k<v&&(v=k),w>_&&(_=w),k>b&&(b=k),w=c*s+d*o+p,k=u*s+f*o+g,w<x&&(x=w),k<v&&(v=k),w>_&&(_=w),k>b&&(b=k),this.minX=x,this.minY=v,this.maxX=_,this.maxY=b}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const t=this.minX,s=this.minY,o=this.maxX,a=this.maxY,{a:c,b:u,c:d,d:f,tx:p,ty:g}=e;let x=c*t+d*s+p,v=u*t+f*s+g;this.minX=x,this.minY=v,this.maxX=x,this.maxY=v,x=c*o+d*s+p,v=u*o+f*s+g,this.minX=x<this.minX?x:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=v>this.maxY?v:this.maxY,x=c*t+d*a+p,v=u*t+f*a+g,this.minX=x<this.minX?x:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=v>this.maxY?v:this.maxY,x=c*o+d*a+p,v=u*o+f*a+g,this.minX=x<this.minX?x:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=v>this.maxY?v:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,s,o){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<s&&(this.minY=s),this.maxY>o&&(this.maxY=o),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Dn(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){const t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){const t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,s,o){let a=this.minX,c=this.minY,u=this.maxX,d=this.maxY;o||(o=this.matrix);const f=o.a,p=o.b,g=o.c,x=o.d,v=o.tx,_=o.ty;for(let b=t;b<s;b+=2){const w=e[b],k=e[b+1],A=f*w+g*k+v,P=p*w+x*k+_;a=A<a?A:a,c=P<c?P:c,u=A>u?A:u,d=P>d?P:d}this.minX=a,this.minY=c,this.maxX=u,this.maxY=d}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var b_={grad:.9,turn:360,rad:360/(2*Math.PI)},mr=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Ct=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},_n=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},Fy=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},Dm=function(n){return{r:_n(n.r,0,255),g:_n(n.g,0,255),b:_n(n.b,0,255),a:_n(n.a)}},Hu=function(n){return{r:Ct(n.r),g:Ct(n.g),b:Ct(n.b),a:Ct(n.a,3)}},k_=/^#([0-9a-f]{3,8})$/i,il=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},Ly=function(n){var e=n.r,t=n.g,s=n.b,o=n.a,a=Math.max(e,t,s),c=a-Math.min(e,t,s),u=c?a===e?(t-s)/c:a===t?2+(s-e)/c:4+(e-t)/c:0;return{h:60*(u<0?u+6:u),s:a?c/a*100:0,v:a/255*100,a:o}},Ny=function(n){var e=n.h,t=n.s,s=n.v,o=n.a;e=e/360*6,t/=100,s/=100;var a=Math.floor(e),c=s*(1-t),u=s*(1-(e-a)*t),d=s*(1-(1-e+a)*t),f=a%6;return{r:255*[s,u,c,c,d,s][f],g:255*[d,s,s,u,c,c][f],b:255*[c,c,d,s,s,u][f],a:o}},jm=function(n){return{h:Fy(n.h),s:_n(n.s,0,100),l:_n(n.l,0,100),a:_n(n.a)}},Gm=function(n){return{h:Ct(n.h),s:Ct(n.s),l:Ct(n.l),a:Ct(n.a,3)}},Um=function(n){return Ny((t=(e=n).s,{h:e.h,s:(t*=((s=e.l)<50?s:100-s)/100)>0?2*t/(s+t)*100:0,v:s+t,a:e.a}));var e,t,s},To=function(n){return{h:(e=Ly(n)).h,s:(o=(200-(t=e.s))*(s=e.v)/100)>0&&o<200?t*s/100/(o<=100?o:200-o)*100:0,l:o/2,a:e.a};var e,t,s,o},C_=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,A_=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,T_=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,P_=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Lh={string:[[function(n){var e=k_.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Ct(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Ct(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=T_.exec(n)||P_.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:Dm({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=C_.exec(n)||A_.exec(n);if(!e)return null;var t,s,o=jm({h:(t=e[1],s=e[2],s===void 0&&(s="deg"),Number(t)*(b_[s]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Um(o)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,s=n.b,o=n.a,a=o===void 0?1:o;return mr(e)&&mr(t)&&mr(s)?Dm({r:Number(e),g:Number(t),b:Number(s),a:Number(a)}):null},"rgb"],[function(n){var e=n.h,t=n.s,s=n.l,o=n.a,a=o===void 0?1:o;if(!mr(e)||!mr(t)||!mr(s))return null;var c=jm({h:Number(e),s:Number(t),l:Number(s),a:Number(a)});return Um(c)},"hsl"],[function(n){var e=n.h,t=n.s,s=n.v,o=n.a,a=o===void 0?1:o;if(!mr(e)||!mr(t)||!mr(s))return null;var c=(function(u){return{h:Fy(u.h),s:_n(u.s,0,100),v:_n(u.v,0,100),a:_n(u.a)}})({h:Number(e),s:Number(t),v:Number(s),a:Number(a)});return Ny(c)},"hsv"]]},$m=function(n,e){for(var t=0;t<e.length;t++){var s=e[t][0](n);if(s)return[s,e[t][1]]}return[null,void 0]},M_=function(n){return typeof n=="string"?$m(n.trim(),Lh.string):typeof n=="object"&&n!==null?$m(n,Lh.object):[null,void 0]},Yu=function(n,e){var t=To(n);return{h:t.h,s:_n(t.s+100*e,0,100),l:t.l,a:t.a}},Xu=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},Wm=function(n,e){var t=To(n);return{h:t.h,s:t.s,l:_n(t.l+100*e,0,100),a:t.a}},Nh=(function(){function n(e){this.parsed=M_(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Ct(Xu(this.rgba),2)},n.prototype.isDark=function(){return Xu(this.rgba)<.5},n.prototype.isLight=function(){return Xu(this.rgba)>=.5},n.prototype.toHex=function(){return e=Hu(this.rgba),t=e.r,s=e.g,o=e.b,c=(a=e.a)<1?il(Ct(255*a)):"","#"+il(t)+il(s)+il(o)+c;var e,t,s,o,a,c},n.prototype.toRgb=function(){return Hu(this.rgba)},n.prototype.toRgbString=function(){return e=Hu(this.rgba),t=e.r,s=e.g,o=e.b,(a=e.a)<1?"rgba("+t+", "+s+", "+o+", "+a+")":"rgb("+t+", "+s+", "+o+")";var e,t,s,o,a},n.prototype.toHsl=function(){return Gm(To(this.rgba))},n.prototype.toHslString=function(){return e=Gm(To(this.rgba)),t=e.h,s=e.s,o=e.l,(a=e.a)<1?"hsla("+t+", "+s+"%, "+o+"%, "+a+")":"hsl("+t+", "+s+"%, "+o+"%)";var e,t,s,o,a},n.prototype.toHsv=function(){return e=Ly(this.rgba),{h:Ct(e.h),s:Ct(e.s),v:Ct(e.v),a:Ct(e.a,3)};var e},n.prototype.invert=function(){return Jn({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Jn(Yu(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Jn(Yu(this.rgba,-e))},n.prototype.grayscale=function(){return Jn(Yu(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Jn(Wm(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Jn(Wm(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Jn({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Ct(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=To(this.rgba);return typeof e=="number"?Jn({h:e,s:t.s,l:t.l,a:t.a}):Ct(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Jn(e).toHex()},n})(),Jn=function(n){return n instanceof Nh?n:new Nh(n)},Vm=[],E_=function(n){n.forEach(function(e){Vm.indexOf(e)<0&&(e(Nh,Lh),Vm.push(e))})};function I_(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var o in t)s[t[o]]=o;var a={};n.prototype.toName=function(c){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var u,d,f=s[this.toHex()];if(f)return f;if(c?.closest){var p=this.toRgb(),g=1/0,x="black";if(!a.length)for(var v in t)a[v]=new n(t[v]).toRgb();for(var _ in t){var b=(u=p,d=a[_],Math.pow(u.r-d.r,2)+Math.pow(u.g-d.g,2)+Math.pow(u.b-d.b,2));b<g&&(g=b,x=_)}return x}},e.string.push([function(c){var u=c.toLowerCase(),d=u==="transparent"?"#0000":t[u];return d?new n(d).toRgb():null},"name"])}E_([I_]);const vi=class So{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof So)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,t){const s=typeof e;if(s!==typeof t)return!1;if(s==="number"||s==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((a,c)=>a===t[c]);if(e!==null&&t!==null){const a=Object.keys(e),c=Object.keys(t);return a.length!==c.length?!1:a.every(u=>e[u]===t[u])}return e===t}toRgba(){const[e,t,s,o]=this._components;return{r:e,g:t,b:s,a:o}}toRgb(){const[e,t,s]=this._components;return{r:e,g:t,b:s}}toRgbaString(){const[e,t,s]=this.toUint8RgbArray();return`rgba(${e},${t},${s},${this.alpha})`}toUint8RgbArray(e){const[t,s,o]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(t*255),e[1]=Math.round(s*255),e[2]=Math.round(o*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[t,s,o,a]=this._components;return e[0]=t,e[1]=s,e[2]=o,e[3]=a,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[t,s,o]=this._components;return e[0]=t,e[1]=s,e[2]=o,e}toNumber(){return this._int}toBgrNumber(){const[e,t,s]=this.toUint8RgbArray();return(s<<16)+(t<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,s,o,a]=So._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=s,this._components[2]*=o,this._components[3]*=a,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let s=this._int>>16&255,o=this._int>>8&255,a=this._int&255;return t&&(s=s*e+.5|0,o=o*e+.5|0,a=a*e+.5|0),(e*255<<24)+(s<<16)+(o<<8)+a}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,s,o,a;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const c=e;t=(c>>16&255)/255,s=(c>>8&255)/255,o=(c&255)/255,a=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,s,o,a=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,s,o,a=255]=e,t/=255,s/=255,o/=255,a/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const u=So.HEX_PATTERN.exec(e);u&&(e=`#${u[2]}`)}const c=Jn(e);c.isValid()&&({r:t,g:s,b:o,a}=c.rgba,t/=255,s/=255,o/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=s,this._components[2]=o,this._components[3]=a,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,t,s]=this._components;this._int=(e*255<<16)+(t*255<<8)+(s*255|0)}_clamp(e,t=0,s=1){return typeof e=="number"?Math.min(Math.max(e,t),s):(e.forEach((o,a)=>{e[a]=Math.min(Math.max(o,t),s)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof So||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};vi.shared=new vi;vi._temp=new vi;vi.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let yt=vi;const R_={cullArea:null,cullable:!1,cullableChildren:!0};let qu=0;const Hm=500;function et(...n){qu!==Hm&&(qu++,qu===Hm?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...n))}const Ho={_registeredResources:new Set,register(n){this._registeredResources.add(n)},unregister(n){this._registeredResources.delete(n)},release(){this._registeredResources.forEach(n=>n.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(n){return this._registeredResources.has(n)},reset(){this._registeredResources.clear()}};class F_{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){let t;return this._index>0?t=this._pool[--this._index]:(t=new this._classType,this._count++),t.init?.(e),t}return(e){e.reset?.(),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let e=0;e<this._index;e++)this._pool[e].destroy();this._pool.length=0,this._count=0,this._index=0}}class L_{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new F_(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(t=>{const s=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[s]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}clear(){this._poolsByClass.forEach(e=>e.clear()),this._poolsByClass.clear()}}const wn=new L_;Ho.register(wn);const N_={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(n){typeof n=="boolean"&&n===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(n===!0?{}:n))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(n){Pe("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(n)}};function B_(n,e,t){const s=n.length;let o;if(e>=s||t===0)return;t=e+t>s?s-e:t;const a=s-t;for(o=e;o<a;++o)n[o]=n[o+t];n.length=a}const O_={allowChildren:!0,removeChildren(n=0,e){const t=e??this.children.length,s=t-n,o=[];if(s>0&&s<=t){for(let c=t-1;c>=n;c--){const u=this.children[c];u&&(o.push(u),u.parent=null)}B_(this.children,n,t);const a=this.renderGroup||this.parentRenderGroup;a&&a.removeChildren(o);for(let c=0;c<o.length;++c){const u=o[c];u.parentRenderLayer?.detach(u),this.emit("childRemoved",u,this,c),o[c].emit("removed",this)}return o.length>0&&this._didViewChangeTick++,o}else if(s===0&&this.children.length===0)return o;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(n){const e=this.getChildAt(n);return this.removeChild(e)},getChildAt(n){if(n<0||n>=this.children.length)throw new Error(`getChildAt: Index (${n}) does not exist.`);return this.children[n]},setChildIndex(n,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(n),this.addChildAt(n,e)},getChildIndex(n){const e=this.children.indexOf(n);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(n,e){this.allowChildren||Pe(je,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:t}=this;if(e<0||e>t.length)throw new Error(`${n}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(n.parent){const o=n.parent.children.indexOf(n);if(n.parent===this&&o===e)return n;o!==-1&&n.parent.children.splice(o,1)}e===t.length?t.push(n):t.splice(e,0,n),n.parent=this,n.didChange=!0,n._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(n),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",n,this,e),n.emit("added",this),n},swapChildren(n,e){if(n===e)return;const t=this.getChildIndex(n),s=this.getChildIndex(e);this.children[t]=e,this.children[s]=n;const o=this.renderGroup||this.parentRenderGroup;o&&(o.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...n){return n.length===1?this.reparentChildAt(n[0],this.children.length):(n.forEach(e=>this.reparentChildAt(e,this.children.length)),n[0])},reparentChildAt(n,e){if(n.parent===this)return this.setChildIndex(n,e),n;const t=n.worldTransform.clone();n.removeFromParent(),this.addChildAt(n,e);const s=this.worldTransform.clone();return s.invert(),t.prepend(s),n.setFromMatrix(t),n},replaceChild(n,e){n.updateLocalTransform(),this.addChildAt(e,this.getChildIndex(n)),e.setFromMatrix(n.localTransform),e.updateLocalTransform(),this.removeChild(n)}},z_={collectRenderables(n,e,t){this.parentRenderLayer&&this.parentRenderLayer!==t||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(n,e,t):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,n):this.collectRenderablesWithEffects(n,e,t))},collectRenderablesSimple(n,e,t){const s=this.children,o=s.length;for(let a=0;a<o;a++)s[a].collectRenderables(n,e,t)},collectRenderablesWithEffects(n,e,t){const{renderPipes:s}=e;for(let o=0;o<this.effects.length;o++){const a=this.effects[o];s[a.pipe].push(a,this,n)}this.collectRenderablesSimple(n,e,t);for(let o=this.effects.length-1;o>=0;o--){const a=this.effects[o];s[a.pipe].pop(a,this,n)}}};class Ym{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class D_{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){const s=this._tests[t];if(s.test(e))return wn.get(s.maskClass,e)}return e}returnMaskEffect(e){wn.return(e)}}const Bh=new D_;Mt.handleByList(we.MaskEffect,Bh._effectClasses);const j_={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const n=this.renderGroup||this.parentRenderGroup;n&&(n.structureDidChange=!0)},addEffect(n){this.effects.indexOf(n)===-1&&(this.effects.push(n),this.effects.sort((t,s)=>t.priority-s.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(n){const e=this.effects.indexOf(n);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(n){const e=this._maskEffect;e?.mask!==n&&(e&&(this.removeEffect(e),Bh.returnMaskEffect(e),this._maskEffect=null),n!=null&&(this._maskEffect=Bh.getMaskEffect(n),this.addEffect(this._maskEffect)))},get mask(){return this._maskEffect?.mask},setMask(n){this._maskOptions={...this._maskOptions,...n},n.mask&&(this.mask=n.mask),this._markStructureAsChanged()},set filters(n){!Array.isArray(n)&&n&&(n=[n]);const e=this._filterEffect||(this._filterEffect=new Ym);n=n;const t=n?.length>0,s=e.filters?.length>0,o=t!==s;n=Array.isArray(n)?n.slice(0):n,e.filters=Object.freeze(n),o&&(t?this.addEffect(e):(this.removeEffect(e),e.filters=n??null))},get filters(){return this._filterEffect?.filters},set filterArea(n){this._filterEffect||(this._filterEffect=new Ym),this._filterEffect.filterArea=n},get filterArea(){return this._filterEffect?.filterArea}},G_={label:null,get name(){return Pe(je,"Container.name property has been removed, use Container.label instead"),this.label},set name(n){Pe(je,"Container.name property has been removed, use Container.label instead"),this.label=n},getChildByName(n,e=!1){return this.getChildByLabel(n,e)},getChildByLabel(n,e=!1){const t=this.children;for(let s=0;s<t.length;s++){const o=t[s];if(o.label===n||n instanceof RegExp&&n.test(o.label))return o}if(e)for(let s=0;s<t.length;s++){const a=t[s].getChildByLabel(n,!0);if(a)return a}return null},getChildrenByLabel(n,e=!1,t=[]){const s=this.children;for(let o=0;o<s.length;o++){const a=s[o];(a.label===n||n instanceof RegExp&&n.test(a.label))&&t.push(a)}if(e)for(let o=0;o<s.length;o++)s[o].getChildrenByLabel(n,!0,t);return t}},jt=wn.getPool(Re),wr=wn.getPool(Dn),U_=new Re,$_={getFastGlobalBounds(n,e){e||(e=new Dn),e.clear(),this._getGlobalBoundsRecursive(!!n,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const t=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(t.worldTransform),e},_getGlobalBoundsRecursive(n,e,t){let s=e;if(n&&this.parentRenderLayer&&this.parentRenderLayer!==t||this.localDisplayStatus!==7||!this.measurable)return;const o=!!this.effects.length;if((this.renderGroup||o)&&(s=wr.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const c=this.bounds;s.addFrame(c.minX,c.minY,c.maxX,c.maxY,this.groupTransform)}const a=this.children;for(let c=0;c<a.length;c++)a[c]._getGlobalBoundsRecursive(n,s,t)}if(o){let a=!1;const c=this.renderGroup||this.parentRenderGroup;for(let u=0;u<this.effects.length;u++)this.effects[u].addBounds&&(a||(a=!0,s.applyMatrix(c.worldTransform)),this.effects[u].addBounds(s,!0));a&&s.applyMatrix(c.worldTransform.copyTo(U_).invert()),e.addBounds(s),wr.return(s)}else this.renderGroup&&(e.addBounds(s,this.relativeGroupTransform),wr.return(s))}};function By(n,e,t){t.clear();let s,o;return n.parent?e?s=n.parent.worldTransform:(o=jt.get().identity(),s=pd(n,o)):s=Re.IDENTITY,Oy(n,t,s,e),o&&jt.return(o),t.isValid||t.set(0,0,0,0),t}function Oy(n,e,t,s){if(!n.visible||!n.measurable)return;let o;s?o=n.worldTransform:(n.updateLocalTransform(),o=jt.get(),o.appendFrom(n.localTransform,t));const a=e,c=!!n.effects.length;if(c&&(e=wr.get().clear()),n.boundsArea)e.addRect(n.boundsArea,o);else{const u=n.bounds;u&&!u.isEmpty()&&(e.matrix=o,e.addBounds(u));for(let d=0;d<n.children.length;d++)Oy(n.children[d],e,o,s)}if(c){for(let u=0;u<n.effects.length;u++)n.effects[u].addBounds?.(e);a.addBounds(e,Re.IDENTITY),wr.return(e)}s||jt.return(o)}function pd(n,e){const t=n.parent;return t&&(pd(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}function zy(n,e){if(n===16777215||!e)return e;if(e===16777215||!n)return n;const t=n>>16&255,s=n>>8&255,o=n&255,a=e>>16&255,c=e>>8&255,u=e&255,d=t*a/255|0,f=s*c/255|0,p=o*u/255|0;return(d<<16)+(f<<8)+p}const Xm=16777215;function qm(n,e){return n===Xm?e:e===Xm?n:zy(n,e)}function bl(n){return((n&255)<<16)+(n&65280)+(n>>16&255)}const W_={getGlobalAlpha(n){if(n)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,t=this.parent;for(;t;)e*=t.alpha,t=t.parent;return e},getGlobalTransform(n=new Re,e){if(e)return n.copyFrom(this.worldTransform);this.updateLocalTransform();const t=pd(this,jt.get().identity());return n.appendFrom(this.localTransform,t),jt.return(t),n},getGlobalTint(n){if(n)return this.renderGroup?bl(this.renderGroup.worldColor):this.parentRenderGroup?bl(qm(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,t=this.parent;for(;t;)e=qm(e,t.localColor),t=t.parent;return bl(e)}};function Dy(n,e,t){return e.clear(),t||(t=Re.IDENTITY),jy(n,e,t,n,!0),e.isValid||e.set(0,0,0,0),e}function jy(n,e,t,s,o){let a;if(o)a=jt.get(),a=t.copyTo(a);else{if(!n.visible||!n.measurable)return;n.updateLocalTransform();const d=n.localTransform;a=jt.get(),a.appendFrom(d,t)}const c=e,u=!!n.effects.length;if(u&&(e=wr.get().clear()),n.boundsArea)e.addRect(n.boundsArea,a);else{n.renderPipeId&&(e.matrix=a,e.addBounds(n.bounds));const d=n.children;for(let f=0;f<d.length;f++)jy(d[f],e,a,s,!1)}if(u){for(let d=0;d<n.effects.length;d++)n.effects[d].addLocalBounds?.(e,s);c.addBounds(e,Re.IDENTITY),wr.return(e)}jt.return(a)}function Gy(n,e){const t=n.children;for(let s=0;s<t.length;s++){const o=t[s],a=o.uid,c=(o._didViewChangeTick&65535)<<16|o._didContainerChangeTick&65535,u=e.index;(e.data[u]!==a||e.data[u+1]!==c)&&(e.data[e.index]=a,e.data[e.index+1]=c,e.didChange=!0),e.index=u+2,o.children.length&&Gy(o,e)}return e.didChange}const V_=new Re,H_={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(n,e){const t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=n/e*t:this.scale.x=t},_setHeight(n,e){const t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=n/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Dn});const n=this._localBoundsCacheData;return n.index=1,n.didChange=!1,n.data[0]!==this._didViewChangeTick&&(n.didChange=!0,n.data[0]=this._didViewChangeTick),Gy(this,n),n.didChange&&Dy(this,n.localBounds,V_),n.localBounds},getBounds(n,e){return By(this,n,e||new Dn)}},Y_={_onRender:null,set onRender(n){const e=this.renderGroup||this.parentRenderGroup;if(!n){this._onRender&&e?.removeOnRender(this),this._onRender=null;return}this._onRender||e?.addOnRender(this),this._onRender=n},get onRender(){return this._onRender}},X_={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(n){this._zIndex!==n&&(this._zIndex=n,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(q_))}};function q_(n,e){return n._zIndex-e._zIndex}const Q_={getGlobalPosition(n=new Bt,e=!1){return this.parent?this.parent.toGlobal(this._position,n,e):(n.x=this._position.x,n.y=this._position.y),n},toGlobal(n,e,t=!1){const s=this.getGlobalTransform(jt.get(),t);return e=s.apply(n,e),jt.return(s),e},toLocal(n,e,t,s){e&&(n=e.toGlobal(n,t,s));const o=this.getGlobalTransform(jt.get(),s);return t=o.applyInverse(n,t),jt.return(o),t}};class Uy{constructor(){this.uid=dt("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let K_=0;class Z_{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new xi(this.textureOptions)}createTexture(e,t,s){const o=new Un({...this.textureOptions,width:e,height:t,resolution:1,antialias:s,autoGarbageCollect:!1});return new Ne({source:o,label:`texturePool_${K_++}`})}getOptimalTexture(e,t,s=1,o){let a=Math.ceil(e*s-1e-6),c=Math.ceil(t*s-1e-6);a=yi(a),c=yi(c);const u=(a<<17)+(c<<1)+(o?1:0);this._texturePool[u]||(this._texturePool[u]=[]);let d=this._texturePool[u].pop();return d||(d=this.createTexture(a,c,o)),d.source._resolution=s,d.source.width=a/s,d.source.height=c/s,d.source.pixelWidth=a,d.source.pixelHeight=c,d.frame.x=0,d.frame.y=0,d.frame.width=e,d.frame.height=t,d.updateUvs(),this._poolKeyHash[d.uid]=u,d}getSameSizeTexture(e,t=!1){const s=e.source;return this.getOptimalTexture(e.width,e.height,s._resolution,t)}returnTexture(e,t=!1){const s=this._poolKeyHash[e.uid];t&&(e.source.style=this.textureStyle),this._texturePool[s].push(e)}clear(e){if(e=e!==!1,e)for(const t in this._texturePool){const s=this._texturePool[t];if(s)for(let o=0;o<s.length;o++)s[o].destroy(!0)}this._texturePool={}}}const _i=new Z_;Ho.register(_i);class J_{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Re,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Uy,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const t=e.children;for(let s=0;s<t.length;s++){const o=t[s];o._updateFlags=15,this.addChild(o)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(_i.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const e=this._parentCacheAsTextureRenderGroup;e&&!e.textureNeedsUpdate&&e.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const t=e.children;for(let s=0;s<t.length;s++)this.addChild(t[s])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const t=e.children;for(let s=0;s<t.length;s++)this.removeChild(t[s])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const t=this.root.children;for(let s=0;s<t.length;s++)this._getChildren(t[s],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;const s=e.children;for(let o=0;o<s.length;o++)this._getChildren(s[o],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Re),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Re),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Re),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function ew(n,e,t={}){for(const s in e)!t[s]&&e[s]!==void 0&&(n[s]=e[s])}const Qu=new Pt(null),ol=new Pt(null),Ku=new Pt(null,1,1),al=new Pt(null),Qm=1,tw=2,Zu=4;class Et extends Gn{constructor(e={}){super(),this.uid=dt("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new Re,this.relativeGroupTransform=new Re,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Pt(this,0,0),this._scale=Ku,this._pivot=ol,this._origin=al,this._skew=Qu,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],ew(this,e,{children:!0,parent:!0,effects:!0}),e.children?.forEach(t=>this.addChild(t)),e.parent?.addChild(this)}static mixin(e){Pe("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),Mt.mixin(Et,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||Pe(je,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let o=0;o<e.length;o++)this.addChild(e[o]);return e[0]}const t=e[0],s=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),s&&(s.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,s&&s.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let o=0;o<e.length;o++)this.removeChild(e[o]);return e[0]}const t=e[0],s=this.children.indexOf(t);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,s),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e?.removeChild(this),this.renderGroup=wn.get(J_,this),this.groupTransform=Re.IDENTITY,e?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e?.removeChild(this),wn.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Re),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*p_}set angle(e){this.rotation=e*m_}get pivot(){return this._pivot===ol&&(this._pivot=new Pt(this,0,0)),this._pivot}set pivot(e){this._pivot===ol&&(this._pivot=new Pt(this,0,0),this._origin!==al&&et("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===Qu&&(this._skew=new Pt(this,0,0)),this._skew}set skew(e){this._skew===Qu&&(this._skew=new Pt(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===Ku&&(this._scale=new Pt(this,1,1)),this._scale}set scale(e){this._scale===Ku&&(this._scale=new Pt(this,0,0)),typeof e=="string"&&(e=parseFloat(e)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===al&&(this._origin=new Pt(this,0,0)),this._origin}set origin(e){this._origin===al&&(this._origin=new Pt(this,0,0),this._pivot!==ol&&et("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});const t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){const s=this.getLocalBounds();typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,s.width),t!==void 0&&this._setHeight(t,s.height)}_updateSkew(){const e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this.origin.set(typeof e.originX=="number"?e.originX:this.origin.x,typeof e.originY=="number"?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const t=this.localTransform,s=this._scale,o=this._pivot,a=this._origin,c=this._position,u=s._x,d=s._y,f=o._x,p=o._y,g=-a._x,x=-a._y;t.a=this._cx*u,t.b=this._sx*u,t.c=this._cy*d,t.d=this._sy*d,t.tx=c._x-(f*t.a+p*t.c)+(g*t.a+x*t.c)-g,t.ty=c._y-(f*t.b+p*t.d)+(g*t.b+x*t.d)-x}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=Qm,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const s=yt.shared.setValue(e??16777215).toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=Qm,this._onUpdate())}get tint(){return bl(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=tw,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Zu,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Zu,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=Zu,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){if(this.destroyed)return;this.destroyed=!0;let t;if(this.children.length&&(t=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e?.children)&&t)for(let o=0;o<t.length;++o)t[o].destroy(e);this.renderGroup?.destroy(),this.renderGroup=null}}Mt.mixin(Et,O_,$_,Q_,Y_,H_,j_,G_,X_,R_,N_,W_,z_);class md extends Et{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new Dn(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const t=this.bounds,{x:s,y:o}=e;return s>=t.minX&&s<=t.maxX&&o>=t.minY&&o<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){super.destroy(e),this._bounds=null;for(const t in this._gpuData)this._gpuData[t].destroy?.();this._gpuData=null}collectRenderablesSimple(e,t,s){const{renderPipes:o}=t;o.blendMode.pushBlendMode(this,this.groupBlendMode,e),o[this.renderPipeId].addRenderable(this,e),this.didViewUpdate=!1;const c=this.children,u=c.length;for(let d=0;d<u;d++)c[d].collectRenderables(e,t,s);o.blendMode.popBlendMode(e)}}class sr extends md{constructor(e=Ne.EMPTY){e instanceof Ne&&(e={texture:e});const{texture:t=Ne.EMPTY,anchor:s,roundPixels:o,width:a,height:c,...u}=e;super({label:"Sprite",...u}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Pt({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:t.defaultAnchor&&(this.anchor=t.defaultAnchor),this.texture=t,this.allowChildren=!1,this.roundPixels=o??!1,a!==void 0&&(this.width=a),c!==void 0&&(this.height=c)}static from(e,t=!1){return e instanceof Ne?new sr(e):new sr(Ne.from(e,t))}set texture(e){e||(e=Ne.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return S_(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Pe("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,t=this._texture,s=this._bounds,{width:o,height:a}=t.orig;s.minX=-e._x*o,s.maxX=s.minX+o,s.minY=-e._y*a,s.maxY=s.minY+a}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){const s=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(s)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}}const nw=new Dn;function $y(n,e,t){const s=nw;n.measurable=!0,By(n,t,s),e.addBoundsMask(s),n.measurable=!1}function Wy(n,e,t){const s=wr.get();n.measurable=!0;const o=jt.get().identity(),a=Vy(n,t,o);Dy(n,s,a),n.measurable=!1,e.addBoundsMask(s),jt.return(o),wr.return(s)}function Vy(n,e,t){return n?(n!==e&&(Vy(n.parent,e,t),n.updateLocalTransform(),t.append(n.localTransform)),t):(et("Mask bounds, renderable is not inside the root container"),t)}class Hy{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof sr),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(e,t){this.inverse||$y(this.mask,e,t)}addLocalBounds(e,t){Wy(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof sr}}Hy.extension=we.MaskEffect;class Yy{constructor(e){this.priority=0,this.pipe="colorMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}Yy.extension=we.MaskEffect;class Xy{constructor(e){this.priority=0,this.pipe="stencilMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(e,t){$y(this.mask,e,t)}addLocalBounds(e,t){Wy(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof Et}}Xy.extension=we.MaskEffect;const rw={createCanvas:(n,e)=>{const t=document.createElement("canvas");return t.width=n,t.height=e,t},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,e)=>fetch(n,e),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")};let Km=rw;const qe={get(){return Km},set(n){Km=n}};class qy extends Un{constructor(e){e.resource||(e.resource=qe.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,s=this._resolution){const o=super.resize(e,t,s);return o&&this.resizeCanvas(),o}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}qy.extension=we.TextureSource;class Is extends Un{constructor(e){super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}Is.extension=we.TextureSource;var Oh=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(Oh||{});class Ju{constructor(e,t=null,s=0,o=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=s,this._once=o}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const Qy=class tn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Ju(null,null,1/0),this.deltaMS=1/tn.targetFPMS,this.elapsedMS=1/tn.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,s=Oh.NORMAL){return this._addListener(new Ju(e,t,s))}addOnce(e,t,s=Oh.NORMAL){return this._addListener(new Ju(e,t,s,!0))}_addListener(e){let t=this._head.next,s=this._head;if(!t)e.connect(s);else{for(;t;){if(e.priority>t.priority){e.connect(s);break}s=t,t=t.next}e.previous||e.connect(s)}return this._startIfPossible(),this}remove(e,t){let s=this._head.next;for(;s;)s.match(e,t)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const a=e-this._lastFrame|0;if(a<this._minElapsedMS)return;this._lastFrame=e-a%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*tn.targetFPMS;const s=this._head;let o=s.next;for(;o;)o=o.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),s=Math.min(Math.max(0,t)/1e3,tn.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!tn._shared){const e=tn._shared=new tn;e.autoStart=!0,e._protected=!0}return tn._shared}static get system(){if(!tn._system){const e=tn._system=new tn;e.autoStart=!0,e._protected=!0}return tn._system}};Qy.targetFPMS=.06;let ll=Qy,eh;async function Ky(){return eh??(eh=(async()=>{const e=qe.get().createCanvas(1,1).getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const t=await new Promise(c=>{const u=document.createElement("video");u.onloadeddata=()=>c(u),u.onerror=()=>c(null),u.autoplay=!1,u.crossOrigin="anonymous",u.preload="auto",u.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",u.load()});if(!t)return"premultiply-alpha-on-upload";const s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const a=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,a),e.deleteFramebuffer(o),e.deleteTexture(s),e.getExtension("WEBGL_lose_context")?.loseContext(),a[0]<=a[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),eh}const Gl=class Zy extends Un{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...Zy.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=ll.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await Ky(),this._load=new Promise((s,o)=>{this.isValid?s(this):(this._resolve=s,this._reject=o,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(ll.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(ll.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(ll.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};Gl.extension=we.TextureSource;Gl.defaultOptions={...Un.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Gl.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Po=Gl;const Nn=(n,e,t=!1)=>(Array.isArray(n)||(n=[n]),e?n.map(s=>typeof s=="string"||t?e(s):s):n);class sw{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||et(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const s=Nn(e);let o;for(let d=0;d<this.parsers.length;d++){const f=this.parsers[d];if(f.test(t)){o=f.getCacheableAssets(s,t);break}}const a=new Map(Object.entries(o||{}));o||s.forEach(d=>{a.set(d,t)});const c=[...a.keys()],u={cacheKeys:c,keys:s};s.forEach(d=>{this._cacheMap.set(d,u)}),c.forEach(d=>{const f=o?o[d]:t;this._cache.has(d)&&this._cache.get(d)!==f&&et("[Cache] already has key:",d),this._cache.set(d,a.get(d))})}remove(e){if(!this._cacheMap.has(e)){et(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(o=>{this._cache.delete(o)}),t.keys.forEach(o=>{this._cacheMap.delete(o)})}get parsers(){return this._parsers}}const Je=new sw,zh=[];Mt.handleByList(we.TextureSource,zh);function Jy(n={}){const e=n&&n.resource,t=e?n.resource:n,s=e?n:{resource:n};for(let o=0;o<zh.length;o++){const a=zh[o];if(a.test(t))return new a(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}function iw(n={},e=!1){const t=n&&n.resource,s=t?n.resource:n,o=t?n:{resource:n};if(!e&&Je.has(s))return Je.get(s);const a=new Ne({source:Jy(o)});return a.on("destroy",()=>{Je.has(s)&&Je.remove(s)}),e||Je.set(s,a),a}function ow(n,e=!1){return typeof n=="string"?Je.get(n):n instanceof Un?new Ne({source:n}):iw(n,e)}Ne.from=ow;Un.from=Jy;Mt.add(Hy,Yy,Xy,Po,Is,qy,fd);var Zr=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(Zr||{});function Ln(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function po(n){return n.split("?")[0].split("#")[0]}function aw(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function lw(n,e,t){return n.replace(new RegExp(aw(e),"g"),t)}function cw(n,e){let t="",s=0,o=-1,a=0,c=-1;for(let u=0;u<=n.length;++u){if(u<n.length)c=n.charCodeAt(u);else{if(c===47)break;c=47}if(c===47){if(!(o===u-1||a===1))if(o!==u-1&&a===2){if(t.length<2||s!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const d=t.lastIndexOf("/");if(d!==t.length-1){d===-1?(t="",s=0):(t=t.slice(0,d),s=t.length-1-t.lastIndexOf("/")),o=u,a=0;continue}}else if(t.length===2||t.length===1){t="",s=0,o=u,a=0;continue}}}else t.length>0?t+=`/${n.slice(o+1,u)}`:t=n.slice(o+1,u),s=u-o-1;o=u,a=0}else c===46&&a!==-1?++a:a=-1}return t}const an={toPosix(n){return lw(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){Ln(n),n=this.toPosix(n);const e=/^file:\/\/\//.exec(n);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(n);return t?t[0]:""},toAbsolute(n,e,t){if(Ln(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const s=po(this.toPosix(e??qe.get().getBaseUrl())),o=po(this.toPosix(t??this.rootname(s)));return n=this.toPosix(n),n.startsWith("/")?an.join(o,n.slice(1)):this.isAbsolute(n)?n:this.join(s,n)},normalize(n){if(Ln(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let e="";const t=n.startsWith("/");this.hasProtocol(n)&&(e=this.rootname(n),n=n.slice(e.length));const s=n.endsWith("/");return n=cw(n),n.length>0&&s&&(n+="/"),t?`/${n}`:e+n},isAbsolute(n){return Ln(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let e;for(let t=0;t<n.length;++t){const s=n[t];if(Ln(s),s.length>0)if(e===void 0)e=s;else{const o=n[t-1]??"";this.joinExtensions.includes(this.extname(o).toLowerCase())?e+=`/../${s}`:e+=`/${s}`}}return e===void 0?".":this.normalize(e)},dirname(n){if(Ln(n),n.length===0)return".";n=this.toPosix(n);let e=n.charCodeAt(0);const t=e===47;let s=-1,o=!0;const a=this.getProtocol(n),c=n;n=n.slice(a.length);for(let u=n.length-1;u>=1;--u)if(e=n.charCodeAt(u),e===47){if(!o){s=u;break}}else o=!1;return s===-1?t?"/":this.isUrl(c)?a+n:a:t&&s===1?"//":a+n.slice(0,s)},rootname(n){Ln(n),n=this.toPosix(n);let e="";if(n.startsWith("/")?e="/":e=this.getProtocol(n),this.isUrl(n)){const t=n.indexOf("/",e.length);t!==-1?e=n.slice(0,t):e=n,e.endsWith("/")||(e+="/")}return e},basename(n,e){Ln(n),e&&Ln(e),n=po(this.toPosix(n));let t=0,s=-1,o=!0,a;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e.length===n.length&&e===n)return"";let c=e.length-1,u=-1;for(a=n.length-1;a>=0;--a){const d=n.charCodeAt(a);if(d===47){if(!o){t=a+1;break}}else u===-1&&(o=!1,u=a+1),c>=0&&(d===e.charCodeAt(c)?--c===-1&&(s=a):(c=-1,s=u))}return t===s?s=u:s===-1&&(s=n.length),n.slice(t,s)}for(a=n.length-1;a>=0;--a)if(n.charCodeAt(a)===47){if(!o){t=a+1;break}}else s===-1&&(o=!1,s=a+1);return s===-1?"":n.slice(t,s)},extname(n){Ln(n),n=po(this.toPosix(n));let e=-1,t=0,s=-1,o=!0,a=0;for(let c=n.length-1;c>=0;--c){const u=n.charCodeAt(c);if(u===47){if(!o){t=c+1;break}continue}s===-1&&(o=!1,s=c+1),u===46?e===-1?e=c:a!==1&&(a=1):e!==-1&&(a=-1)}return e===-1||s===-1||a===0||a===1&&e===s-1&&e===t+1?"":n.slice(e,s)},parse(n){Ln(n);const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;n=po(this.toPosix(n));let t=n.charCodeAt(0);const s=this.isAbsolute(n);let o;e.root=this.rootname(n),s||this.hasProtocol(n)?o=1:o=0;let a=-1,c=0,u=-1,d=!0,f=n.length-1,p=0;for(;f>=o;--f){if(t=n.charCodeAt(f),t===47){if(!d){c=f+1;break}continue}u===-1&&(d=!1,u=f+1),t===46?a===-1?a=f:p!==1&&(p=1):a!==-1&&(p=-1)}return a===-1||u===-1||p===0||p===1&&a===u-1&&a===c+1?u!==-1&&(c===0&&s?e.base=e.name=n.slice(1,u):e.base=e.name=n.slice(c,u)):(c===0&&s?(e.name=n.slice(1,a),e.base=n.slice(1,u)):(e.name=n.slice(c,a),e.base=n.slice(c,u)),e.ext=n.slice(a,u)),e.dir=this.dirname(n),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function e0(n,e,t,s,o){const a=e[t];for(let c=0;c<a.length;c++){const u=a[c];t<e.length-1?e0(n.replace(s[t],u),e,t+1,s,o):o.push(n.replace(s[t],u))}}function uw(n){const e=/\{(.*?)\}/g,t=n.match(e),s=[];if(t){const o=[];t.forEach(a=>{const c=a.substring(1,a.length-1).split(",");o.push(c)}),e0(n,o,0,t,s)}else s.push(n);return s}const El=n=>!Array.isArray(n);class ki{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`).join("&")}}getAlias(e){const{alias:t,src:s}=e;return Nn(t||s,a=>typeof a=="string"?a:Array.isArray(a)?a.map(c=>c?.src??c):a?.src?a.src:a,!0)}addManifest(e){this._manifest&&et("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const s=[];let o=t;Array.isArray(t)||(o=Object.entries(t).map(([a,c])=>typeof c=="string"||Array.isArray(c)?{alias:a,src:c}:{alias:a,...c})),o.forEach(a=>{const c=a.src,u=a.alias;let d;if(typeof u=="string"){const f=this._createBundleAssetId(e,u);s.push(f),d=[u,f]}else{const f=u.map(p=>this._createBundleAssetId(e,p));s.push(...f),d=[...u,...f]}this.add({...a,alias:d,src:c})}),this._bundles[e]=s}add(e){const t=[];Array.isArray(e)?t.push(...e):t.push(e);let s;s=a=>{this.hasKey(a)&&et(`[Resolver] already has key: ${a} overwriting`)},Nn(t).forEach(a=>{const{src:c}=a;let{data:u,format:d,loadParser:f,parser:p}=a;const g=Nn(c).map(b=>typeof b=="string"?uw(b):Array.isArray(b)?b:[b]),x=this.getAlias(a);Array.isArray(x)?x.forEach(s):s(x);const v=[],_=b=>({...this._parsers.find(k=>k.test(b))?.parse(b),src:b});g.forEach(b=>{b.forEach(w=>{let k={};if(typeof w!="object"?k=_(w):(u=w.data??u,d=w.format??d,(w.loadParser||w.parser)&&(f=w.loadParser??f,p=w.parser??p),k={..._(w.src),...w}),!x)throw new Error(`[Resolver] alias is undefined for this asset: ${k.src}`);k=this._buildResolvedAsset(k,{aliases:x,data:u,format:d,loadParser:f,parser:p,progressSize:a.progressSize}),v.push(k)})}),x.forEach(b=>{this._assetMap[b]=v})})}resolveBundle(e){const t=El(e);e=Nn(e);const s={};return e.forEach(o=>{const a=this._bundles[o];if(a){const c=this.resolve(a),u={};for(const d in c){const f=c[d];u[this._extractAssetIdFromBundle(o,d)]=f}s[o]=u}}),t?s[e[0]]:s}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const s={};for(const o in t)s[o]=t[o].src;return s}return t.src}resolve(e){const t=El(e);e=Nn(e);const s={};return e.forEach(o=>{if(!this._resolverHash[o])if(this._assetMap[o]){let a=this._assetMap[o];const c=this._getPreferredOrder(a);c?.priority.forEach(u=>{c.params[u].forEach(d=>{const f=a.filter(p=>p[u]?p[u]===d:!1);f.length&&(a=f)})}),this._resolverHash[o]=a[0]}else this._resolverHash[o]=this._buildResolvedAsset({alias:[o],src:o},{});s[o]=this._resolverHash[o]}),t?s[e[0]]:s}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const s=e[t],o=this._preferredOrder.find(a=>a.params.format.includes(s.format));if(o)return o}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){const{aliases:s,data:o,loadParser:a,parser:c,format:u,progressSize:d}=t;return(this._basePath||this._rootPath)&&(e.src=an.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=s??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...o||{},...e.data},e.loadParser=a??e.loadParser,e.parser=c??e.parser,e.format=u??e.format??hw(e.src),d!==void 0&&(e.progressSize=d),e}}ki.RETINA_PREFIX=/@([0-9\.]+)x/;function hw(n){return n.split(".").pop().split("?").shift().split("#").shift()}const Dh=(n,e)=>{const t=e.split("?")[1];return t&&(n+=`?${t}`),n},t0=class bo{constructor(e,t){this.linkedSheets=[];let s=e;e?.source instanceof Un&&(s={texture:e,data:t});const{texture:o,data:a,cachePrefix:c=""}=s;this.cachePrefix=c,this._texture=o instanceof Ne?o:null,this.textureSource=o.source,this.textures={},this.animations={},this.data=a;const u=parseFloat(a.meta.scale);u?(this.resolution=u,o.source.resolution=this.resolution):this.resolution=o.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=bo.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const s=bo.BATCH_SIZE;for(;t-e<s&&t<this._frameKeys.length;){const o=this._frameKeys[t],a=this._frames[o],c=a.frame;if(c){let u=null,d=null;const f=a.trimmed!==!1&&a.sourceSize?a.sourceSize:a.frame,p=new tt(0,0,Math.floor(f.w)/this.resolution,Math.floor(f.h)/this.resolution);a.rotated?u=new tt(Math.floor(c.x)/this.resolution,Math.floor(c.y)/this.resolution,Math.floor(c.h)/this.resolution,Math.floor(c.w)/this.resolution):u=new tt(Math.floor(c.x)/this.resolution,Math.floor(c.y)/this.resolution,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution),a.trimmed!==!1&&a.spriteSourceSize&&(d=new tt(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution)),this.textures[o]=new Ne({source:this.textureSource,frame:u,orig:p,trim:d,rotate:a.rotated?2:0,defaultAnchor:a.anchor,defaultBorders:a.borders,label:o.toString()})}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let s=0;s<e[t].length;s++){const o=e[t][s];this.animations[t].push(this.textures[o])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*bo.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*bo.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(const t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};t0.BATCH_SIZE=1e3;let Zm=t0;const dw=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function n0(n,e,t){const s={};if(n.forEach(o=>{s[o]=e}),Object.keys(e.textures).forEach(o=>{s[`${e.cachePrefix}${o}`]=e.textures[o]}),!t){const o=an.dirname(n[0]);e.linkedSheets.forEach((a,c)=>{const u=n0([`${o}/${e.data.meta.related_multi_packs[c]}`],a,!0);Object.assign(s,u)})}return s}const fw={extension:we.Asset,cache:{test:n=>n instanceof Zm,getCacheableAssets:(n,e)=>n0(n,e,!1)},resolver:{extension:{type:we.ResolveParser,name:"resolveSpritesheet"},test:n=>{const t=n.split("?")[0].split("."),s=t.pop(),o=t.pop();return s==="json"&&dw.includes(o)},parse:n=>{const e=n.split(".");return{resolution:parseFloat(ki.RETINA_PREFIX.exec(n)?.[1]??"1"),format:e[e.length-2],src:n}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:we.LoadParser,priority:Zr.Normal,name:"spritesheetLoader"},async testParse(n,e){return an.extname(e.src).toLowerCase()===".json"&&!!n.frames},async parse(n,e,t){const{texture:s,imageFilename:o,textureOptions:a,cachePrefix:c}=e?.data??{};let u=an.dirname(e.src);u&&u.lastIndexOf("/")!==u.length-1&&(u+="/");let d;if(s instanceof Ne)d=s;else{const g=Dh(u+(o??n.meta.image),e.src);d=(await t.load([{src:g,data:a}]))[g]}const f=new Zm({texture:d.source,data:n,cachePrefix:c});await f.parse();const p=n?.meta?.related_multi_packs;if(Array.isArray(p)){const g=[];for(const v of p){if(typeof v!="string")continue;let _=u+v;e.data?.ignoreMultiPack||(_=Dh(_,e.src),g.push(t.load({src:_,data:{textureOptions:a,ignoreMultiPack:!0}})))}const x=await Promise.all(g);f.linkedSheets=x,x.forEach(v=>{v.linkedSheets=[f].concat(f.linkedSheets.filter(_=>_!==v))})}return f},async unload(n,e,t){await t.unload(n.textureSource._sourceOrigin),n.destroy(!1)}}};Mt.add(fw);const th=Object.create(null),Jm=Object.create(null);function gd(n,e){let t=Jm[n];return t===void 0&&(th[e]===void 0&&(th[e]=1),Jm[n]=t=th[e]++),t}let cl;function r0(){return(!cl||cl?.isContextLost())&&(cl=qe.get().createCanvas().getContext("webgl",{})),cl}let ul;function pw(){if(!ul){ul="mediump";const n=r0();n&&n.getShaderPrecisionFormat&&(ul=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision?"highp":"mediump")}return ul}function mw(n,e,t){return e?n:t?(n=n.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${n}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${n}
        `}function gw(n,e,t){const s=t?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(n.substring(0,9)!=="precision"){let o=t?e.requestedFragmentPrecision:e.requestedVertexPrecision;return o==="highp"&&s!=="highp"&&(o="mediump"),`precision ${o} float;
${n}`}else if(s!=="highp"&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}function yw(n,e){return e?`#version 300 es
${n}`:n}const xw={},vw={};function _w(n,{name:e="pixi-program"},t=!0){e=e.replace(/\s+/g,"-"),e+=t?"-fragment":"-vertex";const s=t?xw:vw;return s[e]?(s[e]++,e+=`-${s[e]}`):s[e]=1,n.indexOf("#define SHADER_NAME")!==-1?n:`${`#define SHADER_NAME ${e}`}
${n}`}function ww(n,e){return e?n.replace("#version 300 es",""):n}const nh={stripVersion:ww,ensurePrecision:gw,addProgramDefines:mw,setProgramName:_w,insertVersion:yw},mo=Object.create(null),s0=class jh{constructor(e){e={...jh.defaultOptions,...e};const t=e.fragment.indexOf("#version 300 es")!==-1,s={stripVersion:t,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:pw()},setProgramName:{name:e.name},addProgramDefines:t,insertVersion:t};let o=e.fragment,a=e.vertex;Object.keys(nh).forEach(c=>{const u=s[c];o=nh[c](o,u,!0),a=nh[c](a,u,!1)}),this.fragment=o,this.vertex=a,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=gd(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,mo[this._cacheKey]=null}static from(e){const t=`${e.vertex}:${e.fragment}`;return mo[t]||(mo[t]=new jh(e),mo[t]._cacheKey=t),mo[t]}};s0.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let Ul=s0;const eg={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function Sw(n){return eg[n]??eg.float32}const bw={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function kw({source:n,entryPoint:e}){const t={},s=n.indexOf(`fn ${e}`);if(s!==-1){const o=n.indexOf("->",s);if(o!==-1){const a=n.substring(s,o),c=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let u;for(;(u=c.exec(a))!==null;){const d=bw[u[3]]??"float32";t[u[2]]={location:parseInt(u[1],10),format:d,stride:Sw(d).stride,offset:0,instance:!1,start:0}}}}return t}function rh(n){const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,t=/@group\((\d+)\)/,s=/@binding\((\d+)\)/,o=/var(<[^>]+>)? (\w+)/,a=/:\s*(\w+)/,c=/struct\s+(\w+)\s*{([^}]+)}/g,u=/(\w+)\s*:\s*([\w\<\>]+)/g,d=/struct\s+(\w+)/,f=n.match(e)?.map(g=>({group:parseInt(g.match(t)[1],10),binding:parseInt(g.match(s)[1],10),name:g.match(o)[2],isUniform:g.match(o)[1]==="<uniform>",type:g.match(a)[1]}));if(!f)return{groups:[],structs:[]};const p=n.match(c)?.map(g=>{const x=g.match(d)[1],v=g.match(u).reduce((_,b)=>{const[w,k]=b.split(":");return _[w.trim()]=k.trim(),_},{});return v?{name:x,members:v}:null}).filter(({name:g})=>f.some(x=>x.type===g))??[];return{groups:f,structs:p}}var ko=(n=>(n[n.VERTEX=1]="VERTEX",n[n.FRAGMENT=2]="FRAGMENT",n[n.COMPUTE=4]="COMPUTE",n))(ko||{});function Cw({groups:n}){const e=[];for(let t=0;t<n.length;t++){const s=n[t];e[s.group]||(e[s.group]=[]),s.isUniform?e[s.group].push({binding:s.binding,visibility:ko.VERTEX|ko.FRAGMENT,buffer:{type:"uniform"}}):s.type==="sampler"?e[s.group].push({binding:s.binding,visibility:ko.FRAGMENT,sampler:{type:"filtering"}}):s.type==="texture_2d"&&e[s.group].push({binding:s.binding,visibility:ko.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function Aw({groups:n}){const e=[];for(let t=0;t<n.length;t++){const s=n[t];e[s.group]||(e[s.group]={}),e[s.group][s.name]=s.binding}return e}function Tw(n,e){const t=new Set,s=new Set,o=[...n.structs,...e.structs].filter(c=>t.has(c.name)?!1:(t.add(c.name),!0)),a=[...n.groups,...e.groups].filter(c=>{const u=`${c.name}-${c.binding}`;return s.has(u)?!1:(s.add(u),!0)});return{structs:o,groups:a}}const go=Object.create(null);class Ci{constructor(e){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:t,vertex:s,layout:o,gpuLayout:a,name:c}=e;if(this.name=c,this.fragment=t,this.vertex=s,t.source===s.source){const u=rh(t.source);this.structsAndGroups=u}else{const u=rh(s.source),d=rh(t.source);this.structsAndGroups=Tw(u,d)}this.layout=o??Aw(this.structsAndGroups),this.gpuLayout=a??Cw(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:t}=this,s=e.source+t.source+e.entryPoint+t.entryPoint;this._layoutKey=gd(s,"program")}get attributeData(){return this._attributeData??(this._attributeData=kw(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,go[this._cacheKey]=null}static from(e){const t=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return go[t]||(go[t]=new Ci(e),go[t]._cacheKey=t),go[t]}}const i0=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],Pw=i0.reduce((n,e)=>(n[e]=!0,n),{});function Mw(n,e){switch(n){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const o0=class a0{constructor(e,t){this._touched=0,this.uid=dt("uniform"),this._resourceType="uniformGroup",this._resourceId=dt("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,t={...a0.defaultOptions,...t},this.uniformStructures=e;const s={};for(const o in e){const a=e[o];if(a.name=o,a.size=a.size??1,!Pw[a.type]){const c=a.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(c){const[,u,d]=c;throw new Error(`Uniform type ${a.type} is not supported. Use type: '${u}', size: ${d} instead.`)}throw new Error(`Uniform type ${a.type} is not supported. Supported uniform types are: ${i0.join(", ")}`)}a.value??(a.value=Mw(a.type,a.size)),s[o]=a.value}this.uniforms=s,this._dirtyId=1,this.ubo=t.ubo,this.isStatic=t.isStatic,this._signature=gd(Object.keys(s).map(o=>`${o}-${e[o].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};o0.defaultOptions={ubo:!1,isStatic:!1};let l0=o0;class kl{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(const s in e){const o=e[s];this.setResource(o,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let t=0;for(const s in this.resources)e[t++]=this.resources[s]._resourceId;this._key=e.join("|")}setResource(e,t){const s=this.resources[t];e!==s&&(s&&e.off?.("change",this.onResourceChange,this),e.on?.("change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){const t=this.resources;for(const s in t)t[s]._touched=e}destroy(){const e=this.resources;for(const t in e)e[t]?.off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const t=this.resources;for(const s in t)t[s]===e&&(t[s]=null)}else this._updateKey()}}var Fo=(n=>(n[n.WEBGL=1]="WEBGL",n[n.WEBGPU=2]="WEBGPU",n[n.BOTH=3]="BOTH",n))(Fo||{});class $l extends Gn{constructor(e){super(),this.uid=dt("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:t,glProgram:s,groups:o,resources:a,compatibleRenderers:c,groupMap:u}=e;this.gpuProgram=t,this.glProgram=s,c===void 0&&(c=0,t&&(c|=Fo.WEBGPU),s&&(c|=Fo.WEBGL)),this.compatibleRenderers=c;const d={};if(!a&&!o&&(a={}),a&&o)throw new Error("[Shader] Cannot have both resources and groups");if(!t&&o&&!u)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!t&&o&&u)for(const f in u)for(const p in u[f]){const g=u[f][p];d[g]={group:f,binding:p,name:g}}else if(t&&o&&!u){const f=t.structsAndGroups.groups;u={},f.forEach(p=>{u[p.group]=u[p.group]||{},u[p.group][p.binding]=p.name,d[p.name]=p})}else if(a){o={},u={},t&&t.structsAndGroups.groups.forEach(g=>{u[g.group]=u[g.group]||{},u[g.group][g.binding]=g.name,d[g.name]=g});let f=0;for(const p in a)d[p]||(o[99]||(o[99]=new kl,this._ownedBindGroups.push(o[99])),d[p]={group:99,binding:f,name:p},u[99]=u[99]||{},u[99][f]=p,f++);for(const p in a){const g=p;let x=a[p];!x.source&&!x._resourceType&&(x=new l0(x));const v=d[g];v&&(o[v.group]||(o[v.group]=new kl,this._ownedBindGroups.push(o[v.group])),o[v.group].setResource(x,v.binding))}}this.groups=o,this._uniformBindMap=u,this.resources=this._buildResourceAccessor(o,d)}addResource(e,t,s){var o,a;(o=this._uniformBindMap)[t]||(o[t]={}),(a=this._uniformBindMap[t])[s]||(a[s]=e),this.groups[t]||(this.groups[t]=new kl,this._ownedBindGroups.push(this.groups[t]))}_buildResourceAccessor(e,t){const s={};for(const o in t){const a=t[o];Object.defineProperty(s,a.name,{get(){return e[a.group].getResource(a.binding)},set(c){e[a.group].setResource(c,a.binding)}})}return s}destroy(e=!1){this._destroyed||(this._destroyed=!0,this.emit("destroy",this),e&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(t=>{t.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(e){const{gpu:t,gl:s,...o}=e;let a,c;return t&&(a=Ci.from(t)),s&&(c=Ul.from(s)),new $l({gpuProgram:a,glProgram:c,...o})}}const Ew={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},sh=0,ih=1,oh=2,ah=3,lh=4,ch=5,Gh=class c0{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<sh)}set blend(e){!!(this.data&1<<sh)!==e&&(this.data^=1<<sh)}get offsets(){return!!(this.data&1<<ih)}set offsets(e){!!(this.data&1<<ih)!==e&&(this.data^=1<<ih)}set cullMode(e){if(e==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=e==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<oh)}set culling(e){!!(this.data&1<<oh)!==e&&(this.data^=1<<oh)}get depthTest(){return!!(this.data&1<<ah)}set depthTest(e){!!(this.data&1<<ah)!==e&&(this.data^=1<<ah)}get depthMask(){return!!(this.data&1<<ch)}set depthMask(e){!!(this.data&1<<ch)!==e&&(this.data^=1<<ch)}get clockwiseFrontFace(){return!!(this.data&1<<lh)}set clockwiseFrontFace(e){!!(this.data&1<<lh)!==e&&(this.data^=1<<lh)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!=="none",this._blendMode=e,this._blendModeId=Ew[e]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new c0;return e.depthTest=!1,e.blend=!0,e}};Gh.default2d=Gh.for2d();let Iw=Gh;const u0=class Uh extends $l{constructor(e){e={...Uh.defaultOptions,...e},super(e),this.enabled=!0,this._state=Iw.for2d(),this.blendMode=e.blendMode,this.padding=e.padding,typeof e.antialias=="boolean"?this.antialias=e.antialias?"on":"off":this.antialias=e.antialias,this.resolution=e.resolution,this.blendRequired=e.blendRequired,this.clipToViewport=e.clipToViewport,this.addResource("uTexture",0,1),e.blendRequired&&this.addResource("uBackTexture",0,3)}apply(e,t,s,o){e.applyFilter(this,t,s,o)}get blendMode(){return this._state.blendMode}set blendMode(e){this._state.blendMode=e}static from(e){const{gpu:t,gl:s,...o}=e;let a,c;return t&&(a=Ci.from(t)),s&&(c=Ul.from(s)),new Uh({gpuProgram:a,glProgram:c,...o})}};u0.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};let h0=u0;const $h=[];Mt.handleByNamedList(we.Environment,$h);async function Rw(n){if(!n)for(let e=0;e<$h.length;e++){const t=$h[e];if(t.value.test()){await t.value.load();return}}}let yo;function Fw(){if(typeof yo=="boolean")return yo;try{yo=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{yo=!1}return yo}function tg(n,e,t=2){const s=e&&e.length,o=s?e[0]*t:n.length;let a=d0(n,0,o,t,!0);const c=[];if(!a||a.next===a.prev)return c;let u,d,f;if(s&&(a=zw(n,e,a,t)),n.length>80*t){u=n[0],d=n[1];let p=u,g=d;for(let x=t;x<o;x+=t){const v=n[x],_=n[x+1];v<u&&(u=v),_<d&&(d=_),v>p&&(p=v),_>g&&(g=_)}f=Math.max(p-u,g-d),f=f!==0?32767/f:0}return Lo(a,c,t,u,d,f,0),c}function d0(n,e,t,s,o){let a;if(o===qw(n,e,t,s)>0)for(let c=e;c<t;c+=s)a=ng(c/s|0,n[c],n[c+1],a);else for(let c=t-s;c>=e;c-=s)a=ng(c/s|0,n[c],n[c+1],a);return a&&wi(a,a.next)&&(Bo(a),a=a.next),a}function Rs(n,e){if(!n)return n;e||(e=n);let t=n,s;do if(s=!1,!t.steiner&&(wi(t,t.next)||lt(t.prev,t,t.next)===0)){if(Bo(t),t=e=t.prev,t===t.next)break;s=!0}else t=t.next;while(s||t!==e);return e}function Lo(n,e,t,s,o,a,c){if(!n)return;!c&&a&&$w(n,s,o,a);let u=n;for(;n.prev!==n.next;){const d=n.prev,f=n.next;if(a?Nw(n,s,o,a):Lw(n)){e.push(d.i,n.i,f.i),Bo(n),n=f.next,u=f.next;continue}if(n=f,n===u){c?c===1?(n=Bw(Rs(n),e),Lo(n,e,t,s,o,a,2)):c===2&&Ow(n,e,t,s,o,a):Lo(Rs(n),e,t,s,o,a,1);break}}}function Lw(n){const e=n.prev,t=n,s=n.next;if(lt(e,t,s)>=0)return!1;const o=e.x,a=t.x,c=s.x,u=e.y,d=t.y,f=s.y,p=Math.min(o,a,c),g=Math.min(u,d,f),x=Math.max(o,a,c),v=Math.max(u,d,f);let _=s.next;for(;_!==e;){if(_.x>=p&&_.x<=x&&_.y>=g&&_.y<=v&&Co(o,u,a,d,c,f,_.x,_.y)&&lt(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function Nw(n,e,t,s){const o=n.prev,a=n,c=n.next;if(lt(o,a,c)>=0)return!1;const u=o.x,d=a.x,f=c.x,p=o.y,g=a.y,x=c.y,v=Math.min(u,d,f),_=Math.min(p,g,x),b=Math.max(u,d,f),w=Math.max(p,g,x),k=Wh(v,_,e,t,s),A=Wh(b,w,e,t,s);let P=n.prevZ,C=n.nextZ;for(;P&&P.z>=k&&C&&C.z<=A;){if(P.x>=v&&P.x<=b&&P.y>=_&&P.y<=w&&P!==o&&P!==c&&Co(u,p,d,g,f,x,P.x,P.y)&&lt(P.prev,P,P.next)>=0||(P=P.prevZ,C.x>=v&&C.x<=b&&C.y>=_&&C.y<=w&&C!==o&&C!==c&&Co(u,p,d,g,f,x,C.x,C.y)&&lt(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;P&&P.z>=k;){if(P.x>=v&&P.x<=b&&P.y>=_&&P.y<=w&&P!==o&&P!==c&&Co(u,p,d,g,f,x,P.x,P.y)&&lt(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;C&&C.z<=A;){if(C.x>=v&&C.x<=b&&C.y>=_&&C.y<=w&&C!==o&&C!==c&&Co(u,p,d,g,f,x,C.x,C.y)&&lt(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function Bw(n,e){let t=n;do{const s=t.prev,o=t.next.next;!wi(s,o)&&p0(s,t,t.next,o)&&No(s,o)&&No(o,s)&&(e.push(s.i,t.i,o.i),Bo(t),Bo(t.next),t=n=o),t=t.next}while(t!==n);return Rs(t)}function Ow(n,e,t,s,o,a){let c=n;do{let u=c.next.next;for(;u!==c.prev;){if(c.i!==u.i&&Hw(c,u)){let d=m0(c,u);c=Rs(c,c.next),d=Rs(d,d.next),Lo(c,e,t,s,o,a,0),Lo(d,e,t,s,o,a,0);return}u=u.next}c=c.next}while(c!==n)}function zw(n,e,t,s){const o=[];for(let a=0,c=e.length;a<c;a++){const u=e[a]*s,d=a<c-1?e[a+1]*s:n.length,f=d0(n,u,d,s,!1);f===f.next&&(f.steiner=!0),o.push(Vw(f))}o.sort(Dw);for(let a=0;a<o.length;a++)t=jw(o[a],t);return t}function Dw(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const s=(n.next.y-n.y)/(n.next.x-n.x),o=(e.next.y-e.y)/(e.next.x-e.x);t=s-o}return t}function jw(n,e){const t=Gw(n,e);if(!t)return e;const s=m0(t,n);return Rs(s,s.next),Rs(t,t.next)}function Gw(n,e){let t=e;const s=n.x,o=n.y;let a=-1/0,c;if(wi(n,t))return t;do{if(wi(n,t.next))return t.next;if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const g=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=s&&g>a&&(a=g,c=t.x<t.next.x?t:t.next,g===s))return c}t=t.next}while(t!==e);if(!c)return null;const u=c,d=c.x,f=c.y;let p=1/0;t=c;do{if(s>=t.x&&t.x>=d&&s!==t.x&&f0(o<f?s:a,o,d,f,o<f?a:s,o,t.x,t.y)){const g=Math.abs(o-t.y)/(s-t.x);No(t,n)&&(g<p||g===p&&(t.x>c.x||t.x===c.x&&Uw(c,t)))&&(c=t,p=g)}t=t.next}while(t!==u);return c}function Uw(n,e){return lt(n.prev,n,e.prev)<0&&lt(e.next,n,n.next)<0}function $w(n,e,t,s){let o=n;do o.z===0&&(o.z=Wh(o.x,o.y,e,t,s)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==n);o.prevZ.nextZ=null,o.prevZ=null,Ww(o)}function Ww(n){let e,t=1;do{let s=n,o;n=null;let a=null;for(e=0;s;){e++;let c=s,u=0;for(let f=0;f<t&&(u++,c=c.nextZ,!!c);f++);let d=t;for(;u>0||d>0&&c;)u!==0&&(d===0||!c||s.z<=c.z)?(o=s,s=s.nextZ,u--):(o=c,c=c.nextZ,d--),a?a.nextZ=o:n=o,o.prevZ=a,a=o;s=c}a.nextZ=null,t*=2}while(e>1);return n}function Wh(n,e,t,s,o){return n=(n-t)*o|0,e=(e-s)*o|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Vw(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function f0(n,e,t,s,o,a,c,u){return(o-c)*(e-u)>=(n-c)*(a-u)&&(n-c)*(s-u)>=(t-c)*(e-u)&&(t-c)*(a-u)>=(o-c)*(s-u)}function Co(n,e,t,s,o,a,c,u){return!(n===c&&e===u)&&f0(n,e,t,s,o,a,c,u)}function Hw(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Yw(n,e)&&(No(n,e)&&No(e,n)&&Xw(n,e)&&(lt(n.prev,n,e.prev)||lt(n,e.prev,e))||wi(n,e)&&lt(n.prev,n,n.next)>0&&lt(e.prev,e,e.next)>0)}function lt(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function wi(n,e){return n.x===e.x&&n.y===e.y}function p0(n,e,t,s){const o=dl(lt(n,e,t)),a=dl(lt(n,e,s)),c=dl(lt(t,s,n)),u=dl(lt(t,s,e));return!!(o!==a&&c!==u||o===0&&hl(n,t,e)||a===0&&hl(n,s,e)||c===0&&hl(t,n,s)||u===0&&hl(t,e,s))}function hl(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function dl(n){return n>0?1:n<0?-1:0}function Yw(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&p0(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function No(n,e){return lt(n.prev,n,n.next)<0?lt(n,e,n.next)>=0&&lt(n,n.prev,e)>=0:lt(n,e,n.prev)<0||lt(n,n.next,e)<0}function Xw(n,e){let t=n,s=!1;const o=(n.x+e.x)/2,a=(n.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&o<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(s=!s),t=t.next;while(t!==n);return s}function m0(n,e){const t=Vh(n.i,n.x,n.y),s=Vh(e.i,e.x,e.y),o=n.next,a=e.prev;return n.next=e,e.prev=n,t.next=o,o.prev=t,s.next=t,t.prev=s,a.next=s,s.prev=a,s}function ng(n,e,t,s){const o=Vh(n,e,t);return s?(o.next=s.next,o.prev=s,s.next.prev=o,s.next=o):(o.prev=o,o.next=o),o}function Bo(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Vh(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function qw(n,e,t,s){let o=0;for(let a=e,c=t-s;a<t;a+=s)o+=(n[c]-n[a])*(n[a+1]+n[c+1]),c=a;return o}const Qw=tg.default||tg;var g0=(n=>(n[n.NONE=0]="NONE",n[n.COLOR=16384]="COLOR",n[n.STENCIL=1024]="STENCIL",n[n.DEPTH=256]="DEPTH",n[n.COLOR_DEPTH=16640]="COLOR_DEPTH",n[n.COLOR_STENCIL=17408]="COLOR_STENCIL",n[n.DEPTH_STENCIL=1280]="DEPTH_STENCIL",n[n.ALL=17664]="ALL",n))(g0||{});class Kw{constructor(e){this.items=[],this._name=e}emit(e,t,s,o,a,c,u,d){const{name:f,items:p}=this;for(let g=0,x=p.length;g<x;g++)p[g][f](e,t,s,o,a,c,u,d);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&this.items.splice(t,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const Zw=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],y0=class x0 extends Gn{constructor(e){super(),this.uid=dt("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const t=[...Zw,...this.config.runners??[]];this._addRunners(...t),this._unsafeEvalCheck()}async init(e={}){const t=e.skipExtensionImports===!0?!0:e.manageImports===!1;await Rw(t),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const s in this._systemsHash)e={...this._systemsHash[s].constructor.defaultOptions,...e};e={...x0.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let s=0;s<this.runners.init.items.length;s++)await this.runners.init.items[s].init(e);this._initOptions=e}render(e,t){let s=e;if(s instanceof Et&&(s={container:s},t&&(Pe(je,"passing a second argument is deprecated, please use render options instead"),s.target=t.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,s.clearColor??(s.clearColor=this.background.colorRgba),s.clear??(s.clear=this.background.clearBeforeRender)),s.clearColor){const o=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=o?s.clearColor:yt.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),s.container.visible&&(s.container.enableRenderGroup(),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s))}resize(e,t,s){const o=this.view.resolution;this.view.resize(e,t,s),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),s!==void 0&&s!==o&&this.runners.resolutionChange.emit(s)}clear(e={}){const t=this;e.target||(e.target=t.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=g0.ALL);const{clear:s,clearColor:o,target:a}=e;yt.shared.setValue(o??this.background.colorRgba),t.renderTarget.clear(a,s,yt.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(t=>{this.runners[t]=new Kw(t)})}_addSystems(e){let t;for(t in e){const s=e[t];this._addSystem(s.value,s.name)}}_addSystem(e,t){const s=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=s,this._systemsHash[t]=s;for(const o in this.runners)this.runners[o].add(s);return this}_addPipes(e,t){const s=t.reduce((o,a)=>(o[a.name]=a.value,o),{});e.forEach(o=>{const a=o.value,c=o.name,u=s[c];this.renderPipes[c]=new a(this,u?new u:null),this.runners.destroy.add(this.renderPipes[c])})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),(e===!0||typeof e=="object"&&e.releaseGlobalResources)&&Ho.release(),Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!Fw())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};y0.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let v0=y0,fl;function Jw(n){return fl!==void 0||(fl=(()=>{const e={stencil:!0,failIfMajorPerformanceCaveat:n??v0.defaultOptions.failIfMajorPerformanceCaveat};try{if(!qe.get().getWebGLRenderingContext())return!1;let s=qe.get().createCanvas().getContext("webgl",e);const o=!!s?.getContextAttributes()?.stencil;if(s){const a=s.getExtension("WEBGL_lose_context");a&&a.loseContext()}return s=null,o}catch{return!1}})()),fl}let pl;async function eS(n={}){return pl!==void 0||(pl=await(async()=>{const e=qe.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(n)).requestDevice(),!0}catch{return!1}})()),pl}const rg=["webgl","webgpu","canvas"];async function tS(n){let e=[];n.preference?(e.push(n.preference),rg.forEach(a=>{a!==n.preference&&e.push(a)})):e=rg.slice();let t,s={};for(let a=0;a<e.length;a++){const c=e[a];if(c==="webgpu"&&await eS()){const{WebGPURenderer:u}=await Ml(async()=>{const{WebGPURenderer:d}=await import("./WebGPURenderer-DDPYzyNS.js");return{WebGPURenderer:d}},__vite__mapDeps([3,2,4]));t=u,s={...n,...n.webgpu};break}else if(c==="webgl"&&Jw(n.failIfMajorPerformanceCaveat??v0.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:u}=await Ml(async()=>{const{WebGLRenderer:d}=await import("./WebGLRenderer-DDCf91wd.js");return{WebGLRenderer:d}},__vite__mapDeps([5,2,4]));t=u,s={...n,...n.webgl};break}else if(c==="canvas")throw s={...n},new Error("CanvasRenderer is not yet implemented")}if(delete s.webgpu,delete s.webgl,!t)throw new Error("No available renderer for the current environment");const o=new t;return await o.init(s),o}const _0="8.14.3";class w0{static init(){globalThis.__PIXI_APP_INIT__?.(this,_0)}static destroy(){}}w0.extension=we.Application;class nS{constructor(e){this._renderer=e}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,_0)}destroy(){this._renderer=null}}nS.extension={type:[we.WebGLSystem,we.WebGPUSystem],name:"initHook",priority:-10};const S0=class Hh{constructor(...e){this.stage=new Et,e[0]!==void 0&&Pe(je,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.stage||(this.stage=new Et),this.renderer=await tS(e),Hh._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Pe(je,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,t=!1){const s=Hh._plugins.slice(0);s.reverse(),s.forEach(o=>{o.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};S0._plugins=[];let b0=S0;Mt.handleByList(we.Application,b0._plugins);Mt.add(w0);class k0 extends Gn{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Pe(je,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Pe(je,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Pe(je,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Pe(je,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Pe(je,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners();for(const t in this.chars)this.chars[t].texture?.destroy();this.chars=null,e&&(this.pages.forEach(t=>t.texture.destroy(!0)),this.pages=null)}}/**
 * tiny-lru
 *
 * @copyright 2025 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 11.4.5
 */class rS{constructor(e=0,t=0,s=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=s,this.size=0,this.ttl=t}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){const t=this.items[e];delete this.items[e],this.size--,t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}return this}entries(e=this.keys()){return e.map(t=>[t,this.get(t)])}evict(e=!1){if(e||this.size>0){const t=this.first;delete this.items[t.key],--this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}return this}expiresAt(e){let t;return this.has(e)&&(t=this.items[e].expiry),t}get(e){const t=this.items[e];if(t!==void 0){if(this.ttl>0&&t.expiry<=Date.now()){this.delete(e);return}return this.moveToEnd(t),t.value}}has(e){return e in this.items}moveToEnd(e){this.last!==e&&(e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),e.prev=this.last,e.next=null,this.last!==null&&(this.last.next=e),this.last=e,this.first===null&&(this.first=e))}keys(){const e=[];let t=this.first;for(;t!==null;)e.push(t.key),t=t.next;return e}setWithEvicted(e,t,s=this.resetTtl){let o=null;if(this.has(e))this.set(e,t,!0,s);else{this.max>0&&this.size===this.max&&(o={...this.first},this.evict(!0));let a=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};++this.size===1?this.first=a:this.last.next=a,this.last=a}return o}set(e,t,s=!1,o=this.resetTtl){let a=this.items[e];return s||a!==void 0?(a.value=t,s===!1&&o&&(a.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(a)):(this.max>0&&this.size===this.max&&this.evict(!0),a=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t},++this.size===1?this.first=a:this.last.next=a,this.last=a),this}values(e=this.keys()){return e.map(t=>this.get(t))}}function C0(n=1e3,e=0,t=!1){if(isNaN(n)||n<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");if(typeof t!="boolean")throw new TypeError("Invalid resetTtl value");return new rS(n,e,t)}const sS=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function Il(n){const e=typeof n.fontSize=="number"?`${n.fontSize}px`:n.fontSize;let t=n.fontFamily;Array.isArray(n.fontFamily)||(t=n.fontFamily.split(","));for(let s=t.length-1;s>=0;s--){let o=t[s].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&!sS.includes(o)&&(o=`"${o}"`),t[s]=o}return`${n.fontStyle} ${n.fontVariant} ${n.fontWeight} ${e} ${t.join(",")}`}const uh={willReadFrequently:!0},$n=class ve{static get experimentalLetterSpacingSupported(){let e=ve._experimentalLetterSpacingSupported;if(e===void 0){const t=qe.get().getCanvasRenderingContext2D().prototype;e=ve._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,s,o,a,c,u,d,f){this.text=e,this.style=t,this.width=s,this.height=o,this.lines=a,this.lineWidths=c,this.lineHeight=u,this.maxLineWidth=d,this.fontProperties=f}static measureText(e=" ",t,s=ve._canvas,o=t.wordWrap){const a=`${e}-${t.styleKey}-wordWrap-${o}`;if(ve._measurementCache.has(a))return ve._measurementCache.get(a);const c=Il(t),u=ve.measureFont(c);u.fontSize===0&&(u.fontSize=t.fontSize,u.ascent=t.fontSize);const d=ve.__context;d.font=c;const p=(o?ve._wordWrap(e,t,s):e).split(/(?:\r\n|\r|\n)/),g=new Array(p.length);let x=0;for(let A=0;A<p.length;A++){const P=ve._measureText(p[A],t.letterSpacing,d);g[A]=P,x=Math.max(x,P)}const v=t._stroke?.width||0;let _=x+v;t.dropShadow&&(_+=t.dropShadow.distance);const b=t.lineHeight||u.fontSize;let w=Math.max(b,u.fontSize+v)+(p.length-1)*(b+t.leading);t.dropShadow&&(w+=t.dropShadow.distance);const k=new ve(e,t,_,w,p,g,b+t.leading,x,u);return ve._measurementCache.set(a,k),k}static _measureText(e,t,s){let o=!1;ve.experimentalLetterSpacingSupported&&(ve.experimentalLetterSpacing?(s.letterSpacing=`${t}px`,s.textLetterSpacing=`${t}px`,o=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));const a=s.measureText(e);let c=a.width;const u=-a.actualBoundingBoxLeft;let f=a.actualBoundingBoxRight-u;if(c>0)if(o)c-=t,f-=t;else{const p=(ve.graphemeSegmenter(e).length-1)*t;c+=p,f+=p}return Math.max(c,f)}static _wordWrap(e,t,s=ve._canvas){const o=s.getContext("2d",uh);let a=0,c="",u="";const d=Object.create(null),{letterSpacing:f,whiteSpace:p}=t,g=ve._collapseSpaces(p),x=ve._collapseNewlines(p);let v=!g;const _=t.wordWrapWidth+f,b=ve._tokenize(e);for(let w=0;w<b.length;w++){let k=b[w];if(ve._isNewline(k)){if(!x){u+=ve._addLine(c),v=!g,c="",a=0;continue}k=" "}if(g){const P=ve.isBreakingSpace(k),C=ve.isBreakingSpace(c[c.length-1]);if(P&&C)continue}const A=ve._getFromCache(k,f,d,o);if(A>_)if(c!==""&&(u+=ve._addLine(c),c="",a=0),ve.canBreakWords(k,t.breakWords)){const P=ve.wordWrapSplit(k);for(let C=0;C<P.length;C++){let F=P[C],R=F,L=1;for(;P[C+L];){const W=P[C+L];if(!ve.canBreakChars(R,W,k,C,t.breakWords))F+=W;else break;R=W,L++}C+=L-1;const Q=ve._getFromCache(F,f,d,o);Q+a>_&&(u+=ve._addLine(c),v=!1,c="",a=0),c+=F,a+=Q}}else{c.length>0&&(u+=ve._addLine(c),c="",a=0);const P=w===b.length-1;u+=ve._addLine(k,!P),v=!1,c="",a=0}else A+a>_&&(v=!1,u+=ve._addLine(c),c="",a=0),(c.length>0||!ve.isBreakingSpace(k)||v)&&(c+=k,a+=A)}return u+=ve._addLine(c,!1),u}static _addLine(e,t=!0){return e=ve._trimRight(e),e=t?`${e}
`:e,e}static _getFromCache(e,t,s,o){let a=s[e];return typeof a!="number"&&(a=ve._measureText(e,t,o)+t,s[e]=a),a}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const s=e[t];if(!ve.isBreakingSpace(s))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:ve._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:ve._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const t=[];let s="";if(typeof e!="string")return t;for(let o=0;o<e.length;o++){const a=e[o],c=e[o+1];if(ve.isBreakingSpace(a,c)||ve._isNewline(a)){s!==""&&(t.push(s),s=""),a==="\r"&&c===`
`?(t.push(`\r
`),o++):t.push(a);continue}s+=a}return s!==""&&t.push(s),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,s,o,a){return!0}static wordWrapSplit(e){return ve.graphemeSegmenter(e)}static measureFont(e){if(ve._fonts[e])return ve._fonts[e];const t=ve._context;t.font=e;const s=t.measureText(ve.METRICS_STRING+ve.BASELINE_SYMBOL),o={ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,fontSize:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent};return ve._fonts[e]=o,o}static clearMetrics(e=""){e?delete ve._fonts[e]:ve._fonts={}}static get _canvas(){if(!ve.__canvas){let e;try{const t=new OffscreenCanvas(0,0);if(t.getContext("2d",uh)?.measureText)return ve.__canvas=t,t;e=qe.get().createCanvas()}catch{e=qe.get().createCanvas()}e.width=e.height=10,ve.__canvas=e}return ve.__canvas}static get _context(){return ve.__context||(ve.__context=ve._canvas.getContext("2d",uh)),ve.__context}};$n.METRICS_STRING="|q";$n.BASELINE_SYMBOL="M";$n.BASELINE_MULTIPLIER=1.4;$n.HEIGHT_MULTIPLIER=2;$n.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const n=new Intl.Segmenter;return e=>{const t=n.segment(e),s=[];let o=0;for(const a of t)s[o++]=a.segment;return s}}return n=>[...n]})();$n.experimentalLetterSpacing=!1;$n._fonts={};$n._newlines=[10,13];$n._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];$n._measurementCache=C0(1e3);let nr=$n;const sg=[{offset:0,color:"white"},{offset:1,color:"black"}],yd=class Yh{constructor(...e){this.uid=dt("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let t=iS(e);t={...t.type==="radial"?Yh.defaultRadialOptions:Yh.defaultLinearOptions,...Py(t)},this._textureSize=t.textureSize,this._wrapMode=t.wrapMode,t.type==="radial"?(this.center=t.center,this.outerCenter=t.outerCenter??this.center,this.innerRadius=t.innerRadius,this.outerRadius=t.outerRadius,this.scale=t.scale,this.rotation=t.rotation):(this.start=t.start,this.end=t.end),this.textureSpace=t.textureSpace,this.type=t.type,t.colorStops.forEach(o=>{this.addColorStop(o.offset,o.color)})}addColorStop(e,t){return this.colorStops.push({offset:e,color:yt.shared.setValue(t).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:t}=this.start,{x:s,y:o}=this.end,a=s-e,c=o-t;const u=a<0||c<0;if(this._wrapMode==="clamp-to-edge"){if(a<0){const w=e;e=s,s=w,a*=-1}if(c<0){const w=t;t=o,o=w,c*=-1}}const d=this.colorStops.length?this.colorStops:sg,f=this._textureSize,{canvas:p,context:g}=og(f,1),x=u?g.createLinearGradient(this._textureSize,0,0,0):g.createLinearGradient(0,0,this._textureSize,0);ig(x,d),g.fillStyle=x,g.fillRect(0,0,f,1),this.texture=new Ne({source:new Is({resource:p,addressMode:this._wrapMode})});const v=Math.sqrt(a*a+c*c),_=Math.atan2(c,a),b=new Re;b.scale(v/f,1),b.rotate(_),b.translate(e,t),this.textureSpace==="local"&&b.scale(f,f),this.transform=b}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:sg,t=this._textureSize,{canvas:s,context:o}=og(t,t),{x:a,y:c}=this.center,{x:u,y:d}=this.outerCenter,f=this.innerRadius,p=this.outerRadius,g=u-p,x=d-p,v=t/(p*2),_=(a-g)*v,b=(c-x)*v,w=o.createRadialGradient(_,b,f*v,(u-g)*v,(d-x)*v,p*v);ig(w,e),o.fillStyle=e[e.length-1].color,o.fillRect(0,0,t,t),o.fillStyle=w,o.translate(_,b),o.rotate(this.rotation),o.scale(1,this.scale),o.translate(-_,-b),o.fillRect(0,0,t,t),this.texture=new Ne({source:new Is({resource:s,addressMode:this._wrapMode})});const k=new Re;k.scale(1/v,1/v),k.translate(g,x),this.textureSpace==="local"&&k.scale(t,t),this.transform=k}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};yd.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};yd.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let br=yd;function ig(n,e){for(let t=0;t<e.length;t++){const s=e[t];n.addColorStop(s.offset,s.color)}}function og(n,e){const t=qe.get().createCanvas(n,e),s=t.getContext("2d");return{canvas:t,context:s}}function iS(n){let e=n[0]??{};return(typeof e=="number"||n[1])&&(Pe("8.5.2","use options object instead"),e={type:"linear",start:{x:n[0],y:n[1]},end:{x:n[2],y:n[3]},textureSpace:n[4],textureSize:n[5]??br.defaultLinearOptions.textureSize}),e}const ag={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class Wl{constructor(e,t){this.uid=dt("fillPattern"),this._tick=0,this.transform=new Re,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=ag[t].addressModeU,e.source.style.addressModeV=ag[t].addressModeV)}setTransform(e){const t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height),this._tick++}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture=e,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var hh,lg;function oS(){if(lg)return hh;lg=1,hh=t;var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function t(a){var c=[];return a.replace(e,function(u,d,f){var p=d.toLowerCase();for(f=o(f),p=="m"&&f.length>2&&(c.push([d].concat(f.splice(0,2))),p="l",d=d=="m"?"l":"L");;){if(f.length==n[p])return f.unshift(d),c.push(f);if(f.length<n[p])throw new Error("malformed path data");c.push([d].concat(f.splice(0,n[p])))}}),c}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function o(a){var c=a.match(s);return c?c.map(Number):[]}return hh}var aS=oS();const lS=hd(aS);function cS(n,e){const t=lS(n),s=[];let o=null,a=0,c=0;for(let u=0;u<t.length;u++){const d=t[u],f=d[0],p=d;switch(f){case"M":a=p[1],c=p[2],e.moveTo(a,c);break;case"m":a+=p[1],c+=p[2],e.moveTo(a,c);break;case"H":a=p[1],e.lineTo(a,c);break;case"h":a+=p[1],e.lineTo(a,c);break;case"V":c=p[1],e.lineTo(a,c);break;case"v":c+=p[1],e.lineTo(a,c);break;case"L":a=p[1],c=p[2],e.lineTo(a,c);break;case"l":a+=p[1],c+=p[2],e.lineTo(a,c);break;case"C":a=p[5],c=p[6],e.bezierCurveTo(p[1],p[2],p[3],p[4],a,c);break;case"c":e.bezierCurveTo(a+p[1],c+p[2],a+p[3],c+p[4],a+p[5],c+p[6]),a+=p[5],c+=p[6];break;case"S":a=p[3],c=p[4],e.bezierCurveToShort(p[1],p[2],a,c);break;case"s":e.bezierCurveToShort(a+p[1],c+p[2],a+p[3],c+p[4]),a+=p[3],c+=p[4];break;case"Q":a=p[3],c=p[4],e.quadraticCurveTo(p[1],p[2],a,c);break;case"q":e.quadraticCurveTo(a+p[1],c+p[2],a+p[3],c+p[4]),a+=p[3],c+=p[4];break;case"T":a=p[1],c=p[2],e.quadraticCurveToShort(a,c);break;case"t":a+=p[1],c+=p[2],e.quadraticCurveToShort(a,c);break;case"A":a=p[6],c=p[7],e.arcToSvg(p[1],p[2],p[3],p[4],p[5],a,c);break;case"a":a+=p[6],c+=p[7],e.arcToSvg(p[1],p[2],p[3],p[4],p[5],a,c);break;case"Z":case"z":e.closePath(),s.length>0&&(o=s.pop(),o?(a=o.startX,c=o.startY):(a=0,c=0)),o=null;break;default:et(`Unknown SVG path command: ${f}`)}f!=="Z"&&f!=="z"&&o===null&&(o={startX:a,startY:c},s.push(o))}return e}class xd{constructor(e=0,t=0,s=0){this.type="circle",this.x=e,this.y=t,this.radius=s}clone(){return new xd(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const s=this.radius*this.radius;let o=this.x-e,a=this.y-t;return o*=o,a*=a,o+a<=s}strokeContains(e,t,s,o=.5){if(this.radius===0)return!1;const a=this.x-e,c=this.y-t,u=this.radius,d=(1-o)*s,f=Math.sqrt(a*a+c*c);return f<=u+d&&f>u-(s-d)}getBounds(e){return e||(e=new tt),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class vd{constructor(e=0,t=0,s=0,o=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=s,this.halfHeight=o}clone(){return new vd(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(e-this.x)/this.halfWidth,o=(t-this.y)/this.halfHeight;return s*=s,o*=o,s+o<=1}strokeContains(e,t,s,o=.5){const{halfWidth:a,halfHeight:c}=this;if(a<=0||c<=0)return!1;const u=s*(1-o),d=s-u,f=a-d,p=c-d,g=a+u,x=c+u,v=e-this.x,_=t-this.y,b=v*v/(f*f)+_*_/(p*p),w=v*v/(g*g)+_*_/(x*x);return b>1&&w<=1}getBounds(e){return e||(e=new tt),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function uS(n,e,t,s,o,a){const c=n-t,u=e-s,d=o-t,f=a-s,p=c*d+u*f,g=d*d+f*f;let x=-1;g!==0&&(x=p/g);let v,_;x<0?(v=t,_=s):x>1?(v=o,_=a):(v=t+x*d,_=s+x*f);const b=n-v,w=e-_;return b*b+w*w}let hS,dS;class Mo{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const s=[];for(let o=0,a=t.length;o<a;o++)s.push(t[o].x,t[o].y);t=s}this.points=t,this.closePath=!0}isClockwise(){let e=0;const t=this.points,s=t.length;for(let o=0;o<s;o+=2){const a=t[o],c=t[o+1],u=t[(o+2)%s],d=t[(o+3)%s];e+=(u-a)*(d+c)}return e<0}containsPolygon(e){const t=this.getBounds(hS),s=e.getBounds(dS);if(!t.containsRect(s))return!1;const o=e.points;for(let a=0;a<o.length;a+=2){const c=o[a],u=o[a+1];if(!this.contains(c,u))return!1}return!0}clone(){const e=this.points.slice(),t=new Mo(e);return t.closePath=this.closePath,t}contains(e,t){let s=!1;const o=this.points.length/2;for(let a=0,c=o-1;a<o;c=a++){const u=this.points[a*2],d=this.points[a*2+1],f=this.points[c*2],p=this.points[c*2+1];d>t!=p>t&&e<(f-u)*((t-d)/(p-d))+u&&(s=!s)}return s}strokeContains(e,t,s,o=.5){const a=s*s,c=a*(1-o),u=a-c,{points:d}=this,f=d.length-(this.closePath?0:2);for(let p=0;p<f;p+=2){const g=d[p],x=d[p+1],v=d[(p+2)%d.length],_=d[(p+3)%d.length],b=uS(e,t,g,x,v,_),w=Math.sign((v-g)*(t-x)-(_-x)*(e-g));if(b<=(w<0?u:c))return!0}return!1}getBounds(e){e||(e=new tt);const t=this.points;let s=1/0,o=-1/0,a=1/0,c=-1/0;for(let u=0,d=t.length;u<d;u+=2){const f=t[u],p=t[u+1];s=f<s?f:s,o=f>o?f:o,a=p<a?p:a,c=p>c?p:c}return e.x=s,e.width=o-s,e.y=a,e.height=c-a,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return Pe("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return Pe("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const ml=(n,e,t,s,o,a,c)=>{const u=n-t,d=e-s,f=Math.sqrt(u*u+d*d);return f>=o-a&&f<=o+c};class _d{constructor(e=0,t=0,s=0,o=0,a=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=s,this.height=o,this.radius=a}getBounds(e){return e||(e=new tt),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new _d(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+s&&t<=this.y+this.height-s||e>=this.x+s&&e<=this.x+this.width-s)return!0;let o=e-(this.x+s),a=t-(this.y+s);const c=s*s;if(o*o+a*a<=c||(o=e-(this.x+this.width-s),o*o+a*a<=c)||(a=t-(this.y+this.height-s),o*o+a*a<=c)||(o=e-(this.x+s),o*o+a*a<=c))return!0}return!1}strokeContains(e,t,s,o=.5){const{x:a,y:c,width:u,height:d,radius:f}=this,p=s*(1-o),g=s-p,x=a+f,v=c+f,_=u-f*2,b=d-f*2,w=a+u,k=c+d;return(e>=a-p&&e<=a+g||e>=w-g&&e<=w+p)&&t>=v&&t<=v+b||(t>=c-p&&t<=c+g||t>=k-g&&t<=k+p)&&e>=x&&e<=x+_?!0:e<x&&t<v&&ml(e,t,x,v,f,g,p)||e>w-f&&t<v&&ml(e,t,w-f,v,f,g,p)||e>w-f&&t>k-f&&ml(e,t,w-f,k-f,f,g,p)||e<x&&t>k-f&&ml(e,t,x,k-f,f,g,p)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const A0={};function fS(n,e,t){let s=2166136261;for(let o=0;o<e;o++)s^=n[o].uid,s=Math.imul(s,16777619),s>>>=0;return A0[s]||pS(n,e,s,t)}function pS(n,e,t,s){const o={};let a=0;for(let u=0;u<s;u++){const d=u<e?n[u]:Ne.EMPTY.source;o[a++]=d.source,o[a++]=d.style}const c=new kl(o);return A0[t]=c,c}class cg{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function ug(n,e){const t=n.byteLength/8|0,s=new Float64Array(n,0,t);new Float64Array(e,0,t).set(s);const a=n.byteLength-t*8;if(a>0){const c=new Uint8Array(n,t*8,a);new Uint8Array(e,t*8,a).set(c)}}const mS={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var gS=(n=>(n[n.DISABLED=0]="DISABLED",n[n.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",n[n.MASK_ACTIVE=2]="MASK_ACTIVE",n[n.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",n[n.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",n[n.NONE=5]="NONE",n))(gS||{});function hg(n,e){return e.alphaMode==="no-premultiply-alpha"&&mS[n]||n}const yS=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function xS(n){let e="";for(let t=0;t<n;++t)t>0&&(e+=`
else `),t<n-1&&(e+=`if(test == ${t}.0){}`);return e}function vS(n,e){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const s=yS.replace(/%forloop%/gi,xS(n));if(e.shaderSource(t,s),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))n=n/2|0;else break}}finally{e.deleteShader(t)}return n}let ri=null;function _S(){if(ri)return ri;const n=r0();return ri=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),ri=vS(ri,n),n.getExtension("WEBGL_lose_context")?.loseContext(),ri}class wS{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}}class SS{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new wS,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const Eo=[];let Rl=0;Ho.register({clear:()=>{if(Eo.length>0)for(const n of Eo)n&&n.destroy();Eo.length=0,Rl=0}});function dg(){return Rl>0?Eo[--Rl]:new SS}function fg(n){Eo[Rl++]=n}let xo=0;const T0=class P0{constructor(e){this.uid=dt("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],e={...P0.defaultOptions,...e},e.maxTextures||(Pe("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),e.maxTextures=_S());const{maxTextures:t,attributesInitialSize:s,indicesInitialSize:o}=e;this.attributeBuffer=new cg(s*4),this.indexBuffer=new Uint16Array(o),this.maxTextures=t}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)fg(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,t){const s=e._batch.textures.ids[t._source.uid];return!s&&s!==0?!1:(e._textureId=s,e.texture=t,!0)}updateElement(e){this.dirty=!0;const t=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId)}break(e){const t=this._elements;if(!t[this.elementStart])return;let s=dg(),o=s.textures;o.clear();const a=t[this.elementStart];let c=hg(a.blendMode,a.texture._source),u=a.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const d=this.attributeBuffer.float32View,f=this.attributeBuffer.uint32View,p=this.indexBuffer;let g=this._batchIndexSize,x=this._batchIndexStart,v="startBatch";const _=this.maxTextures;for(let b=this.elementStart;b<this.elementSize;++b){const w=t[b];t[b]=null;const A=w.texture._source,P=hg(w.blendMode,A),C=c!==P||u!==w.topology;if(A._batchTick===xo&&!C){w._textureId=A._textureBindLocation,g+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,d,f,w._attributeStart,w._textureId),this.packQuadIndex(p,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,d,f,w._attributeStart,w._textureId),this.packIndex(w,p,w._indexStart,w._attributeStart/this.vertexSize)),w._batch=s;continue}A._batchTick=xo,(o.count>=_||C)&&(this._finishBatch(s,x,g-x,o,c,u,e,v),v="renderBatch",x=g,c=P,u=w.topology,s=dg(),o=s.textures,o.clear(),++xo),w._textureId=A._textureBindLocation=o.count,o.ids[A.uid]=o.count,o.textures[o.count++]=A,w._batch=s,g+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,d,f,w._attributeStart,w._textureId),this.packQuadIndex(p,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,d,f,w._attributeStart,w._textureId),this.packIndex(w,p,w._indexStart,w._attributeStart/this.vertexSize))}o.count>0&&(this._finishBatch(s,x,g-x,o,c,u,e,v),x=g,++xo),this.elementStart=this.elementSize,this._batchIndexStart=x,this._batchIndexSize=g}_finishBatch(e,t,s,o,a,c,u,d){e.gpuBindGroup=null,e.bindGroup=null,e.action=d,e.batcher=this,e.textures=o,e.blendMode=a,e.topology=c,e.start=t,e.size=s,++xo,this.batches[this.batchIndex++]=e,u.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const t=Math.max(e,this.attributeBuffer.size*2),s=new cg(t);ug(this.attributeBuffer.rawBinaryData,s.rawBinaryData),this.attributeBuffer=s}_resizeIndexBuffer(e){const t=this.indexBuffer;let s=Math.max(e,t.length*1.5);s+=s%2;const o=s>65535?new Uint32Array(s):new Uint16Array(s);if(o.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let a=0;a<t.length;a++)o[a]=t[a];else ug(t.buffer,o.buffer);this.indexBuffer=o}packQuadIndex(e,t,s){e[t]=s+0,e[t+1]=s+1,e[t+2]=s+2,e[t+3]=s+0,e[t+4]=s+2,e[t+5]=s+3}packIndex(e,t,s,o){const a=e.indices,c=e.indexSize,u=e.indexOffset,d=e.attributeOffset;for(let f=0;f<c;f++)t[s++]=o+a[f+u]-d}destroy(e={}){if(this.batches!==null){for(let t=0;t<this.batches.length;t++)fg(this.batches[t]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,e.shader&&(this.shader?.destroy(),this.shader=null);for(let t=0;t<this._elements.length;t++)this._elements[t]&&(this._elements[t]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};T0.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let bS=T0;var Xt=(n=>(n[n.MAP_READ=1]="MAP_READ",n[n.MAP_WRITE=2]="MAP_WRITE",n[n.COPY_SRC=4]="COPY_SRC",n[n.COPY_DST=8]="COPY_DST",n[n.INDEX=16]="INDEX",n[n.VERTEX=32]="VERTEX",n[n.UNIFORM=64]="UNIFORM",n[n.STORAGE=128]="STORAGE",n[n.INDIRECT=256]="INDIRECT",n[n.QUERY_RESOLVE=512]="QUERY_RESOLVE",n[n.STATIC=1024]="STATIC",n))(Xt||{});class Oo extends Gn{constructor(e){let{data:t,size:s}=e;const{usage:o,label:a,shrinkToFit:c}=e;super(),this.uid=dt("buffer"),this._resourceType="buffer",this._resourceId=dt("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,s??(s=t?.byteLength);const u=!!t;this.descriptor={size:s,usage:o,mappedAtCreation:u,label:a},this.shrinkToFit=c??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&Xt.STATIC)}set static(e){e?this.descriptor.usage|=Xt.STATIC:this.descriptor.usage&=~Xt.STATIC}setDataWithSize(e,t,s){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){s&&this.emit("update",this);return}const o=this._data;if(this._data=e,this._dataInt32=null,!o||o.length!==e.length){!this.shrinkToFit&&o&&e.byteLength<o.byteLength?s&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=dt("resource"),this.emit("change",this));return}s&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function M0(n,e){if(!(n instanceof Oo)){let t=e?Xt.INDEX:Xt.VERTEX;n instanceof Array&&(e?(n=new Uint32Array(n),t=Xt.INDEX|Xt.COPY_DST):(n=new Float32Array(n),t=Xt.VERTEX|Xt.COPY_DST)),n=new Oo({data:n,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:t})}return n}function kS(n,e,t){const s=n.getAttribute(e);if(!s)return t.minX=0,t.minY=0,t.maxX=0,t.maxY=0,t;const o=s.buffer.data;let a=1/0,c=1/0,u=-1/0,d=-1/0;const f=o.BYTES_PER_ELEMENT,p=(s.offset||0)/f,g=(s.stride||8)/f;for(let x=p;x<o.length;x+=g){const v=o[x],_=o[x+1];v>u&&(u=v),_>d&&(d=_),v<a&&(a=v),_<c&&(c=_)}return t.minX=a,t.minY=c,t.maxX=u,t.maxY=d,t}function CS(n){return(n instanceof Oo||Array.isArray(n)||n.BYTES_PER_ELEMENT)&&(n={buffer:n}),n.buffer=M0(n.buffer,!1),n}class AS extends Gn{constructor(e={}){super(),this.uid=dt("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Dn,this._boundsDirty=!0;const{attributes:t,indexBuffer:s,topology:o}=e;if(this.buffers=[],this.attributes={},t)for(const a in t)this.addAttribute(a,t[a]);this.instanceCount=e.instanceCount??1,s&&this.addIndex(s),this.topology=o||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}addAttribute(e,t){const s=CS(t);this.buffers.indexOf(s.buffer)===-1&&(this.buffers.push(s.buffer),s.buffer.on("update",this.onBufferUpdate,this),s.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=s}addIndex(e){this.indexBuffer=M0(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,kS(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(t=>t.destroy()),this.indexBuffer?.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const TS=new Float32Array(1),PS=new Uint32Array(1);class MS extends AS{constructor(){const t=new Oo({data:TS,label:"attribute-batch-buffer",usage:Xt.VERTEX|Xt.COPY_DST,shrinkToFit:!1}),s=new Oo({data:PS,label:"index-batch-buffer",usage:Xt.INDEX|Xt.COPY_DST,shrinkToFit:!1}),o=24;super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:o,offset:0},aUV:{buffer:t,format:"float32x2",stride:o,offset:8},aColor:{buffer:t,format:"unorm8x4",stride:o,offset:16},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:o,offset:20}},indexBuffer:s})}}function pg(n,e,t){if(n)for(const s in n){const o=s.toLocaleLowerCase(),a=e[o];if(a){let c=n[s];s==="header"&&(c=c.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),t&&a.push(`//----${t}----//`),a.push(c)}else et(`${s} placement hook does not exist in shader`)}}const ES=/\{\{(.*?)\}\}/g;function mg(n){const e={};return(n.match(ES)?.map(s=>s.replace(/[{()}]/g,""))??[]).forEach(s=>{e[s]=[]}),e}function gg(n,e){let t;const s=/@in\s+([^;]+);/g;for(;(t=s.exec(n))!==null;)e.push(t[1])}function yg(n,e,t=!1){const s=[];gg(e,s),n.forEach(u=>{u.header&&gg(u.header,s)});const o=s;t&&o.sort();const a=o.map((u,d)=>`       @location(${d}) ${u},`).join(`
`);let c=e.replace(/@in\s+[^;]+;\s*/g,"");return c=c.replace("{{in}}",`
${a}
`),c}function xg(n,e){let t;const s=/@out\s+([^;]+);/g;for(;(t=s.exec(n))!==null;)e.push(t[1])}function IS(n){const t=/\b(\w+)\s*:/g.exec(n);return t?t[1]:""}function RS(n){const e=/@.*?\s+/g;return n.replace(e,"")}function FS(n,e){const t=[];xg(e,t),n.forEach(d=>{d.header&&xg(d.header,t)});let s=0;const o=t.sort().map(d=>d.indexOf("builtin")>-1?d:`@location(${s++}) ${d}`).join(`,
`),a=t.sort().map(d=>`       var ${RS(d)};`).join(`
`),c=`return VSOutput(
            ${t.sort().map(d=>` ${IS(d)}`).join(`,
`)});`;let u=e.replace(/@out\s+[^;]+;\s*/g,"");return u=u.replace("{{struct}}",`
${o}
`),u=u.replace("{{start}}",`
${a}
`),u=u.replace("{{return}}",`
${c}
`),u}function vg(n,e){let t=n;for(const s in e){const o=e[s];o.join(`
`).length?t=t.replace(`{{${s}}}`,`//-----${s} START-----//
${o.join(`
`)}
//----${s} FINISH----//`):t=t.replace(`{{${s}}}`,"")}return t}const Xr=Object.create(null),dh=new Map;let LS=0;function NS({template:n,bits:e}){const t=E0(n,e);if(Xr[t])return Xr[t];const{vertex:s,fragment:o}=OS(n,e);return Xr[t]=I0(s,o,e),Xr[t]}function BS({template:n,bits:e}){const t=E0(n,e);return Xr[t]||(Xr[t]=I0(n.vertex,n.fragment,e)),Xr[t]}function OS(n,e){const t=e.map(c=>c.vertex).filter(c=>!!c),s=e.map(c=>c.fragment).filter(c=>!!c);let o=yg(t,n.vertex,!0);o=FS(t,o);const a=yg(s,n.fragment,!0);return{vertex:o,fragment:a}}function E0(n,e){return e.map(t=>(dh.has(t)||dh.set(t,LS++),dh.get(t))).sort((t,s)=>t-s).join("-")+n.vertex+n.fragment}function I0(n,e,t){const s=mg(n),o=mg(e);return t.forEach(a=>{pg(a.vertex,s,a.name),pg(a.fragment,o,a.name)}),{vertex:vg(n,s),fragment:vg(e,o)}}const zS=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,DS=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,jS=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,GS=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,US={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},$S={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function WS({bits:n,name:e}){const t=NS({template:{fragment:DS,vertex:zS},bits:[US,...n]});return Ci.from({name:e,vertex:{source:t.vertex,entryPoint:"main"},fragment:{source:t.fragment,entryPoint:"main"}})}function VS({bits:n,name:e}){return new Ul({name:e,...BS({template:{vertex:jS,fragment:GS},bits:[$S,...n]})})}const HS={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},YS={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},fh={};function XS(n){const e=[];if(n===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let t=0;for(let s=0;s<n;s++)e.push(`@group(1) @binding(${t++}) var textureSource${s+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${t++}) var textureSampler${s+1}: sampler;`)}return e.join(`
`)}function qS(n){const e=[];if(n===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let t=0;t<n;t++)t===n-1?e.push("  default:{"):e.push(`  case ${t}:{`),e.push(`      outColor = textureSampleGrad(textureSource${t+1}, textureSampler${t+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function QS(n){return fh[n]||(fh[n]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${XS(n)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${qS(n)}
            `}}),fh[n]}const ph={};function KS(n){const e=[];for(let t=0;t<n;t++)t>0&&e.push("else"),t<n-1&&e.push(`if(vTextureId < ${t}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${t}], vUV);`),e.push("}");return e.join(`
`)}function ZS(n){return ph[n]||(ph[n]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${n}];

            `,main:`

                ${KS(n)}
            `}}),ph[n]}const JS={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},eb={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},_g={};function tb(n){let e=_g[n];if(e)return e;const t=new Int32Array(n);for(let s=0;s<n;s++)t[s]=s;return e=_g[n]=new l0({uTextures:{value:t,type:"i32",size:n}},{isStatic:!0}),e}class wg extends $l{constructor(e){const t=VS({name:"batch",bits:[YS,ZS(e),eb]}),s=WS({name:"batch",bits:[HS,QS(e),JS]});super({glProgram:t,gpuProgram:s,resources:{batchSamplers:tb(e)}}),this.maxTextures=e}}let vo=null;const R0=class F0 extends bS{constructor(e){super(e),this.geometry=new MS,this.name=F0.extension.name,this.vertexSize=6,vo??(vo=new wg(e.maxTextures)),this.shader=vo}packAttributes(e,t,s,o,a){const c=a<<16|e.roundPixels&65535,u=e.transform,d=u.a,f=u.b,p=u.c,g=u.d,x=u.tx,v=u.ty,{positions:_,uvs:b}=e,w=e.color,k=e.attributeOffset,A=k+e.attributeSize;for(let P=k;P<A;P++){const C=P*2,F=_[C],R=_[C+1];t[o++]=d*F+p*R+x,t[o++]=g*R+f*F+v,t[o++]=b[C],t[o++]=b[C+1],s[o++]=w,s[o++]=c}}packQuadAttributes(e,t,s,o,a){const c=e.texture,u=e.transform,d=u.a,f=u.b,p=u.c,g=u.d,x=u.tx,v=u.ty,_=e.bounds,b=_.maxX,w=_.minX,k=_.maxY,A=_.minY,P=c.uvs,C=e.color,F=a<<16|e.roundPixels&65535;t[o+0]=d*w+p*A+x,t[o+1]=g*A+f*w+v,t[o+2]=P.x0,t[o+3]=P.y0,s[o+4]=C,s[o+5]=F,t[o+6]=d*b+p*A+x,t[o+7]=g*A+f*b+v,t[o+8]=P.x1,t[o+9]=P.y1,s[o+10]=C,s[o+11]=F,t[o+12]=d*b+p*k+x,t[o+13]=g*k+f*b+v,t[o+14]=P.x2,t[o+15]=P.y2,s[o+16]=C,s[o+17]=F,t[o+18]=d*w+p*k+x,t[o+19]=g*k+f*w+v,t[o+20]=P.x3,t[o+21]=P.y3,s[o+22]=C,s[o+23]=F}_updateMaxTextures(e){this.shader.maxTextures!==e&&(vo=new wg(e),this.shader=vo)}destroy(){this.shader=null,super.destroy()}};R0.extension={type:[we.Batcher],name:"default"};let nb=R0;function rb(n,e,t,s,o,a,c,u=null){let d=0;t*=e,o*=a;const f=u.a,p=u.b,g=u.c,x=u.d,v=u.tx,_=u.ty;for(;d<c;){const b=n[t],w=n[t+1];s[o]=f*b+g*w+v,s[o+1]=p*b+x*w+_,o+=a,t+=e,d++}}function sb(n,e,t,s){let o=0;for(e*=t;o<s;)n[e]=0,n[e+1]=0,e+=t,o++}function L0(n,e,t,s,o){const a=e.a,c=e.b,u=e.c,d=e.d,f=e.tx,p=e.ty;t||(t=0),s||(s=2),o||(o=n.length/s-t);let g=t*s;for(let x=0;x<o;x++){const v=n[g],_=n[g+1];n[g]=a*v+u*_+f,n[g+1]=c*v+d*_+p,g+=s}}const ib=new Re;class N0{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,t=e>>16|e&65280|(e&255)<<16,s=this.renderable;return s?zy(t,s.groupColor)+(this.alpha*s.groupAlpha*255<<24):t+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||ib}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const zo={extension:{type:we.ShapeBuilder,name:"circle"},build(n,e){let t,s,o,a,c,u;if(n.type==="circle"){const C=n;if(c=u=C.radius,c<=0)return!1;t=C.x,s=C.y,o=a=0}else if(n.type==="ellipse"){const C=n;if(c=C.halfWidth,u=C.halfHeight,c<=0||u<=0)return!1;t=C.x,s=C.y,o=a=0}else{const C=n,F=C.width/2,R=C.height/2;t=C.x+F,s=C.y+R,c=u=Math.max(0,Math.min(C.radius,Math.min(F,R))),o=F-c,a=R-u}if(o<0||a<0)return!1;const d=Math.ceil(2.3*Math.sqrt(c+u)),f=d*8+(o?4:0)+(a?4:0);if(f===0)return!1;if(d===0)return e[0]=e[6]=t+o,e[1]=e[3]=s+a,e[2]=e[4]=t-o,e[5]=e[7]=s-a,!0;let p=0,g=d*4+(o?2:0)+2,x=g,v=f,_=o+c,b=a,w=t+_,k=t-_,A=s+b;if(e[p++]=w,e[p++]=A,e[--g]=A,e[--g]=k,a){const C=s-b;e[x++]=k,e[x++]=C,e[--v]=C,e[--v]=w}for(let C=1;C<d;C++){const F=Math.PI/2*(C/d),R=o+Math.cos(F)*c,L=a+Math.sin(F)*u,Q=t+R,W=t-R,B=s+L,$=s-L;e[p++]=Q,e[p++]=B,e[--g]=B,e[--g]=W,e[x++]=W,e[x++]=$,e[--v]=$,e[--v]=Q}_=o,b=a+u,w=t+_,k=t-_,A=s+b;const P=s-b;return e[p++]=w,e[p++]=A,e[--v]=P,e[--v]=w,o&&(e[p++]=k,e[p++]=A,e[--v]=P,e[--v]=k),!0},triangulate(n,e,t,s,o,a){if(n.length===0)return;let c=0,u=0;for(let p=0;p<n.length;p+=2)c+=n[p],u+=n[p+1];c/=n.length/2,u/=n.length/2;let d=s;e[d*t]=c,e[d*t+1]=u;const f=d++;for(let p=0;p<n.length;p+=2)e[d*t]=n[p],e[d*t+1]=n[p+1],p>0&&(o[a++]=d,o[a++]=f,o[a++]=d-1),d++;o[a++]=f+1,o[a++]=f,o[a++]=d-1}},ob={...zo,extension:{...zo.extension,name:"ellipse"}},ab={...zo,extension:{...zo.extension,name:"roundedRectangle"}},B0=1e-4,Sg=1e-4;function lb(n){const e=n.length;if(e<6)return 1;let t=0;for(let s=0,o=n[e-2],a=n[e-1];s<e;s+=2){const c=n[s],u=n[s+1];t+=(c-o)*(u+a),o=c,a=u}return t<0?-1:1}function bg(n,e,t,s,o,a,c,u){const d=n-t*o,f=e-s*o,p=n+t*a,g=e+s*a;let x,v;c?(x=s,v=-t):(x=-s,v=t);const _=d+x,b=f+v,w=p+x,k=g+v;return u.push(_,b),u.push(w,k),2}function _s(n,e,t,s,o,a,c,u){const d=t-n,f=s-e;let p=Math.atan2(d,f),g=Math.atan2(o-n,a-e);u&&p<g?p+=Math.PI*2:!u&&p>g&&(g+=Math.PI*2);let x=p;const v=g-p,_=Math.abs(v),b=Math.sqrt(d*d+f*f),w=(15*_*Math.sqrt(b)/Math.PI>>0)+1,k=v/w;if(x+=k,u){c.push(n,e),c.push(t,s);for(let A=1,P=x;A<w;A++,P+=k)c.push(n,e),c.push(n+Math.sin(P)*b,e+Math.cos(P)*b);c.push(n,e),c.push(o,a)}else{c.push(t,s),c.push(n,e);for(let A=1,P=x;A<w;A++,P+=k)c.push(n+Math.sin(P)*b,e+Math.cos(P)*b),c.push(n,e);c.push(o,a),c.push(n,e)}return w*2}function cb(n,e,t,s,o,a){const c=B0;if(n.length===0)return;const u=e;let d=u.alignment;if(e.alignment!==.5){let X=lb(n);d=(d-.5)*X+.5}const f=new Bt(n[0],n[1]),p=new Bt(n[n.length-2],n[n.length-1]),g=s,x=Math.abs(f.x-p.x)<c&&Math.abs(f.y-p.y)<c;if(g){n=n.slice(),x&&(n.pop(),n.pop(),p.set(n[n.length-2],n[n.length-1]));const X=(f.x+p.x)*.5,te=(p.y+f.y)*.5;n.unshift(X,te),n.push(X,te)}const v=o,_=n.length/2;let b=n.length;const w=v.length/2,k=u.width/2,A=k*k,P=u.miterLimit*u.miterLimit;let C=n[0],F=n[1],R=n[2],L=n[3],Q=0,W=0,B=-(F-L),$=C-R,re=0,le=0,ce=Math.sqrt(B*B+$*$);B/=ce,$/=ce,B*=k,$*=k;const Se=d,q=(1-Se)*2,Z=Se*2;g||(u.cap==="round"?b+=_s(C-B*(q-Z)*.5,F-$*(q-Z)*.5,C-B*q,F-$*q,C+B*Z,F+$*Z,v,!0)+2:u.cap==="square"&&(b+=bg(C,F,B,$,q,Z,!0,v))),v.push(C-B*q,F-$*q),v.push(C+B*Z,F+$*Z);for(let X=1;X<_-1;++X){C=n[(X-1)*2],F=n[(X-1)*2+1],R=n[X*2],L=n[X*2+1],Q=n[(X+1)*2],W=n[(X+1)*2+1],B=-(F-L),$=C-R,ce=Math.sqrt(B*B+$*$),B/=ce,$/=ce,B*=k,$*=k,re=-(L-W),le=R-Q,ce=Math.sqrt(re*re+le*le),re/=ce,le/=ce,re*=k,le*=k;const te=R-C,M=F-L,O=R-Q,j=W-L,K=te*O+M*j,se=M*O-j*te,H=se<0;if(Math.abs(se)<.001*Math.abs(K)){v.push(R-B*q,L-$*q),v.push(R+B*Z,L+$*Z),K>=0&&(u.join==="round"?b+=_s(R,L,R-B*q,L-$*q,R-re*q,L-le*q,v,!1)+4:b+=2,v.push(R-re*Z,L-le*Z),v.push(R+re*q,L+le*q));continue}const U=(-B+C)*(-$+L)-(-B+R)*(-$+F),Y=(-re+Q)*(-le+L)-(-re+R)*(-le+W),V=(te*Y-O*U)/se,ae=(j*U-M*Y)/se,be=(V-R)*(V-R)+(ae-L)*(ae-L),ye=R+(V-R)*q,_e=L+(ae-L)*q,pe=R-(V-R)*Z,Me=L-(ae-L)*Z,Ee=Math.min(te*te+M*M,O*O+j*j),De=H?q:Z,st=Ee+De*De*A;be<=st?u.join==="bevel"||be/A>P?(H?(v.push(ye,_e),v.push(R+B*Z,L+$*Z),v.push(ye,_e),v.push(R+re*Z,L+le*Z)):(v.push(R-B*q,L-$*q),v.push(pe,Me),v.push(R-re*q,L-le*q),v.push(pe,Me)),b+=2):u.join==="round"?H?(v.push(ye,_e),v.push(R+B*Z,L+$*Z),b+=_s(R,L,R+B*Z,L+$*Z,R+re*Z,L+le*Z,v,!0)+4,v.push(ye,_e),v.push(R+re*Z,L+le*Z)):(v.push(R-B*q,L-$*q),v.push(pe,Me),b+=_s(R,L,R-B*q,L-$*q,R-re*q,L-le*q,v,!1)+4,v.push(R-re*q,L-le*q),v.push(pe,Me)):(v.push(ye,_e),v.push(pe,Me)):(v.push(R-B*q,L-$*q),v.push(R+B*Z,L+$*Z),u.join==="round"?H?b+=_s(R,L,R+B*Z,L+$*Z,R+re*Z,L+le*Z,v,!0)+2:b+=_s(R,L,R-B*q,L-$*q,R-re*q,L-le*q,v,!1)+2:u.join==="miter"&&be/A<=P&&(H?(v.push(pe,Me),v.push(pe,Me)):(v.push(ye,_e),v.push(ye,_e)),b+=2),v.push(R-re*q,L-le*q),v.push(R+re*Z,L+le*Z),b+=2)}C=n[(_-2)*2],F=n[(_-2)*2+1],R=n[(_-1)*2],L=n[(_-1)*2+1],B=-(F-L),$=C-R,ce=Math.sqrt(B*B+$*$),B/=ce,$/=ce,B*=k,$*=k,v.push(R-B*q,L-$*q),v.push(R+B*Z,L+$*Z),g||(u.cap==="round"?b+=_s(R-B*(q-Z)*.5,L-$*(q-Z)*.5,R-B*q,L-$*q,R+B*Z,L+$*Z,v,!1)+2:u.cap==="square"&&(b+=bg(R,L,B,$,q,Z,!1,v)));const J=Sg*Sg;for(let X=w;X<b+w-2;++X)C=v[X*2],F=v[X*2+1],R=v[(X+1)*2],L=v[(X+1)*2+1],Q=v[(X+2)*2],W=v[(X+2)*2+1],!(Math.abs(C*(L-W)+R*(W-F)+Q*(F-L))<J)&&a.push(X,X+1,X+2)}function ub(n,e,t,s){const o=B0;if(n.length===0)return;const a=n[0],c=n[1],u=n[n.length-2],d=n[n.length-1],f=e||Math.abs(a-u)<o&&Math.abs(c-d)<o,p=t,g=n.length/2,x=p.length/2;for(let v=0;v<g;v++)p.push(n[v*2]),p.push(n[v*2+1]);for(let v=0;v<g-1;v++)s.push(x+v,x+v+1);f&&s.push(x+g-1,x)}function O0(n,e,t,s,o,a,c){const u=Qw(n,e,2);if(!u)return;for(let f=0;f<u.length;f+=3)a[c++]=u[f]+o,a[c++]=u[f+1]+o,a[c++]=u[f+2]+o;let d=o*s;for(let f=0;f<n.length;f+=2)t[d]=n[f],t[d+1]=n[f+1],d+=s}const hb=[],db={extension:{type:we.ShapeBuilder,name:"polygon"},build(n,e){for(let t=0;t<n.points.length;t++)e[t]=n.points[t];return!0},triangulate(n,e,t,s,o,a){O0(n,hb,e,t,s,o,a)}},fb={extension:{type:we.ShapeBuilder,name:"rectangle"},build(n,e){const t=n,s=t.x,o=t.y,a=t.width,c=t.height;return a>0&&c>0?(e[0]=s,e[1]=o,e[2]=s+a,e[3]=o,e[4]=s+a,e[5]=o+c,e[6]=s,e[7]=o+c,!0):!1},triangulate(n,e,t,s,o,a){let c=0;s*=t,e[s+c]=n[0],e[s+c+1]=n[1],c+=t,e[s+c]=n[2],e[s+c+1]=n[3],c+=t,e[s+c]=n[6],e[s+c+1]=n[7],c+=t,e[s+c]=n[4],e[s+c+1]=n[5],c+=t;const u=s/t;o[a++]=u,o[a++]=u+1,o[a++]=u+2,o[a++]=u+1,o[a++]=u+3,o[a++]=u+2}},pb={extension:{type:we.ShapeBuilder,name:"triangle"},build(n,e){return e[0]=n.x,e[1]=n.y,e[2]=n.x2,e[3]=n.y2,e[4]=n.x3,e[5]=n.y3,!0},triangulate(n,e,t,s,o,a){let c=0;s*=t,e[s+c]=n[0],e[s+c+1]=n[1],c+=t,e[s+c]=n[2],e[s+c+1]=n[3],c+=t,e[s+c]=n[4],e[s+c+1]=n[5];const u=s/t;o[a++]=u,o[a++]=u+1,o[a++]=u+2}},mb=new Re,gb=new tt;function yb(n,e,t,s){const o=e.matrix?n.copyFrom(e.matrix).invert():n.identity();if(e.textureSpace==="local"){const c=t.getBounds(gb);e.width&&c.pad(e.width);const{x:u,y:d}=c,f=1/c.width,p=1/c.height,g=-u*f,x=-d*p,v=o.a,_=o.b,b=o.c,w=o.d;o.a*=f,o.b*=f,o.c*=p,o.d*=p,o.tx=g*v+x*b+o.tx,o.ty=g*_+x*w+o.ty}else o.translate(e.texture.frame.x,e.texture.frame.y),o.scale(1/e.texture.source.width,1/e.texture.source.height);const a=e.texture.source.style;return!(e.fill instanceof br)&&a.addressMode==="clamp-to-edge"&&(a.addressMode="repeat",a.update()),s&&o.append(mb.copyFrom(s).invert()),o}const Vl={};Mt.handleByMap(we.ShapeBuilder,Vl);Mt.add(fb,db,pb,zo,ob,ab);const xb=new tt,vb=new Re;function _b(n,e){const{geometryData:t,batches:s}=e;s.length=0,t.indices.length=0,t.vertices.length=0,t.uvs.length=0;for(let o=0;o<n.instructions.length;o++){const a=n.instructions[o];if(a.action==="texture")wb(a.data,s,t);else if(a.action==="fill"||a.action==="stroke"){const c=a.action==="stroke",u=a.data.path.shapePath,d=a.data.style,f=a.data.hole;c&&f&&kg(f.shapePath,d,!0,s,t),f&&(u.shapePrimitives[u.shapePrimitives.length-1].holes=f.shapePath.shapePrimitives),kg(u,d,c,s,t)}}}function wb(n,e,t){const s=[],o=Vl.rectangle,a=xb;a.x=n.dx,a.y=n.dy,a.width=n.dw,a.height=n.dh;const c=n.transform;if(!o.build(a,s))return;const{vertices:u,uvs:d,indices:f}=t,p=f.length,g=u.length/2;c&&L0(s,c),o.triangulate(s,u,2,g,f,p);const x=n.image,v=x.uvs;d.push(v.x0,v.y0,v.x1,v.y1,v.x3,v.y3,v.x2,v.y2);const _=wn.get(N0);_.indexOffset=p,_.indexSize=f.length-p,_.attributeOffset=g,_.attributeSize=u.length/2-g,_.baseColor=n.style,_.alpha=n.alpha,_.texture=x,_.geometryData=t,e.push(_)}function kg(n,e,t,s,o){const{vertices:a,uvs:c,indices:u}=o;n.shapePrimitives.forEach(({shape:d,transform:f,holes:p})=>{const g=[],x=Vl[d.type];if(!x.build(d,g))return;const v=u.length,_=a.length/2;let b="triangle-list";if(f&&L0(g,f),t){const P=d.closePath??!0,C=e;C.pixelLine?(ub(g,P,a,u),b="line-list"):cb(g,C,!1,P,a,u)}else if(p){const P=[],C=g.slice();Sb(p).forEach(R=>{P.push(C.length/2),C.push(...R)}),O0(C,P,a,2,_,u,v)}else x.triangulate(g,a,2,_,u,v);const w=c.length/2,k=e.texture;if(k!==Ne.WHITE){const P=yb(vb,e,d,f);rb(a,2,_,c,w,2,a.length/2-_,P)}else sb(c,w,2,a.length/2-_);const A=wn.get(N0);A.indexOffset=v,A.indexSize=u.length-v,A.attributeOffset=_,A.attributeSize=a.length/2-_,A.baseColor=e.color,A.alpha=e.alpha,A.texture=k,A.geometryData=o,A.topology=b,s.push(A)})}function Sb(n){const e=[];for(let t=0;t<n.length;t++){const s=n[t].shape,o=[];Vl[s.type].build(s,o)&&e.push(o)}return e}class bb{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class kb{constructor(){this.instructions=new Uy}init(e){const t=e.maxTextures;this.batcher?this.batcher._updateMaxTextures(t):this.batcher=new nb({maxTextures:t}),this.instructions.reset()}get geometry(){return Pe(v_,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const wd=class Xh{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){Xh.defaultOptions.bezierSmoothness=e?.bezierSmoothness??Xh.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let t=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){t?this._cleanGraphicsContextData(e):t=this._initContext(e),_b(e,t);const s=e.batchMode;e.customShader||s==="no-batch"?t.isBatchable=!1:s==="auto"?t.isBatchable=t.geometryData.vertices.length<400:t.isBatchable=!0,e.dirty=!1}return t}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){const t=wn.get(kb,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:s,geometryData:o}=this._gpuContextHash[e.uid],a=o.vertices.length,c=o.indices.length;for(let p=0;p<s.length;p++)s[p].applyTransform=!1;const u=t.batcher;u.ensureAttributeBuffer(a),u.ensureIndexBuffer(c),u.begin();for(let p=0;p<s.length;p++){const g=s[p];u.add(g)}u.finish(t.instructions);const d=u.geometry;d.indexBuffer.setDataWithSize(u.indexBuffer,u.indexSize,!0),d.buffers[0].setDataWithSize(u.attributeBuffer.float32View,u.attributeSize,!0);const f=u.batches;for(let p=0;p<f.length;p++){const g=f[p];g.bindGroup=fS(g.textures.textures,g.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[e.uid]=t,t}_initContext(e){const t=new bb;return t.context=e,this._gpuContextHash[e.uid]=t,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){const t=this._gpuContextHash[e.uid];t.isBatchable||this._graphicsDataContextHash[e.uid]&&(wn.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),t.batches&&t.batches.forEach(s=>{wn.return(s)})}destroy(){for(const e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context);this._gpuContextHash={},this._graphicsDataContextHash={},this._renderer=null}};wd.extension={type:[we.WebGLSystem,we.WebGPUSystem,we.CanvasSystem],name:"graphicsContext"};wd.defaultOptions={bezierSmoothness:.5};let z0=wd;const Cb=8,gl=11920929e-14,Ab=1;function D0(n,e,t,s,o,a,c,u,d,f){const g=Math.min(.99,Math.max(0,f??z0.defaultOptions.bezierSmoothness));let x=(Ab-g)/1;return x*=x,Tb(e,t,s,o,a,c,u,d,n,x),n}function Tb(n,e,t,s,o,a,c,u,d,f){qh(n,e,t,s,o,a,c,u,d,f,0),d.push(c,u)}function qh(n,e,t,s,o,a,c,u,d,f,p){if(p>Cb)return;const g=(n+t)/2,x=(e+s)/2,v=(t+o)/2,_=(s+a)/2,b=(o+c)/2,w=(a+u)/2,k=(g+v)/2,A=(x+_)/2,P=(v+b)/2,C=(_+w)/2,F=(k+P)/2,R=(A+C)/2;if(p>0){let L=c-n,Q=u-e;const W=Math.abs((t-c)*Q-(s-u)*L),B=Math.abs((o-c)*Q-(a-u)*L);if(W>gl&&B>gl){if((W+B)*(W+B)<=f*(L*L+Q*Q)){d.push(F,R);return}}else if(W>gl){if(W*W<=f*(L*L+Q*Q)){d.push(F,R);return}}else if(B>gl){if(B*B<=f*(L*L+Q*Q)){d.push(F,R);return}}else if(L=F-(n+c)/2,Q=R-(e+u)/2,L*L+Q*Q<=f){d.push(F,R);return}}qh(n,e,g,x,k,A,F,R,d,f,p+1),qh(F,R,P,C,b,w,c,u,d,f,p+1)}const Pb=8,Mb=11920929e-14,Eb=1;function Ib(n,e,t,s,o,a,c,u){const f=Math.min(.99,Math.max(0,u??z0.defaultOptions.bezierSmoothness));let p=(Eb-f)/1;return p*=p,Rb(e,t,s,o,a,c,n,p),n}function Rb(n,e,t,s,o,a,c,u){Qh(c,n,e,t,s,o,a,u,0),c.push(o,a)}function Qh(n,e,t,s,o,a,c,u,d){if(d>Pb)return;const f=(e+s)/2,p=(t+o)/2,g=(s+a)/2,x=(o+c)/2,v=(f+g)/2,_=(p+x)/2;let b=a-e,w=c-t;const k=Math.abs((s-a)*w-(o-c)*b);if(k>Mb){if(k*k<=u*(b*b+w*w)){n.push(v,_);return}}else if(b=v-(e+a)/2,w=_-(t+c)/2,b*b+w*w<=u){n.push(v,_);return}Qh(n,e,t,f,p,v,_,u,d+1),Qh(n,v,_,g,x,a,c,u,d+1)}function j0(n,e,t,s,o,a,c,u){let d=Math.abs(o-a);(!c&&o>a||c&&a>o)&&(d=2*Math.PI-d),u||(u=Math.max(6,Math.floor(6*Math.pow(s,1/3)*(d/Math.PI)))),u=Math.max(u,3);let f=d/u,p=o;f*=c?-1:1;for(let g=0;g<u+1;g++){const x=Math.cos(p),v=Math.sin(p),_=e+x*s,b=t+v*s;n.push(_,b),p+=f}}function Fb(n,e,t,s,o,a){const c=n[n.length-2],d=n[n.length-1]-t,f=c-e,p=o-t,g=s-e,x=Math.abs(d*g-f*p);if(x<1e-8||a===0){(n[n.length-2]!==e||n[n.length-1]!==t)&&n.push(e,t);return}const v=d*d+f*f,_=p*p+g*g,b=d*p+f*g,w=a*Math.sqrt(v)/x,k=a*Math.sqrt(_)/x,A=w*b/v,P=k*b/_,C=w*g+k*f,F=w*p+k*d,R=f*(k+A),L=d*(k+A),Q=g*(w+P),W=p*(w+P),B=Math.atan2(L-F,R-C),$=Math.atan2(W-F,Q-C);j0(n,C+e,F+t,a,B,$,f*p>g*d)}const Io=Math.PI*2,mh={centerX:0,centerY:0,ang1:0,ang2:0},gh=({x:n,y:e},t,s,o,a,c,u,d)=>{n*=t,e*=s;const f=o*n-a*e,p=a*n+o*e;return d.x=f+c,d.y=p+u,d};function Lb(n,e){const t=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),s=e===1.5707963267948966?.551915024494:t,o=Math.cos(n),a=Math.sin(n),c=Math.cos(n+e),u=Math.sin(n+e);return[{x:o-a*s,y:a+o*s},{x:c+u*s,y:u-c*s},{x:c,y:u}]}const Cg=(n,e,t,s)=>{const o=n*s-e*t<0?-1:1;let a=n*t+e*s;return a>1&&(a=1),a<-1&&(a=-1),o*Math.acos(a)},Nb=(n,e,t,s,o,a,c,u,d,f,p,g,x)=>{const v=Math.pow(o,2),_=Math.pow(a,2),b=Math.pow(p,2),w=Math.pow(g,2);let k=v*_-v*w-_*b;k<0&&(k=0),k/=v*w+_*b,k=Math.sqrt(k)*(c===u?-1:1);const A=k*o/a*g,P=k*-a/o*p,C=f*A-d*P+(n+t)/2,F=d*A+f*P+(e+s)/2,R=(p-A)/o,L=(g-P)/a,Q=(-p-A)/o,W=(-g-P)/a,B=Cg(1,0,R,L);let $=Cg(R,L,Q,W);u===0&&$>0&&($-=Io),u===1&&$<0&&($+=Io),x.centerX=C,x.centerY=F,x.ang1=B,x.ang2=$};function Bb(n,e,t,s,o,a,c,u=0,d=0,f=0){if(a===0||c===0)return;const p=Math.sin(u*Io/360),g=Math.cos(u*Io/360),x=g*(e-s)/2+p*(t-o)/2,v=-p*(e-s)/2+g*(t-o)/2;if(x===0&&v===0)return;a=Math.abs(a),c=Math.abs(c);const _=Math.pow(x,2)/Math.pow(a,2)+Math.pow(v,2)/Math.pow(c,2);_>1&&(a*=Math.sqrt(_),c*=Math.sqrt(_)),Nb(e,t,s,o,a,c,d,f,p,g,x,v,mh);let{ang1:b,ang2:w}=mh;const{centerX:k,centerY:A}=mh;let P=Math.abs(w)/(Io/4);Math.abs(1-P)<1e-7&&(P=1);const C=Math.max(Math.ceil(P),1);w/=C;let F=n[n.length-2],R=n[n.length-1];const L={x:0,y:0};for(let Q=0;Q<C;Q++){const W=Lb(b,w),{x:B,y:$}=gh(W[0],a,c,g,p,k,A,L),{x:re,y:le}=gh(W[1],a,c,g,p,k,A,L),{x:ce,y:Se}=gh(W[2],a,c,g,p,k,A,L);D0(n,F,R,B,$,re,le,ce,Se),F=ce,R=Se,b+=w}}function Ob(n,e,t){const s=(c,u)=>{const d=u.x-c.x,f=u.y-c.y,p=Math.sqrt(d*d+f*f),g=d/p,x=f/p;return{len:p,nx:g,ny:x}},o=(c,u)=>{c===0?n.moveTo(u.x,u.y):n.lineTo(u.x,u.y)};let a=e[e.length-1];for(let c=0;c<e.length;c++){const u=e[c%e.length],d=u.radius??t;if(d<=0){o(c,u),a=u;continue}const f=e[(c+1)%e.length],p=s(u,a),g=s(u,f);if(p.len<1e-4||g.len<1e-4){o(c,u),a=u;continue}let x=Math.asin(p.nx*g.ny-p.ny*g.nx),v=1,_=!1;p.nx*g.nx-p.ny*-g.ny<0?x<0?x=Math.PI+x:(x=Math.PI-x,v=-1,_=!0):x>0&&(v=-1,_=!0);const b=x/2;let w,k=Math.abs(Math.cos(b)*d/Math.sin(b));k>Math.min(p.len/2,g.len/2)?(k=Math.min(p.len/2,g.len/2),w=Math.abs(k*Math.sin(b)/Math.cos(b))):w=d;const A=u.x+g.nx*k+-g.ny*w*v,P=u.y+g.ny*k+g.nx*w*v,C=Math.atan2(p.ny,p.nx)+Math.PI/2*v,F=Math.atan2(g.ny,g.nx)-Math.PI/2*v;c===0&&n.moveTo(A+Math.cos(C)*w,P+Math.sin(C)*w),n.arc(A,P,w,C,F,_),a=u}}function zb(n,e,t,s){const o=(u,d)=>Math.sqrt((u.x-d.x)**2+(u.y-d.y)**2),a=(u,d,f)=>({x:u.x+(d.x-u.x)*f,y:u.y+(d.y-u.y)*f}),c=e.length;for(let u=0;u<c;u++){const d=e[(u+1)%c],f=d.radius??t;if(f<=0){u===0?n.moveTo(d.x,d.y):n.lineTo(d.x,d.y);continue}const p=e[u],g=e[(u+2)%c],x=o(p,d);let v;if(x<1e-4)v=d;else{const w=Math.min(x/2,f);v=a(d,p,w/x)}const _=o(g,d);let b;if(_<1e-4)b=d;else{const w=Math.min(_/2,f);b=a(d,g,w/_)}u===0?n.moveTo(v.x,v.y):n.lineTo(v.x,v.y),n.quadraticCurveTo(d.x,d.y,b.x,b.y,s)}}const Db=new tt;class jb{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Dn,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();const s=this._currentPoly.points,o=s[s.length-2],a=s[s.length-1];return(o!==e||a!==t)&&s.push(e,t),this}arc(e,t,s,o,a,c){this._ensurePoly(!1);const u=this._currentPoly.points;return j0(u,e,t,s,o,a,c),this}arcTo(e,t,s,o,a){this._ensurePoly();const c=this._currentPoly.points;return Fb(c,e,t,s,o,a),this}arcToSvg(e,t,s,o,a,c,u){const d=this._currentPoly.points;return Bb(d,this._currentPoly.lastX,this._currentPoly.lastY,c,u,e,t,s,o,a),this}bezierCurveTo(e,t,s,o,a,c,u){this._ensurePoly();const d=this._currentPoly;return D0(this._currentPoly.points,d.lastX,d.lastY,e,t,s,o,a,c,u),this}quadraticCurveTo(e,t,s,o,a){this._ensurePoly();const c=this._currentPoly;return Ib(this._currentPoly.points,c.lastX,c.lastY,e,t,s,o,a),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0),e.transform(t));const s=this.shapePrimitives,o=s.length;for(let a=0;a<e.instructions.length;a++){const c=e.instructions[a];this[c.action](...c.data)}if(e.checkForHoles&&s.length-o>1){let a=null;for(let c=o;c<s.length;c++){const u=s[c];if(u.shape.type==="polygon"){const d=u.shape,f=a?.shape;f&&f.containsPolygon(d)?(a.holes||(a.holes=[]),a.holes.push(u),s.copyWithin(c,c+1),s.length--,c--):a=u}}}return this}finish(e=!1){this.endPoly(e)}rect(e,t,s,o,a){return this.drawShape(new tt(e,t,s,o),a),this}circle(e,t,s,o){return this.drawShape(new xd(e,t,s),o),this}poly(e,t,s){const o=new Mo(e);return o.closePath=t,this.drawShape(o,s),this}regularPoly(e,t,s,o,a=0,c){o=Math.max(o|0,3);const u=-1*Math.PI/2+a,d=Math.PI*2/o,f=[];for(let p=0;p<o;p++){const g=u-p*d;f.push(e+s*Math.cos(g),t+s*Math.sin(g))}return this.poly(f,!0,c),this}roundPoly(e,t,s,o,a,c=0,u){if(o=Math.max(o|0,3),a<=0)return this.regularPoly(e,t,s,o,c);const d=s*Math.sin(Math.PI/o)-.001;a=Math.min(a,d);const f=-1*Math.PI/2+c,p=Math.PI*2/o,g=(o-2)*Math.PI/o/2;for(let x=0;x<o;x++){const v=x*p+f,_=e+s*Math.cos(v),b=t+s*Math.sin(v),w=v+Math.PI+g,k=v-Math.PI-g,A=_+a*Math.cos(w),P=b+a*Math.sin(w),C=_+a*Math.cos(k),F=b+a*Math.sin(k);x===0?this.moveTo(A,P):this.lineTo(A,P),this.quadraticCurveTo(_,b,C,F,u)}return this.closePath()}roundShape(e,t,s=!1,o){return e.length<3?this:(s?zb(this,e,t,o):Ob(this,e,t),this.closePath())}filletRect(e,t,s,o,a){if(a===0)return this.rect(e,t,s,o);const c=Math.min(s,o)/2,u=Math.min(c,Math.max(-c,a)),d=e+s,f=t+o,p=u<0?-u:0,g=Math.abs(u);return this.moveTo(e,t+g).arcTo(e+p,t+p,e+g,t,g).lineTo(d-g,t).arcTo(d-p,t+p,d,t+g,g).lineTo(d,f-g).arcTo(d-p,f-p,e+s-g,f,g).lineTo(e+g,f).arcTo(e+p,f-p,e,f-g,g).closePath()}chamferRect(e,t,s,o,a,c){if(a<=0)return this.rect(e,t,s,o);const u=Math.min(a,Math.min(s,o)/2),d=e+s,f=t+o,p=[e+u,t,d-u,t,d,t+u,d,f-u,d-u,f,e+u,f,e,f-u,e,t+u];for(let g=p.length-1;g>=2;g-=2)p[g]===p[g-2]&&p[g-1]===p[g-3]&&p.splice(g-1,2);return this.poly(p,!0,c)}ellipse(e,t,s,o,a){return this.drawShape(new vd(e,t,s,o),a),this}roundRect(e,t,s,o,a,c){return this.drawShape(new _d(e,t,s,o,a),c),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let s=this._currentPoly;return s&&this.endPoly(),s=new Mo,s.points.push(e,t),this._currentPoly=s,this}endPoly(e=!1){const t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new Mo,e)){const t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let s=t.shape.x,o=t.shape.y;if(t.transform&&!t.transform.isIdentity()){const a=t.transform,c=s;s=a.a*s+a.c*o+a.tx,o=a.b*c+a.d*o+a.ty}this._currentPoly.points.push(s,o)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){const s=e.instructions[t];this[s.action](...s.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const t=this.shapePrimitives;for(let s=0;s<t.length;s++){const o=t[s],a=o.shape.getBounds(Db);o.transform?e.addRect(a,o.transform):e.addRect(a)}return e}}class Sr{constructor(e,t=!1){this.instructions=[],this.uid=dt("graphicsPath"),this._dirty=!0,this.checkForHoles=t,typeof e=="string"?cS(e,this):this.instructions=e?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new jb(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,s,o,a){const c=this.instructions[this.instructions.length-1],u=this.getLastPoint(Bt.shared);let d=0,f=0;if(!c||c.action!=="bezierCurveTo")d=u.x,f=u.y;else{d=c.data[2],f=c.data[3];const p=u.x,g=u.y;d=p+(p-d),f=g+(g-f)}return this.instructions.push({action:"bezierCurveTo",data:[d,f,e,t,s,o,a]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,s){const o=this.instructions[this.instructions.length-1],a=this.getLastPoint(Bt.shared);let c=0,u=0;if(!o||o.action!=="quadraticCurveTo")c=a.x,u=a.y;else{c=o.data[0],u=o.data[1];const d=a.x,f=a.y;c=d+(d-c),u=f+(f-u)}return this.instructions.push({action:"quadraticCurveTo",data:[c,u,e,t,s]}),this._dirty=!0,this}rect(e,t,s,o,a){return this.instructions.push({action:"rect",data:[e,t,s,o,a]}),this._dirty=!0,this}circle(e,t,s,o){return this.instructions.push({action:"circle",data:[e,t,s,o]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,s,o,a,c,u){a||(a=o/2);const d=-1*Math.PI/2+c,f=s*2,p=Math.PI*2/f,g=[];for(let x=0;x<f;x++){const v=x%2?a:o,_=x*p+d;g.push(e+v*Math.cos(_),t+v*Math.sin(_))}return this.poly(g,!0,u),this}clone(e=!1){const t=new Sr;if(t.checkForHoles=this.checkForHoles,!e)t.instructions=this.instructions.slice();else for(let s=0;s<this.instructions.length;s++){const o=this.instructions[s];t.instructions.push({action:o.action,data:o.data.slice()})}return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const t=e.a,s=e.b,o=e.c,a=e.d,c=e.tx,u=e.ty;let d=0,f=0,p=0,g=0,x=0,v=0,_=0,b=0;for(let w=0;w<this.instructions.length;w++){const k=this.instructions[w],A=k.data;switch(k.action){case"moveTo":case"lineTo":d=A[0],f=A[1],A[0]=t*d+o*f+c,A[1]=s*d+a*f+u;break;case"bezierCurveTo":p=A[0],g=A[1],x=A[2],v=A[3],d=A[4],f=A[5],A[0]=t*p+o*g+c,A[1]=s*p+a*g+u,A[2]=t*x+o*v+c,A[3]=s*x+a*v+u,A[4]=t*d+o*f+c,A[5]=s*d+a*f+u;break;case"quadraticCurveTo":p=A[0],g=A[1],d=A[2],f=A[3],A[0]=t*p+o*g+c,A[1]=s*p+a*g+u,A[2]=t*d+o*f+c,A[3]=s*d+a*f+u;break;case"arcToSvg":d=A[5],f=A[6],_=A[0],b=A[1],A[0]=t*_+o*b,A[1]=s*_+a*b,A[5]=t*d+o*f+c,A[6]=s*d+a*f+u;break;case"circle":A[4]=_o(A[3],e);break;case"rect":A[4]=_o(A[4],e);break;case"ellipse":A[8]=_o(A[8],e);break;case"roundRect":A[5]=_o(A[5],e);break;case"addPath":A[0].transform(e);break;case"poly":A[2]=_o(A[2],e);break;default:et("unknown transform action",k.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,s=this.instructions[t];if(!s)return e.x=0,e.y=0,e;for(;s.action==="closePath";){if(t--,t<0)return e.x=0,e.y=0,e;s=this.instructions[t]}switch(s.action){case"moveTo":case"lineTo":e.x=s.data[0],e.y=s.data[1];break;case"quadraticCurveTo":e.x=s.data[2],e.y=s.data[3];break;case"bezierCurveTo":e.x=s.data[4],e.y=s.data[5];break;case"arc":case"arcToSvg":e.x=s.data[5],e.y=s.data[6];break;case"addPath":s.data[0].getLastPoint(e);break}return e}}function _o(n,e){return n?n.prepend(e):e.clone()}function ht(n,e,t){const s=n.getAttribute(e);return s?Number(s):t}function Gb(n,e){const t=n.querySelectorAll("defs");for(let s=0;s<t.length;s++){const o=t[s];for(let a=0;a<o.children.length;a++){const c=o.children[a];switch(c.nodeName.toLowerCase()){case"lineargradient":e.defs[c.id]=Ub(c);break;case"radialgradient":e.defs[c.id]=$b();break}}}}function Ub(n){const e=ht(n,"x1",0),t=ht(n,"y1",0),s=ht(n,"x2",1),o=ht(n,"y2",0),a=n.getAttribute("gradientUnits")||"objectBoundingBox",c=new br(e,t,s,o,a==="objectBoundingBox"?"local":"global");for(let u=0;u<n.children.length;u++){const d=n.children[u],f=ht(d,"offset",0),p=yt.shared.setValue(d.getAttribute("stop-color")).toNumber();c.addColorStop(f,p)}return c}function $b(n){return et("[SVG Parser] Radial gradients are not yet supported"),new br(0,0,1,0)}function Ag(n){const e=n.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const Tg={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function G0(n,e){const t=n.getAttribute("style"),s={},o={},a={strokeStyle:s,fillStyle:o,useFill:!1,useStroke:!1};for(const c in Tg){const u=n.getAttribute(c);u&&Pg(e,a,c,u.trim())}if(t){const c=t.split(";");for(let u=0;u<c.length;u++){const d=c[u].trim(),[f,p]=d.split(":");Tg[f]&&Pg(e,a,f,p.trim())}}return{strokeStyle:a.useStroke?s:null,fillStyle:a.useFill?o:null,useFill:a.useFill,useStroke:a.useStroke}}function Pg(n,e,t,s){switch(t){case"stroke":if(s!=="none"){if(s.startsWith("url(")){const o=Ag(s);e.strokeStyle.fill=n.defs[o]}else e.strokeStyle.color=yt.shared.setValue(s).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(s);break;case"fill":if(s!=="none"){if(s.startsWith("url(")){const o=Ag(s);e.fillStyle.fill=n.defs[o]}else e.fillStyle.color=yt.shared.setValue(s).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(s);break;case"stroke-opacity":e.strokeStyle.alpha=Number(s);break;case"opacity":e.fillStyle.alpha=Number(s),e.strokeStyle.alpha=Number(s);break}}function Wb(n){if(n.length<=2)return!0;const e=n.map(u=>u.area).sort((u,d)=>d-u),[t,s]=e,o=e[e.length-1],a=t/s,c=s/o;return!(a>3&&c<2)}function Vb(n){return n.split(/(?=[Mm])/).filter(s=>s.trim().length>0)}function Hb(n){const e=n.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!e||e.length<4)return 0;const t=e.map(Number),s=[],o=[];for(let p=0;p<t.length;p+=2)p+1<t.length&&(s.push(t[p]),o.push(t[p+1]));if(s.length===0||o.length===0)return 0;const a=Math.min(...s),c=Math.max(...s),u=Math.min(...o),d=Math.max(...o);return(c-a)*(d-u)}function Mg(n,e){const t=new Sr(n,!1);for(const s of t.instructions)e.instructions.push(s)}function Yb(n,e){if(typeof n=="string"){const c=document.createElement("div");c.innerHTML=n.trim(),n=c.querySelector("svg")}const t={context:e,defs:{},path:new Sr};Gb(n,t);const s=n.children,{fillStyle:o,strokeStyle:a}=G0(n,t);for(let c=0;c<s.length;c++){const u=s[c];u.nodeName.toLowerCase()!=="defs"&&U0(u,t,o,a)}return e}function U0(n,e,t,s){const o=n.children,{fillStyle:a,strokeStyle:c}=G0(n,e);a&&t?t={...t,...a}:a&&(t=a),c&&s?s={...s,...c}:c&&(s=c);const u=!t&&!s;u&&(t={color:0});let d,f,p,g,x,v,_,b,w,k,A,P,C,F,R,L,Q;switch(n.nodeName.toLowerCase()){case"path":{F=n.getAttribute("d");const W=n.getAttribute("fill-rule"),B=Vb(F),$=W==="evenodd",re=B.length>1;if($&&re){const ce=B.map(q=>({path:q,area:Hb(q)}));if(ce.sort((q,Z)=>Z.area-q.area),B.length>3||!Wb(ce))for(let q=0;q<ce.length;q++){const Z=ce[q],J=q===0;e.context.beginPath();const X=new Sr(void 0,!0);Mg(Z.path,X),e.context.path(X),J?(t&&e.context.fill(t),s&&e.context.stroke(s)):e.context.cut()}else for(let q=0;q<ce.length;q++){const Z=ce[q],J=q%2===1;e.context.beginPath();const X=new Sr(void 0,!0);Mg(Z.path,X),e.context.path(X),J?e.context.cut():(t&&e.context.fill(t),s&&e.context.stroke(s))}}else{const ce=W?W==="evenodd":!0;R=new Sr(F,ce),e.context.path(R),t&&e.context.fill(t),s&&e.context.stroke(s)}break}case"circle":_=ht(n,"cx",0),b=ht(n,"cy",0),w=ht(n,"r",0),e.context.ellipse(_,b,w,w),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"rect":d=ht(n,"x",0),f=ht(n,"y",0),L=ht(n,"width",0),Q=ht(n,"height",0),k=ht(n,"rx",0),A=ht(n,"ry",0),k||A?e.context.roundRect(d,f,L,Q,k||A):e.context.rect(d,f,L,Q),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"ellipse":_=ht(n,"cx",0),b=ht(n,"cy",0),k=ht(n,"rx",0),A=ht(n,"ry",0),e.context.beginPath(),e.context.ellipse(_,b,k,A),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"line":p=ht(n,"x1",0),g=ht(n,"y1",0),x=ht(n,"x2",0),v=ht(n,"y2",0),e.context.beginPath(),e.context.moveTo(p,g),e.context.lineTo(x,v),s&&e.context.stroke(s);break;case"polygon":C=n.getAttribute("points"),P=C.match(/\d+/g).map(W=>parseInt(W,10)),e.context.poly(P,!0),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"polyline":C=n.getAttribute("points"),P=C.match(/\d+/g).map(W=>parseInt(W,10)),e.context.poly(P,!1),s&&e.context.stroke(s);break;case"g":case"svg":break;default:{et(`[SVG parser] <${n.nodeName}> elements unsupported`);break}}u&&(t=null);for(let W=0;W<o.length;W++)U0(o[W],e,t,s)}function Xb(n){return yt.isColorLike(n)}function Eg(n){return n instanceof Wl}function Ig(n){return n instanceof br}function qb(n){return n instanceof Ne}function Qb(n,e,t){const s=yt.shared.setValue(e??0);return n.color=s.toNumber(),n.alpha=s.alpha===1?t.alpha:s.alpha,n.texture=Ne.WHITE,{...t,...n}}function Kb(n,e,t){return n.texture=e,{...t,...n}}function Rg(n,e,t){return n.fill=e,n.color=16777215,n.texture=e.texture,n.matrix=e.transform,{...t,...n}}function Fg(n,e,t){return e.buildGradient(),n.fill=e,n.color=16777215,n.texture=e.texture,n.matrix=e.transform,n.textureSpace=e.textureSpace,{...t,...n}}function Zb(n,e){const t={...e,...n},s=yt.shared.setValue(t.color);return t.alpha*=s.alpha,t.color=s.toNumber(),t}function Ts(n,e){if(n==null)return null;const t={},s=n;return Xb(n)?Qb(t,n,e):qb(n)?Kb(t,n,e):Eg(n)?Rg(t,n,e):Ig(n)?Fg(t,n,e):s.fill&&Eg(s.fill)?Rg(s,s.fill,e):s.fill&&Ig(s.fill)?Fg(s,s.fill,e):Zb(s,e)}function Fl(n,e){const{width:t,alignment:s,miterLimit:o,cap:a,join:c,pixelLine:u,...d}=e,f=Ts(n,d);return f?{width:t,alignment:s,miterLimit:o,cap:a,join:c,pixelLine:u,...f}:null}const Jb=new Bt,Lg=new Re,Sd=class er extends Gn{constructor(){super(...arguments),this.uid=dt("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new Sr,this._transform=new Re,this._fillStyle={...er.defaultFillStyle},this._strokeStyle={...er.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Dn,this._boundsDirty=!0}clone(){const e=new er;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=Ts(e,er.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=Fl(e,er.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=Ts(e,er.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=Ts(e,er.defaultStrokeStyle),this}texture(e,t,s,o,a,c){return this.instructions.push({action:"texture",data:{image:e,dx:s||0,dy:o||0,dw:a||e.frame.width,dh:c||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?yt.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Sr,this}fill(e,t){let s;const o=this.instructions[this.instructions.length-1];return this._tick===0&&o?.action==="stroke"?s=o.data.path:s=this._activePath.clone(),s?(e!=null&&(t!==void 0&&typeof e=="number"&&(Pe(je,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:t}),this._fillStyle=Ts(e,er.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:t}=this._activePath.getLastPoint(Bt.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(e){let t;const s=this.instructions[this.instructions.length-1];return this._tick===0&&s?.action==="fill"?t=s.data.path:t=this._activePath.clone(),t?(e!=null&&(this._strokeStyle=Fl(e,er.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const t=this.instructions[this.instructions.length-1-e],s=this._activePath.clone();if(t&&(t.action==="stroke"||t.action==="fill"))if(t.data.hole)t.data.hole.addPath(s);else{t.data.hole=s;break}}return this._initNextPathLocation(),this}arc(e,t,s,o,a,c){this._tick++;const u=this._transform;return this._activePath.arc(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,s,o,a,c),this}arcTo(e,t,s,o,a){this._tick++;const c=this._transform;return this._activePath.arcTo(c.a*e+c.c*t+c.tx,c.b*e+c.d*t+c.ty,c.a*s+c.c*o+c.tx,c.b*s+c.d*o+c.ty,a),this}arcToSvg(e,t,s,o,a,c,u){this._tick++;const d=this._transform;return this._activePath.arcToSvg(e,t,s,o,a,d.a*c+d.c*u+d.tx,d.b*c+d.d*u+d.ty),this}bezierCurveTo(e,t,s,o,a,c,u){this._tick++;const d=this._transform;return this._activePath.bezierCurveTo(d.a*e+d.c*t+d.tx,d.b*e+d.d*t+d.ty,d.a*s+d.c*o+d.tx,d.b*s+d.d*o+d.ty,d.a*a+d.c*c+d.tx,d.b*a+d.d*c+d.ty,u),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(e,t,s,o){return this._tick++,this._activePath.ellipse(e,t,s,o,this._transform.clone()),this}circle(e,t,s){return this._tick++,this._activePath.circle(e,t,s,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;const s=this._transform;return this._activePath.lineTo(s.a*e+s.c*t+s.tx,s.b*e+s.d*t+s.ty),this}moveTo(e,t){this._tick++;const s=this._transform,o=this._activePath.instructions,a=s.a*e+s.c*t+s.tx,c=s.b*e+s.d*t+s.ty;return o.length===1&&o[0].action==="moveTo"?(o[0].data[0]=a,o[0].data[1]=c,this):(this._activePath.moveTo(a,c),this)}quadraticCurveTo(e,t,s,o,a){this._tick++;const c=this._transform;return this._activePath.quadraticCurveTo(c.a*e+c.c*t+c.tx,c.b*e+c.d*t+c.ty,c.a*s+c.c*o+c.tx,c.b*s+c.d*o+c.ty,a),this}rect(e,t,s,o){return this._tick++,this._activePath.rect(e,t,s,o,this._transform.clone()),this}roundRect(e,t,s,o,a){return this._tick++,this._activePath.roundRect(e,t,s,o,a,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,s,o,a=0,c){return this._tick++,this._activePath.regularPoly(e,t,s,o,a,c),this}roundPoly(e,t,s,o,a,c){return this._tick++,this._activePath.roundPoly(e,t,s,o,a,c),this}roundShape(e,t,s,o){return this._tick++,this._activePath.roundShape(e,t,s,o),this}filletRect(e,t,s,o,a){return this._tick++,this._activePath.filletRect(e,t,s,o,a),this}chamferRect(e,t,s,o,a,c){return this._tick++,this._activePath.chamferRect(e,t,s,o,a,c),this}star(e,t,s,o,a=0,c=0){return this._tick++,this._activePath.star(e,t,s,o,a,c,this._transform.clone()),this}svg(e){return this._tick++,Yb(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,s,o,a,c){return e instanceof Re?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,s,o,a,c),this)}transform(e,t,s,o,a,c){return e instanceof Re?(this._transform.append(e),this):(Lg.set(e,t,s,o,a,c),this._transform.append(Lg),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){const s=this.instructions[t],o=s.action;if(o==="fill"){const a=s.data;e.addBounds(a.path.bounds)}else if(o==="texture"){const a=s.data;e.addFrame(a.dx,a.dy,a.dx+a.dw,a.dy+a.dh,a.transform)}if(o==="stroke"){const a=s.data,c=a.style.alignment,u=a.style.width*(1-c),d=a.path.bounds;e.addFrame(d.minX-u,d.minY-u,d.maxX+u,d.maxY+u)}}return e}containsPoint(e){if(!this.bounds.containsPoint(e.x,e.y))return!1;const t=this.instructions;let s=!1;for(let o=0;o<t.length;o++){const a=t[o],c=a.data,u=c.path;if(!a.action||!u)continue;const d=c.style,f=u.shapePath.shapePrimitives;for(let p=0;p<f.length;p++){const g=f[p].shape;if(!d||!g)continue;const x=f[p].transform,v=x?x.applyInverse(e,Jb):e;if(a.action==="fill")s=g.contains(v.x,v.y);else{const b=d;s=g.strokeContains(v.x,v.y,b.width,b.alignment)}const _=c.hole;if(_){const b=_.shapePath?.shapePrimitives;if(b)for(let w=0;w<b.length;w++)b[w].shape.contains(v.x,v.y)&&(s=!1)}if(s)return!0}}return s}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){const s=typeof e=="boolean"?e:e?.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(s)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(s))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};Sd.defaultFillStyle={color:16777215,alpha:1,texture:Ne.WHITE,matrix:null,fill:null,textureSpace:"local"};Sd.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Ne.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let xn=Sd;const bd=class oi extends Gn{constructor(e={}){super(),this.uid=dt("textStyle"),this._tick=0,ek(e);const t={...oi.defaultTextStyle,...e};for(const s in t){const o=s;this[o]=t[s]}this.update(),this._tick=0}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.update())}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...oi.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...oi.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.update())}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.update())}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.update())}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.update())}get filters(){return this._filters}set filters(e){this._filters!==e&&(this._filters=Object.freeze(e),this.update())}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.update())}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...xn.defaultFillStyle,...e},()=>{this._fill=Ts({...this._originalFill},xn.defaultFillStyle)})),this._fill=Ts(e===0?"black":e,xn.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...xn.defaultStrokeStyle,...e},()=>{this._stroke=Fl({...this._originalStroke},xn.defaultStrokeStyle)})),this._stroke=Fl(e,xn.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const e=oi.defaultTextStyle;for(const t in e)this[t]=e[t]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new oi({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let e=0;if(this._filters)for(let t=0;t<this._filters.length;t++)e+=this._filters[t].padding;return Math.max(this._padding,e)}destroy(e=!1){if(this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){const s=typeof e=="boolean"?e:e?.textureSource;this._fill?.texture&&this._fill.texture.destroy(s),this._originalFill?.texture&&this._originalFill.texture.destroy(s),this._stroke?.texture&&this._stroke.texture.destroy(s),this._originalStroke?.texture&&this._originalStroke.texture.destroy(s)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,t){return new Proxy(e,{set:(s,o,a)=>(s[o]===a||(s[o]=a,t?.(o,a),this.update()),!0)})}_isFillStyle(e){return(e??null)!==null&&!(yt.isColorLike(e)||e instanceof br||e instanceof Wl)}};bd.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};bd.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Kr=bd;function ek(n){const e=n;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const t=Kr.defaultDropShadow;n.dropShadow={alpha:e.dropShadowAlpha??t.alpha,angle:e.dropShadowAngle??t.angle,blur:e.dropShadowBlur??t.blur,color:e.dropShadowColor??t.color,distance:e.dropShadowDistance??t.distance}}if(e.strokeThickness!==void 0){Pe(je,"strokeThickness is now a part of stroke");const t=e.stroke;let s={};if(yt.isColorLike(t))s.color=t;else if(t instanceof br||t instanceof Wl)s.fill=t;else if(Object.hasOwnProperty.call(t,"color")||Object.hasOwnProperty.call(t,"fill"))s=t;else throw new Error("Invalid stroke value.");n.stroke={...s,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){if(Pe(je,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(e.fill)||e.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");e.fill.length!==e.fillGradientStops.length&&et("The number of fill colors must match the number of fill gradient stops.");const t=new br({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),s=e.fillGradientStops.slice(),o=e.fill.map(a=>yt.shared.setValue(a).toNumber());s.forEach((a,c)=>{t.addColorStop(a,o[c])}),n.fill={fill:t}}}class tk{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){const s=qe.get().createCanvas();s.width=e,s.height=t;const o=s.getContext("2d");return{canvas:s,context:o}}getOptimalCanvasAndContext(e,t,s=1){e=Math.ceil(e*s-1e-6),t=Math.ceil(t*s-1e-6),e=yi(e),t=yi(t);const o=(e<<17)+(t<<1);this._canvasPool[o]||(this._canvasPool[o]=[]);let a=this._canvasPool[o].pop();return a||(a=this._createCanvasAndContext(e,t)),a}returnCanvasAndContext(e){const t=e.canvas,{width:s,height:o}=t,a=(s<<17)+(o<<1);e.context.resetTransform(),e.context.clearRect(0,0,s,o),this._canvasPool[a].push(e)}clear(){this._canvasPool={}}}const Do=new tk;Ho.register(Do);const Ng=1e5;function Ll(n,e,t,s=0){if(n.texture===Ne.WHITE&&!n.fill)return yt.shared.setValue(n.color).setAlpha(n.alpha??1).toHexa();if(n.fill){if(n.fill instanceof Wl){const o=n.fill,a=e.createPattern(o.texture.source.resource,"repeat"),c=o.transform.copyTo(Re.shared);return c.scale(o.texture.frame.width,o.texture.frame.height),a.setTransform(c),a}else if(n.fill instanceof br){const o=n.fill,a=o.type==="linear",c=o.textureSpace==="local";let u=1,d=1;c&&t&&(u=t.width+s,d=t.height+s);let f,p=!1;if(a){const{start:g,end:x}=o;f=e.createLinearGradient(g.x*u,g.y*d,x.x*u,x.y*d),p=Math.abs(x.x-g.x)<Math.abs((x.y-g.y)*.1)}else{const{center:g,innerRadius:x,outerCenter:v,outerRadius:_}=o;f=e.createRadialGradient(g.x*u,g.y*d,x*u,v.x*u,v.y*d,_*u)}if(p&&c&&t){const g=t.lineHeight/d;for(let x=0;x<t.lines.length;x++){const v=(x*t.lineHeight+s/2)/d;o.colorStops.forEach(_=>{const b=v+_.offset*g;f.addColorStop(Math.floor(b*Ng)/Ng,yt.shared.setValue(_.color).toHex())})}}else o.colorStops.forEach(g=>{f.addColorStop(g.offset,yt.shared.setValue(g.color).toHex())});return f}}else{const o=e.createPattern(n.texture.source.resource,"repeat"),a=n.matrix.copyTo(Re.shared);return a.scale(n.texture.frame.width,n.texture.frame.height),o.setTransform(a),o}return et("FillStyle not recognised",n),"red"}const $0=class W0 extends k0{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const t={...W0.defaultOptions,...e};this._textureSize=t.textureSize,this._mipmap=t.mipmap;const s=t.style.clone();t.overrideFill&&(s._fill.color=16777215,s._fill.alpha=1,s._fill.texture=Ne.WHITE,s._fill.fill=null),this.applyFillAsTint=t.overrideFill;const o=s.fontSize;s.fontSize=this.baseMeasurementFontSize;const a=Il(s);t.overrideSize?s._stroke&&(s._stroke.width*=this.baseRenderedFontSize/o):s.fontSize=this.baseRenderedFontSize=o,this._style=s,this._skipKerning=t.skipKerning??!1,this.resolution=t.resolution??1,this._padding=t.padding??4,t.textureStyle&&(this._textureStyle=t.textureStyle instanceof xi?t.textureStyle:new xi(t.textureStyle)),this.fontMetrics=nr.measureFont(a),this.lineHeight=s.lineHeight||this.fontMetrics.fontSize||s.fontSize}ensureCharacters(e){const t=nr.graphemeSegmenter(e).filter(w=>!this._currentChars.includes(w)).filter((w,k,A)=>A.indexOf(w)===k);if(!t.length)return;this._currentChars=[...this._currentChars,...t];let s;this._currentPageIndex===-1?s=this._nextPage():s=this.pages[this._currentPageIndex];let{canvas:o,context:a}=s.canvasAndContext,c=s.texture.source;const u=this._style;let d=this._currentX,f=this._currentY,p=this._currentMaxCharHeight;const g=this.baseRenderedFontSize/this.baseMeasurementFontSize,x=this._padding*g;let v=!1;const _=o.width/this.resolution,b=o.height/this.resolution;for(let w=0;w<t.length;w++){const k=t[w],A=nr.measureText(k,u,o,!1);A.lineHeight=A.height;const P=A.width*g,C=Math.ceil((u.fontStyle==="italic"?2:1)*P),F=A.height*g,R=C+x*2,L=F+x*2;if(v=!1,k!==`
`&&k!=="\r"&&k!=="	"&&k!==" "&&(v=!0,p=Math.ceil(Math.max(L,p))),d+R>_&&(f+=p,p=L,d=0,f+p>b)){c.update();const W=this._nextPage();o=W.canvasAndContext.canvas,a=W.canvasAndContext.context,c=W.texture.source,d=0,f=0,p=0}const Q=P/g-(u.dropShadow?.distance??0)-(u._stroke?.width??0);if(this.chars[k]={id:k.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:Q,kerning:{}},v){this._drawGlyph(a,A,d+x,f+x,g,u);const W=c.width*g,B=c.height*g,$=new tt(d/W*c.width,f/B*c.height,R/W*c.width,L/B*c.height);this.chars[k].texture=new Ne({source:c,frame:$}),d+=Math.ceil(R)}}c.update(),this._currentX=d,this._currentY=f,this._currentMaxCharHeight=p,this._skipKerning&&this._applyKerning(t,a)}get pageTextures(){return Pe(je,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,t){const s=this._measureCache;for(let o=0;o<e.length;o++){const a=e[o];for(let c=0;c<this._currentChars.length;c++){const u=this._currentChars[c];let d=s[a];d||(d=s[a]=t.measureText(a).width);let f=s[u];f||(f=s[u]=t.measureText(u).width);let p=t.measureText(a+u).width,g=p-(d+f);g&&(this.chars[a].kerning[u]=g),p=t.measureText(a+u).width,g=p-(d+f),g&&(this.chars[u].kerning[a]=g)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,t=Do.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(t.context,this._style,e);const s=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),o=new Ne({source:new Is({resource:t.canvas,resolution:s,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(o.source.style=this._textureStyle);const a={canvasAndContext:t,texture:o};return this.pages[this._currentPageIndex]=a,a}_setupContext(e,t,s){t.fontSize=this.baseRenderedFontSize,e.scale(s,s),e.font=Il(t),t.fontSize=this.baseMeasurementFontSize,e.textBaseline=t.textBaseline;const o=t._stroke,a=o?.width??0;if(o&&(e.lineWidth=a,e.lineJoin=o.join,e.miterLimit=o.miterLimit,e.strokeStyle=Ll(o,e)),t._fill&&(e.fillStyle=Ll(t._fill,e)),t.dropShadow){const c=t.dropShadow,u=yt.shared.setValue(c.color).toArray(),d=c.blur*s,f=c.distance*s;e.shadowColor=`rgba(${u[0]*255},${u[1]*255},${u[2]*255},${c.alpha})`,e.shadowBlur=d,e.shadowOffsetX=Math.cos(c.angle)*f,e.shadowOffsetY=Math.sin(c.angle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,t,s,o,a,c){const u=t.text,d=t.fontProperties,p=(c._stroke?.width??0)*a,g=s+p/2,x=o-p/2,v=d.descent*a,_=t.lineHeight*a;let b=!1;c.stroke&&p&&(b=!0,e.strokeText(u,g,x+_-v));const{shadowBlur:w,shadowOffsetX:k,shadowOffsetY:A}=e;c._fill&&(b&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),e.fillText(u,g,x+_-v)),b&&(e.shadowBlur=w,e.shadowOffsetX=k,e.shadowOffsetY=A)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:t,texture:s}=this.pages[e];Do.returnCanvasAndContext(t),s.destroy(!0)}this.pages=null}};$0.defaultOptions={textureSize:512,style:new Kr,mipmap:!0};let Bg=$0;function nk(n,e,t,s){const o={width:0,height:0,offsetY:0,scale:e.fontSize/t.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};o.offsetY=t.baseLineOffset;let a=o.lines[0],c=null,u=!0;const d={width:0,start:0,index:0,positions:[],chars:[]},f=t.baseMeasurementFontSize/e.fontSize,p=e.letterSpacing*f,g=e.wordWrapWidth*f,x=e.lineHeight?e.lineHeight*f:t.lineHeight,v=e.wordWrap&&e.breakWords,_=k=>{const A=a.width;for(let P=0;P<d.index;P++){const C=k.positions[P];a.chars.push(k.chars[P]),a.charPositions.push(C+A)}a.width+=k.width,u=!1,d.width=0,d.index=0,d.chars.length=0},b=()=>{let k=a.chars.length-1;if(s){let A=a.chars[k];for(;A===" ";)a.width-=t.chars[A].xAdvance,A=a.chars[--k]}o.width=Math.max(o.width,a.width),a={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},u=!0,o.lines.push(a),o.height+=x},w=k=>k-p>g;for(let k=0;k<n.length+1;k++){let A;const P=k===n.length;P||(A=n[k]);const C=t.chars[A]||t.chars[" "];if(/(?:\s)/.test(A)||A==="\r"||A===`
`||P){if(!u&&e.wordWrap&&w(a.width+d.width)?(b(),_(d),P||a.charPositions.push(0)):(d.start=a.width,_(d),P||a.charPositions.push(0)),A==="\r"||A===`
`)b();else if(!P){const Q=C.xAdvance+(C.kerning[c]||0)+p;a.width+=Q,a.spaceWidth=Q,a.spacesIndex.push(a.charPositions.length),a.chars.push(A)}}else{const L=C.kerning[c]||0,Q=C.xAdvance+L+p;v&&w(a.width+d.width+Q)&&(_(d),b()),d.positions[d.index++]=d.width+L,d.chars.push(A),d.width+=Q}c=A}return b(),e.align==="center"?rk(o):e.align==="right"?sk(o):e.align==="justify"&&ik(o),o}function rk(n){for(let e=0;e<n.lines.length;e++){const t=n.lines[e],s=n.width/2-t.width/2;for(let o=0;o<t.charPositions.length;o++)t.charPositions[o]+=s}}function sk(n){for(let e=0;e<n.lines.length;e++){const t=n.lines[e],s=n.width-t.width;for(let o=0;o<t.charPositions.length;o++)t.charPositions[o]+=s}}function ik(n){const e=n.width;for(let t=0;t<n.lines.length;t++){const s=n.lines[t];let o=0,a=s.spacesIndex[o++],c=0;const u=s.spacesIndex.length,f=(e-s.width)/u;for(let p=0;p<s.charPositions.length;p++)p===a&&(a=s.spacesIndex[o++],c+=f),s.charPositions[p]+=c}}function ok(n){if(n==="")return[];typeof n=="string"&&(n=[n]);const e=[];for(let t=0,s=n.length;t<s;t++){const o=n[t];if(Array.isArray(o)){if(o.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${o.length}.`);if(o[0].length===0||o[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const a=o[0].charCodeAt(0),c=o[1].charCodeAt(0);if(c<a)throw new Error("[BitmapFont]: Invalid character range.");for(let u=a,d=c;u<=d;u++)e.push(String.fromCharCode(u))}else e.push(...Array.from(o))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}let yl=0;class ak{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=C0(1e3)}getFont(e,t){let s=`${t.fontFamily}-bitmap`,o=!0;if(t._fill.fill&&!t._stroke?(s+=t._fill.fill.styleKey,o=!1):(t._stroke||t.dropShadow)&&(s=`${t.styleKey}-bitmap`,o=!1),!Je.has(s)){const c=Object.create(t);c.lineHeight=0;const u=new Bg({style:c,overrideFill:o,overrideSize:!0,...this.defaultOptions});yl++,yl>50&&et("BitmapText",`You have dynamically created ${yl} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),u.once("destroy",()=>{yl--,Je.remove(s)}),Je.set(s,u)}const a=Je.get(s);return a.ensureCharacters?.(e),a}getLayout(e,t,s=!0){const o=this.getFont(e,t),a=`${e}-${t.styleKey}-${s}`;if(this.measureCache.has(a))return this.measureCache.get(a);const c=nr.graphemeSegmenter(e),u=nk(c,t,o,s);return this.measureCache.set(a,u),u}measureText(e,t,s=!0){return this.getLayout(e,t,s)}install(...e){let t=e[0];typeof t=="string"&&(t={name:t,style:e[1],chars:e[2]?.chars,resolution:e[2]?.resolution,padding:e[2]?.padding,skipKerning:e[2]?.skipKerning},Pe(je,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const s=t?.name;if(!s)throw new Error("[BitmapFontManager] Property `name` is required.");t={...this.defaultOptions,...t};const o=t.style,a=o instanceof Kr?o:new Kr(o),c=t.dynamicFill??this._canUseTintForStyle(a),u=new Bg({style:a,overrideFill:c,skipKerning:t.skipKerning,padding:t.padding,resolution:t.resolution,overrideSize:!1,textureStyle:t.textureStyle}),d=ok(t.chars);return u.ensureCharacters(d.join("")),Je.set(`${s}-bitmap`,u),u.once("destroy",()=>Je.remove(`${s}-bitmap`)),u}uninstall(e){const t=`${e}-bitmap`,s=Je.get(t);s&&s.destroy()}_canUseTintForStyle(e){return!e._stroke&&(!e.dropShadow||e.dropShadow.color===0)&&!e._fill.fill&&e._fill.color===16777215}}const Og=new ak;class V0 extends k0{constructor(e,t){super();const{textures:s,data:o}=e;Object.keys(o.pages).forEach(a=>{const c=o.pages[parseInt(a,10)],u=s[c.id];this.pages.push({texture:u})}),Object.keys(o.chars).forEach(a=>{const c=o.chars[a],{frame:u,source:d,rotate:f}=s[c.page],p=Ue.transformRectCoords(c,u,f,new tt),g=new Ne({frame:p,orig:new tt(0,0,c.width,c.height),source:d,rotate:f});this.chars[a]={id:a.codePointAt(0),xOffset:c.xOffset,yOffset:c.yOffset,xAdvance:c.xAdvance,kerning:c.kerning??{},texture:g}}),this.baseRenderedFontSize=o.fontSize,this.baseMeasurementFontSize=o.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:o.fontSize},this.baseLineOffset=o.baseLineOffset,this.lineHeight=o.lineHeight,this.fontFamily=o.fontFamily,this.distanceField=o.distanceField??{type:"none",range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){Og.install(e)}static uninstall(e){Og.uninstall(e)}}const yh={test(n){return typeof n=="string"&&n.startsWith("info face=")},parse(n){const e=n.match(/^[a-z]+\s+.+$/gm),t={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const g in e){const x=e[g].match(/^[a-z]+/gm)[0],v=e[g].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),_={};for(const b in v){const w=v[b].split("="),k=w[0],A=w[1].replace(/"/gm,""),P=parseFloat(A),C=isNaN(P)?A:P;_[k]=C}t[x].push(_)}const s={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[o]=t.info,[a]=t.common,[c]=t.distanceField??[];c&&(s.distanceField={range:parseInt(c.distanceRange,10),type:c.fieldType}),s.fontSize=parseInt(o.size,10),s.fontFamily=o.face,s.lineHeight=parseInt(a.lineHeight,10);const u=t.page;for(let g=0;g<u.length;g++)s.pages.push({id:parseInt(u[g].id,10)||0,file:u[g].file});const d={};s.baseLineOffset=s.lineHeight-parseInt(a.base,10);const f=t.char;for(let g=0;g<f.length;g++){const x=f[g],v=parseInt(x.id,10);let _=x.letter??x.char??String.fromCharCode(v);_==="space"&&(_=" "),d[v]=_,s.chars[_]={id:v,page:parseInt(x.page,10)||0,x:parseInt(x.x,10),y:parseInt(x.y,10),width:parseInt(x.width,10),height:parseInt(x.height,10),xOffset:parseInt(x.xoffset,10),yOffset:parseInt(x.yoffset,10),xAdvance:parseInt(x.xadvance,10),kerning:{}}}const p=t.kerning||[];for(let g=0;g<p.length;g++){const x=parseInt(p[g].first,10),v=parseInt(p[g].second,10),_=parseInt(p[g].amount,10);s.chars[d[v]].kerning[d[x]]=_}return s}},zg={test(n){const e=n;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(n){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},t=n.getElementsByTagName("info")[0],s=n.getElementsByTagName("common")[0],o=n.getElementsByTagName("distanceField")[0];o&&(e.distanceField={type:o.getAttribute("fieldType"),range:parseInt(o.getAttribute("distanceRange"),10)});const a=n.getElementsByTagName("page"),c=n.getElementsByTagName("char"),u=n.getElementsByTagName("kerning");e.fontSize=parseInt(t.getAttribute("size"),10),e.fontFamily=t.getAttribute("face"),e.lineHeight=parseInt(s.getAttribute("lineHeight"),10);for(let f=0;f<a.length;f++)e.pages.push({id:parseInt(a[f].getAttribute("id"),10)||0,file:a[f].getAttribute("file")});const d={};e.baseLineOffset=e.lineHeight-parseInt(s.getAttribute("base"),10);for(let f=0;f<c.length;f++){const p=c[f],g=parseInt(p.getAttribute("id"),10);let x=p.getAttribute("letter")??p.getAttribute("char")??String.fromCharCode(g);x==="space"&&(x=" "),d[g]=x,e.chars[x]={id:g,page:parseInt(p.getAttribute("page"),10)||0,x:parseInt(p.getAttribute("x"),10),y:parseInt(p.getAttribute("y"),10),width:parseInt(p.getAttribute("width"),10),height:parseInt(p.getAttribute("height"),10),xOffset:parseInt(p.getAttribute("xoffset"),10),yOffset:parseInt(p.getAttribute("yoffset"),10),xAdvance:parseInt(p.getAttribute("xadvance"),10),kerning:{}}}for(let f=0;f<u.length;f++){const p=parseInt(u[f].getAttribute("first"),10),g=parseInt(u[f].getAttribute("second"),10),x=parseInt(u[f].getAttribute("amount"),10);e.chars[d[g]].kerning[d[p]]=x}return e}},Dg={test(n){return typeof n=="string"&&n.match(/<font(\s|>)/)?zg.test(qe.get().parseXML(n)):!1},parse(n){return zg.parse(qe.get().parseXML(n))}},lk=[".xml",".fnt"],ck={extension:{type:we.CacheParser,name:"cacheBitmapFont"},test:n=>n instanceof V0,getCacheableAssets(n,e){const t={};return n.forEach(s=>{t[s]=e,t[`${s}-bitmap`]=e}),t[`${e.fontFamily}-bitmap`]=e,t}},uk={extension:{type:we.LoadParser,priority:Zr.Normal},name:"loadBitmapFont",id:"bitmap-font",test(n){return lk.includes(an.extname(n).toLowerCase())},async testParse(n){return yh.test(n)||Dg.test(n)},async parse(n,e,t){const s=yh.test(n)?yh.parse(n):Dg.parse(n),{src:o}=e,{pages:a}=s,c=[],u=s.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let g=0;g<a.length;++g){const x=a[g].file;let v=an.join(an.dirname(o),x);v=Dh(v,o),c.push({src:v,data:u})}const d=await t.load(c),f=c.map(g=>d[g.src]);return new V0({data:s,textures:f},o)},async load(n,e){return await(await qe.get().fetch(n)).text()},async unload(n,e,t){await Promise.all(n.pages.map(s=>t.unload(s.texture.source._sourceOrigin))),n.destroy()}};class hk{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<t;s++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const dk={extension:{type:we.CacheParser,name:"cacheTextureArray"},test:n=>Array.isArray(n)&&n.every(e=>e instanceof Ne),getCacheableAssets:(n,e)=>{const t={};return n.forEach(s=>{e.forEach((o,a)=>{t[s+(a===0?"":a+1)]=o})}),t}};async function H0(n){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=n});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(n)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const fk={extension:{type:we.DetectionParser,priority:1},test:async()=>H0("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async n=>[...n,"avif"],remove:async n=>n.filter(e=>e!=="avif")},jg=["png","jpg","jpeg"],pk={extension:{type:we.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async n=>[...n,...jg],remove:async n=>n.filter(e=>!jg.includes(e))},mk="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Hl(n){return mk?!1:document.createElement("video").canPlayType(n)!==""}const gk={extension:{type:we.DetectionParser,priority:0},test:async()=>Hl("video/mp4"),add:async n=>[...n,"mp4","m4v"],remove:async n=>n.filter(e=>e!=="mp4"&&e!=="m4v")},yk={extension:{type:we.DetectionParser,priority:0},test:async()=>Hl("video/ogg"),add:async n=>[...n,"ogv"],remove:async n=>n.filter(e=>e!=="ogv")},xk={extension:{type:we.DetectionParser,priority:0},test:async()=>Hl("video/webm"),add:async n=>[...n,"webm"],remove:async n=>n.filter(e=>e!=="webm")},vk={extension:{type:we.DetectionParser,priority:0},test:async()=>H0("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async n=>[...n,"webp"],remove:async n=>n.filter(e=>e!=="webp")},Y0=class Cl{constructor(){this.loadOptions={...Cl.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,s)=>(this._parsersValidated=!1,e[t]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const s={promise:null,parser:null};return s.promise=(async()=>{let o=null,a=null;if((t.parser||t.loadParser)&&(a=this._parserHash[t.parser||t.loadParser],t.loadParser&&et(`[Assets] "loadParser" is deprecated, use "parser" instead for ${e}`),a||et(`[Assets] specified load parser "${t.parser||t.loadParser}" not found while loading ${e}`)),!a){for(let c=0;c<this.parsers.length;c++){const u=this.parsers[c];if(u.load&&u.test?.(e,t,this)){a=u;break}}if(!a)return et(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}o=await a.load(e,t,this),s.parser=a;for(let c=0;c<this.parsers.length;c++){const u=this.parsers[c];u.parse&&u.parse&&await u.testParse?.(o,t,this)&&(o=await u.parse(o,t,this)||o,s.parser=u)}return o})(),s}async load(e,t){this._parsersValidated||this._validateParsers();const s=typeof t=="function"?{...Cl.defaultOptions,...this.loadOptions,onProgress:t}:{...Cl.defaultOptions,...this.loadOptions,...t||{}},{onProgress:o,onError:a,strategy:c,retryCount:u,retryDelay:d}=s;let f=0;const p={},g=El(e),x=Nn(e,b=>({alias:[b],src:b,data:{}})),v=x.reduce((b,w)=>b+(w.progressSize||1),0),_=x.map(async b=>{const w=an.toAbsolute(b.src);p[b.src]||(await this._loadAssetWithRetry(w,b,{onProgress:o,onError:a,strategy:c,retryCount:u,retryDelay:d},p),f+=b.progressSize||1,o&&o(f/v))});return await Promise.all(_),g?p[x[0].src]:p}async unload(e){const s=Nn(e,o=>({alias:[o],src:o})).map(async o=>{const a=an.toAbsolute(o.src),c=this.promiseCache[a];if(c){const u=await c.promise;delete this.promiseCache[a],await c.parser?.unload?.(u,o,this)}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,t)=>(!t.name&&!t.id?et("[Assets] parser should have an id"):(e[t.name]||e[t.id])&&et(`[Assets] parser id conflict "${t.id}"`),e[t.name]=t,t.id&&(e[t.id]=t),e),{})}async _loadAssetWithRetry(e,t,s,o){let a=0;const{onError:c,strategy:u,retryCount:d,retryDelay:f}=s,p=g=>new Promise(x=>setTimeout(x,g));for(;;)try{this.promiseCache[e]||(this.promiseCache[e]=this._getLoadPromiseAndParser(e,t)),o[t.src]=await this.promiseCache[e].promise;return}catch(g){delete this.promiseCache[e],delete o[t.src],a++;const x=u!=="retry"||a>d;if(u==="retry"&&!x){c&&c(g,t),await p(f);continue}if(u==="skip"){c&&c(g,t);return}throw c&&c(g,t),new Error(`[Loader.load] Failed to load ${e}.
${g}`)}}};Y0.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let _k=Y0;function Ai(n,e){if(Array.isArray(e)){for(const t of e)if(n.startsWith(`data:${t}`))return!0;return!1}return n.startsWith(`data:${e}`)}function Ti(n,e){const t=n.split("?")[0],s=an.extname(t).toLowerCase();return Array.isArray(e)?e.includes(s):s===e}const wk=".json",Sk="application/json",bk={extension:{type:we.LoadParser,priority:Zr.Low},name:"loadJson",id:"json",test(n){return Ai(n,Sk)||Ti(n,wk)},async load(n){return await(await qe.get().fetch(n)).json()}},kk=".txt",Ck="text/plain",Ak={name:"loadTxt",id:"text",extension:{type:we.LoadParser,priority:Zr.Low,name:"loadTxt"},test(n){return Ai(n,Ck)||Ti(n,kk)},async load(n){return await(await qe.get().fetch(n)).text()}},Tk=["normal","bold","100","200","300","400","500","600","700","800","900"],Pk=[".ttf",".otf",".woff",".woff2"],Mk=["font/ttf","font/otf","font/woff","font/woff2"],Ek=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function Ik(n){const e=an.extname(n),o=an.basename(n,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1));let a=o.length>0;for(const u of o)if(!u.match(Ek)){a=!1;break}let c=o.join(" ");return a||(c=`"${c.replace(/[\\"]/g,"\\$&")}"`),c}const Rk=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function Fk(n){return Rk.test(n)?n:encodeURI(n)}const Lk={extension:{type:we.LoadParser,priority:Zr.Low},name:"loadWebFont",id:"web-font",test(n){return Ai(n,Mk)||Ti(n,Pk)},async load(n,e){const t=qe.get().getFontFaceSet();if(t){const s=[],o=e.data?.family??Ik(n),a=e.data?.weights?.filter(u=>Tk.includes(u))??["normal"],c=e.data??{};for(let u=0;u<a.length;u++){const d=a[u],f=new FontFace(o,`url(${Fk(n)})`,{...c,weight:d});await f.load(),t.add(f),s.push(f)}return Je.has(`${o}-and-url`)?Je.get(`${o}-and-url`).entries.push({url:n,faces:s}):Je.set(`${o}-and-url`,{entries:[{url:n,faces:s}]}),s.length===1?s[0]:s}return et("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(n){const e=Array.isArray(n)?n:[n],t=e[0].family,s=Je.get(`${t}-and-url`),o=s.entries.find(a=>a.faces.some(c=>e.indexOf(c)!==-1));o.faces=o.faces.filter(a=>e.indexOf(a)===-1),o.faces.length===0&&(s.entries=s.entries.filter(a=>a!==o)),e.forEach(a=>{qe.get().getFontFaceSet().delete(a)}),s.entries.length===0&&Je.remove(`${t}-and-url`)}};function kd(n,e=1){const t=ki.RETINA_PREFIX?.exec(n);return t?parseFloat(t[1]):e}function Cd(n,e,t){n.label=t,n._sourceOrigin=t;const s=new Ne({source:n,label:t}),o=()=>{delete e.promiseCache[t],Je.has(t)&&Je.remove(t)};return s.source.once("destroy",()=>{e.promiseCache[t]&&(et("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),o())}),s.once("destroy",()=>{n.destroyed||(et("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),o())}),s}const Nk=".svg",Bk="image/svg+xml",Ok={extension:{type:we.LoadParser,priority:Zr.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(n){return Ai(n,Bk)||Ti(n,Nk)},async load(n,e,t){return e.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?Dk(n):zk(n,e,t,this.config.crossOrigin)},unload(n){n.destroy(!0)}};async function zk(n,e,t,s){const o=await qe.get().fetch(n),a=qe.get().createImage();a.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await o.text())}`,a.crossOrigin=s,await a.decode();const c=e.data?.width??a.width,u=e.data?.height??a.height,d=e.data?.resolution||kd(n),f=Math.ceil(c*d),p=Math.ceil(u*d),g=qe.get().createCanvas(f,p),x=g.getContext("2d");x.imageSmoothingEnabled=!0,x.imageSmoothingQuality="high",x.drawImage(a,0,0,c*d,u*d);const{parseAsGraphicsContext:v,..._}=e.data??{},b=new Is({resource:g,alphaMode:"premultiply-alpha-on-upload",resolution:d,..._});return Cd(b,t,n)}async function Dk(n){const t=await(await qe.get().fetch(n)).text(),s=new xn;return s.svg(t),s}const jk=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let fi=null,Kh=class{constructor(){fi||(fi=URL.createObjectURL(new Blob([jk],{type:"application/javascript"}))),this.worker=new Worker(fi)}};Kh.revokeObjectURL=function(){fi&&(URL.revokeObjectURL(fi),fi=null)};const Gk=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let pi=null;class X0{constructor(){pi||(pi=URL.createObjectURL(new Blob([Gk],{type:"application/javascript"}))),this.worker=new Worker(pi)}}X0.revokeObjectURL=function(){pi&&(URL.revokeObjectURL(pi),pi=null)};let Gg=0,xh;class Uk{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new Kh;t.addEventListener("message",s=>{t.terminate(),Kh.revokeObjectURL(),e(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,t){return this._run("loadImageBitmap",[e,t?.data?.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){xh===void 0&&(xh=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<xh&&(this._createdWorkers++,e=new X0().worker,e.addEventListener("message",t=>{this._complete(t.data),this._returnWorker(t.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){this._resolveHash[e.uuid]&&(e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),delete this._resolveHash[e.uuid])}async _run(e,t){await this._initWorkers();const s=new Promise((o,a)=>{this._queue.push({id:e,arguments:t,resolve:o,reject:a})});return this._next(),s}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const t=this._queue.pop(),s=t.id;this._resolveHash[Gg]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:Gg++,id:s})}reset(){this._workerPool.forEach(e=>e.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:e})=>{e?.(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const Ug=new Uk,$k=[".jpeg",".jpg",".png",".webp",".avif"],Wk=["image/jpeg","image/png","image/webp","image/avif"];async function Vk(n,e){const t=await qe.get().fetch(n);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${n}: ${t.status} ${t.statusText}`);const s=await t.blob();return e?.data?.alphaMode==="premultiplied-alpha"?createImageBitmap(s,{premultiplyAlpha:"none"}):createImageBitmap(s)}const q0={name:"loadTextures",id:"texture",extension:{type:we.LoadParser,priority:Zr.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(n){return Ai(n,Wk)||Ti(n,$k)},async load(n,e,t){let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Ug.isImageBitmapSupported()?s=await Ug.loadImageBitmap(n,e):s=await Vk(n,e):s=await new Promise((a,c)=>{s=qe.get().createImage(),s.crossOrigin=this.config.crossOrigin,s.src=n,s.complete?a(s):(s.onload=()=>{a(s)},s.onerror=c)});const o=new Is({resource:s,alphaMode:"premultiply-alpha-on-upload",resolution:e.data?.resolution||kd(n),...e.data});return Cd(o,t,n)},unload(n){n.destroy(!0)}},Hk=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let vh,_h;function Yk(n,e,t){t===void 0&&!e.startsWith("data:")?n.crossOrigin=qk(e):t!==!1&&(n.crossOrigin=typeof t=="string"?t:"anonymous")}function Xk(n){return new Promise((e,t)=>{n.addEventListener("canplaythrough",s),n.addEventListener("error",o),n.load();function s(){a(),e()}function o(c){a(),t(c)}function a(){n.removeEventListener("canplaythrough",s),n.removeEventListener("error",o)}})}function qk(n,e=globalThis.location){if(n.startsWith("data:"))return"";e||(e=globalThis.location);const t=new URL(n,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function Qk(){const n=[],e=[];for(const t of Hk){const s=Po.MIME_TYPES[t.substring(1)]||`video/${t.substring(1)}`;Hl(s)&&(n.push(t),e.includes(s)||e.push(s))}return{validVideoExtensions:n,validVideoMime:e}}const Kk={name:"loadVideo",id:"video",extension:{type:we.LoadParser,name:"loadVideo"},test(n){if(!vh||!_h){const{validVideoExtensions:s,validVideoMime:o}=Qk();vh=s,_h=o}const e=Ai(n,_h),t=Ti(n,vh);return e||t},async load(n,e,t){const s={...Po.defaultOptions,resolution:e.data?.resolution||kd(n),alphaMode:e.data?.alphaMode||await Ky(),...e.data},o=document.createElement("video"),a={preload:s.autoLoad!==!1?"auto":void 0,"webkit-playsinline":s.playsinline!==!1?"":void 0,playsinline:s.playsinline!==!1?"":void 0,muted:s.muted===!0?"":void 0,loop:s.loop===!0?"":void 0,autoplay:s.autoPlay!==!1?"":void 0};Object.keys(a).forEach(d=>{const f=a[d];f!==void 0&&o.setAttribute(d,f)}),s.muted===!0&&(o.muted=!0),Yk(o,n,s.crossorigin);const c=document.createElement("source");let u;if(s.mime)u=s.mime;else if(n.startsWith("data:"))u=n.slice(5,n.indexOf(";"));else if(!n.startsWith("blob:")){const d=n.split("?")[0].slice(n.lastIndexOf(".")+1).toLowerCase();u=Po.MIME_TYPES[d]||`video/${d}`}return c.src=n,u&&(c.type=u),new Promise(d=>{const f=async()=>{const p=new Po({...s,resource:o});o.removeEventListener("canplay",f),e.data.preload&&await Xk(o),d(Cd(p,t,n))};s.preload&&!s.autoPlay&&o.load(),o.addEventListener("canplay",f),o.appendChild(c)})},unload(n){n.destroy(!0)}},Q0={extension:{type:we.ResolveParser,name:"resolveTexture"},test:q0.test,parse:n=>({resolution:parseFloat(ki.RETINA_PREFIX.exec(n)?.[1]??"1"),format:n.split(".").pop(),src:n})},Zk={extension:{type:we.ResolveParser,priority:-2,name:"resolveJson"},test:n=>ki.RETINA_PREFIX.test(n)&&n.endsWith(".json"),parse:Q0.parse};class Jk{constructor(){this._detections=[],this._initialized=!1,this.resolver=new ki,this.loader=new _k,this.cache=Je,this._backgroundLoader=new hk(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized){et("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const t=e.texturePreference?.resolution??1,s=typeof t=="number"?[t]:t,o=await this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:o,resolution:s}}),e.preferences&&this.setPreferences(e.preferences),e.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...e.loadOptions})}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();const s=El(e),o=Nn(e).map(u=>{if(typeof u!="string"){const d=this.resolver.getAlias(u);return d.some(f=>!this.resolver.hasKey(f))&&this.add(u),Array.isArray(d)?d[0]:d}return this.resolver.hasKey(u)||this.add({alias:u,src:u}),u}),a=this.resolver.resolve(o),c=await this._mapLoadToResolve(a,t);return s?c[o[0]]:c}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let s=!1;typeof e=="string"&&(s=!0,e=[e]);const o=this.resolver.resolveBundle(e),a={},c=Object.keys(o);let u=0;const d=[],f=()=>{t?.(d.reduce((g,x)=>g+x,0)/u)},p=c.map((g,x)=>{const v=o[g],_=Object.values(v),w=[...new Set(_.flat())].reduce((k,A)=>k+(A.progressSize||1),0);return d.push(0),u+=w,this._mapLoadToResolve(v,k=>{d[x]=k*w,f()}).then(k=>{a[g]=k})});return await Promise.all(p),s?a[e[0]]:a}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Je.get(e);const t={};for(let s=0;s<e.length;s++)t[s]=Je.get(e[s]);return t}async _mapLoadToResolve(e,t){const s=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const o=await this.loader.load(s,t);this._backgroundLoader.active=!0;const a={};return s.forEach(c=>{const u=o[c.src],d=[c.src];c.alias&&d.push(...c.alias),d.forEach(f=>{a[f]=u}),Je.set(d,u)}),a}async unload(e){this._initialized||await this.init();const t=Nn(e).map(o=>typeof o!="string"?o.src:o),s=this.resolver.resolve(t);await this._unloadFromResolved(s)}async unloadBundle(e){this._initialized||await this.init(),e=Nn(e);const t=this.resolver.resolveBundle(e),s=Object.keys(t).map(o=>this._unloadFromResolved(t[o]));await Promise.all(s)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(s=>{Je.remove(s.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const s of e.detections)e.skipDetections||await s.test()?t=await s.add(t):e.skipDetections||(t=await s.remove(t));return t=t.filter((s,o)=>t.indexOf(s)===o),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(s=>s in e).forEach(s=>{t.config[s]=e[s]})})}}const On=new Jk;Mt.handleByList(we.LoadParser,On.loader.parsers).handleByList(we.ResolveParser,On.resolver.parsers).handleByList(we.CacheParser,On.cache.parsers).handleByList(we.DetectionParser,On.detections);Mt.add(dk,pk,fk,vk,gk,yk,xk,bk,Ak,Lk,Ok,q0,Kk,uk,ck,Q0,Zk);const $g={loader:we.LoadParser,resolver:we.ResolveParser,cache:we.CacheParser,detection:we.DetectionParser};Mt.handle(we.Asset,n=>{const e=n.ref;Object.entries($g).filter(([t])=>!!e[t]).forEach(([t,s])=>Mt.add(Object.assign(e[t],{extension:e[t].extension??s})))},n=>{const e=n.ref;Object.keys($g).filter(t=>!!e[t]).forEach(t=>Mt.remove(e[t]))});const K0={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},e2=["in vec2 vBlurTexCoords[%size%];","uniform sampler2D uTexture;","out vec4 finalColor;","void main(void)","{","    finalColor = vec4(0.0);","    %blur%","}"].join(`
`);function t2(n){const e=K0[n],t=e.length;let s=e2,o="";const a="finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;";let c;for(let u=0;u<n;u++){let d=a.replace("%index%",u.toString());c=u,u>=t&&(c=n-u-1),d=d.replace("%value%",e[c].toString()),o+=d,o+=`
`}return s=s.replace("%blur%",o),s=s.replace("%size%",n.toString()),s}const n2=`
    in vec2 aPosition;

    uniform float uStrength;

    out vec2 vBlurTexCoords[%size%];

    uniform vec4 uInputSize;
    uniform vec4 uOutputFrame;
    uniform vec4 uOutputTexture;

    vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

    vec2 filterTextureCoord( void )
    {
        return aPosition * (uOutputFrame.zw * uInputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        float pixelStrength = uInputSize.%dimension% * uStrength;

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function r2(n,e){const t=Math.ceil(n/2);let s=n2,o="",a;e?a="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);":a="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);";for(let c=0;c<n;c++){let u=a.replace("%index%",c.toString());u=u.replace("%sampleIndex%",`${c-(t-1)}.0`),o+=u,o+=`
`}return s=s.replace("%blur%",o),s=s.replace("%size%",n.toString()),s=s.replace("%dimension%",e?"z":"w"),s}function s2(n,e){const t=r2(e,n),s=t2(e);return Ul.from({vertex:t,fragment:s,name:`blur-${n?"horizontal":"vertical"}-pass-filter`})}var i2=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlurUniforms {
  uStrength:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    %blur-struct%
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}


@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {

  let filteredCord = filterTextureCoord(aPosition);

  let pixelStrength = gfu.uInputSize.%dimension% * blurUniforms.uStrength;

  return VSOutput(
   filterVertexPosition(aPosition),
    %blur-vertex-out%
  );
}

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  %blur-fragment-in%
) -> @location(0) vec4<f32> {

    var   finalColor = vec4(0.0);

    %blur-sampling%

    return finalColor;
}`;function o2(n,e){const t=K0[e],s=t.length,o=[],a=[],c=[];for(let g=0;g<e;g++){o[g]=`@location(${g}) offset${g}: vec2<f32>,`,n?a[g]=`filteredCord + vec2(${g-s+1} * pixelStrength, 0.0),`:a[g]=`filteredCord + vec2(0.0, ${g-s+1} * pixelStrength),`;const x=g<s?g:e-g-1,v=t[x].toString();c[g]=`finalColor += textureSample(uTexture, uSampler, offset${g}) * ${v};`}const u=o.join(`
`),d=a.join(`
`),f=c.join(`
`),p=i2.replace("%blur-struct%",u).replace("%blur-vertex-out%",d).replace("%blur-fragment-in%",u).replace("%blur-sampling%",f).replace("%dimension%",n?"z":"w");return Ci.from({vertex:{source:p,entryPoint:"mainVertex"},fragment:{source:p,entryPoint:"mainFragment"}})}const Z0=class J0 extends h0{constructor(e){e={...J0.defaultOptions,...e};const t=s2(e.horizontal,e.kernelSize),s=o2(e.horizontal,e.kernelSize);super({glProgram:t,gpuProgram:s,resources:{blurUniforms:{uStrength:{value:0,type:"f32"}}},...e}),this.horizontal=e.horizontal,this._quality=0,this.quality=e.quality,this.blur=e.strength,this._uniforms=this.resources.blurUniforms.uniforms}apply(e,t,s,o){if(this._uniforms.uStrength=this.strength/this.passes,this.passes===1)e.applyFilter(this,t,s,o);else{const a=_i.getSameSizeTexture(t);let c=t,u=a;this._state.blend=!1;const d=e.renderer.type===Fo.WEBGPU;for(let f=0;f<this.passes-1;f++){e.applyFilter(this,c,u,f===0?!0:d);const p=u;u=c,c=p}this._state.blend=!0,e.applyFilter(this,c,s,o),_i.returnTexture(a)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}};Z0.defaultOptions={strength:8,quality:4,kernelSize:5};let wh=Z0;class ex extends h0{constructor(...e){let t=e[0]??{};typeof t=="number"&&(Pe(je,"BlurFilter constructor params are now options object. See params: { strength, quality, resolution, kernelSize }"),t={strength:t},e[1]!==void 0&&(t.quality=e[1]),e[2]!==void 0&&(t.resolution=e[2]||"inherit"),e[3]!==void 0&&(t.kernelSize=e[3])),t={...wh.defaultOptions,...t};const{strength:s,strengthX:o,strengthY:a,quality:c,...u}=t;super({...u,compatibleRenderers:Fo.BOTH,resources:{}}),this._repeatEdgePixels=!1,this.blurXFilter=new wh({horizontal:!0,...t}),this.blurYFilter=new wh({horizontal:!1,...t}),this.quality=c,this.strengthX=o??s,this.strengthY=a??s,this.repeatEdgePixels=!1}apply(e,t,s,o){const a=Math.abs(this.blurXFilter.strength),c=Math.abs(this.blurYFilter.strength);if(a&&c){const u=_i.getSameSizeTexture(t);this.blurXFilter.blendMode="normal",this.blurXFilter.apply(e,t,u,!0),this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,u,s,o),_i.returnTexture(u)}else c?(this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,t,s,o)):(this.blurXFilter.blendMode=this.blendMode,this.blurXFilter.apply(e,t,s,o))}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.blur),Math.abs(this.blurYFilter.blur))*2}get strength(){if(this.strengthX!==this.strengthY)throw new Error("BlurFilter's strengthX and strengthY are different");return this.strengthX}set strength(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get strengthX(){return this.blurXFilter.blur}set strengthX(e){this.blurXFilter.blur=e,this.updatePadding()}get strengthY(){return this.blurYFilter.blur}set strengthY(e){this.blurYFilter.blur=e,this.updatePadding()}get blur(){return Pe("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength}set blur(e){Pe("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength=e}get blurX(){return Pe("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX}set blurX(e){Pe("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX=e}get blurY(){return Pe("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY}set blurY(e){Pe("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}ex.defaultOptions={strength:8,quality:4,kernelSize:5};class cn extends md{constructor(e){e instanceof xn&&(e={context:e});const{context:t,roundPixels:s,...o}=e||{};super({label:"Graphics",...o}),this.renderPipeId="graphics",t?this._context=t:this._context=this._ownedContext=new xn,this._context.on("update",this.onViewUpdate,this),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=s??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||e?.context===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,t){return this.context[e](...t),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new cn(this._context.clone()):(this._ownedContext=null,new cn(this._context))}lineStyle(e,t,s){Pe(je,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const o={};return e&&(o.width=e),t&&(o.color=t),s&&(o.alpha=s),this.context.strokeStyle=o,this}beginFill(e,t){Pe(je,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const s={};return e!==void 0&&(s.color=e),t!==void 0&&(s.alpha=t),this.context.fillStyle=s,this}endFill(){Pe(je,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==xn.defaultStrokeStyle.width||e.color!==xn.defaultStrokeStyle.color||e.alpha!==xn.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return Pe(je,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return Pe(je,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return Pe(je,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return Pe(je,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return Pe(je,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return Pe(je,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}class a2 extends md{constructor(e,t){const{text:s,resolution:o,style:a,anchor:c,width:u,height:d,roundPixels:f,...p}=e;super({...p}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=t,this.text=s??"",this.style=a,this.resolution=o??null,this.allowChildren=!1,this._anchor=new Pt({_onUpdate:()=>{this.onViewUpdate()}}),c&&(this.anchor=c),this.roundPixels=f??!1,u!==void 0&&(this.width=u),d!==void 0&&(this.height=d)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){e||(e={}),this._style?.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this.bounds.width),t!==void 0&&this._setHeight(t,this.bounds.height)}containsPoint(e){const t=this.bounds.width,s=this.bounds.height,o=-t*this.anchor.x;let a=0;return e.x>=o&&e.x<=o+t&&(a=-s*this.anchor.y,e.y>=a&&e.y<=a+s)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e?.style)&&this._style.destroy(e),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}}function l2(n,e){let t=n[0]??{};return(typeof t=="string"||n[1])&&(Pe(je,`use new ${e}({ text: "hi!", style }) instead`),t={text:t,style:n[1]}),t}let ws=null,vr=null;function c2(n,e){ws||(ws=qe.get().createCanvas(256,128),vr=ws.getContext("2d",{willReadFrequently:!0}),vr.globalCompositeOperation="copy",vr.globalAlpha=1),(ws.width<n||ws.height<e)&&(ws.width=yi(n),ws.height=yi(e))}function Wg(n,e,t){for(let s=0,o=4*t*e;s<e;++s,o+=4)if(n[o+3]!==0)return!1;return!0}function Vg(n,e,t,s,o){const a=4*e;for(let c=s,u=s*a+4*t;c<=o;++c,u+=a)if(n[u+3]!==0)return!1;return!0}function u2(...n){let e=n[0];e.canvas||(e={canvas:n[0],resolution:n[1]});const{canvas:t}=e,s=Math.min(e.resolution??1,1),o=e.width??t.width,a=e.height??t.height;let c=e.output;if(c2(o,a),!vr)throw new TypeError("Failed to get canvas 2D context");vr.drawImage(t,0,0,o,a,0,0,o*s,a*s);const d=vr.getImageData(0,0,o,a).data;let f=0,p=0,g=o-1,x=a-1;for(;p<a&&Wg(d,o,p);)++p;if(p===a)return tt.EMPTY;for(;Wg(d,o,x);)--x;for(;Vg(d,o,f,p,x);)++f;for(;Vg(d,o,g,p,x);)--g;return++g,++x,vr.globalCompositeOperation="source-over",vr.strokeRect(f,p,g-f,x-p),vr.globalCompositeOperation="copy",c??(c=new tt),c.set(f/s,p/s,(g-f)/s,(x-p)/s),c}const Hg=new tt;class h2{getCanvasAndContext(e){const{text:t,style:s,resolution:o=1}=e,a=s._getFinalPadding(),c=nr.measureText(t||" ",s),u=Math.ceil(Math.ceil(Math.max(1,c.width)+a*2)*o),d=Math.ceil(Math.ceil(Math.max(1,c.height)+a*2)*o),f=Do.getOptimalCanvasAndContext(u,d);this._renderTextToCanvas(t,s,a,o,f);const p=s.trim?u2({canvas:f.canvas,width:u,height:d,resolution:1,output:Hg}):Hg.set(0,0,u,d);return{canvasAndContext:f,frame:p}}returnCanvasAndContext(e){Do.returnCanvasAndContext(e)}_renderTextToCanvas(e,t,s,o,a){const{canvas:c,context:u}=a,d=Il(t),f=nr.measureText(e||" ",t),p=f.lines,g=f.lineHeight,x=f.lineWidths,v=f.maxLineWidth,_=f.fontProperties,b=c.height;if(u.resetTransform(),u.scale(o,o),u.textBaseline=t.textBaseline,t._stroke?.width){const P=t._stroke;u.lineWidth=P.width,u.miterLimit=P.miterLimit,u.lineJoin=P.join,u.lineCap=P.cap}u.font=d;let w,k;const A=t.dropShadow?2:1;for(let P=0;P<A;++P){const C=t.dropShadow&&P===0,F=C?Math.ceil(Math.max(1,b)+s*2):0,R=F*o;if(C){u.fillStyle="black",u.strokeStyle="black";const W=t.dropShadow,B=W.color,$=W.alpha;u.shadowColor=yt.shared.setValue(B).setAlpha($).toRgbaString();const re=W.blur*o,le=W.distance*o;u.shadowBlur=re,u.shadowOffsetX=Math.cos(W.angle)*le,u.shadowOffsetY=Math.sin(W.angle)*le+R}else{if(u.fillStyle=t._fill?Ll(t._fill,u,f,s*2):null,t._stroke?.width){const W=t._stroke.width*.5+s*2;u.strokeStyle=Ll(t._stroke,u,f,W)}u.shadowColor="black"}let L=(g-_.fontSize)/2;g-_.fontSize<0&&(L=0);const Q=t._stroke?.width??0;for(let W=0;W<p.length;W++)w=Q/2,k=Q/2+W*g+_.ascent+L,t.align==="right"?w+=v-x[W]:t.align==="center"&&(w+=(v-x[W])/2),t._stroke?.width&&this._drawLetterSpacing(p[W],t,a,w+s,k+s-F,!0),t._fill!==void 0&&this._drawLetterSpacing(p[W],t,a,w+s,k+s-F)}}_drawLetterSpacing(e,t,s,o,a,c=!1){const{context:u}=s,d=t.letterSpacing;let f=!1;if(nr.experimentalLetterSpacingSupported&&(nr.experimentalLetterSpacing?(u.letterSpacing=`${d}px`,u.textLetterSpacing=`${d}px`,f=!0):(u.letterSpacing="0px",u.textLetterSpacing="0px")),d===0||f){c?u.strokeText(e,o,a):u.fillText(e,o,a);return}let p=o;const g=nr.graphemeSegmenter(e);let x=u.measureText(e).width,v=0;for(let _=0;_<g.length;++_){const b=g[_];c?u.strokeText(b,p,a):u.fillText(b,p,a);let w="";for(let k=_+1;k<g.length;++k)w+=g[k];v=u.measureText(w).width,p+=x-v+d,x=v}}}const Yg=new h2;class jo extends a2{constructor(...e){const t=l2(e,"Text");super(t,Kr),this.renderPipeId="text",t.textureStyle&&(this.textureStyle=t.textureStyle instanceof xi?t.textureStyle:new xi(t.textureStyle))}updateBounds(){const e=this._bounds,t=this._anchor;let s=0,o=0;if(this._style.trim){const{frame:a,canvasAndContext:c}=Yg.getCanvasAndContext({text:this.text,style:this._style,resolution:1});Yg.returnCanvasAndContext(c),s=a.width,o=a.height}else{const a=nr.measureText(this._text,this._style);s=a.width,o=a.height}e.minX=-t._x*s,e.maxX=e.minX+s,e.minY=-t._y*o,e.maxY=e.minY+o}}Mt.add(c_,u_);const Xg=n=>{let e;const t=new Set,s=(f,p)=>{const g=typeof f=="function"?f(e):f;if(!Object.is(g,e)){const x=e;e=p??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(v=>v(e,x))}},o=()=>e,u={setState:s,getState:o,getInitialState:()=>d,subscribe:f=>(t.add(f),()=>t.delete(f))},d=e=n(s,o,u);return u},d2=(n=>n?Xg(n):Xg),f2=n=>n;function p2(n,e=f2){const t=ai.useSyncExternalStore(n.subscribe,ai.useCallback(()=>e(n.getState()),[n,e]),ai.useCallback(()=>e(n.getInitialState()),[n,e]));return ai.useDebugValue(t),t}const qg=n=>{const e=d2(n),t=s=>p2(e,s);return Object.assign(t,e),t},m2=(n=>n?qg(n):qg);async function Ad(n,e={},t){return window.__TAURI_INTERNALS__.invoke(n,e,t)}var Qg;(function(n){n[n.Audio=1]="Audio",n[n.Cache=2]="Cache",n[n.Config=3]="Config",n[n.Data=4]="Data",n[n.LocalData=5]="LocalData",n[n.Document=6]="Document",n[n.Download=7]="Download",n[n.Picture=8]="Picture",n[n.Public=9]="Public",n[n.Video=10]="Video",n[n.Resource=11]="Resource",n[n.Temp=12]="Temp",n[n.AppConfig=13]="AppConfig",n[n.AppData=14]="AppData",n[n.AppLocalData=15]="AppLocalData",n[n.AppCache=16]="AppCache",n[n.AppLog=17]="AppLog",n[n.Desktop=18]="Desktop",n[n.Executable=19]="Executable",n[n.Font=20]="Font",n[n.Home=21]="Home",n[n.Runtime=22]="Runtime",n[n.Template=23]="Template"})(Qg||(Qg={}));async function Sh(...n){return Ad("plugin:path|join",{paths:n})}var Kg;(function(n){n[n.Start=0]="Start",n[n.Current=1]="Current",n[n.End=2]="End"})(Kg||(Kg={}));async function bh(n,e){if(n instanceof URL&&n.protocol!=="file:")throw new TypeError("Must be a file URL.");const t=await Ad("plugin:fs|read_text_file",{path:n instanceof URL?n.toString():n,options:e}),s=t instanceof ArrayBuffer?t:Uint8Array.from(t);return new TextDecoder().decode(s)}const g2={0:16281969,1:16486972,2:16436245,3:6333946,4:10724259},tx={security:"#ef4444",tests:"#3b82f6",performance:"#f59e0b",farmhouse:"#8b5cf6",office:"#06b6d4",accessibility:"#10b981",garden:"#84cc16",compost:"#78716c",codeQuality:"#ec4899"},Ps={security:{x:85,y:50,width:240,height:185,dockX:185,dockY:195},tests:{x:435,y:50,width:240,height:185,dockX:415,dockY:195},performance:{x:700,y:50,width:240,height:185,dockX:790,dockY:195},farmhouse:{x:160,y:335,width:235,height:195,dockX:175,dockY:455},office:{x:492,y:335,width:160,height:195,dockX:415,dockY:455},accessibility:{x:745,y:335,width:200,height:195,dockX:760,dockY:455},garden:{x:35,y:700,width:345,height:270,dockX:235,dockY:530},compost:{x:430,y:890,width:100,height:100,dockX:490,dockY:620},codeQuality:{x:630,y:630,width:320,height:280,dockX:760,dockY:620}},Yl={security:"Security",tests:"Tests",performance:"Performance",farmhouse:"Farmhouse",office:"Home",accessibility:"Accessibility",garden:"Idea Garden",compost:"Compost",codeQuality:"Code Quality"},Zg=n=>{switch(n){case"garden":return"white-truck";case"compost":case"performance":return"tractor";default:return"blue-truck"}},y2={"blue-truck":{up:"tycoon/blue-truck-up.png",upFilled:"tycoon/blue-truck-up-filled.png",left:"tycoon/blue-truck-left.png",leftFilled:"tycoon/blue-truck-left-filled.png"},"white-truck":{up:"tycoon/white-truck-up.png",upFilled:"tycoon/white-truck-up-filled.png",left:"tycoon/white-truck-left.png",leftFilled:"tycoon/white-truck-left-filled.png"},tractor:{up:"tycoon/tractor-up.png",upFilled:"tycoon/tractor-up-filled.png",left:"tycoon/tractor-left.png",leftFilled:"tycoon/tractor-left-filled.png"}},xl={BASE:180,VARIANCE:90};function x2(n,e){const t=e?Yl[e]||e:"";switch(n){case"entering":return"Arriving...";case"traveling_to_pickup":return`Going to ${t}`;case"loading":return`Loading at ${t}`;case"traveling_to_delivery":return`Delivering to ${t}`;case"delivering":return`Unloading at ${t}`;case"waiting_for_completion":return`Working at ${t}...`;case"waiting_at_office":return"Ready to start";case"traveling_to_farmhouse":return"In progress...";case"bead_completing":return"Completed!";case"exiting":return"Task Complete!";case"finished":return"Done!";default:return""}}const Td=[{id:"top-entry",position:{x:415,y:-30},direction:"enter",edge:"top"},{id:"bottom-entry",position:{x:415,y:1030},direction:"enter",edge:"bottom"},{id:"top-exit",position:{x:415,y:-30},direction:"exit",edge:"top"},{id:"bottom-exit",position:{x:415,y:1030},direction:"exit",edge:"bottom"}];function nx(n){return Td.filter(e=>e.direction===n)}function Ro(n){const e=nx(n);return e[Math.floor(Math.random()*e.length)]}function Jg(n){const e=nx("exit");let t=e[0],s=1/0;for(const o of e){const a=o.position.x-n.x,c=o.position.y-n.y,u=Math.sqrt(a*a+c*c);u<s&&(s=u,t=o)}return t}function v2(n){return Td.find(e=>e.id===n)}const nn=()=>({score:0,lastUpdated:null,status:null,openItems:[]}),_2=n=>{const e=nn(),t=n.match(/\*\*Score:\*\*\s*(\d+(?:\.\d+)?)\s*\/\s*10/i);t&&(e.score=parseFloat(t[1]));const s=n.match(/\*\*Last Updated:\*\*\s*(\d{4}-\d{2}-\d{2})/i);s&&(e.lastUpdated=s[1]);const o=n.match(/\*\*Status:\*\*\s*(.+?)(?:\n|$)/i);o&&(e.status=o[1].trim());const a=n.match(/## Open Items\s*\n([\s\S]*?)(?=\n---|\n## |$)/i);if(a){const c=a[1];if(!c.match(/_None|No open items|Empty/i)){const u=c.split(`
`);for(const d of u){const f=d.match(/^[-*]\s+(.+)/);if(f){const p=f[1].trim();let g;p.match(/\[HIGH\]|\(HIGH\)|/i)?g="high":p.match(/\[MEDIUM\]|\(MEDIUM\)|/i)?g="medium":p.match(/\[LOW\]|\(LOW\)|/i)&&(g="low"),e.openItems.push({text:p.replace(/\[(HIGH|MEDIUM|LOW)\]|\((HIGH|MEDIUM|LOW)\)|[]/giu,"").trim(),priority:g})}}}}return e},w2=n=>{const e=[],t=n.split(`
`);let s=!1,o=!1,a=!1,c=0,u=0,d=0;const f=n.match(/\*\*Active Ideas:\*\*\s*(\d+)/i),p=f?parseInt(f[1],10):null;for(const g of t){if(g.match(/^##\s*Ideas\s*$/i)){s=!0,o=!1,a=!1;continue}if(g.match(/^##\s*Graduated to Plans/i)){s=!1,o=!0,a=!1;continue}if(g.match(/^##\s*Implemented/i)){s=!1,o=!1,a=!0;continue}if(g.startsWith("## ")||g.startsWith("---")){if(g.startsWith("---"))continue;s=!1,o=!1,a=!1;continue}if(s){const x=g.match(/^###\s+(.+)/);x&&(e.push(x[1]),c++)}o&&g.match(/^\|\s*[^|\-\s]/)&&!g.match(/^\|\s*Idea\s*\|/i)&&u++,a&&g.match(/^\|\s*[^|\-\s]/)&&!g.match(/^\|\s*Idea\s*\|/i)&&d++}return p!==null&&(c=p),{planted:c,growing:u,picked:d,ideas:e}},S2=n=>{const e=[],t=n.match(/^###\s+(.+)$/gm);if(t)for(const a of t){const c=a.replace(/^###\s+/,"").trim();c&&e.push(c)}const s=n.match(/\*\*Composted Ideas:\*\*\s*(\d+)/i);return{count:s?parseInt(s[1],10):e.length,ideas:e}},b2=45,k2=14,C2=180,A2=60,ey={x:500,y:500},T2=800,P2=400,M2=500,E2=300,I2=200,R2=3e3,ty=250,F2=500,si=(n,e)=>`${n}-${e}`,L2=()=>({timeOfDay:"day",season:"summer",dayNightTimer:0,winterTimer:0,isWinter:!1,transitionProgress:0,isTransitioning:!1,transitionFrom:"day-summer",transitionTo:"day-summer",lastTickTime:0}),N2=()=>["security","tests","performance","farmhouse","office","accessibility","garden","compost","codeQuality"].map(e=>{const t=["garden","compost","office"].includes(e)?0:5;return{id:e,name:Yl[e],type:e,position:Ps[e],score:t,activity:"idle",color:tx[e]}}),on=m2((n,e)=>({isInitialized:!1,isPaused:!1,showDebug:!1,hideTooltips:!1,showMiniPlayer:!1,wasOpenBeforePopupHide:!1,vehicles:[],buildings:N2(),auditScores:{security:nn(),tests:nn(),performance:nn(),accessibility:nn(),codeQuality:nn(),farmhouse:nn()},beadsStats:null,gardenStats:{activeIdeas:0,ideas:[],planted:0,growing:0,picked:0},compostStats:{rejectedIdeas:0,ideas:[]},activityFeed:[],navGraph:null,simulatedFlowerCount:null,celebrationQueue:[],mapCycle:L2(),pendingBuildingSelection:null,beadsEnabled:!1,beadVehicleMap:new Map,completedBeadIssueIds:new Set,initialize:async t=>{await e().refreshStats(),n({isInitialized:!0})},pause:()=>n({isPaused:!0}),resume:()=>n({isPaused:!1}),toggleDebug:()=>n(t=>({showDebug:!t.showDebug})),toggleHideTooltips:()=>n(t=>({hideTooltips:!t.hideTooltips})),showMiniPlayerFn:()=>n({showMiniPlayer:!0}),hideMiniPlayer:()=>n({showMiniPlayer:!1}),toggleMiniPlayer:()=>n(t=>({showMiniPlayer:!t.showMiniPlayer})),hideForPopup:()=>n(t=>t.showMiniPlayer?{showMiniPlayer:!1,wasOpenBeforePopupHide:!0}:{}),restoreAfterPopup:()=>n(t=>t.wasOpenBeforePopupHide?{showMiniPlayer:!0,wasOpenBeforePopupHide:!1}:{wasOpenBeforePopupHide:!1}),dispatchVehicle:(t,s)=>{n(o=>({vehicles:o.vehicles.map(a=>a.id===t?{...a,destination:s}:a)}))},updateBuildingScore:(t,s)=>{n(o=>({buildings:o.buildings.map(a=>a.id===t?{...a,score:s}:a)}))},addActivity:t=>{const s={...t,id:`event-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now()};n(o=>({activityFeed:[s,...o.activityFeed].slice(0,50)}))},refreshStats:async()=>{try{const t=window.__FARMWORK_PROJECT_PATH__;if(!t)return;try{const _=await Ad("beads_stats",{projectPath:t});n({beadsStats:_})}catch{}const s={security:nn(),tests:nn(),performance:nn(),accessibility:nn(),codeQuality:nn(),farmhouse:nn()},o=[["security","_AUDIT/SECURITY.md"],["tests","_AUDIT/TESTS.md"],["performance","_AUDIT/PERFORMANCE.md"],["accessibility","_AUDIT/ACCESSIBILITY.md"],["codeQuality","_AUDIT/CODE_QUALITY.md"],["farmhouse","_AUDIT/FARMHOUSE.md"]];for(const[_,b]of o)try{const w=await Sh(t,b),k=await bh(w),A=_2(k);s[_]=A}catch{}n({auditScores:s});let a=0,c=[],u=0,d=0,f=0;try{const _=await Sh(t,"_AUDIT/GARDEN.md"),b=await bh(_),w=w2(b);a=w.planted,c=w.ideas,u=w.planted,d=w.growing,f=w.picked,n({gardenStats:{activeIdeas:a,ideas:c,planted:u,growing:d,picked:f}})}catch{}let p=0,g=[];try{const _=await Sh(t,"_AUDIT/COMPOST.md"),b=await bh(_),w=S2(b);p=w.count,g=w.ideas,n({compostStats:{rejectedIdeas:p,ideas:g}})}catch{}const x=e().buildings,v=[];if(n(_=>({buildings:_.buildings.map(b=>{let w=0;switch(b.type){case"security":w=s.security.score;break;case"tests":w=s.tests.score;break;case"performance":w=s.performance.score;break;case"accessibility":w=s.accessibility.score;break;case"codeQuality":w=s.codeQuality.score;break;case"farmhouse":w=s.farmhouse.score;break;case"garden":w=a;break;case"compost":w=p;break;case"office":w=b.score;break}const A=x.find(P=>P.id===b.id)?.score??0;return w>=10&&A<10&&["security","tests","performance","accessibility","codeQuality","farmhouse"].includes(b.type)&&v.push(b.id),{...b,score:w}})})),v.length>0){const _=e().buildings;for(const b of v){const w=_.find(k=>k.id===b);w&&e().addActivity({type:"celebration",message:`${w.name} achieved perfect score!`,buildingId:b})}n(b=>({celebrationQueue:[...b.celebrationQueue,...v]}))}}catch(t){console.error("Failed to refresh farmwork stats:",t)}},setNavGraph:t=>n({navGraph:t}),updateVehiclePosition:(t,s)=>{n(o=>({vehicles:o.vehicles.map(a=>a.id===t?{...a,position:s}:a)}))},spawnVehicle:t=>{let s;if(t.route&&t.route.length>0)s=t.route;else if(t.destination)s=t.destination==="farmhouse"?[t.destination]:[t.destination,"farmhouse"];else return"";const o=`vehicle-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,a=Zg(s[0]),c=Ro("enter"),u=e().buildings.find(g=>g.id===s[s.length-1]),d=u?{x:u.position.dockX,y:u.position.dockY}:ey,f=Jg(d),p={id:o,type:a,position:{...c.position},destination:s[0],returnDestination:s.length>1?s[s.length-1]:null,route:s,currentRouteIndex:0,task:"entering",spawnPoint:c.id,exitPoint:f.id,path:[],pathIndex:0,speed:xl.BASE+Math.random()*xl.VARIANCE,carrying:!1,direction:c.edge==="top"?"down":"up",...t.tint!==void 0&&{tint:t.tint}};return n(g=>({vehicles:[...g.vehicles,p]})),o},incrementToolCount:()=>{n(t=>({buildings:t.buildings.map(s=>s.id==="office"?{...s,score:s.score+1}:s)}))},removeVehicle:t=>{n(s=>({vehicles:s.vehicles.filter(o=>o.id!==t)}))},setVehicleCarrying:(t,s)=>{n(o=>({vehicles:o.vehicles.map(a=>a.id===t?{...a,carrying:s}:a)}))},startTestRun:()=>{const s=e().buildings.filter(d=>d.type!=="farmhouse"&&d.type!=="office").map(d=>d.id);let o=0;s.forEach(d=>{setTimeout(()=>{e().spawnVehicle({destination:d}),e().addActivity({type:"vehicle_arrived",message:`Vehicle dispatched: ${Yl[d]}  Farmhouse`,buildingId:d})},o),o+=T2+Math.random()*P2}),n({simulatedFlowerCount:0});const a=20;let c=M2;for(let d=1;d<=a;d++)setTimeout(()=>{n({simulatedFlowerCount:d}),e().addActivity({type:"idea_added",message:`Idea ${d} planted in garden`,buildingId:"garden"})},c),c+=E2+Math.random()*I2;const u=c+R2;for(let d=a-1;d>=0;d--)setTimeout(()=>{n({simulatedFlowerCount:d}),d>0&&e().addActivity({type:"idea_composted",message:`Idea composted (${d} remaining)`,buildingId:"compost"})},u+(a-d)*ty);setTimeout(()=>{n({simulatedFlowerCount:null})},u+a*ty+F2)},clearAllVehicles:()=>{n({vehicles:[],simulatedFlowerCount:null})},setSimulatedFlowerCount:t=>{n({simulatedFlowerCount:t})},clearCelebrationQueue:()=>{n({celebrationQueue:[]})},tickMapCycle:t=>{const{mapCycle:s}=e(),o=performance.now();if(o-s.lastTickTime<10)return;if(s.isTransitioning){const d=s.transitionProgress+t/k2;d>=1?n({mapCycle:{...s,transitionProgress:1,isTransitioning:!1,lastTickTime:o}}):n({mapCycle:{...s,transitionProgress:d,lastTickTime:o}});return}const a=s.dayNightTimer+t,c=s.winterTimer+t;let u={dayNightTimer:a,winterTimer:c,lastTickTime:o};if(!s.isWinter&&c>=C2){const d=si(s.timeOfDay,"winter");u={...u,season:"winter",isWinter:!0,winterTimer:0,transitionProgress:0,isTransitioning:!0,transitionFrom:si(s.timeOfDay,s.season),transitionTo:d}}else if(s.isWinter&&c>=A2){const d=si(s.timeOfDay,"summer");u={...u,season:"summer",isWinter:!1,winterTimer:0,transitionProgress:0,isTransitioning:!0,transitionFrom:si(s.timeOfDay,s.season),transitionTo:d}}if(a>=b2){const d=s.timeOfDay==="day"?"night":"day",f=u.season??s.season,p=si(d,f);u={...u,timeOfDay:d,dayNightTimer:0,transitionProgress:0,isTransitioning:!0,transitionFrom:si(s.timeOfDay,f),transitionTo:p}}n({mapCycle:{...s,...u}})},signalVehicleExit:t=>{n(s=>({vehicles:s.vehicles.map(o=>o.id===t?{...o,shouldExit:!0}:o)}))},setPendingBuildingSelection:t=>{n({pendingBuildingSelection:t})},setBeadsEnabled:t=>{n({beadsEnabled:t})},syncBeadVehicles:t=>{const{beadVehicleMap:s,spawnBeadVehicle:o,signalVehicleExit:a,completedBeadIssueIds:c}=e(),d=t.filter(p=>(p.status==="open"||p.status==="in_progress")&&!c.has(p.id)).sort((p,g)=>p.priority-g.priority).slice(0,15),f=new Set(d.map(p=>p.id));for(const[p,g]of s)f.has(p)||(a(g.vehicleId),n(x=>{const v=new Map(x.beadVehicleMap);return v.delete(p),{beadVehicleMap:v}}));for(const p of d){const g=s.get(p.id);g?g.status!==p.status&&e().updateBeadVehicleStatus(p.id,p.status):o(p)}},spawnBeadVehicle:t=>{const s=t.status==="open"?"office":"farmhouse",o=g2[t.priority]??10724259,a=`bead-vehicle-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,c=Zg(s),u=Ro("enter"),d=Jg(ey),f=[s],p={id:a,type:c,position:{...u.position},destination:s,route:f,currentRouteIndex:0,task:"entering",spawnPoint:u.id,exitPoint:d.id,path:[],pathIndex:0,speed:xl.BASE+Math.random()*xl.VARIANCE,carrying:!1,direction:u.edge==="top"?"down":"up",tint:o,issueId:t.id,issueTitle:t.title};return n(g=>({vehicles:[...g.vehicles,p]})),n(g=>{const x=new Map(g.beadVehicleMap);return x.set(t.id,{issueId:t.id,vehicleId:a,status:t.status,priority:t.priority,title:t.title}),{beadVehicleMap:x}}),e().addActivity({type:"issue_created",message:`Issue: ${t.title.slice(0,30)}${t.title.length>30?"...":""}`,buildingId:s}),a},updateBeadVehicleStatus:(t,s)=>{const{beadVehicleMap:o,vehicles:a,signalVehicleExit:c}=e(),u=o.get(t);!u||!a.find(f=>f.id===u.vehicleId)||(s==="in_progress"&&u.status==="open"?(n(f=>({vehicles:f.vehicles.map(p=>p.id===u.vehicleId?{...p,route:["farmhouse"],currentRouteIndex:0,destination:"farmhouse",task:"traveling_to_farmhouse",path:[],pathIndex:0}:p),beadVehicleMap:new Map(f.beadVehicleMap).set(t,{...u,status:s})})),e().addActivity({type:"issue_started",message:`Started: ${u.title.slice(0,30)}${u.title.length>30?"...":""}`,buildingId:"farmhouse"})):s==="closed"&&(c(u.vehicleId),n(f=>{const p=new Map(f.beadVehicleMap);return p.delete(t),{beadVehicleMap:p}}),e().addActivity({type:"issue_closed",message:`Closed: ${u.title.slice(0,30)}${u.title.length>30?"...":""}`,buildingId:"farmhouse"})))},removeBeadVehicle:t=>{const{beadVehicleMap:s,signalVehicleExit:o}=e(),a=s.get(t);a&&(o(a.vehicleId),n(c=>{const u=new Map(c.beadVehicleMap);return u.delete(t),{beadVehicleMap:u}}))},markBeadIssueCompleted:t=>{n(s=>({completedBeadIssueIds:new Set(s.completedBeadIssueIds).add(t)}))},clearCompletedBeadIssues:()=>{n({completedBeadIssueIds:new Set})}}));async function B2(n){return new Promise((e,t)=>{const s=new Image;s.crossOrigin="anonymous",s.onload=()=>e(s),s.onerror=t,s.src=n})}async function O2(n,e=16,t=200){const s=await B2(n),o=s.width,a=s.height,c=document.createElement("canvas");c.width=o,c.height=a;const u=c.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("Could not get 2D context");u.drawImage(s,0,0);const f=u.getImageData(0,0,o,a).data,p=Math.ceil(o/e),g=Math.ceil(a/e),x=Array.from({length:g},()=>Array(p).fill(!1));for(let v=0;v<g;v++)for(let _=0;_<p;_++){let b=0,w=0;for(let A=0;A<3;A++)for(let P=0;P<3;P++){const C=Math.min(o-1,Math.floor((_+(P+.5)/3)*e)),R=(Math.min(a-1,Math.floor((v+(A+.5)/3)*e))*o+C)*4,L=f[R],Q=f[R+1],W=f[R+2];if(f[R+3]<10)continue;const $=(L+Q+W)/3;b+=$,w++}const k=w?b/w:0;x[v][_]=k>=t}return{width:o,height:a,cols:p,rows:g,cellSize:e,cells:x,isWalkable(v,_){return v<0||v>=p||_<0||_>=g?!1:x[_][v]}}}const z2=[{dx:0,dy:-1,name:"n"},{dx:1,dy:0,name:"e"},{dx:0,dy:1,name:"s"},{dx:-1,dy:0,name:"w"}];function D2(n){const{cols:e,rows:t,cellSize:s,width:o,height:a}=n,c=(p,g)=>p>=0&&p<e&&g>=0&&g<t&&n.isWalkable(p,g),u=(p,g)=>({n:c(p,g-1),e:c(p+1,g),s:c(p,g+1),w:c(p-1,g)}),d=(p,g)=>{if(!c(p,g))return!1;const x=u(p,g),v=[x.n,x.e,x.s,x.w].filter(Boolean).length;if(v===1||v>=3)return!0;if(v===2){const _=x.n&&x.s,b=x.e&&x.w;return!(_||b)}return!1},f=new Map;for(let p=0;p<t;p++)for(let g=0;g<e;g++)if(d(g,p)){const x=`${g},${p}`;f.set(x,{id:x,x:g*s+s/2,y:p*s+s/2,gridX:g,gridY:p,neighbors:[]})}for(const p of f.values())for(const g of z2){let x=p.gridX+g.dx,v=p.gridY+g.dy;if(c(x,v))for(;c(x,v);){const _=`${x},${v}`;if(f.has(_)){p.neighbors.push(_);break}x+=g.dx,v+=g.dy}}return{nodes:f,cellSize:s,width:o,height:a}}function ii(n,e,t){let s=null,o=1/0;for(const a of n.nodes.values()){const c=a.x-e,u=a.y-t,d=c*c+u*u;d<o&&(o=d,s=a)}return s}function ny(n,e){return Math.abs(n.gridX-e.gridX)+Math.abs(n.gridY-e.gridY)}function j2(n,e){const t=n.x-e.x,s=n.y-e.y;return Math.sqrt(t*t+s*s)}function kh(n,e,t,s={}){const{jitter:o=.08}=s,{nodes:a}=n,c=a.get(e),u=a.get(t);if(!c||!u)return null;const d=new Set([e]),f=new Map,p=new Map([[e,0]]),g=new Map([[e,ny(c,u)]]),x=()=>{let v=null,_=1/0;for(const b of d){const w=g.get(b)??1/0;w<_&&(_=w,v=b)}return v};for(;d.size>0;){const v=x();if(!v)break;if(v===t){const b=[v];let w=v;for(;f.has(w);)w=f.get(w),b.push(w);return b.reverse(),b}d.delete(v);const _=a.get(v);if(_)for(const b of _.neighbors){const w=a.get(b);if(!w)continue;const k=1+(Math.random()*2-1)*o,A=j2(_,w)*k,P=(p.get(v)??1/0)+A;P<(p.get(b)??1/0)&&(f.set(b,v),p.set(b,P),g.set(b,P+ny(w,u)),d.add(b))}}return null}function Ch(n,e){return n.map(t=>{const s=e.nodes.get(t);return s?{x:s.x,y:s.y}:null}).filter(t=>t!==null)}function Ah(n,e=.5){if(n.length<3)return n;const t=[n[0]];for(let s=1;s<n.length-1;s++){const o=n[s-1],a=n[s],c=n[s+1];t.push({x:a.x+(o.x+c.x-2*a.x)*e*.5,y:a.y+(o.y+c.y-2*a.y)*e*.5})}return t.push(n[n.length-1]),t}function G2(n){const e=Array.from(n.nodes.values());return e.length===0?null:e[Math.floor(Math.random()*e.length)]}class U2{constructor(){de(this,"grid",null);de(this,"graph",null);de(this,"initialized",!1)}async initialize(e,t=16){return this.grid=await O2(e,t,200),this.graph=D2(this.grid),this.addSpawnPointNodes(),this.initialized=!0,this.graph}addSpawnPointNodes(){if(this.graph)for(const e of Td){const t=this.findNearestRoadToEdge(e.edge);if(t){const s={id:e.id,x:e.position.x,y:e.position.y,gridX:-1,gridY:e.edge==="top"?-1:999,neighbors:[t.id]};this.graph.nodes.set(e.id,s),t.neighbors.push(e.id)}}}findNearestRoadToEdge(e){if(!this.graph)return null;let t=null,s=1/0;const o=e==="top"?0:1e3,a=415;for(const c of this.graph.nodes.values()){if(c.id.startsWith("top-")||c.id.startsWith("bottom-"))continue;const u=c.x-a,d=c.y-o,f=Math.sqrt(u*u+d*d);f<s&&(s=f,t=c)}return t}isInitialized(){return this.initialized}getGraph(){return this.graph}getGrid(){return this.grid}findPath(e,t,s=.1){if(!this.graph)return console.warn("[Nav] No graph available"),null;const o=ii(this.graph,e.x,e.y),a=ii(this.graph,t.x,t.y);if(!o)return console.warn(`[Nav] No start node found near (${e.x.toFixed(0)}, ${e.y.toFixed(0)})`),null;if(!a)return console.warn(`[Nav] No end node found near (${t.x.toFixed(0)}, ${t.y.toFixed(0)})`),null;const c=kh(this.graph,o.id,a.id,{jitter:s});if(!c)return console.warn(`[Nav] A* found no path from ${o.id} to ${a.id}`),null;const u=Ch(c,this.graph);return Ah(u,.3)}snapToRoad(e){if(!this.graph)return null;const t=ii(this.graph,e.x,e.y);return t?{x:t.x,y:t.y}:null}getRandomRoadPoint(){if(!this.graph)return null;const e=G2(this.graph);return e?{x:e.x,y:e.y}:null}getNearestNode(e){return this.graph?ii(this.graph,e.x,e.y):null}findPathFromSpawn(e,t,s=.1){if(!this.graph)return console.warn("[Nav] No graph available"),null;const o=this.graph.nodes.get(e);if(!o)return console.warn(`[Nav] Spawn point not found: ${e}`),null;const a=ii(this.graph,t.x,t.y);if(!a)return console.warn(`[Nav] No end node found near (${t.x.toFixed(0)}, ${t.y.toFixed(0)})`),null;const c=kh(this.graph,o.id,a.id,{jitter:s});if(!c)return console.warn(`[Nav] A* found no path from ${o.id} to ${a.id}`),null;const u=Ch(c,this.graph);return Ah(u,.3)}findPathToExit(e,t,s=.1){if(!this.graph)return console.warn("[Nav] No graph available"),null;const o=this.graph.nodes.get(t);if(!o)return console.warn(`[Nav] Exit point not found: ${t}`),null;const a=ii(this.graph,e.x,e.y);if(!a)return console.warn(`[Nav] No start node found near (${e.x.toFixed(0)}, ${e.y.toFixed(0)})`),null;const c=kh(this.graph,a.id,o.id,{jitter:s});if(!c)return console.warn(`[Nav] A* found no path from ${a.id} to ${o.id}`),null;const u=Ch(c,this.graph);return Ah(u,.3)}getSpawnPoint(e){return v2(e)}}const vn=new U2;class rx extends Et{constructor(t){super();de(this,"background");de(this,"textLabel");de(this,"config");de(this,"bobPhase",0);de(this,"bobAmplitude",3);de(this,"bobSpeed",2);de(this,"baseY",0);de(this,"pulsePhase",0);de(this,"isPulsing",!1);de(this,"pulseScale",1);this.config={backgroundColor:1710638,textColor:16777215,floating:!0,minWidth:60,fontSize:10,padding:6,...t},this.background=new cn,this.addChild(this.background);const s=new Kr({fontFamily:"monospace",fontSize:this.config.fontSize,fontWeight:"bold",fill:this.config.textColor});this.textLabel=new jo({text:this.config.text,style:s}),this.textLabel.anchor.set(.5),this.addChild(this.textLabel),this.drawBackground()}drawBackground(){const t=this.config.padding,s=this.textLabel.width,o=this.textLabel.height,a=Math.max(this.config.minWidth,s+t*2),c=o+t*2;this.background.clear(),this.background.roundRect(-a/2,-c/2,a,c,c/2),this.background.fill({color:this.config.backgroundColor,alpha:.9}),this.background.stroke({color:3816030,width:1,alpha:.5})}setText(t){this.textLabel.text!==t&&(this.textLabel.text=t,this.drawBackground())}setBackgroundColor(t){this.config.backgroundColor=t,this.drawBackground()}setTextColor(t){this.config.textColor=t,this.textLabel.style.fill=t}startPulse(){this.isPulsing=!0,this.pulsePhase=0}stopPulse(){this.isPulsing=!1,this.scale.set(1)}update(t){if(this.config.floating){this.bobPhase+=this.bobSpeed*t;const s=Math.sin(this.bobPhase)*this.bobAmplitude;this.y=this.baseY+s}if(this.isPulsing){this.pulsePhase+=t*8;const s=1+Math.sin(this.pulsePhase)*.08;this.scale.set(s),this.pulsePhase>Math.PI*4&&this.stopPulse()}}setBaseY(t){this.baseY=t,this.y=t}setFloating(t){this.config.floating=t}}class $2 extends rx{constructor(t){super({text:"",floating:!0,minWidth:100,fontSize:16,padding:12});de(this,"buildingType");de(this,"iconGraphic");de(this,"scoreLabel");de(this,"nameLabel");de(this,"currentScore",0);this.buildingType=t.type,this.currentScore=t.score,this.textLabel.visible=!1,this.iconGraphic=new cn,this.addChild(this.iconGraphic);const s=new Kr({fontFamily:"monospace",fontSize:16,fontWeight:"bold",fill:16777215});this.scoreLabel=new jo({text:this.formatScore(t.score),style:s}),this.scoreLabel.anchor.set(0,.5),this.addChild(this.scoreLabel);const o=new Kr({fontFamily:"monospace",fontSize:10,fontWeight:"normal",fill:8947848});this.nameLabel=new jo({text:Yl[this.buildingType],style:o}),this.nameLabel.anchor.set(.5,0),this.addChild(this.nameLabel),this.drawBuildingBadge(),this.updateScore(t.score)}formatScore(t){return this.buildingType==="garden"||this.buildingType==="compost"||this.buildingType==="office"?`${Math.floor(t)}`:`${t%1===0?t.toString():t.toFixed(1)}/10`}drawBuildingBadge(){const t=this.getScoreColor(this.currentScore),s=22,o=this.scoreLabel.width,a=8,c=12,u=14,d=s+a+o,f=Math.max(d+c*2,this.nameLabel.width+c*2),p=36+u;this.background.clear(),this.background.roundRect(-f/2,-p/2,f,p,8),this.background.fill({color:1710638,alpha:.92}),this.background.stroke({color:t,width:2,alpha:.8}),this.drawIcon(t,s);const g=-d/2,x=-u/2;this.iconGraphic.x=g+s/2,this.iconGraphic.y=x,this.scoreLabel.x=g+s+a,this.scoreLabel.y=x,this.nameLabel.x=0,this.nameLabel.y=x+12}drawIcon(t,s){this.iconGraphic.clear();const o=s/2;switch(this.buildingType){case"security":this.iconGraphic.moveTo(0,-o),this.iconGraphic.lineTo(o,-o*.5),this.iconGraphic.lineTo(o,o*.3),this.iconGraphic.lineTo(0,o),this.iconGraphic.lineTo(-o,o*.3),this.iconGraphic.lineTo(-o,-o*.5),this.iconGraphic.closePath(),this.iconGraphic.fill({color:t,alpha:.9});break;case"tests":this.iconGraphic.roundRect(-o*.4,-o,o*.8,o*1.6,2),this.iconGraphic.fill({color:t,alpha:.9}),this.iconGraphic.circle(0,o*.5,o*.35),this.iconGraphic.fill({color:t,alpha:.9});break;case"performance":this.iconGraphic.circle(0,0,o),this.iconGraphic.stroke({color:t,width:2,alpha:.9}),this.iconGraphic.moveTo(0,0),this.iconGraphic.lineTo(o*.5,-o*.5),this.iconGraphic.stroke({color:t,width:2,alpha:.9});break;case"accessibility":this.iconGraphic.circle(0,-o*.5,o*.35),this.iconGraphic.fill({color:t,alpha:.9}),this.iconGraphic.moveTo(0,-o*.15),this.iconGraphic.lineTo(0,o*.4),this.iconGraphic.stroke({color:t,width:2,alpha:.9}),this.iconGraphic.moveTo(-o*.5,o),this.iconGraphic.lineTo(0,o*.4),this.iconGraphic.lineTo(o*.5,o),this.iconGraphic.stroke({color:t,width:2,alpha:.9});break;case"codeQuality":this.iconGraphic.moveTo(-o*.5,-o*.3),this.iconGraphic.lineTo(-o,0),this.iconGraphic.lineTo(-o*.5,o*.3),this.iconGraphic.stroke({color:t,width:2,alpha:.9}),this.iconGraphic.moveTo(o*.5,-o*.3),this.iconGraphic.lineTo(o,0),this.iconGraphic.lineTo(o*.5,o*.3),this.iconGraphic.stroke({color:t,width:2,alpha:.9});break;case"farmhouse":case"office":this.iconGraphic.moveTo(0,-o),this.iconGraphic.lineTo(o,-o*.2),this.iconGraphic.lineTo(o,o),this.iconGraphic.lineTo(-o,o),this.iconGraphic.lineTo(-o,-o*.2),this.iconGraphic.closePath(),this.iconGraphic.fill({color:t,alpha:.9});break;case"garden":this.iconGraphic.moveTo(0,o),this.iconGraphic.lineTo(0,0),this.iconGraphic.stroke({color:t,width:2,alpha:.9}),this.iconGraphic.moveTo(-o*.4,-o*.2),this.iconGraphic.quadraticCurveTo(-o*.8,-o,0,-o),this.iconGraphic.quadraticCurveTo(o*.8,-o,o*.4,-o*.2),this.iconGraphic.quadraticCurveTo(0,-o*.5,-o*.4,-o*.2),this.iconGraphic.fill({color:t,alpha:.9});break;case"compost":this.iconGraphic.roundRect(-o*.7,-o*.5,o*1.4,o*1.5,2),this.iconGraphic.fill({color:t,alpha:.9}),this.iconGraphic.moveTo(-o*.5,-o),this.iconGraphic.lineTo(o*.5,-o),this.iconGraphic.stroke({color:t,width:2,alpha:.9});break;default:this.iconGraphic.circle(0,0,o*.8),this.iconGraphic.fill({color:t,alpha:.9})}}getScoreColor(t){return this.buildingType==="garden"?8702998:this.buildingType==="compost"?7893356:this.buildingType==="office"?440020:t<3?15680580:t<6?16096779:t<8?3900150:2278750}updateScore(t){this.currentScore!==t&&(this.currentScore=t,this.scoreLabel.text=this.formatScore(t),this.drawBuildingBadge(),this.startPulse())}updateFromBuilding(t){this.updateScore(t.score)}getBuildingColor(){const t=tx[this.buildingType];return parseInt(t.replace("#",""),16)}}class W2 extends Et{constructor(t){super();de(this,"data");de(this,"background");de(this,"nameLabel");de(this,"scoreText");de(this,"activityIndicator");de(this,"badge");de(this,"pulsePhase",0);de(this,"activityPulseScale",1);this.data=t;const{x:s,y:o,width:a,height:c}=t.position;this.background=new cn,this.drawBackground(),this.background.visible=!1,this.addChild(this.background),this.nameLabel=new jo({text:t.name,style:{fontFamily:"Arial",fontSize:14,fill:16777215,align:"center",fontWeight:"bold"}}),this.nameLabel.anchor.set(.5),this.nameLabel.position.set(a/2,c/2-10),this.nameLabel.visible=!1,this.addChild(this.nameLabel),this.scoreText=new jo({text:`${t.score.toFixed(1)}/10`,style:{fontFamily:"Arial",fontSize:12,fill:16777215,align:"center"}}),this.scoreText.anchor.set(.5),this.scoreText.position.set(a/2,c/2+10),this.scoreText.visible=!1,this.addChild(this.scoreText),this.activityIndicator=new cn,this.activityIndicator.position.set(a-15,10),this.activityIndicator.visible=!1,this.addChild(this.activityIndicator),this.updateActivityIndicator(),this.badge=new $2(t),this.badge.position.set(a/2,-18),this.badge.setBaseY(-18),this.addChild(this.badge),this.position.set(s,o),this.eventMode="static",this.cursor="pointer"}drawBackground(){const{width:t,height:s}=this.data.position,o=parseInt(this.data.color.replace("#",""),16),a=this.getAlphaForScore(this.data.score);this.background.clear(),this.background.roundRect(0,0,t,s,8),this.background.fill({color:o,alpha:a}),this.background.stroke({color:16777215,width:2,alpha:.5})}getAlphaForScore(t){return t<3?.4:t<6?.6:t<8?.8:1}updateActivityIndicator(){this.activityIndicator.clear();const s={idle:7041664,working:2278750,alert:15680580}[this.data.activity];this.activityIndicator.circle(0,0,5),this.activityIndicator.fill(s),this.data.activity==="working"&&(this.activityIndicator.circle(0,0,7),this.activityIndicator.stroke({color:s,width:1,alpha:.5}))}update(t){this.badge.update(t),this.data.activity==="working"?(this.pulsePhase+=t*5,this.activityPulseScale=1+Math.sin(this.pulsePhase)*.3,this.activityIndicator.scale.set(this.activityPulseScale)):(this.activityIndicator.scale.set(1),this.pulsePhase=0)}updateData(t){const s=this.data.score!==t.score;this.data=t,this.drawBackground(),this.scoreText.text=`${t.score.toFixed(1)}/10`,this.updateActivityIndicator(),s&&this.badge.updateFromBuilding(t)}setActivity(t){this.data.activity=t,this.updateActivityIndicator()}highlight(t){t?this.background.tint=16777164:this.background.tint=16777215}setDebugMode(t){this.background.visible=t,this.nameLabel.visible=t,this.scoreText.visible=t,this.activityIndicator.visible=t}setBadgeVisible(t){this.badge.alpha=t?1:0}getData(){return this.data}}class V2 extends rx{constructor(){super({text:"Arriving...",floating:!1,minWidth:120,fontSize:14,padding:10,backgroundColor:1710638,textColor:16777215});de(this,"currentTask","entering");de(this,"currentDestination");this.bobAmplitude=2,this.bobSpeed=3}setTask(t,s){if(this.currentTask===t&&this.currentDestination===s)return;this.currentTask=t,this.currentDestination=s;const o=x2(t,s);this.setText(o);const a=this.getTaskBackgroundColor(t);this.setBackgroundColor(a),(t==="delivering"||t==="exiting"||t==="finished"||t==="bead_completing")&&this.startPulse()}getTaskBackgroundColor(t){switch(t){case"entering":case"traveling_to_pickup":return 1710638;case"loading":return 1981023;case"traveling_to_delivery":return 1981023;case"delivering":return 1984032;case"bead_completing":case"exiting":case"finished":return 2278750;default:return 1710638}}getTask(){return this.currentTask}}const H2={"blue-truck":3900150,"white-truck":16777215,tractor:2278750},ry=new Map;async function Y2(n){const e=ry.get(n);if(e)return e;const t=y2[n],[s,o,a,c]=await Promise.all([On.load(t.up),On.load(t.upFilled),On.load(t.left),On.load(t.leftFilled)]),u={up:s,upFilled:o,left:a,leftFilled:c};return ry.set(n,u),u}class X2 extends Et{constructor(t){super();de(this,"data");de(this,"sprite");de(this,"fallbackGraphic");de(this,"textures",null);de(this,"arriveRadius",8);de(this,"currentDirection","up");de(this,"isCarrying",!1);de(this,"isLoaded",!1);de(this,"badge");de(this,"isFinished",!1);de(this,"tintColor",16777215);de(this,"pulseTimer",0);this.data=t,this.currentDirection=t.direction,this.isCarrying=t.carrying,t.tint!==void 0&&(this.tintColor=t.tint),this.fallbackGraphic=new cn;const s=H2[t.type];this.fallbackGraphic.roundRect(-15,-20,30,40,4),this.fallbackGraphic.fill(s),this.fallbackGraphic.stroke({color:0,width:2}),this.fallbackGraphic.scale.set(.6),this.tintColor!==16777215&&(this.fallbackGraphic.tint=this.tintColor),this.addChild(this.fallbackGraphic),this.sprite=new sr,this.sprite.anchor.set(.5,.5),this.sprite.scale.set(.6),this.addChild(this.sprite),this.badge=new V2,this.badge.position.set(0,-30),this.badge.setBaseY(-30),this.addChild(this.badge);const o=t.route?.[t.currentRouteIndex]??t.destination;this.badge.setTask(t.task??"entering",o??void 0),this.position.set(t.position.x,t.position.y),this.loadTextures()}async loadTextures(){try{this.textures=await Y2(this.data.type),this.isLoaded=!0,this.fallbackGraphic.visible=!1,this.updateTexture(),this.tintColor!==16777215&&(this.sprite.tint=this.tintColor)}catch(t){console.warn("Failed to load vehicle textures:",t)}}setTint(t){this.tintColor=t,this.sprite&&(this.sprite.tint=t),this.fallbackGraphic&&(this.fallbackGraphic.tint=t)}getTint(){return this.tintColor}updateTexture(){if(!this.textures||!this.isLoaded)return;let t;const s=this.isCarrying,o=.6;switch(this.currentDirection){case"up":t=s?this.textures.upFilled:this.textures.up,this.sprite.scale.set(o,o);break;case"down":t=s?this.textures.upFilled:this.textures.up,this.sprite.scale.set(o,-o);break;case"left":t=s?this.textures.leftFilled:this.textures.left,this.sprite.scale.set(-o,o);break;case"right":t=s?this.textures.leftFilled:this.textures.left,this.sprite.scale.set(o,o);break}this.sprite.texture=t}getDirectionFromVelocity(t,s){const o=Math.abs(t),a=Math.abs(s);return o>a?t>0?"right":"left":s>0?"down":"up"}update(t){if(this.badge.update(t),this.isFinished)return!1;if(this.data.task==="waiting_for_completion"||this.data.task==="waiting_at_office"||this.data.task==="bead_completing"){this.pulseTimer+=t;const g=Math.sin(this.pulseTimer*3)*.08+1;this.sprite.scale.set(.6*g),this.fallbackGraphic.scale.set(.6*g)}else this.pulseTimer=0;if(this.data.path.length===0)return!1;if(this.data.pathIndex>=this.data.path.length)return!0;const s=this.data.path[this.data.pathIndex],o=s.x-this.position.x,a=s.y-this.position.y,c=Math.hypot(o,a);if(c<=this.arriveRadius)return this.data.pathIndex++,this.data.position={x:this.position.x,y:this.position.y},this.data.pathIndex>=this.data.path.length;const u=this.data.speed,d=o/c*u,f=a/c*u;this.position.x+=d*t,this.position.y+=f*t,this.data.position={x:this.position.x,y:this.position.y};const p=this.getDirectionFromVelocity(d,f);return p!==this.currentDirection&&(this.currentDirection=p,this.data.direction=p,this.updateTexture()),!1}setPath(t){this.data.path=t,this.data.pathIndex=0}getData(){return this.data}updateData(t){if(this.isFinished)return;const s=this.isCarrying!==t.carrying,o=this.data.path,a=this.data.pathIndex,c=this.data.task,u=this.data.currentRouteIndex,d=this.data.waitStartTime;this.data=t,o.length>0&&(this.data.path=o,this.data.pathIndex=a),this.data.task=c,this.data.currentRouteIndex=u,d&&(this.data.waitStartTime=d),this.data.shouldExit=t.shouldExit,this.position.set(t.position.x,t.position.y),this.isCarrying=t.carrying,s&&this.updateTexture()}setCarrying(t){this.isCarrying!==t&&(this.isCarrying=t,this.data.carrying=t,this.updateTexture())}setTask(t,s){this.data.task=t,this.badge.setTask(t,s)}getTask(){return this.data.task}getCurrentDestination(){return this.data.route&&this.data.route.length>0?this.data.route[this.data.currentRouteIndex]:this.data.destination??void 0}advanceRoute(){if(!this.data.route||this.data.route.length===0)return!0;if(this.data.currentRouteIndex++,this.data.currentRouteIndex>=this.data.route.length){const s=this.data.route[this.data.route.length-1];return this.setTask("waiting_for_completion",s),this.data.waitStartTime=Date.now(),!0}const t=this.data.route[this.data.currentRouteIndex];return this.setTask("traveling_to_delivery",t),!1}isAtDestination(){return this.data.path.length===0||this.data.pathIndex>=this.data.path.length}markFinished(){this.isFinished=!0,this.setTask("finished")}isMarkedFinished(){return this.isFinished}setBadgeVisible(t){this.badge.visible=t}}const rt=6,q2=["tycoon/flower1.png","tycoon/flower2.png","tycoon/flower3.png","tycoon/flower4.png"];class Q2 extends Et{constructor(){super();de(this,"flowers",[]);de(this,"textures",[]);de(this,"isLoaded",!1);de(this,"gardenPos",Ps.garden);de(this,"pendingFlowerCount",null);de(this,"pendingIdeaNames",null);de(this,"onFlowerHover",null);de(this,"onGardenClick",null);de(this,"clickArea",null);de(this,"cellWidth");de(this,"cellHeight");de(this,"padding",20);de(this,"flowerScale",.8);const t=this.gardenPos.width-this.padding*2,s=this.gardenPos.height-this.padding*2;this.cellWidth=t/rt,this.cellHeight=s/rt,this.loadTextures()}async loadTextures(){try{this.textures=await Promise.all(q2.map(t=>On.load(t))),this.isLoaded=!0,this.initializeGrid()}catch(t){console.warn("Failed to load flower textures:",t)}}initializeGrid(){this.clickArea=new cn,this.clickArea.rect(this.gardenPos.x,this.gardenPos.y,this.gardenPos.width,this.gardenPos.height),this.clickArea.fill({color:0,alpha:0}),this.clickArea.eventMode="static",this.clickArea.cursor="pointer",this.clickArea.on("pointerdown",()=>{this.onGardenClick&&this.onGardenClick()}),this.addChild(this.clickArea);for(let t=0;t<rt;t++){this.flowers[t]=[];for(let s=0;s<rt;s++){const o=this.textures[Math.floor(Math.random()*this.textures.length)],a=new sr(o);a.anchor.set(.5,.5),a.scale.set(this.flowerScale),a.alpha=0;const c=this.gardenPos.x+this.padding+s*this.cellWidth+this.cellWidth/2,u=this.gardenPos.y+this.padding+t*this.cellHeight+this.cellHeight/2;a.position.set(c,u);const d=(Math.random()-.5)*.3;a.rotation=d,a.hitArea=new tt(-this.cellWidth/2,-this.cellHeight/2,this.cellWidth,this.cellHeight),a.eventMode="static",a.cursor="pointer";const f=t,p=s;a.on("pointerenter",()=>{const g=this.flowers[f]?.[p];g?.occupied&&g.ideaName&&this.onFlowerHover&&this.onFlowerHover(g.ideaName,a.x,a.y)}),a.on("pointerleave",()=>{this.onFlowerHover&&this.onFlowerHover(null,0,0)}),this.addChild(a),this.flowers[t][s]={sprite:a,occupied:!1,fadeTarget:0,ideaName:null}}}this.pendingFlowerCount!==null&&(this.setFlowerCount(this.pendingFlowerCount),this.pendingFlowerCount=null),this.pendingIdeaNames!==null&&(this.setIdeaNames(this.pendingIdeaNames),this.pendingIdeaNames=null)}setFlowerCount(t){if(!this.isLoaded){this.pendingFlowerCount=t;return}const s=rt*rt,o=Math.min(t,s);let a=0;for(let c=0;c<rt;c++)for(let u=0;u<rt;u++){const d=this.flowers[c]?.[u];if(!d)continue;const f=a<o;d.occupied=f,d.fadeTarget=f?1:0,a++}}showFlowerAt(t){if(!this.isLoaded)return;const s=Math.floor(t/rt),o=t%rt,a=this.flowers[s]?.[o];if(a){a.occupied=!0,a.fadeTarget=1;const c=this.textures[Math.floor(Math.random()*this.textures.length)];a.sprite.texture=c}}hideFlowerAt(t){if(!this.isLoaded)return;const s=Math.floor(t/rt),o=t%rt,a=this.flowers[s]?.[o];a&&(a.occupied=!1,a.fadeTarget=0)}showRandomFlower(){if(!this.isLoaded)return-1;const t=[];let s=0;for(let a=0;a<rt;a++)for(let c=0;c<rt;c++){const u=this.flowers[a]?.[c];u&&!u.occupied&&t.push(s),s++}if(t.length===0)return-1;const o=t[Math.floor(Math.random()*t.length)];return this.showFlowerAt(o),o}hideRandomFlower(){if(!this.isLoaded)return-1;const t=[];let s=0;for(let a=0;a<rt;a++)for(let c=0;c<rt;c++){const u=this.flowers[a]?.[c];u&&u.occupied&&t.push(s),s++}if(t.length===0)return-1;const o=t[Math.floor(Math.random()*t.length)];return this.hideFlowerAt(o),o}clearAll(){for(let t=0;t<rt;t++)for(let s=0;s<rt;s++){const o=this.flowers[t]?.[s];o&&(o.occupied=!1,o.fadeTarget=0)}}update(t){if(!this.isLoaded)return;const s=3;for(let o=0;o<rt;o++)for(let a=0;a<rt;a++){const c=this.flowers[o]?.[a];if(!c)continue;const u=c.fadeTarget-c.sprite.alpha;Math.abs(u)>.01?c.sprite.alpha+=u*s*t:c.sprite.alpha=c.fadeTarget}}getOccupiedCount(){let t=0;for(let s=0;s<rt;s++)for(let o=0;o<rt;o++)this.flowers[s]?.[o]?.occupied&&t++;return t}setIdeaNames(t){if(!this.isLoaded){this.pendingIdeaNames=t;return}let s=0;for(let o=0;o<rt;o++)for(let a=0;a<rt;a++){const c=this.flowers[o]?.[a];c&&(s<t.length?c.ideaName=t[s]:c.ideaName=null,s++)}}setOnFlowerHover(t){this.onFlowerHover=t}setOnGardenClick(t){this.onGardenClick=t}getGardenBounds(){return{x:this.gardenPos.x,y:this.gardenPos.y,width:this.gardenPos.width,height:this.gardenPos.height}}}const vl=[16776960,16753920,16737792,16729344,16711680,13369344];class K2 extends Et{constructor(){super();de(this,"particles",[]);de(this,"glowGraphics");de(this,"glowPhase",0);de(this,"emitTimer",0);de(this,"emitRate",.05);de(this,"maxParticles",30);de(this,"fireWidth",45);this.label="fireEffect",this.glowGraphics=new cn,this.glowGraphics.filters=[new ex({strength:15})],this.addChild(this.glowGraphics),this.drawGlow(1)}drawGlow(t){this.glowGraphics.clear(),this.glowGraphics.circle(0,-20,60*t),this.glowGraphics.fill({color:16729344,alpha:.15*t}),this.glowGraphics.circle(0,-15,40*t),this.glowGraphics.fill({color:16737792,alpha:.25*t}),this.glowGraphics.circle(0,-10,25*t),this.glowGraphics.fill({color:16753920,alpha:.4*t}),this.glowGraphics.circle(0,-5,15*t),this.glowGraphics.fill({color:16763904,alpha:.5*t})}createParticle(){if(this.particles.length>=this.maxParticles)return;const t=new cn,s=(Math.random()-.5)*this.fireWidth,o=0,a=(Math.random()-.5)*20,c=-25-Math.random()*25,u=1.2+Math.random()*.8,d=3+Math.random()*5,f=vl[0],p={graphics:t,x:s,y:o,vx:a,vy:c,life:u,maxLife:u,size:d,color:f};this.drawParticle(p),this.addChild(t),this.particles.push(p)}drawParticle(t){const{graphics:s,size:o,life:a,maxLife:c}=t,u=a/c;s.clear();const d=o*u,f=Math.min(vl.length-1,Math.floor((1-u)*vl.length)),p=vl[f];s.circle(0,0,d),s.fill({color:p,alpha:u*.8}),u>.5&&(s.circle(0,0,d*.5),s.fill({color:16777130,alpha:(u-.5)*.6}))}update(t){this.glowPhase+=t*1.5;const s=.85+Math.sin(this.glowPhase)*.15+Math.sin(this.glowPhase*2.3)*.08;for(this.drawGlow(s),this.emitTimer+=t;this.emitTimer>=this.emitRate;)this.emitTimer-=this.emitRate,this.createParticle(),Math.random()<.3&&this.createParticle();for(let o=this.particles.length-1;o>=0;o--){const a=this.particles[o];if(a.life-=t,a.life<=0){this.removeChild(a.graphics),a.graphics.destroy(),this.particles.splice(o,1);continue}const c=Math.sin(a.life*6+a.x)*6;a.x+=(a.vx+c)*t,a.y+=a.vy*t,a.vy*=.99,a.graphics.position.set(a.x,a.y),this.drawParticle(a)}}destroy(){for(const t of this.particles)t.graphics.destroy();this.particles=[],this.glowGraphics.destroy(),super.destroy()}}class Z2{constructor(e,t,s=200,o=!1){de(this,"pool",[]);de(this,"active",new Set);de(this,"container");de(this,"textures");de(this,"maxSize");de(this,"useGraphics");this.container=e,this.textures=t,this.maxSize=s,this.useGraphics=o,this.preallocate(Math.min(50,s))}preallocate(e){for(let t=0;t<e;t++){const s=this.createParticle();s.sprite.visible=!1,this.pool.push(s)}}createParticle(){let e;if(this.useGraphics||this.textures.length===0){const t=new cn;t.circle(0,0,4),t.fill({color:16777215,alpha:1}),e=t}else{const t=this.textures[Math.floor(Math.random()*this.textures.length)];e=new sr(t),e.anchor.set(.5)}return e.visible=!1,this.container.addChild(e),{sprite:e,velocity:{x:0,y:0},life:0,maxLife:1,fadeOut:!0,rotationSpeed:0,gravity:0,initialAlpha:1}}acquire(e){if(this.active.size>=this.maxSize)return null;let t;return this.pool.length>0?t=this.pool.pop():t=this.createParticle(),t.velocity={...e.velocity},t.life=e.life,t.maxLife=e.life,t.fadeOut=e.fadeOut??!0,t.rotationSpeed=e.rotationSpeed??0,t.gravity=e.gravity??0,t.initialAlpha=e.alpha??1,t.sprite.visible=!0,t.sprite.alpha=t.initialAlpha,t.sprite.scale.set(e.scale??1),e.tint!==void 0&&(t.sprite.tint=e.tint),this.textures.length>0&&!this.useGraphics&&t.sprite instanceof sr&&(t.sprite.texture=this.textures[Math.floor(Math.random()*this.textures.length)]),this.active.add(t),t}release(e){this.active.has(e)&&(e.sprite.visible=!1,e.sprite.position.set(0,0),e.sprite.rotation=0,e.sprite.alpha=1,this.active.delete(e),this.pool.push(e))}update(e){const t=[];for(const s of this.active){if(s.life-=e,s.life<=0){t.push(s);continue}if(s.velocity.y+=s.gravity*e,s.sprite.x+=s.velocity.x*e,s.sprite.y+=s.velocity.y*e,s.sprite.rotation+=s.rotationSpeed*e,s.fadeOut){const o=s.life/s.maxLife;s.sprite.alpha=o*s.initialAlpha}}for(const s of t)this.release(s)}clear(){for(const e of this.active)e.sprite.visible=!1,this.pool.push(e);this.active.clear()}getActiveCount(){return this.active.size}destroy(){this.clear();for(const e of this.pool)e.sprite.destroy();this.pool=[]}}const J2={hay:[14329120,16032864,13808780],leaves:[2263842,3329330,9498256,16747520,16753920],stars:[16766720,16776960,16775885],dust:[13808780,12888428,9139029],sparkle:[16777215,16766720,8900331],confetti:[15680580,16347926,15381256,2278750,3900150,11032055,15485081]};class eC extends Et{constructor(){super();de(this,"pools",new Map);de(this,"pendingTimeouts",new Set);this.label="particles",this.initPools()}initPools(){const t=["hay","leaves","stars","dust","sparkle","confetti"];for(const s of t){const o=s==="confetti"?100:50,a=new Z2(this,[],o,!0);this.pools.set(s,a)}}getPool(t){return this.pools.get(t)}emitParticles(t){const s=this.getPool(t.type);if(!s)return;const o=t.spread??30,a=t.lifetime??1.2,c=t.speed??80,u=J2[t.type];for(let d=0;d<t.count;d++){const f=Math.random()*Math.PI*2,p=c*(.5+Math.random()*.5),g={velocity:{x:Math.cos(f)*p*.3,y:-p*(.8+Math.random()*.4)},life:a*(.7+Math.random()*.6),fadeOut:!0,rotationSpeed:(Math.random()-.5)*4,gravity:t.type==="dust"?20:t.type==="hay"?60:40,scale:.5+Math.random()*.5,tint:u[Math.floor(Math.random()*u.length)]},x=s.acquire(g);if(x){const v=(Math.random()-.5)*o,_=(Math.random()-.5)*o*.5;x.sprite.position.set(t.position.x+v,t.position.y+_)}}}emitCargoDelivery(t){this.emitParticles({type:"sparkle",position:t,count:8,spread:25,lifetime:.8,speed:60}),this.emitParticles({type:"hay",position:t,count:5,spread:20,lifetime:1,speed:50}),this.emitParticles({type:"dust",position:{x:t.x,y:t.y+10},count:4,spread:30,lifetime:.6,speed:30})}emitBuildingActivity(t,s){let o="sparkle";switch(s){case"garden":o="leaves";break;case"compost":o="dust";break;case"farmhouse":case"office":o="sparkle";break;default:o="stars"}this.emitParticles({type:o,position:t,count:6,spread:20,lifetime:1,speed:50})}emitPickup(t){this.emitParticles({type:"sparkle",position:t,count:5,spread:15,lifetime:.6,speed:40})}emitCelebration(t){this.emitParticles({type:"confetti",position:t,count:30,spread:60,lifetime:2.5,speed:150}),this.emitParticles({type:"sparkle",position:t,count:20,spread:40,lifetime:1.5,speed:80}),this.emitParticles({type:"stars",position:t,count:15,spread:30,lifetime:2,speed:100});const s=setTimeout(()=>{this.pendingTimeouts.delete(s),this.emitParticles({type:"confetti",position:t,count:20,spread:50,lifetime:2,speed:120})},200);this.pendingTimeouts.add(s)}update(t){for(const s of this.pools.values())s.update(t)}clear(){for(const t of this.pools.values())t.clear()}destroy(){for(const t of this.pendingTimeouts)clearTimeout(t);this.pendingTimeouts.clear();for(const t of this.pools.values())t.destroy();this.pools.clear(),super.destroy()}getActiveParticleCount(){let t=0;for(const s of this.pools.values())t+=s.getActiveCount();return t}}/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sx=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var nC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=ue.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:o="",children:a,iconNode:c,...u},d)=>ue.createElement("svg",{ref:d,...nC,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:sx("lucide",o),...u},[...c.map(([f,p])=>ue.createElement(f,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=(n,e)=>{const t=ue.forwardRef(({className:s,...o},a)=>ue.createElement(rC,{ref:a,iconNode:e,className:sx(`lucide-${tC(n)}`,s),...o}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=wt("Accessibility",[["circle",{cx:"16",cy:"4",r:"1",key:"1grugj"}],["path",{d:"m18 19 1-7-6 1",key:"r0i19z"}],["path",{d:"m5 8 3-3 5.5 3-2.36 3.5",key:"9ptxx2"}],["path",{d:"M4.24 14.5a5 5 0 0 0 6.88 6",key:"10kmtu"}],["path",{d:"M13.76 17.5a5 5 0 0 0-6.88-6",key:"2qq6rc"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=wt("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=wt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=wt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=wt("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=wt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=wt("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=wt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=wt("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=wt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=wt("LeafyGreen",[["path",{d:"M2 22c1.25-.987 2.27-1.975 3.9-2.2a5.56 5.56 0 0 1 3.8 1.5 4 4 0 0 0 6.187-2.353 3.5 3.5 0 0 0 3.69-5.116A3.5 3.5 0 0 0 20.95 8 3.5 3.5 0 1 0 16 3.05a3.5 3.5 0 0 0-5.831 1.373 3.5 3.5 0 0 0-5.116 3.69 4 4 0 0 0-2.348 6.155C3.499 15.42 4.409 16.712 4.2 18.1 3.926 19.743 3.014 20.732 2 22",key:"1134nt"}],["path",{d:"M2 22 17 7",key:"1q7jp2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=wt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=wt("Sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=wt("TestTubeDiagonal",[["path",{d:"M21 7 6.82 21.18a2.83 2.83 0 0 1-3.99-.01a2.83 2.83 0 0 1 0-4L17 3",key:"1ub6xw"}],["path",{d:"m16 2 6 6",key:"1gw87d"}],["path",{d:"M12 16H4",key:"1cjfip"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=wt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=wt("TreeDeciduous",[["path",{d:"M8 19a4 4 0 0 1-2.24-7.32A3.5 3.5 0 0 1 9 6.03V6a3 3 0 1 1 6 0v.04a3.5 3.5 0 0 1 3.24 5.65A4 4 0 0 1 16 19Z",key:"oadzkq"}],["path",{d:"M12 19v3",key:"npa21l"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=wt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=wt("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=wt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function dx(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=dx(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function gC(){for(var n,e,t=0,s="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=dx(n))&&(s&&(s+=" "),s+=e);return s}function Ms(...n){return gC(n)}const yC={security:{icon:cx,color:"#f38ba8",description:"Monitors OWASP Top 10 vulnerabilities, injection attacks, XSS, and security best practices in your codebase.",type:"audit"},tests:{icon:hx,color:"#89b4fa",description:"Tracks test coverage, test scaffolding, and ensures your code has proper test suites.",type:"audit"},performance:{icon:ax,color:"#fab387",description:"Identifies memory leaks, unnecessary re-renders, bundle size issues, and performance anti-patterns.",type:"audit"},farmhouse:{icon:pC,color:"#cba6f7",description:"The central hub of your project. Tracks overall project health metrics and completed issues.",type:"audit"},office:{icon:lx,color:"#06b6d4",description:"Home base for tool operations. Tracks the total number of tool calls made during this session.",type:"count"},accessibility:{icon:ix,color:"#94e2d5",description:"Audits WCAG 2.1 compliance, screen reader compatibility, keyboard navigation, and color contrast.",type:"audit"},garden:{icon:ux,color:"#a6e3a1",description:"Your idea garden where new features and improvements are planted before becoming plans.",type:"count"},compost:{icon:hC,color:"#78716c",description:"Ideas that didn't make the cut. Sometimes good ideas need to rest before their time comes.",type:"count"},codeQuality:{icon:ox,color:"#f5c2e7",description:"Detects DRY violations, code smells, complexity issues, naming problems, and technical debt.",type:"audit"}},xC={security:"security",tests:"tests",performance:"performance",farmhouse:"farmhouse",accessibility:"accessibility",codeQuality:"codeQuality"},sy={security:"_AUDIT/SECURITY.md",tests:"_AUDIT/TESTS.md",performance:"_AUDIT/PERFORMANCE.md",accessibility:"_AUDIT/ACCESSIBILITY.md",codeQuality:"_AUDIT/CODE_QUALITY.md",farmhouse:"_AUDIT/FARMHOUSE.md",garden:"_AUDIT/GARDEN.md",compost:"_AUDIT/COMPOST.md"};function vC({buildingId:n,onClose:e,onOpenAuditFile:t}){const[s,o]=ue.useState(!1),[a,c]=ue.useState(!1),{buildings:u,auditScores:d,gardenStats:f,compostStats:p}=on(),g=u.find(F=>F.id===n),x=g?yC[g.type]:null;ue.useEffect(()=>{if(n)c(!0),requestAnimationFrame(()=>{o(!0)});else{o(!1);const F=setTimeout(()=>c(!1),200);return()=>clearTimeout(F)}},[n]),ue.useEffect(()=>{const F=R=>{R.key==="Escape"&&n&&e()};return window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[n,e]);const v=ue.useCallback(()=>{!g||!sy[g.type]||!t||t(g.type)},[g,t]),_=ue.useMemo(()=>x?{color:{color:x.color},bgLight:{backgroundColor:`${x.color}20`},segmentBase:{backgroundColor:`${x.color}15`,boxShadow:"inset 0 1px 2px rgba(0,0,0,0.3)"},segmentFilled:{backgroundColor:x.color,boxShadow:"inset 0 1px 0 rgba(255,255,255,0.3), inset 0 -1px 1px rgba(0,0,0,0.2)"}}:null,[x?.color]);if(!a||!g||!x||!_)return null;const b=x.icon,w=xC[g.type],k=w?d[w]:null,A=sy[g.type],P=()=>{switch(g.type){case"garden":return f.activeIdeas;case"compost":return p.rejectedIdeas;case"office":return g.score;default:return 0}},C=()=>{switch(g.type){case"garden":return"Active Ideas";case"compost":return"Composted Ideas";case"office":return"Tool Calls";default:return"Count"}};return z.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/20",onClick:F=>{F.target===F.currentTarget&&e()},children:z.jsxs("div",{className:Ms("bg-bg-secondary/95 backdrop-blur-sm rounded-xl border border-border/50 shadow-2xl","w-[300px] max-h-[80%] flex flex-col","transition-all duration-200 ease-out",s?"opacity-100 scale-100":"opacity-0 scale-95"),onClick:F=>F.stopPropagation(),children:[z.jsxs("div",{className:"p-4 pb-3 border-b border-border/30 shrink-0 relative",children:[z.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1",children:[A&&z.jsx("button",{onClick:v,className:"p-1.5 rounded-md hover:bg-bg-tertiary transition-colors",title:"Open audit file",children:z.jsx(cC,{className:"w-4 h-4 text-text-tertiary"})}),z.jsx("button",{onClick:e,className:"p-1.5 rounded-md hover:bg-bg-tertiary transition-colors",children:z.jsx(mC,{className:"w-4 h-4 text-text-tertiary"})})]}),z.jsxs("div",{className:"flex items-center gap-3 pr-16",children:[z.jsx("div",{className:"p-2.5 rounded-lg shrink-0",style:_.bgLight,children:z.jsx(b,{className:"w-6 h-6",style:_.color})}),z.jsxs("div",{className:"min-w-0",children:[z.jsx("h3",{className:"text-sm font-semibold text-text-primary truncate",children:g.name}),z.jsx("span",{className:"text-xs font-mono",style:_.color,children:x.type==="audit"&&k?`${k.score%1===0?k.score:k.score.toFixed(1)}/10`:`${P()} ${C().toLowerCase()}`})]})]})]}),z.jsxs("div",{className:"p-4 pt-3 overflow-y-auto flex-1 min-h-0",children:[x.type==="audit"&&k&&z.jsxs("div",{className:"space-y-2",children:[z.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[z.jsx("span",{className:"text-text-tertiary uppercase tracking-wider",children:"Score"}),z.jsxs("span",{className:"font-mono font-bold",style:_.color,children:[k.score%1===0?k.score:k.score.toFixed(1),"/10"]})]}),z.jsx("div",{className:"flex gap-[3px] h-3",children:Array.from({length:10}).map((F,R)=>{const L=R<Math.floor(k.score),Q=R===Math.floor(k.score)&&k.score%1>0,W=k.score%1*100;return z.jsxs("div",{className:"flex-1 rounded-[4px] relative overflow-hidden",style:_.segmentBase,children:[L&&z.jsx("div",{className:"absolute inset-0 rounded-[4px]",style:_.segmentFilled}),Q&&z.jsx("div",{className:"absolute inset-y-0 left-0 rounded-[4px]",style:{..._.segmentFilled,width:`${W}%`}})]},R)})}),(k.lastUpdated||k.status)&&z.jsxs("div",{className:"mt-3 pt-2 border-t border-border/30 space-y-1",children:[k.lastUpdated&&z.jsxs("div",{className:"flex justify-between text-[10px]",children:[z.jsx("span",{className:"text-text-tertiary",children:"Last Updated"}),z.jsx("span",{className:"text-text-secondary",children:k.lastUpdated})]}),k.status&&z.jsxs("div",{className:"flex justify-between text-[10px]",children:[z.jsx("span",{className:"text-text-tertiary",children:"Status"}),z.jsx("span",{className:"text-text-secondary truncate ml-2",children:k.status})]})]}),k.openItems.length>0&&z.jsxs("div",{className:"mt-3 pt-2 border-t border-border/30",children:[z.jsxs("div",{className:"text-[10px] text-text-tertiary uppercase tracking-wider mb-1.5",children:["Open Items (",k.openItems.length,")"]}),z.jsx("div",{className:"space-y-1",children:k.openItems.map((F,R)=>z.jsx("div",{className:Ms("text-[10px] leading-snug py-1 px-2 rounded","bg-bg-tertiary/50 truncate",F.priority==="high"&&"text-red-400 border-l-2 border-red-400/50",F.priority==="medium"&&"text-yellow-400 border-l-2 border-yellow-400/50",!F.priority&&"text-text-secondary border-l-2 border-border/50"),title:F.text,children:F.text},R))})]}),z.jsx("p",{className:"mt-3 pt-2 border-t border-border/30 text-[10px] text-text-tertiary leading-relaxed",children:x.description})]}),x.type==="count"&&z.jsxs("div",{className:"space-y-2",children:[z.jsxs("div",{className:"flex items-center justify-between",children:[z.jsx("span",{className:"text-[10px] text-text-tertiary uppercase tracking-wider",children:C()}),z.jsx("span",{className:"text-2xl font-mono font-bold",style:_.color,children:P()})]}),g.type==="garden"&&f.ideas.length>0&&z.jsxs("div",{className:"mt-3 pt-2 border-t border-border/30",children:[z.jsx("div",{className:"text-[10px] text-text-tertiary uppercase tracking-wider mb-1.5",children:"Ideas"}),z.jsx("div",{className:"space-y-1",children:f.ideas.map((F,R)=>z.jsx("div",{className:"text-[10px] leading-snug py-1 px-2 rounded bg-bg-tertiary/50 text-text-secondary truncate",title:F,children:F},R))})]}),g.type==="compost"&&p.ideas.length>0&&z.jsxs("div",{className:"mt-3 pt-2 border-t border-border/30",children:[z.jsx("div",{className:"text-[10px] text-text-tertiary uppercase tracking-wider mb-1.5",children:"Rejected Ideas"}),z.jsx("div",{className:"space-y-1 max-h-[200px] overflow-y-auto",children:p.ideas.map((F,R)=>z.jsx("div",{className:"text-[10px] leading-snug py-1 px-2 rounded bg-bg-tertiary/50 text-text-secondary truncate",title:F,children:F},R))})]}),z.jsx("p",{className:"mt-3 pt-2 border-t border-border/30 text-[10px] text-text-tertiary leading-relaxed",children:x.description})]})]})]})})}const wo=1e3,iy={"day-summer":"tycoon/map.png","night-summer":"tycoon/map-night.png","day-winter":"tycoon/map-day-winter.png","night-winter":"tycoon/map-night-winter.png"};function _C(n=null){const e=ue.useRef(null),t=ue.useRef(null),s=ue.useRef(!1),o=ue.useRef(!1),a=ue.useRef(!0),c=ue.useRef(new Map),u=ue.useRef(new Map),d=ue.useRef(null),f=ue.useRef(null),p=ue.useRef(null),g=ue.useRef(null),x=ue.useRef(new Map),[v,_]=ue.useState(1),[b,w]=ue.useState(n),[k,A]=ue.useState(null),{buildings:P,vehicles:C,showDebug:F,hideTooltips:R,isPaused:L,navGraph:Q,setNavGraph:W,updateVehiclePosition:B,removeVehicle:$,addActivity:re,gardenStats:le,simulatedFlowerCount:ce,celebrationQueue:Se,clearCelebrationQueue:q}=on();return{containerRef:e,appRef:t,initializedRef:s,appReadyRef:o,mountedRef:a,buildingSpritesRef:c,vehicleSpritesRef:u,debugGraphicsRef:d,gardenFlowersRef:f,particleEmitterRef:p,fireEffectRef:g,mapSpritesRef:x,scale:v,setScale:_,selectedBuilding:b,setSelectedBuilding:w,flowerTooltip:k,setFlowerTooltip:A,buildings:P,vehicles:C,showDebug:F,hideTooltips:R,isPaused:L,navGraph:Q,setNavGraph:W,updateVehiclePosition:B,removeVehicle:$,addActivity:re,gardenStats:le,simulatedFlowerCount:ce,celebrationQueue:Se,clearCelebrationQueue:q}}function wC(n,e,t,s){const o=ue.useCallback(async()=>{if(!vn.isInitialized()){const c=await vn.initialize("tycoon/map-mask.png",16);s(c)}},[s]),a=ue.useCallback(c=>{if(c.clear(),!n)return;const u=vn.getGrid();if(u){for(let d=0;d<u.rows;d++)for(let f=0;f<u.cols;f++)if(u.isWalkable(f,d)){const p=f*u.cellSize,g=d*u.cellSize;c.rect(p,g,u.cellSize,u.cellSize),c.fill({color:16776960,alpha:.3})}}if(e){for(const d of e.nodes.values())for(const f of d.neighbors){const p=e.nodes.get(f);p&&(c.moveTo(d.x,d.y),c.lineTo(p.x,p.y),c.stroke({color:65280,width:3,alpha:.7}))}for(const d of e.nodes.values())c.circle(d.x,d.y,5),c.fill(65280);for(const d of t){const f=d.position;c.circle(f.dockX,f.dockY,8),c.fill(16711935),c.stroke({color:16777215,width:2})}}},[n,e,t]);return{initializeNavigation:o,drawDebugOverlay:a}}const SC=n=>n<.5?4*n*n*n:1-Math.pow(-2*n+2,3)/2;function bC(n,e){if(e.size===0)return;on.getState().tickMapCycle(n);const t=on.getState().mapCycle;if(t.isTransitioning){const s=SC(t.transitionProgress),o=e.get(t.transitionFrom),a=e.get(t.transitionTo);o&&(o.alpha=1-s),a&&(a.alpha=s);for(const[c,u]of e)c!==t.transitionFrom&&c!==t.transitionTo&&(u.alpha=0)}else{const s=`${t.timeOfDay}-${t.season}`;for(const[o,a]of e)a.alpha=o===s?1:0}}function kC(n,e,t,s,o){return a=>{if(!on.getState().isPaused)for(const u of n.current?.values()||[]){if(u.isMarkedFinished())continue;const d=u.update(a),f=u.getData();if(t(f.id,f.position),(f.task==="waiting_for_completion"||f.task==="waiting_at_office")&&f.shouldExit){u.setTask("exiting");const x=Ro("exit"),v=vn.findPathToExit(f.position,x.id);v&&v.length>0?u.setPath(v):(u.markFinished(),setTimeout(()=>s(f.id),500));continue}if(f.task==="traveling_to_farmhouse"&&f.path.length===0){const x=Ps.farmhouse;if(x){const v=vn.findPath(f.position,{x:x.dockX,y:x.dockY});v&&v.length>0&&u.setPath(v)}}const p=300*1e3;if(f.task==="waiting_for_completion"&&!f.issueId&&f.waitStartTime&&Date.now()-f.waitStartTime>p){u.setTask("exiting");const x=Ro("exit"),v=vn.findPathToExit(f.position,x.id);v&&v.length>0?u.setPath(v):(u.markFinished(),setTimeout(()=>s(f.id),500));continue}if(f.task==="bead_completing"&&f.issueId&&f.waitStartTime&&Date.now()-f.waitStartTime>1e3){on.getState().markBeadIssueCompleted(f.issueId),on.getState().removeBeadVehicle(f.issueId),u.setTask("exiting");const x=Ro("exit"),v=vn.findPathToExit(f.position,x.id);v&&v.length>0?u.setPath(v):(u.markFinished(),setTimeout(()=>s(f.id),500));continue}if(d){const x=u.getCurrentDestination(),v=u.getTask();if(v==="exiting"&&!x){u.markFinished(),setTimeout(()=>{s(f.id)},100);continue}if(v==="traveling_to_farmhouse"){u.setTask("bead_completing","farmhouse"),u.setPath([]),u.getData().waitStartTime=Date.now();continue}if(f.issueId&&x==="office"&&v!=="bead_completing"&&v!=="exiting"){u.setTask("bead_completing","office"),u.setPath([]),u.getData().waitStartTime=Date.now();continue}if(x&&e.current&&v==="traveling_to_delivery"){const w=Ps[x];w&&e.current.emitCargoDelivery({x:w.dockX,y:w.dockY})}o({type:"vehicle_arrived",message:`Vehicle arrived at ${x||"destination"}`,buildingId:x||f.destination||void 0});const _=u.advanceRoute(),b=u.getTask();if(_&&b==="waiting_for_completion")u.setCarrying(!1),u.setPath([]);else if(_)u.markFinished(),setTimeout(()=>{s(f.id)},1e3);else{const w=u.getCurrentDestination();if(w){b==="traveling_to_delivery"&&u.setCarrying(!0);const k=Ps[w];if(k){const A=f.position,P={x:k.dockX,y:k.dockY},C=vn.findPath(A,P);C&&C.length>0&&u.setPath(C)}}}}}}}function CC({containerWidth:n,containerHeight:e,autoScale:t=!0,isMiniPlayer:s=!1,onBuildingClick:o,initialSelectedBuilding:a=null,onOpenAuditFile:c}){const u=_C(a),{containerRef:d,appRef:f,initializedRef:p,appReadyRef:g,mountedRef:x,buildingSpritesRef:v,vehicleSpritesRef:_,debugGraphicsRef:b,gardenFlowersRef:w,particleEmitterRef:k,fireEffectRef:A,mapSpritesRef:P,scale:C,setScale:F,selectedBuilding:R,setSelectedBuilding:L,flowerTooltip:Q,setFlowerTooltip:W,buildings:B,vehicles:$,showDebug:re,hideTooltips:le,navGraph:ce,setNavGraph:Se,updateVehiclePosition:q,removeVehicle:Z,addActivity:J,gardenStats:X,simulatedFlowerCount:te,celebrationQueue:M,clearCelebrationQueue:O}=u,{initializeNavigation:j,drawDebugOverlay:K}=wC(re,ce,B,Se);ue.useEffect(()=>{if(!d.current)return;let H=!1,U=null;return x.current=!0,(async()=>{const V=new b0;U=V;const ae=n!==void 0&&e!==void 0?Math.min(n,e):600;if(await V.init({width:ae,height:ae,backgroundColor:1710618,antialias:!0,resolution:1,sharedTicker:!1,preference:"webgl"}),typeof window<"u"&&window.FARMWORK_STANDALONE_MODE&&(On.resolver.basePath="/farmwork/"),H||!V.stage){try{V.destroy(!0,{children:!0,texture:!1})}catch{}return}if(d.current?.querySelector("canvas")){try{V.destroy(!0,{children:!0,texture:!1})}catch{}return}const ye=ae/wo;V.stage.scale.set(ye,ye),f.current=V,g.current=!0,p.current=!0,d.current?.appendChild(V.canvas);try{const it=new Et;it.label="mapContainer",V.stage.addChild(it);const Ye=Object.keys(iy),Gt=on.getState().mapCycle,bn=`${Gt.timeOfDay}-${Gt.season}`;for(const kn of Ye){const hn=await On.load(iy[kn]);if(H||!V.stage)return;const xt=new sr(hn);xt.width=1e3,xt.height=1e3,xt.alpha=kn===bn?1:0,it.addChild(xt),P.current.set(kn,xt)}}catch(it){console.warn("Could not load map backgrounds:",it)}if(H||!V.stage)return;const _e=new Et;_e.label="buildings",V.stage.addChild(_e);const pe=new Q2;pe.label="gardenFlowers",V.stage.addChild(pe),w.current=pe;const{gardenStats:Me,simulatedFlowerCount:Ee}=on.getState(),De=Ee!==null?Ee:Me.activeIdeas;pe.setFlowerCount(De);const st=new Et;st.label="vehicles",V.stage.addChild(st);const Ve=new eC;Ve.label="particles",V.stage.addChild(Ve),k.current=Ve;const We=new K2;We.label="fireEffect",We.position.set(480,940),V.stage.addChild(We),A.current=We;const Fe=new cn;Fe.label="debug",V.stage.addChild(Fe),b.current=Fe;const Le=on.getState().hideTooltips;for(const it of B){const Ye=new W2(it);Ye.setDebugMode(on.getState().showDebug),Ye.setBadgeVisible(!Le),_e.addChild(Ye),v.current.set(it.id,Ye),s&&o?Ye.on("pointerdown",()=>{o(it.id)}):s||Ye.on("pointerdown",()=>{L(it.id)})}if(await j(),H)return;const He=kC({current:_.current},{current:k.current},q,Z,J);V.ticker.add(it=>{const Ye=it.deltaMS/1e3;bC(Ye,P.current),w.current&&w.current.update(Ye),k.current&&k.current.update(Ye),A.current&&A.current.update(Ye);for(const Gt of v.current.values())Gt.update(Ye);He(Ye)}),V.ticker.start();const ft=setInterval(()=>{H||!V.ticker||V.ticker.started||V.ticker.start()},1e3);V._tickerWatchdog=ft})(),()=>{if(H=!0,x.current=!1,U)try{const V=U._tickerWatchdog;V&&clearInterval(V),U.ticker?.stop(),U.stage&&U.stage.removeChildren(),U.canvas?.parentNode&&U.canvas.parentNode.removeChild(U.canvas),U.destroy(!1,{children:!1,texture:!1})}catch(V){const ae=String(V);["_cancelResize","textureBatch","renderer.canvas","this.renderer"].some(ye=>ae.includes(ye))||console.warn("Error destroying PixiJS app:",V)}if(d.current)for(;d.current.firstChild;)d.current.removeChild(d.current.firstChild);p.current=!1,g.current=!1,f.current=null,v.current.clear(),_.current.clear(),P.current.clear()}},[]),ue.useEffect(()=>{if(!t){F(1);return}const H=()=>{if(n!==void 0&&e!==void 0){const U=Math.min(n,e)/wo;F(Math.min(1,U))}else if(d.current){const U=d.current.parentElement?.getBoundingClientRect();if(U){const Y=Math.min(U.width,U.height)/wo;F(Math.min(1,Y))}}};if(H(),n===void 0||e===void 0){const U=new ResizeObserver(H);return d.current?.parentElement&&U.observe(d.current.parentElement),()=>U.disconnect()}},[n,e,t]),ue.useEffect(()=>{if(!f.current||!g.current)return;const H=f.current;if(!H.stage||!H.renderer)return;const U=Math.round(wo*C);H.renderer.resize(U,U),H.stage.scale.set(C,C)},[C]),ue.useEffect(()=>{if(!(M.length===0||!k.current)){for(const H of M){const U=B.find(Y=>Y.id===H);if(U){const Y={x:Ps[U.type].dockX,y:Ps[U.type].dockY-30};k.current.emitCelebration(Y)}}O()}},[M,B,O]),ue.useEffect(()=>{for(const H of B){const U=v.current.get(H.id);U&&U.updateData(H)}},[B]),ue.useEffect(()=>{if(!f.current?.stage)return;const H=f.current.stage.children.find(Y=>Y.label==="vehicles");if(!H)return;const U=new Set($.map(Y=>Y.id));for(const[Y,V]of _.current)U.has(Y)||(H.removeChild(V),_.current.delete(Y));for(const Y of $){let V=_.current.get(Y.id);if(V){if(V.updateData(Y),V.getData().path.length===0&&ce&&!V.isMarkedFinished()){const ae=V.getTask();if(ae!=="exiting"&&ae!=="finished"){const be=Y.route?.[0]||Y.destination,ye=B.find(_e=>_e.id===be);if(ye){const _e={x:ye.position.dockX,y:ye.position.dockY};let pe=null;if(Y.spawnPoint)pe=vn.findPathFromSpawn(Y.spawnPoint,_e);else{const Me=Y.position;pe=vn.findPath(Me,_e)}pe&&pe.length>0&&(V.setPath(pe),V.setTask("traveling_to_pickup",be||void 0))}}}}else{V=new X2(Y),V.setBadgeVisible(!le),H.addChild(V),_.current.set(Y.id,V);const ae=Y.route?.[0]||Y.destination;if(ae&&ce){const be=B.find(ye=>ye.id===ae);if(be){const ye={x:be.position.dockX,y:be.position.dockY};let _e=null;if(Y.spawnPoint)_e=vn.findPathFromSpawn(Y.spawnPoint,ye);else{const pe=Y.position;_e=vn.findPath(pe,ye)}_e&&_e.length>0&&(V.setPath(_e),V.setTask("traveling_to_pickup",ae))}}}}},[$,ce,B,s,le]),ue.useEffect(()=>{b.current&&K(b.current);for(const H of v.current.values())H.setDebugMode(re)},[re,K,ce]),ue.useEffect(()=>{const H=!le;for(const U of v.current.values())U.setBadgeVisible(H);for(const U of _.current.values())U.setBadgeVisible(H)},[le]),ue.useEffect(()=>{if(!w.current)return;const H=te!==null?te:X.activeIdeas;w.current.setFlowerCount(H),w.current.setIdeaNames(X.ideas),s||(w.current.setOnFlowerHover((U,Y,V)=>{W(U?{text:U,x:Y*C,y:V*C}:null)}),w.current.setOnGardenClick(()=>{L("garden")}))},[X.activeIdeas,X.ideas,te,C,s]);const se=Math.round(wo*C);return z.jsxs("div",{ref:d,className:"relative bg-bg-tertiary rounded-lg overflow-hidden",style:{width:se,height:se},children:[!s&&z.jsx(vC,{buildingId:R,onClose:()=>L(null),onOpenAuditFile:c}),!s&&!le&&Q&&z.jsx("div",{className:"absolute pointer-events-none z-40 px-2 py-1 bg-bg-secondary/95 backdrop-blur-sm rounded-md border border-border/50 shadow-lg text-xs text-text-primary max-w-[200px] truncate",style:{left:Q.x,top:Q.y-30,transform:"translateX(-50%)"},children:Q.text})]})}var AC=Cy();function TC({content:n,children:e,side:t="top",className:s,wrapperClassName:o}){const[a,c]=ue.useState(!1),[u,d]=ue.useState(!1),[f,p]=ue.useState({x:0,y:0}),g=ue.useRef(null),x=ue.useRef(null),v=ue.useCallback(()=>{if(!g.current||!x.current)return;const _=g.current.getBoundingClientRect(),b=x.current.getBoundingClientRect(),w=8,k=8;let A=t,P=0,C=0;switch(t==="top"&&_.top-b.height-k<w?A="bottom":t==="bottom"&&_.bottom+b.height+k>window.innerHeight-w?A="top":t==="left"&&_.left-b.width-k<w?A="right":t==="right"&&_.right+b.width+k>window.innerWidth-w&&(A="left"),A){case"top":P=_.left+_.width/2-b.width/2,C=_.top-b.height-k;break;case"bottom":P=_.left+_.width/2-b.width/2,C=_.bottom+k;break;case"left":P=_.left-b.width-k,C=_.top+_.height/2-b.height/2;break;case"right":P=_.right+k,C=_.top+_.height/2-b.height/2;break}P=Math.max(w,Math.min(P,window.innerWidth-b.width-w)),C=Math.max(w,Math.min(C,window.innerHeight-b.height-w)),p({x:P,y:C}),d(!0)},[t]);return ue.useEffect(()=>{a&&(d(!1),requestAnimationFrame(v))},[a,v]),z.jsxs("div",{ref:g,className:Ms("relative inline-flex",o),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onFocus:()=>c(!0),onBlur:()=>c(!1),children:[e,a&&AC.createPortal(z.jsx("div",{ref:x,style:{position:"fixed",left:f.x,top:f.y,opacity:u?1:0},className:Ms("tooltip-content z-[99999] px-2.5 py-1.5 text-sm font-medium rounded-md shadow-lg","bg-bg-tertiary border border-border text-text-primary","pointer-events-none max-w-xs",s),children:n}),document.body)]})}function gr(n){return n<1e3?n.toString():n<1e4?(n/1e3).toFixed(1).replace(/\.0$/,"")+"k":n<1e6?Math.round(n/1e3)+"k":(n/1e6).toFixed(1).replace(/\.0$/,"")+"M"}const PC="inset 0 1px 2px rgba(0,0,0,0.3)",MC="inset 0 1px 0 rgba(255,255,255,0.3), inset 0 -1px 1px rgba(0,0,0,0.2)";function EC({name:n,metadata:e,icon:t,color:s,isExpanded:o,onToggle:a,hideTooltip:c}){const{score:u,lastUpdated:d,status:f,openItems:p}=e,g=10,x=Math.floor(u),v=u%1*100,_=p.length>0,b=ue.useMemo(()=>({backgroundColor:`${s}15`,boxShadow:PC}),[s]),w=ue.useMemo(()=>({backgroundColor:s,boxShadow:MC}),[s]),k=ue.useMemo(()=>({color:s}),[s]),A=z.jsxs("div",{className:"text-[10px] space-y-0.5",children:[d&&z.jsxs("div",{children:["Updated: ",d]}),f&&z.jsxs("div",{children:["Status: ",f]}),p.length>0&&z.jsxs("div",{children:[p.length," open item",p.length!==1?"s":""]}),!d&&!f&&p.length===0&&z.jsx("div",{children:"No audit data"})]}),P=z.jsxs("button",{onClick:_?a:void 0,className:Ms("w-full text-left block",_&&"cursor-pointer"),children:[z.jsxs("div",{className:"flex items-center justify-between mb-1 w-full",children:[z.jsxs("div",{className:"flex items-center gap-1.5",children:[z.jsx(t,{className:"w-3.5 h-3.5",style:k}),z.jsx("span",{className:"text-[11px] text-text-secondary",children:n})]}),z.jsxs("div",{className:"flex items-center gap-1",children:[z.jsx("span",{className:"text-[11px] font-mono font-bold",style:k,children:u.toFixed(1)}),_&&z.jsx(iC,{className:Ms("w-3 h-3 text-text-tertiary transition-transform",o&&"rotate-180")})]})]}),z.jsx("div",{className:"flex gap-[3px] h-2 w-full",children:Array.from({length:g}).map((C,F)=>{const R=F<x,L=F===x&&v>0;return z.jsxs("div",{className:"flex-1 rounded-[3px] relative overflow-hidden",style:b,children:[R&&z.jsx("div",{className:"absolute inset-0 rounded-[3px]",style:w}),L&&z.jsx("div",{className:"absolute inset-y-0 left-0 rounded-[3px]",style:{...w,width:`${v}%`}})]},F)})})]});return z.jsxs("div",{className:"py-2 w-full border-b border-border/30 last:border-b-0",children:[c?P:z.jsx(TC,{content:A,side:"left",wrapperClassName:"w-full block",children:P}),o&&p.length>0&&z.jsx("div",{className:"mt-2 space-y-0.5 bg-bg-primary/50 rounded-md p-2 border border-border/30",children:p.map((C,F)=>z.jsx("div",{className:Ms("text-[10px] leading-snug py-0.5 px-1.5 rounded truncate","bg-bg-tertiary/50",C.priority==="high"&&"text-red-400 border-l-2 border-red-400/50",C.priority==="medium"&&"text-yellow-400 border-l-2 border-yellow-400/50",!C.priority&&"text-text-secondary border-l-2 border-border/50"),title:C.text,children:C.text},F))})]})}const IC=[{key:"security",name:"Security",icon:cx,color:"#f38ba8"},{key:"tests",name:"Tests",icon:hx,color:"#89b4fa"},{key:"performance",name:"Performance",icon:ax,color:"#fab387"},{key:"farmhouse",name:"Farmhouse",icon:lx,color:"#cba6f7"},{key:"accessibility",name:"Accessibility",icon:ix,color:"#94e2d5"},{key:"codeQuality",name:"Code Quality",icon:ox,color:"#f5c2e7"}],Nt={green:{color:"#a6e3a1"},teal:{color:"#94e2d5"},red:{color:"#f38ba8"},peach:{color:"#fab387"},yellow:{color:"#f9e2af"},overlay:{color:"#6c7086"}};function RC(){const{auditScores:n,beadsStats:e,gardenStats:t,compostStats:s,activityFeed:o,hideTooltips:a}=on(),[c,u]=ue.useState(null),d=f=>{u(c===f?null:f)};return z.jsxs("div",{className:"p-3 h-full flex flex-col gap-3",children:[z.jsxs("section",{className:"shrink-0",children:[z.jsx("h3",{className:"text-[10px] font-medium text-text-tertiary uppercase tracking-wider mb-1.5",children:"Ideas"}),z.jsx("div",{className:"bg-bg-tertiary rounded-lg p-2 border border-border/50",children:z.jsxs("div",{className:"grid grid-cols-4 gap-1",children:[z.jsxs("div",{className:"flex flex-col items-center gap-0.5 py-1",children:[z.jsx(ux,{className:"w-3.5 h-3.5",style:Nt.green}),z.jsx("span",{className:"text-xs font-mono font-bold",style:Nt.green,children:gr(t.planted)}),z.jsx("span",{className:"text-[7px] text-text-tertiary uppercase",children:"Planted"})]}),z.jsxs("div",{className:"flex flex-col items-center gap-0.5 py-1",children:[z.jsx(dC,{className:"w-3.5 h-3.5",style:Nt.teal}),z.jsx("span",{className:"text-xs font-mono font-bold",style:Nt.teal,children:gr(t.growing)}),z.jsx("span",{className:"text-[7px] text-text-tertiary uppercase",children:"Growing"})]}),z.jsxs("div",{className:"flex flex-col items-center gap-0.5 py-1",children:[z.jsx(sC,{className:"w-3.5 h-3.5",style:Nt.red}),z.jsx("span",{className:"text-xs font-mono font-bold",style:Nt.red,children:gr(t.picked)}),z.jsx("span",{className:"text-[7px] text-text-tertiary uppercase",children:"Picked"})]}),z.jsxs("div",{className:"flex flex-col items-center gap-0.5 py-1",children:[z.jsx(uC,{className:"w-3.5 h-3.5",style:Nt.peach}),z.jsx("span",{className:"text-xs font-mono font-bold",style:Nt.peach,children:gr(s.rejectedIdeas)}),z.jsx("span",{className:"text-[7px] text-text-tertiary uppercase",children:"Compost"})]})]})})]}),e&&z.jsxs("section",{className:"shrink-0",children:[z.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[z.jsx("h3",{className:"text-[10px] font-medium text-text-tertiary uppercase tracking-wider",children:"Issues"}),z.jsxs("span",{className:"text-[9px] font-mono text-text-tertiary",children:[gr(e.total)," total"]})]}),z.jsx("div",{className:"bg-bg-tertiary rounded-lg p-2 border border-border/50",children:z.jsxs("div",{className:"grid grid-cols-4 gap-1",children:[z.jsxs("div",{className:"flex flex-col items-center gap-0.5 py-1",children:[z.jsx(aC,{className:"w-3.5 h-3.5",style:Nt.green}),z.jsx("span",{className:"text-xs font-mono font-bold",style:Nt.green,children:gr(e.open)}),z.jsx("span",{className:"text-[7px] text-text-tertiary uppercase",children:"Open"})]}),z.jsxs("div",{className:"flex flex-col items-center gap-0.5 py-1",children:[z.jsx(lC,{className:"w-3.5 h-3.5",style:Nt.yellow}),z.jsx("span",{className:"text-xs font-mono font-bold",style:Nt.yellow,children:gr(e.in_progress)}),z.jsx("span",{className:"text-[7px] text-text-tertiary uppercase",children:"Progress"})]}),z.jsxs("div",{className:"flex flex-col items-center gap-0.5 py-1",children:[z.jsx(fC,{className:"w-3.5 h-3.5",style:Nt.red}),z.jsx("span",{className:"text-xs font-mono font-bold",style:Nt.red,children:gr(e.blocked)}),z.jsx("span",{className:"text-[7px] text-text-tertiary uppercase",children:"Blocked"})]}),z.jsxs("div",{className:"flex flex-col items-center gap-0.5 py-1",children:[z.jsx(oC,{className:"w-3.5 h-3.5",style:Nt.overlay}),z.jsx("span",{className:"text-xs font-mono font-bold",style:Nt.overlay,children:gr(e.closed)}),z.jsx("span",{className:"text-[7px] text-text-tertiary uppercase",children:"Closed"})]})]})})]}),z.jsxs("section",{className:"shrink-0",children:[z.jsx("h3",{className:"text-[10px] font-medium text-text-tertiary uppercase tracking-wider mb-1.5",children:"Audit"}),z.jsx("div",{className:"bg-bg-tertiary rounded-lg px-2.5 border border-border/50",children:IC.map(f=>z.jsx(EC,{auditKey:f.key,name:f.name,metadata:n[f.key],icon:f.icon,color:f.color,isExpanded:c===f.key,onToggle:()=>d(f.key),hideTooltip:a},f.key))})]}),z.jsxs("section",{className:"flex-1 min-h-0 flex flex-col",children:[z.jsx("h3",{className:"text-[10px] font-medium text-text-tertiary uppercase tracking-wider mb-1.5 shrink-0",children:"Log"}),z.jsx("div",{className:"bg-bg-tertiary rounded-lg border border-border/50 overflow-hidden flex-1 min-h-0",children:z.jsx("div",{className:"h-full overflow-y-auto",children:o.length===0?z.jsx("p",{className:"text-[10px] text-text-secondary italic p-2",children:"Awaiting events..."}):z.jsx("div",{className:"divide-y divide-border/50",children:o.map(f=>z.jsxs("div",{className:"flex items-center gap-3 px-2.5 py-1.5",children:[z.jsx("span",{className:"text-[9px] text-text-tertiary font-mono tabular-nums shrink-0",children:new Date(f.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}),z.jsx("span",{className:"text-[10px] text-text-secondary leading-snug truncate",children:f.message})]},f.id))})})})]})]})}class FC{constructor(){de(this,"config",null)}configure(e){this.config=e,window.__FARMWORK_PROJECT_PATH__=e.projectPath}getConfig(){return this.config}getBaseUrl(){if(!this.config)throw new Error("API not configured");return`http://${this.config.host}:${this.config.port}`}async fetch(e){if(!this.config)throw new Error("API not configured");const t=await fetch(`${this.getBaseUrl()}${e}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.config.token}`}});if(!t.ok)throw new Error(`API error: ${t.status}`);return t.json()}async fetchStats(){if(!this.config)throw new Error("API not configured");const e=encodeURIComponent(this.config.projectPath);return this.fetch(`/api/v1/farmwork/stats?project_path=${e}`)}async fetchActivity(){if(!this.config)throw new Error("API not configured");const e=encodeURIComponent(this.config.projectPath);return this.fetch(`/api/v1/farmwork/activity?project_path=${e}`)}async fetchBeadsIssues(){if(!this.config)throw new Error("API not configured");const e=encodeURIComponent(this.config.projectPath);return this.fetch(`/api/v1/projects/current/beads?project_path=${e}`)}async fetchBeadsStats(){if(!this.config)throw new Error("API not configured");const e=encodeURIComponent(this.config.projectPath);return this.fetch(`/api/v1/projects/current/beads/stats?project_path=${e}`)}connectWebSocket(e){if(!this.config)throw new Error("API not configured");const t=new WebSocket(`ws://${this.config.host}:${this.config.port}/api/v1/ws?token=${this.config.token}`);return t.onmessage=s=>{try{const o=JSON.parse(s.data);e(o)}catch{console.error("Failed to parse WebSocket message")}},t}}const _l=new FC;/*!
 * OverlayScrollbars
 * Version: 2.13.0
 *
 * Copyright (c) Rene Haas | KingSora.
 * https://github.com/KingSora
 *
 * Released under the MIT license.
 */const rn=(n,e)=>{const{o:t,i:s,u:o}=n;let a=t,c;const u=(p,g)=>{const x=a,v=p,_=g||(s?!s(x,v):x!==v);return(_||o)&&(a=v,c=x),[a,_,c]};return[e?p=>u(e(a,c),p):u,p=>[a,!!p,c]]},LC=typeof window<"u"&&typeof HTMLElement<"u"&&!!window.document,Qt=LC?window:{},fx=Math.max,NC=Math.min,Zh=Math.round,Nl=Math.abs,oy=Math.sign,px=Qt.cancelAnimationFrame,Pd=Qt.requestAnimationFrame,Md=Qt.setTimeout,mx=Qt.clearTimeout,Xl=n=>typeof Qt[n]<"u"?Qt[n]:void 0,BC=Xl("MutationObserver"),ay=Xl("IntersectionObserver"),ci=Xl("ResizeObserver"),Ao=Xl("ScrollTimeline"),Ed=n=>n===void 0,ql=n=>n===null,qr=n=>typeof n=="number",Yo=n=>typeof n=="string",Ql=n=>typeof n=="boolean",Wn=n=>typeof n=="function",Sn=n=>Array.isArray(n),Bl=n=>typeof n=="object"&&!Sn(n)&&!ql(n),Id=n=>{const e=!!n&&n.length,t=qr(e)&&e>-1&&e%1==0;return Sn(n)||!Wn(n)&&t?e>0&&Bl(n)?e-1 in n:!0:!1},Go=n=>!!n&&n.constructor===Object,Ol=n=>n instanceof HTMLElement,Kl=n=>n instanceof Element;function $e(n,e){if(Id(n))for(let t=0;t<n.length&&e(n[t],t,n)!==!1;t++);else n&&$e(Object.keys(n),(t=>e(n[t],t,n)));return n}const gx=(n,e)=>n.indexOf(e)>=0,Uo=(n,e)=>n.concat(e),ct=(n,e,t)=>(!Yo(e)&&Id(e)?Array.prototype.push.apply(n,e):n.push(e),n),Jr=n=>Array.from(n||[]),Rd=n=>Sn(n)?n:!Yo(n)&&Id(n)?Jr(n):[n],zl=n=>!!n&&!n.length,Jh=n=>Jr(new Set(n)),ln=(n,e,t)=>{$e(n,o=>o?o.apply(void 0,e||[]):!0),t||(n.length=0)},yx="paddingTop",xx="paddingRight",vx="paddingLeft",_x="paddingBottom",wx="marginLeft",Sx="marginRight",bx="marginBottom",Fd="overflowX",Ld="overflowY",Zl="width",Jl="height",_r="visible",Bn="hidden",Si="scroll",OC=n=>{const e=String(n||"");return e?e[0].toUpperCase()+e.slice(1):""},ec=(n,e,t,s)=>{if(n&&e){let o=!0;return $e(t,(a=>{const c=n[a],u=e[a];c!==u&&(o=!1)})),o}return!1},kx=(n,e)=>ec(n,e,["w","h"]),Al=(n,e)=>ec(n,e,["x","y"]),zC=(n,e)=>ec(n,e,["t","r","b","l"]),Te=(n,...e)=>n.bind(0,...e),ui=n=>{let e;const t=n?Md:Pd,s=n?mx:px;return[o=>{s(e),e=t((()=>o()),Wn(n)?n():n)},()=>s(e)]},ly=n=>{const e=Wn(n)?n():n;if(qr(e)){const t=e?Md:Pd,s=e?mx:px;return o=>{const a=t((()=>o()),e);return()=>{s(a)}}}return e&&e._},Cx=(n,e)=>{const{p:t,v:s,S:o,m:a}=e||{};let c,u,d,f;const p=function(b){u&&u(),c&&c(),f=u=c=d=void 0,n.apply(this,b)},g=_=>a&&d?a(d,_):_,x=()=>{u&&d&&p(g(d)||d)},v=function(){const b=Jr(arguments),w=ly(t);if(w){const k=typeof o=="function"?o():o,A=ly(s),C=g(b)||b,F=p.bind(0,C);u&&u(),k&&!f?(F(),f=!0,u=w((()=>f=void 0))):(u=w(F),A&&!c&&(c=A(x))),d=C}else p(b)};return v.O=x,v},Ax=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),jn=n=>n?Object.keys(n):[],ze=(n,e,t,s,o,a,c)=>{const u=[e,t,s,o,a,c];return(typeof n!="object"||ql(n))&&!Wn(n)&&(n={}),$e(u,(d=>{$e(d,((f,p)=>{const g=d[p];if(n===g)return!0;const x=Sn(g);if(g&&Go(g)){const v=n[p];let _=v;x&&!Sn(v)?_=[]:!x&&!Go(v)&&(_={}),n[p]=ze(_,g)}else n[p]=x?g.slice():g}))})),n},Tx=(n,e)=>$e(ze({},n),((t,s,o)=>{t===void 0?delete o[s]:t&&Go(t)&&(o[s]=Tx(t))})),Nd=n=>!jn(n).length,$o=()=>{},Px=(n,e,t)=>fx(n,NC(e,t)),Es=n=>Jh((Sn(n)?n:(n||"").split(" ")).filter((e=>e))),Bd=(n,e)=>n&&n.getAttribute(e),cy=(n,e)=>n&&n.hasAttribute(e),yr=(n,e,t)=>{$e(Es(e),(s=>{n&&n.setAttribute(s,String(t||""))}))},tr=(n,e)=>{$e(Es(e),(t=>n&&n.removeAttribute(t)))},tc=(n,e)=>{const t=Es(Bd(n,e)),s=Te(yr,n,e),o=(a,c)=>{const u=new Set(t);return $e(Es(a),(d=>{u[c](d)})),Jr(u).join(" ")};return{C:a=>s(o(a,"delete")),$:a=>s(o(a,"add")),H:a=>{const c=Es(a);return c.reduce(((u,d)=>u&&t.includes(d)),c.length>0)}}},Mx=(n,e,t)=>(tc(n,e).C(t),Te(Od,n,e,t)),Od=(n,e,t)=>(tc(n,e).$(t),Te(Mx,n,e,t)),Dl=(n,e,t,s)=>(s?Od:Mx)(n,e,t),zd=(n,e,t)=>tc(n,e).H(t),Ex=n=>tc(n,"class"),Ix=(n,e)=>{Ex(n).C(e)},Dd=(n,e)=>(Ex(n).$(e),Te(Ix,n,e)),Rx=(n,e)=>{const t=e?Kl(e)&&e:document;return t?Jr(t.querySelectorAll(n)):[]},DC=(n,e)=>{const t=e?Kl(e)&&e:document;return t&&t.querySelector(n)},ed=(n,e)=>Kl(n)&&n.matches(e),Fx=n=>ed(n,"body"),td=n=>n?Jr(n.childNodes):[],Wo=n=>n&&n.parentElement,hi=(n,e)=>Kl(n)&&n.closest(e),nd=n=>document.activeElement,jC=(n,e,t)=>{const s=hi(n,e),o=n&&DC(t,s),a=hi(o,e)===s;return s&&o?s===n||o===n||a&&hi(hi(n,t),e)!==s:!1},bi=n=>{$e(Rd(n),(e=>{const t=Wo(e);e&&t&&t.removeChild(e)}))},qt=(n,e)=>Te(bi,n&&e&&$e(Rd(e),(t=>{t&&n.appendChild(t)})));let Lx;const GC=()=>Lx,UC=n=>{Lx=n},mi=n=>{const e=document.createElement("div");return yr(e,"class",n),e},Nx=n=>{const e=mi(),t=GC(),s=n.trim();return e.innerHTML=t?t.createHTML(s):s,$e(td(e),(o=>bi(o)))},uy=(n,e)=>n.getPropertyValue(e)||n[e]||"",Bx=n=>{const e=n||0;return isFinite(e)?e:0},wl=n=>Bx(parseFloat(n||"")),rd=n=>Math.round(n*1e4)/1e4,Ox=n=>`${rd(Bx(n))}px`;function Vo(n,e){n&&e&&$e(e,((t,s)=>{try{const o=n.style,a=ql(t)||Ql(t)?"":qr(t)?Ox(t):t;s.indexOf("--")===0?o.setProperty(s,a):o[s]=a}catch{}}))}function ir(n,e,t){const s=Yo(e);let o=s?"":{};if(n){const a=Qt.getComputedStyle(n,t)||n.style;o=s?uy(a,e):Jr(e).reduce(((c,u)=>(c[u]=uy(a,u),c)),o)}return o}const hy=(n,e,t)=>{const s=e?`${e}-`:"",o=t?`-${t}`:"",a=`${s}top${o}`,c=`${s}right${o}`,u=`${s}bottom${o}`,d=`${s}left${o}`,f=ir(n,[a,c,u,d]);return{t:wl(f[a]),r:wl(f[c]),b:wl(f[u]),l:wl(f[d])}},Th=(n,e)=>`translate${Bl(n)?`(${n.x},${n.y})`:`${e?"X":"Y"}(${n})`}`,$C=n=>!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length),WC={w:0,h:0},nc=(n,e)=>e?{w:e[`${n}Width`],h:e[`${n}Height`]}:WC,VC=n=>nc("inner",n||Qt),gi=Te(nc,"offset"),zx=Te(nc,"client"),jl=Te(nc,"scroll"),jd=n=>{const e=parseFloat(ir(n,Zl))||0,t=parseFloat(ir(n,Jl))||0;return{w:e-Zh(e),h:t-Zh(t)}},Ph=n=>n.getBoundingClientRect(),HC=n=>!!n&&$C(n),sd=n=>!!(n&&(n[Jl]||n[Zl])),Dx=(n,e)=>{const t=sd(n);return!sd(e)&&t},dy=(n,e,t,s)=>{$e(Es(e),(o=>{n&&n.removeEventListener(o,t,s)}))},Ze=(n,e,t,s)=>{var o;const a=(o=s&&s.I)!=null?o:!0,c=s&&s.A||!1,u=s&&s.T||!1,d={passive:a,capture:c};return Te(ln,Es(e).map((f=>{const p=u?g=>{dy(n,f,p,c),t&&t(g)}:t;return n&&n.addEventListener(f,p,d),Te(dy,n,f,p,c)})))},jx=n=>n.stopPropagation(),id=n=>n.preventDefault(),Gx=n=>jx(n)||id(n),rr=(n,e)=>{const{x:t,y:s}=qr(e)?{x:e,y:e}:e||{};qr(t)&&(n.scrollLeft=t),qr(s)&&(n.scrollTop=s)},sn=n=>({x:n.scrollLeft,y:n.scrollTop}),Ux=()=>({D:{x:0,y:0},M:{x:0,y:0}}),YC=(n,e)=>{const{D:t,M:s}=n,{w:o,h:a}=e,c=(g,x,v)=>{let _=oy(g)*v,b=oy(x)*v;if(_===b){const w=Nl(g),k=Nl(x);b=w>k?0:b,_=w<k?0:_}return _=_===b?0:_,[_+0,b+0]},[u,d]=c(t.x,s.x,o),[f,p]=c(t.y,s.y,a);return{D:{x:u,y:f},M:{x:d,y:p}}},Mh=({D:n,M:e})=>{const t=(s,o)=>s===0&&s<=o;return{x:t(n.x,e.x),y:t(n.y,e.y)}},fy=({D:n,M:e},t)=>{const s=(o,a,c)=>Px(0,1,(o-c)/(o-a)||0);return{x:s(n.x,e.x,t.x),y:s(n.y,e.y,t.y)}},od=n=>{n&&n.focus&&n.focus({preventScroll:!0,focusVisible:!1})},py=(n,e)=>{$e(Rd(e),n)},ad=n=>{const e=new Map,t=(a,c)=>{if(a){const u=e.get(a);py((d=>{u&&u[d?"delete":"clear"](d)}),c)}else e.forEach((u=>{u.clear()})),e.clear()},s=(a,c)=>{if(Yo(a)){const f=e.get(a)||new Set;return e.set(a,f),py((p=>{Wn(p)&&f.add(p)}),c),Te(t,a,c)}Ql(c)&&c&&t();const u=jn(a),d=[];return $e(u,(f=>{const p=a[f];p&&ct(d,s(f,p))})),Te(ln,d)},o=(a,c)=>{$e(Jr(e.get(a)),(u=>{c&&!zl(c)?u.apply(0,c):u()}))};return s(n||{}),[s,t,o]},$x={},Wx={},XC=n=>{$e(n,(e=>$e(e,((t,s)=>{$x[s]=e[s]}))))},Vx=(n,e,t)=>jn(n).map((s=>{const{static:o,instance:a}=n[s],[c,u,d]=t||[],f=t?a:o;if(f){const p=t?f(c,u,e):f(e);return(d||Wx)[s]=p}})),Pi=n=>Wx[n],qC="__osOptionsValidationPlugin",Mi="data-overlayscrollbars",Tl="os-environment",Sl=`${Tl}-scrollbar-hidden`,Eh=`${Mi}-initialize`,Pl="noClipping",my=`${Mi}-body`,Qr=Mi,QC="host",xr=`${Mi}-viewport`,KC=Fd,ZC=Ld,JC="arrange",Hx="measuring",eA="scrolling",Yx="scrollbarHidden",tA="noContent",ld=`${Mi}-padding`,gy=`${Mi}-content`,Gd="os-size-observer",nA=`${Gd}-appear`,rA=`${Gd}-listener`,sA="os-trinsic-observer",iA="os-theme-none",un="os-scrollbar",oA=`${un}-rtl`,aA=`${un}-horizontal`,lA=`${un}-vertical`,Xx=`${un}-track`,Ud=`${un}-handle`,cA=`${un}-visible`,uA=`${un}-cornerless`,yy=`${un}-interaction`,xy=`${un}-unusable`,cd=`${un}-auto-hide`,vy=`${cd}-hidden`,_y=`${un}-wheel`,hA=`${Xx}-interactive`,dA=`${Ud}-interactive`,fA="__osSizeObserverPlugin",pA=(n,e)=>{const{k:t}=e,[s,o]=n("showNativeOverlaidScrollbars");return[s&&t.x&&t.y,o]},di=n=>n.indexOf(_r)===0,mA=n=>n.replace(`${_r}-`,""),ud=(n,e)=>{if(n==="auto")return e?Si:Bn;const t=n||Bn;return[Bn,Si,_r].includes(t)?t:Bn},gA=(n,e)=>{const{overflowX:t,overflowY:s}=ir(n,[Fd,Ld]);return{x:ud(t,e.x),y:ud(s,e.y)}},$d="__osScrollbarsHidingPlugin",yA="__osClickScrollPlugin",wy=n=>JSON.stringify(n,((e,t)=>{if(Wn(t))throw 0;return t})),Sy=(n,e)=>n?`${e}`.split(".").reduce(((t,s)=>t&&Ax(t,s)?t[s]:void 0),n):void 0,xA=[0,33],qx=[33,99],Qx=[222,666,!0],vA={paddingAbsolute:!1,showNativeOverlaidScrollbars:!1,update:{elementEvents:[["img","load"]],debounce:{mutation:xA,resize:null,event:qx,env:Qx},attributes:null,ignoreMutation:null},overflow:{x:"scroll",y:"scroll"},scrollbars:{theme:"os-theme-dark",visibility:"auto",autoHide:"never",autoHideDelay:1300,autoHideSuspend:!1,dragScroll:!0,clickScroll:!1,pointers:["mouse","touch","pen"]}},Kx=(n,e)=>{const t={},s=Uo(jn(e),jn(n));return $e(s,(o=>{const a=n[o],c=e[o];if(Bl(a)&&Bl(c))ze(t[o]={},Kx(a,c)),Nd(t[o])&&delete t[o];else if(Ax(e,o)&&c!==a){let u=!0;if(Sn(a)||Sn(c))try{wy(a)===wy(c)&&(u=!1)}catch{}u&&(t[o]=c)}})),t},by=(n,e,t)=>s=>[Sy(n,s),t||Sy(e,s)!==void 0];let Zx;const _A=()=>Zx,wA=n=>{Zx=n};let Ih;const SA=()=>{const n=(C,F,R)=>{qt(document.body,C),qt(document.body,C);const L=zx(C),Q=gi(C),W=jd(F);return R&&bi(C),{x:Q.h-L.h+W.h,y:Q.w-L.w+W.w}},e=C=>{let F=!1;const R=Dd(C,Sl);try{F=ir(C,"scrollbar-width")==="none"||ir(C,"display","::-webkit-scrollbar")==="none"}catch{}return R(),F},t=`.${Tl}{scroll-behavior:auto!important;position:fixed;opacity:0;visibility:hidden;overflow:scroll;height:200px;width:200px;z-index:-1}.${Tl} div{width:200%;height:200%;margin:10px 0}.${Sl}{scrollbar-width:none!important}.${Sl}::-webkit-scrollbar,.${Sl}::-webkit-scrollbar-corner{appearance:none!important;display:none!important;width:0!important;height:0!important}`,o=Nx(`<div class="${Tl}"><div></div><style>${t}</style></div>`)[0],a=o.firstChild,c=o.lastChild,u=_A();u&&(c.nonce=u);const[d,,f]=ad(),[p,g]=rn({o:n(o,a),i:Al},Te(n,o,a,!0)),[x]=g(),v=e(o),_={x:x.x===0,y:x.y===0},b={elements:{host:null,padding:!v,viewport:C=>v&&Fx(C)&&C,content:!1},scrollbars:{slot:!0},cancel:{nativeScrollbarsOverlaid:!1,body:null}},w=ze({},vA),k=Te(ze,{},w),A=Te(ze,{},b),P={P:x,k:_,U:v,J:!!Ao,G:Te(d,"r"),K:A,Z:C=>ze(b,C)&&A(),tt:k,nt:C=>ze(w,C)&&k(),ot:ze({},b),st:ze({},w)};if(tr(o,"style"),bi(o),Ze(Qt,"resize",(()=>{f("r",[])})),Wn(Qt.matchMedia)&&!v&&(!_.x||!_.y)){const C=F=>{const R=Qt.matchMedia(`(resolution: ${Qt.devicePixelRatio}dppx)`);Ze(R,"change",(()=>{F(),C(F)}),{T:!0})};C((()=>{const[F,R]=p();ze(P.P,F),f("r",[R])}))}return P},or=()=>(Ih||(Ih=SA()),Ih),bA=(n,e,t)=>{let s=!1;const o=t?new WeakMap:!1,a=()=>{s=!0},c=u=>{if(o&&t){const d=t.map((f=>{const[p,g]=f||[];return[g&&p?(u||Rx)(p,n):[],g]}));$e(d,(f=>$e(f[0],(p=>{const g=f[1],x=o.get(p)||[];if(n.contains(p)&&g){const _=Ze(p,g,(b=>{s?(_(),o.delete(p)):e(b)}));o.set(p,ct(x,_))}else ln(x),o.delete(p)}))))}};return c(),[a,c]},ky=(n,e,t,s)=>{let o=!1;const{et:a,ct:c,rt:u,it:d,lt:f,ut:p}=s||{},[g,x]=bA(n,(()=>o&&t(!0)),u),v=a||[],_=c||[],b=Uo(v,_),w=(A,P)=>{if(!zl(P)){const C=f||$o,F=p||$o,R=[],L=[];let Q=!1,W=!1;if($e(P,(B=>{const{attributeName:$,target:re,type:le,oldValue:ce,addedNodes:Se,removedNodes:q}=B,Z=le==="attributes",J=le==="childList",X=n===re,te=Z&&$,M=te&&Bd(re,$||""),O=Yo(M)?M:null,j=te&&ce!==O,K=gx(_,$)&&j;if(e&&(J||!X)){const se=Z&&j,H=se&&d&&ed(re,d),Y=(H?!C(re,$,ce,O):!Z||se)&&!F(B,!!H,n,s);$e(Se,(V=>ct(R,V))),$e(q,(V=>ct(R,V))),W=W||Y}!e&&X&&j&&!C(re,$,ce,O)&&(ct(L,$),Q=Q||K)})),x((B=>Jh(R).reduce((($,re)=>(ct($,Rx(B,re)),ed(re,B)?ct($,re):$)),[]))),e)return!A&&W&&t(!1),[!1];if(!zl(L)||Q){const B=[Jh(L),Q];return A||t.apply(0,B),B}}},k=new BC(Te(w,!1));return[()=>(k.observe(n,{attributes:!0,attributeOldValue:!0,attributeFilter:b,subtree:e,childList:e,characterData:e}),o=!0,()=>{o&&(g(),k.disconnect(),o=!1)}),()=>{if(o)return w(!0,k.takeRecords())}]};let Ss=null;const Jx=(n,e,t)=>{const{ft:s}=t||{},o=Pi(fA),[a]=rn({o:!1,u:!0});return()=>{const c=[],d=Nx(`<div class="${Gd}"><div class="${rA}"></div></div>`)[0],f=d.firstChild,p=g=>{const x=Sn(g)&&!zl(g);let v=!1,_=!1;if(x){const b=g[0],[w,,k]=a(b.contentRect),A=sd(w);_=Dx(w,k),v=!_&&!A}else _=g===!0;v||e({_t:!0,ft:_})};if(ci){if(!Ql(Ss)){const _=new ci($o);_.observe(n,{get box(){Ss=!0}}),Ss=Ss||!1,_.disconnect()}const g=Cx(p,{p:0,v:0}),x=_=>g(_),v=new ci(x);if(v.observe(Ss?n:f),ct(c,[()=>{v.disconnect()},!Ss&&qt(n,d)]),Ss){const _=new ci(x);_.observe(n,{box:"border-box"}),ct(c,(()=>_.disconnect()))}}else if(o){const[g,x]=o(f,p,s);ct(c,Uo([Dd(d,nA),Ze(d,"animationstart",g),qt(n,d)],x))}else return $o;return Te(ln,c)}},kA=(n,e)=>{let t;const s=d=>d.h===0||d.isIntersecting||d.intersectionRatio>0,o=mi(sA),[a]=rn({o:!1}),c=(d,f)=>{if(d){const p=a(s(d)),[,g]=p;return g&&!f&&e(p)&&[p]}},u=(d,f)=>c(f.pop(),d);return[()=>{const d=[];if(ay)t=new ay(Te(u,!1),{root:n}),t.observe(o),ct(d,(()=>{t.disconnect()}));else{const f=()=>{const p=gi(o);c(p)};ct(d,Jx(o,f)()),f()}return Te(ln,ct(d,qt(n,o)))},()=>t&&u(!0,t.takeRecords())]},CA=(n,e,t,s)=>{let o,a,c,u,d,f,p,g;const x=`[${Qr}]`,v=`[${xr}]`,_=["id","class","style","open","wrap","cols","rows"],{dt:b,vt:w,L:k,gt:A,ht:P,V:C,bt:F,wt:R,yt:L,St:Q}=n,W=U=>ir(U,"direction")==="rtl",B=()=>{let U,Y,V;const ae=Cx(s,{p:()=>U,v:()=>Y,S:()=>V,m(ye,_e){const[pe]=ye,[Me]=_e;return[Uo(jn(pe),jn(Me)).reduce(((Ee,De)=>(Ee[De]=pe[De]||Me[De],Ee)),{})]}}),be=(ye,_e)=>{if(Sn(_e)){const[pe,Me,Ee]=_e;U=pe,Y=Me,V=Ee}else qr(_e)?(U=_e,Y=!1,V=!1):(U=!1,Y=!1,V=!1);ae(ye)};return be.O=ae.O,be},$={Ot:!1,B:W(b)},re=or(),le=Pi($d),[ce]=rn({i:kx,o:{w:0,h:0}},(()=>{const U=le&&le.R(n,e,$,re,t).Y,V=!(F&&C)&&zd(w,Qr,Pl),ae=!C&&R(JC),be=ae&&sn(A),ye=be&&Q(),_e=L(Hx,V),pe=ae&&U&&U(),Me=jl(k),Ee=jd(k);return pe&&pe(),rr(A,be),ye&&ye(),V&&_e(),{w:Me.w+Ee.w,h:Me.h+Ee.h}})),Se=B(),q=U=>{const Y=W(b);ze(U,{Ct:g!==Y}),ze($,{B:Y}),g=Y},Z=(U,Y)=>{const[V,ae]=U,be={$t:ae};return ze($,{Ot:V}),Y||s(be),be},J=({_t:U,ft:Y})=>{const V=Y?s:Se,ae={_t:U||Y,ft:Y};q(ae),V(ae,a)},X=(U,Y)=>{const[,V]=ce(),ae={xt:V};return q(ae),V&&!Y&&Se(ae,U?c:o),ae},te=(U,Y,V)=>{const ae={Ht:Y};return q(ae),Y&&!V&&Se(ae,o),ae},[M,O]=P?kA(w,Z):[],j=!C&&Jx(w,J,{ft:!0}),[K,se]=ky(w,!1,te,{ct:_,et:_}),H=C&&ci&&new ci((U=>{const Y=U[U.length-1].contentRect;J({_t:!0,ft:Dx(Y,p)}),p=Y}));return[()=>{H&&H.observe(w);const U=j&&j(),Y=M&&M(),V=K(),ae=re.G((be=>{const[,ye]=ce();Se({Et:be,xt:ye,_t:F},u)}));return()=>{H&&H.disconnect(),U&&U(),Y&&Y(),f&&f(),V(),ae()}},({zt:U,It:Y,At:V})=>{const ae={},[be]=U("update.ignoreMutation"),[ye,_e]=U("update.attributes"),[pe,Me]=U("update.elementEvents"),[Ee,De]=U("update.debounce"),st=Me||_e,Ve=Y||V,We=Fe=>Wn(be)&&be(Fe);if(st){d&&d(),f&&f();const[Fe,Le]=ky(P||k,!0,X,{et:Uo(_,ye||[]),rt:pe,it:x,ut:(He,ft)=>{const{target:it,attributeName:Ye}=He;return(!ft&&Ye&&!C?jC(it,x,v):!1)||!!hi(it,`.${un}`)||!!We(He)}});f=Fe(),d=Le}if(De&&(Se.O(),Sn(Ee)||qr(Ee)?(o=Ee,a=!1,c=qx,u=Qx):Go(Ee)?(o=Ee.mutation,a=Ee.resize,c=Ee.event,u=Ee.env):(o=!1,a=!1,c=!1,u=!1)),Ve){const Fe=se(),Le=O&&O(),He=d&&d();Fe&&ze(ae,te(Fe[0],Fe[1],Ve)),Le&&ze(ae,Z(Le[0],Ve)),He&&ze(ae,X(He[0],Ve))}return q(ae),ae},$]},ev=(n,e)=>Wn(e)?e.apply(0,n):e,AA=(n,e,t,s)=>{const o=Ed(s)?t:s;return ev(n,o)||e.apply(0,n)},tv=(n,e,t,s)=>{const o=Ed(s)?t:s,a=ev(n,o);return!!a&&(Ol(a)?a:e.apply(0,n))},TA=(n,e)=>{const{nativeScrollbarsOverlaid:t,body:s}=e||{},{k:o,U:a,K:c}=or(),{nativeScrollbarsOverlaid:u,body:d}=c().cancel,f=t??u,p=Ed(s)?d:s,g=(o.x||o.y)&&f,x=n&&(ql(p)?!a:p);return!!g||!!x},PA=(n,e,t,s)=>{const o="--os-viewport-percent",a="--os-scroll-percent",c="--os-scroll-direction",{K:u}=or(),{scrollbars:d}=u(),{slot:f}=d,{dt:p,vt:g,L:x,Tt:v,gt:_,bt:b,V:w}=e,{scrollbars:k}=v?{}:n,{slot:A}=k||{},P=[],C=[],F=[],R=tv([p,g,x],(()=>w&&b?p:g),f,A),L=M=>{if(Ao){let O=null,j=[];const K=new Ao({source:_,axis:M}),se=()=>{O&&O.cancel(),O=null};return{kt:U=>{const{Dt:Y}=t,V=Mh(Y)[M],ae=M==="x",be=[Th(0,ae),Th(`calc(-100% + 100cq${ae?"w":"h"})`,ae)],ye=V?be:be.reverse();return j[0]===ye[0]&&j[1]===ye[1]||(j=ye,se(),O=U.Mt.animate({clear:["left"],transform:ye},{timeline:K})),se}}}},Q={x:L("x"),y:L("y")},W=()=>{const{Rt:M,Vt:O}=t,j=(K,se)=>Px(0,1,K/(K+se)||0);return{x:j(O.x,M.x),y:j(O.y,M.y)}},B=(M,O,j)=>{const K=j?Dd:Ix;$e(M,(se=>{K(se.Lt,O)}))},$=(M,O)=>{$e(M,(j=>{const[K,se]=O(j);Vo(K,se)}))},re=(M,O,j)=>{const K=Ql(j),se=K?j:!0,H=K?!j:!0;se&&B(C,M,O),H&&B(F,M,O)},le=()=>{const M=W(),O=j=>K=>[K.Lt,{[o]:rd(j)+""}];$(C,O(M.x)),$(F,O(M.y))},ce=()=>{if(!Ao){const{Dt:M}=t,O=fy(M,sn(_)),j=K=>se=>[se.Lt,{[a]:rd(K)+""}];$(C,j(O.x)),$(F,j(O.y))}},Se=()=>{const{Dt:M}=t,O=Mh(M),j=K=>se=>[se.Lt,{[c]:K?"0":"1"}];$(C,j(O.x)),$(F,j(O.y)),Ao&&(C.forEach(Q.x.kt),F.forEach(Q.y.kt))},q=()=>{if(w&&!b){const{Rt:M,Dt:O}=t,j=Mh(O),K=fy(O,sn(_)),se=H=>{const{Lt:U}=H,Y=Wo(U)===x&&U,V=(ae,be,ye)=>{const _e=be*ae;return Ox(ye?_e:-_e)};return[Y,Y&&{transform:Th({x:V(K.x,M.x,j.x),y:V(K.y,M.y,j.y)})}]};$(C,se),$(F,se)}},Z=M=>{const O=M?"x":"y",K=mi(`${un} ${M?aA:lA}`),se=mi(Xx),H=mi(Ud),U={Lt:K,Ut:se,Mt:H},Y=Q[O];return ct(M?C:F,U),ct(P,[qt(K,se),qt(se,H),Te(bi,K),Y&&Y.kt(U),s(U,re,M)]),U},J=Te(Z,!0),X=Te(Z,!1),te=()=>(qt(R,C[0].Lt),qt(R,F[0].Lt),Te(ln,P));return J(),X(),[{Pt:le,Nt:ce,qt:Se,Bt:q,Ft:re,jt:{Xt:C,Yt:J,Wt:Te($,C)},Jt:{Xt:F,Yt:X,Wt:Te($,F)}},te]},MA=(n,e,t,s)=>(o,a,c)=>{const{vt:u,L:d,V:f,gt:p,Gt:g,St:x}=e,{Lt:v,Ut:_,Mt:b}=o,[w,k]=ui(333),[A,P]=ui(444),C=L=>{Wn(p.scrollBy)&&p.scrollBy({behavior:"smooth",left:L.x,top:L.y})},F=()=>{const L="pointerup pointercancel lostpointercapture",Q=`client${c?"X":"Y"}`,W=c?Zl:Jl,B=c?"left":"top",$=c?"w":"h",re=c?"x":"y",le=(Se,q)=>Z=>{const{Rt:J}=t,X=gi(_)[$]-gi(b)[$],M=q*Z/X*J[re];rr(p,{[re]:Se+M})},ce=[];return Ze(_,"pointerdown",(Se=>{const q=hi(Se.target,`.${Ud}`)===b,Z=q?b:_,J=n.scrollbars,X=J[q?"dragScroll":"clickScroll"],{button:te,isPrimary:M,pointerType:O}=Se,{pointers:j}=J;if(te===0&&M&&X&&(j||[]).includes(O)){ln(ce),P();const se=!q&&(Se.shiftKey||X==="instant"),H=Te(Ph,b),U=Te(Ph,_),Y=(Le,He)=>(Le||H())[B]-(He||U())[B],V=Zh(Ph(p)[W])/gi(p)[$]||1,ae=le(sn(p)[re],1/V),be=Se[Q],ye=H(),_e=U(),pe=ye[W],Me=Y(ye,_e)+pe/2,Ee=be-_e[B],De=q?0:Ee-Me,st=Le=>{ln(Fe),Z.releasePointerCapture(Le.pointerId)},Ve=q||se,We=x(),Fe=[Ze(g,L,st),Ze(g,"selectstart",(Le=>id(Le)),{I:!1}),Ze(_,L,st),Ve&&Ze(_,"pointermove",(Le=>ae(De+(Le[Q]-be)))),Ve&&(()=>{const Le=sn(p);We();const He=sn(p),ft={x:He.x-Le.x,y:He.y-Le.y};(Nl(ft.x)>3||Nl(ft.y)>3)&&(x(),rr(p,Le),C(ft),A(We))})];if(Z.setPointerCapture(Se.pointerId),se)ae(De);else if(!q){const Le=Pi(yA);if(Le){const He=Le(ae,De,pe,(ft=>{ft?We():ct(Fe,We)}));ct(Fe,He),ct(ce,Te(He,!0))}}}}))};let R=!0;return Te(ln,[Ze(b,"pointermove pointerleave",s),Ze(v,"pointerenter",(()=>{a(yy,!0)})),Ze(v,"pointerleave pointercancel",(()=>{a(yy,!1)})),!f&&Ze(v,"mousedown",(()=>{const L=nd();(cy(L,xr)||cy(L,Qr)||L===document.body)&&Md(Te(od,d),25)})),Ze(v,"wheel",(L=>{const{deltaX:Q,deltaY:W,deltaMode:B}=L;R&&B===0&&Wo(v)===u&&C({x:Q,y:W}),R=!1,a(_y,!0),w((()=>{R=!0,a(_y)})),id(L)}),{I:!1,A:!0}),Ze(v,"pointerdown",(()=>{const L=Ze(g,"click",(W=>{Q(),Gx(W)}),{T:!0,A:!0,I:!1}),Q=Ze(g,"pointerup pointercancel",(()=>{Q(),setTimeout(L,150)}),{A:!0,I:!0})}),{A:!0,I:!0}),F(),k,P])},EA=(n,e,t,s,o,a)=>{let c,u,d,f,p,g=$o,x=0;const v=["mouse","pen"],_=j=>v.includes(j.pointerType),[b,w]=ui(),[k,A]=ui(100),[P,C]=ui(100),[F,R]=ui((()=>x)),[L,Q]=PA(n,o,s,MA(e,o,s,(j=>_(j)&&J()))),{vt:W,Kt:B,bt:$}=o,{Ft:re,Pt:le,Nt:ce,qt:Se,Bt:q}=L,Z=(j,K)=>{if(R(),j)re(vy);else{const se=Te(re,vy,!0);x>0&&!K?F(se):se()}},J=()=>{(d?!c:!f)&&(Z(!0),k((()=>{Z(!1)})))},X=j=>{re(cd,j,!0),re(cd,j,!1)},te=j=>{_(j)&&(c=d,d&&Z(!0))},M=[R,A,C,w,()=>g(),Ze(W,"pointerover",te,{T:!0}),Ze(W,"pointerenter",te),Ze(W,"pointerleave",(j=>{_(j)&&(c=!1,d&&Z(!1))})),Ze(W,"pointermove",(j=>{_(j)&&u&&J()})),Ze(B,"scroll",(j=>{b((()=>{ce(),J()})),a(j),q()}))],O=Pi($d);return[()=>Te(ln,ct(M,Q())),({zt:j,At:K,Qt:se,Zt:H})=>{const{tn:U,nn:Y,sn:V,en:ae}=H||{},{Ct:be,ft:ye}=se||{},{B:_e}=t,{k:pe,U:Me}=or(),{cn:Ee,j:De}=s,[st,Ve]=j("showNativeOverlaidScrollbars"),[We,Fe]=j("scrollbars.theme"),[Le,He]=j("scrollbars.visibility"),[ft,it]=j("scrollbars.autoHide"),[Ye,Gt]=j("scrollbars.autoHideSuspend"),[bn]=j("scrollbars.autoHideDelay"),[kn,hn]=j("scrollbars.dragScroll"),[xt,es]=j("scrollbars.clickScroll"),[ts,Fs]=j("overflow"),Ei=ye&&!K,ns=De.x||De.y,Ot=U||Y||ae||be||K,rs=V||He||Fs,kr=st&&pe.x&&pe.y,Cr=!Me&&!O,Vn=kr||Cr,Cn=(Ar,Tr,ss)=>{const An=Ar.includes(Si)&&(Le===_r||Le==="auto"&&Tr===Si);return re(cA,An,ss),An};if(x=bn,Ei&&(Ye&&ns?(X(!1),g(),P((()=>{g=Ze(B,"scroll",Te(X,!0),{T:!0})}))):X(!0)),(Ve||Cr)&&re(iA,Vn),Fe&&(re(p),re(We,!0),p=We),Gt&&!Ye&&X(!0),it&&(u=ft==="move",d=ft==="leave",f=ft==="never",Z(f,!0)),hn&&re(dA,kn),es&&re(hA,!!xt),rs){const Ar=Cn(ts.x,Ee.x,!0),Tr=Cn(ts.y,Ee.y,!1);re(uA,!(Ar&&Tr))}Ot&&(ce(),le(),q(),ae&&Se(),re(xy,!De.x,!0),re(xy,!De.y,!1),re(oA,_e&&!$))},{},L]},IA=n=>{const e=or(),{K:t,U:s}=e,{elements:o}=t(),{padding:a,viewport:c,content:u}=o,d=Ol(n),f=d?{}:n,{elements:p}=f,{padding:g,viewport:x,content:v}=p||{},_=d?n:f.target,b=Fx(_),w=_.ownerDocument,k=w.documentElement,A=()=>w.defaultView||Qt,P=Te(AA,[_]),C=Te(tv,[_]),F=Te(mi,""),R=Te(P,F,c),L=Te(C,F,u),Q=pe=>{const Me=gi(pe),Ee=jl(pe),De=ir(pe,Fd),st=ir(pe,Ld);return Ee.w-Me.w>0&&!di(De)||Ee.h-Me.h>0&&!di(st)},W=R(x),B=W===_,$=B&&b,re=!B&&L(v),le=!B&&W===re,ce=$?k:W,Se=$?ce:_,q=!B&&C(F,a,g),Z=!le&&re,J=[Z,ce,q,Se].map((pe=>Ol(pe)&&!Wo(pe)&&pe)),X=pe=>pe&&gx(J,pe),te=!X(ce)&&Q(ce)?ce:_,M=$?k:ce,j={dt:_,vt:Se,L:ce,rn:q,ht:Z,gt:M,Kt:$?w:ce,ln:b?k:te,Gt:w,bt:b,Tt:d,V:B,an:A,wt:pe=>zd(ce,xr,pe),yt:(pe,Me)=>Dl(ce,xr,pe,Me),St:()=>Dl(M,xr,eA,!0)},{dt:K,vt:se,rn:H,L:U,ht:Y}=j,V=[()=>{tr(se,[Qr,Eh]),tr(K,Eh),b&&tr(k,[Eh,Qr])}];let ae=td([Y,U,H,se,K].find((pe=>pe&&!X(pe))));const be=$?K:Y||U,ye=Te(ln,V);return[j,()=>{const pe=A(),Me=nd(),Ee=Fe=>{qt(Wo(Fe),td(Fe)),bi(Fe)},De=Fe=>Ze(Fe,"focusin focusout focus blur",Gx,{A:!0,I:!1}),st="tabindex",Ve=Bd(U,st),We=De(Me);return yr(se,Qr,B?"":QC),yr(H,ld,""),yr(U,xr,""),yr(Y,gy,""),B||(yr(U,st,Ve||"-1"),b&&yr(k,my,"")),qt(be,ae),qt(se,H),qt(H||se,!B&&U),qt(U,Y),ct(V,[We,()=>{const Fe=nd(),Le=X(U),He=Le&&Fe===U?K:Fe,ft=De(He);tr(H,ld),tr(Y,gy),tr(U,xr),b&&tr(k,my),Ve?yr(U,st,Ve):tr(U,st),X(Y)&&Ee(Y),Le&&Ee(U),X(H)&&Ee(H),od(He),ft()}]),s&&!B&&(Od(U,xr,Yx),ct(V,Te(tr,U,xr))),od(!B&&b&&Me===K&&pe.top===pe?U:Me),We(),ae=0,ye},ye]},RA=({ht:n})=>({Qt:e,un:t,At:s})=>{const{$t:o}=e||{},{Ot:a}=t;n&&(o||s)&&Vo(n,{[Jl]:a&&"100%"})},FA=({vt:n,rn:e,L:t,V:s},o)=>{const[a,c]=rn({i:zC,o:hy()},Te(hy,n,"padding",""));return({zt:u,Qt:d,un:f,At:p})=>{let[g,x]=c(p);const{U:v}=or(),{_t:_,xt:b,Ct:w}=d||{},{B:k}=f,[A,P]=u("paddingAbsolute");(_||x||(p||b))&&([g,x]=a(p));const F=!s&&(P||w||x);if(F){const R=!A||!e&&!v,L=g.r+g.l,Q=g.t+g.b,W={[Sx]:R&&!k?-L:0,[bx]:R?-Q:0,[wx]:R&&k?-L:0,top:R?-g.t:0,right:R?k?-g.r:"auto":0,left:R?k?"auto":-g.l:0,[Zl]:R&&`calc(100% + ${L}px)`},B={[yx]:R?g.t:0,[xx]:R?g.r:0,[_x]:R?g.b:0,[vx]:R?g.l:0};Vo(e||t,W),Vo(t,B),ze(o,{rn:g,fn:!R,F:e?B:ze({},W,B)})}return{_n:F}}},LA=(n,e)=>{const t=or(),{vt:s,rn:o,L:a,V:c,Kt:u,gt:d,bt:f,yt:p,an:g}=n,{U:x}=t,v=f&&c,_=Te(fx,0),b={display:()=>!1,direction:j=>j!=="ltr",flexDirection:j=>j.endsWith("-reverse"),writingMode:j=>j!=="horizontal-tb"},w=jn(b),k={i:kx,o:{w:0,h:0}},A={i:Al,o:{}},P=j=>{p(Hx,!v&&j)},C=j=>{if(!w.some((ye=>{const _e=j[ye];return _e&&b[ye](_e)})))return{D:{x:0,y:0},M:{x:1,y:1}};P(!0);const se=sn(d),H=p(tA,!0),U=Ze(u,Si,(ye=>{const _e=sn(d);ye.isTrusted&&_e.x===se.x&&_e.y===se.y&&jx(ye)}),{A:!0,T:!0});rr(d,{x:0,y:0}),H();const Y=sn(d),V=jl(d);rr(d,{x:V.w,y:V.h});const ae=sn(d);rr(d,{x:ae.x-Y.x<1&&-V.w,y:ae.y-Y.y<1&&-V.h});const be=sn(d);return rr(d,se),Pd((()=>U())),{D:Y,M:be}},F=(j,K)=>{const se=Qt.devicePixelRatio%1!==0?1:0,H={w:_(j.w-K.w),h:_(j.h-K.h)};return{w:H.w>se?H.w:0,h:H.h>se?H.h:0}},R=(j,K)=>{const se=(H,U,Y,V)=>{const ae=H===_r?Bn:mA(H),be=di(H),ye=di(Y);return!U&&!V?Bn:be&&ye?_r:be?U&&V?ae:U?_r:Bn:U?ae:ye&&V?_r:Bn};return{x:se(K.x,j.x,K.y,j.y),y:se(K.y,j.y,K.x,j.x)}},L=j=>{const K=H=>[_r,Bn,Si].map((U=>O(ud(U),H))),se=K(!0).concat(K()).join(" ");p(se),p(jn(j).map((H=>O(j[H],H==="x"))).join(" "),!0)},[Q,W]=rn(k,Te(jd,a)),[B,$]=rn(k,Te(jl,a)),[re,le]=rn(k),[ce]=rn(A),[Se,q]=rn(k),[Z]=rn(A),[J]=rn({i:(j,K)=>ec(j,K,w),o:{}},(()=>HC(a)?ir(a,w):{})),[X,te]=rn({i:(j,K)=>Al(j.D,K.D)&&Al(j.M,K.M),o:Ux()}),M=Pi($d),O=(j,K)=>`${K?KC:ZC}${OC(j)}`;return({zt:j,Qt:K,un:se,At:H},{_n:U})=>{const{_t:Y,Ht:V,xt:ae,Ct:be,ft:ye,Et:_e}=K||{},pe=M&&M.R(n,e,se,t,j),{X:Me,Y:Ee,W:De}=pe||{},[st,Ve]=pA(j,t),[We,Fe]=j("overflow"),Le=di(We.x),He=di(We.y),ft=Y||U||ae||be||_e||Ve;let it=W(H),Ye=$(H),Gt=le(H),bn=q(H);if(Ve&&x&&p(Yx,!st),ft){zd(s,Qr,Pl)&&P(!0);const Ri=Ee&&Ee(),[Hn]=it=Q(H),[Pr]=Ye=B(H),Yn=zx(a),Ls=v&&VC(g()),is={w:_(Pr.w+Hn.w),h:_(Pr.h+Hn.h)},os={w:_((Ls?Ls.w:Yn.w+_(Yn.w-Pr.w))+Hn.w),h:_((Ls?Ls.h:Yn.h+_(Yn.h-Pr.h))+Hn.h)};Ri&&Ri(),bn=Se(os),Gt=re(F(is,os),H)}const[kn,hn]=bn,[xt,es]=Gt,[ts,Fs]=Ye,[Ei,ns]=it,[Ot,rs]=ce({x:xt.w>0,y:xt.h>0}),kr=Le&&He&&(Ot.x||Ot.y)||Le&&Ot.x&&!Ot.y||He&&Ot.y&&!Ot.x,Cr=U||be||_e||ns||Fs||hn||es||Fe||Ve||ft||V&&v,[Vn,Cn]=J(H),Ar=be||ye||Cn||rs||H,[Tr,ss]=Ar?X(C(Vn),H):te();let An=R(Ot,We);P(!1),Cr&&(L(An),An=gA(a,Ot),De&&Me&&(Me(An,ts,Ei),Vo(a,De(An))));const[Xo,Ii]=Z(An);return Dl(s,Qr,Pl,kr),Dl(o,ld,Pl,kr),ze(e,{cn:Xo,Vt:{x:kn.w,y:kn.h},Rt:{x:xt.w,y:xt.h},j:Ot,Dt:YC(Tr,xt)}),{sn:Ii,tn:hn,nn:es,en:ss||es}}},NA=n=>{const[e,t,s]=IA(n),o={rn:{t:0,r:0,b:0,l:0},fn:!1,F:{[Sx]:0,[bx]:0,[wx]:0,[yx]:0,[xx]:0,[_x]:0,[vx]:0},Vt:{x:0,y:0},Rt:{x:0,y:0},cn:{x:Bn,y:Bn},j:{x:!1,y:!1},Dt:Ux()},{dt:a,gt:c,V:u,St:d}=e,{U:f,k:p}=or(),g=!f&&(p.x||p.y),x=[RA(e),FA(e,o),LA(e,o)];return[t,v=>{const _={},w=g&&sn(c),k=w&&d();return $e(x,(A=>{ze(_,A(v,_)||{})})),rr(c,w),k&&k(),u||rr(a,0),_},o,e,s]},BA=(n,e,t,s,o)=>{let a=!1;const c=by(e,{}),[u,d,f,p,g]=NA(n),[x,v,_]=CA(p,f,c,(C=>{P({},C)})),[b,w,,k]=EA(n,e,_,f,p,o),A=C=>jn(C).some((F=>!!C[F])),P=(C,F)=>{if(t())return!1;const{dn:R,At:L,It:Q,pn:W}=C,B=R||{},$=!!L||!a,re={zt:by(e,B,$),dn:B,At:$};if(W)return w(re),!1;const le=F||v(ze({},re,{It:Q})),ce=d(ze({},re,{un:_,Qt:le}));w(ze({},re,{Qt:le,Zt:ce}));const Se=A(le),q=A(ce),Z=Se||q||!Nd(B)||$;return a=!0,Z&&s(C,{Qt:le,Zt:ce}),Z};return[()=>{const{ln:C,gt:F,St:R}=p,L=sn(C),Q=[x(),u(),b()],W=R();return rr(F,L),W(),Te(ln,Q)},P,()=>({vn:_,gn:f}),{hn:p,bn:k},g]},Wd=new WeakMap,OA=(n,e)=>{Wd.set(n,e)},zA=n=>{Wd.delete(n)},nv=n=>Wd.get(n),zn=(n,e,t)=>{const{tt:s}=or(),o=Ol(n),a=o?n:n.target,c=nv(a);if(e&&!c){let u=!1;const d=[],f={},p=B=>{const $=Tx(B),re=Pi(qC);return re?re($,!0):$},g=ze({},s(),p(e)),[x,v,_]=ad(),[b,w,k]=ad(t),A=(B,$)=>{k(B,$),_(B,$)},[P,C,F,R,L]=BA(n,g,(()=>u),(({dn:B,At:$},{Qt:re,Zt:le})=>{const{_t:ce,Ct:Se,$t:q,xt:Z,Ht:J,ft:X}=re,{tn:te,nn:M,sn:O,en:j}=le;A("updated",[W,{updateHints:{sizeChanged:!!ce,directionChanged:!!Se,heightIntrinsicChanged:!!q,overflowEdgeChanged:!!te,overflowAmountChanged:!!M,overflowStyleChanged:!!O,scrollCoordinatesChanged:!!j,contentMutation:!!Z,hostMutation:!!J,appear:!!X},changedOptions:B||{},force:!!$}])}),(B=>A("scroll",[W,B]))),Q=B=>{zA(a),ln(d),u=!0,A("destroyed",[W,B]),v(),w()},W={options(B,$){if(B){const re=$?s():{},le=Kx(g,ze(re,p(B)));Nd(le)||(ze(g,le),C({dn:le}))}return ze({},g)},on:b,off:(B,$)=>{B&&$&&w(B,$)},state(){const{vn:B,gn:$}=F(),{B:re}=B,{Vt:le,Rt:ce,cn:Se,j:q,rn:Z,fn:J,Dt:X}=$;return ze({},{overflowEdge:le,overflowAmount:ce,overflowStyle:Se,hasOverflow:q,scrollCoordinates:{start:X.D,end:X.M},padding:Z,paddingAbsolute:J,directionRTL:re,destroyed:u})},elements(){const{dt:B,vt:$,rn:re,L:le,ht:ce,gt:Se,Kt:q}=R.hn,{jt:Z,Jt:J}=R.bn,X=M=>{const{Mt:O,Ut:j,Lt:K}=M;return{scrollbar:K,track:j,handle:O}},te=M=>{const{Xt:O,Yt:j}=M,K=X(O[0]);return ze({},K,{clone:()=>{const se=X(j());return C({pn:!0}),se}})};return ze({},{target:B,host:$,padding:re||le,viewport:le,content:ce||le,scrollOffsetElement:Se,scrollEventElement:q,scrollbarHorizontal:te(Z),scrollbarVertical:te(J)})},update:B=>C({At:B,It:!0}),destroy:Te(Q,!1),plugin:B=>f[jn(B)[0]]};return ct(d,[L]),OA(a,W),Vx($x,zn,[W,x,f]),TA(R.hn.bt,!o&&n.cancel)?(Q(!0),W):(ct(d,P()),A("initialized",[W]),W.update(),W)}return c};zn.plugin=n=>{const e=Sn(n),t=e?n:[n],s=t.map((o=>Vx(o,zn)[0]));return XC(t),e?s:s[0]};zn.valid=n=>{const e=n&&n.elements,t=Wn(e)&&e();return Go(t)&&!!nv(t.target)};zn.env=()=>{const{P:n,k:e,U:t,J:s,ot:o,st:a,K:c,Z:u,tt:d,nt:f}=or();return ze({},{scrollbarsSize:n,scrollbarsOverlaid:e,scrollbarsHiding:t,scrollTimeline:s,staticDefaultInitialization:o,staticDefaultOptions:a,getDefaultInitialization:c,setDefaultInitialization:u,getDefaultOptions:d,setDefaultOptions:f})};zn.nonce=wA;zn.trustedTypePolicy=UC;const DA=()=>{if(typeof window>"u"){const f=()=>{};return[f,f]}let n,e;const t=window,s=typeof t.requestIdleCallback=="function",o=t.requestAnimationFrame,a=t.cancelAnimationFrame,c=s?t.requestIdleCallback:o,u=s?t.cancelIdleCallback:a,d=()=>{u(n),a(e)};return[(f,p)=>{d(),n=c(s?()=>{d(),e=o(f)}:f,typeof p=="object"?p:{timeout:2233})},d]},jA=n=>{const{options:e,events:t,defer:s}=n||{},[o,a]=ue.useMemo(DA,[]),c=ue.useRef(null),u=ue.useRef(s),d=ue.useRef(e),f=ue.useRef(t);return ue.useEffect(()=>{u.current=s},[s]),ue.useEffect(()=>{const{current:p}=c;d.current=e,zn.valid(p)&&p.options(e||{},!0)},[e]),ue.useEffect(()=>{const{current:p}=c;f.current=t,zn.valid(p)&&p.on(t||{},!0)},[t]),ue.useEffect(()=>()=>{var p;a(),(p=c.current)==null||p.destroy()},[]),ue.useMemo(()=>[p=>{const g=c.current;if(zn.valid(g))return;const x=u.current,v=d.current||{},_=f.current||{},b=()=>c.current=zn(p,v,_);x?o(b,x):b()},()=>c.current],[])},GA=(n,e)=>{const{element:t="div",options:s,events:o,defer:a,children:c,...u}=n,d=t,f=ue.useRef(null),p=ue.useRef(null),[g,x]=jA({options:s,events:o,defer:a});return ue.useEffect(()=>{const{current:v}=f,{current:_}=p;if(!v)return;const b=v;return g(t==="body"?{target:b,cancel:{body:null}}:{target:b,elements:{viewport:_,content:_}}),()=>{var w;return(w=x())==null?void 0:w.destroy()}},[g,t]),ue.useImperativeHandle(e,()=>({osInstance:x,getElement:()=>f.current}),[]),ai.createElement(d,{"data-overlayscrollbars-initialize":"",ref:f,...u},t==="body"?c:ai.createElement("div",{"data-overlayscrollbars-contents":"",ref:p},c))},UA=ue.forwardRef(GA);function $A(){const n=new URLSearchParams(window.location.search),e=n.get("host"),t=n.get("port"),s=n.get("token"),o=n.get("project_path");return!e||!t||!s||!o?null:{host:e,port:parseInt(t,10),token:s,projectPath:o}}function WA(){return z.jsx("div",{className:"h-screen w-screen bg-neutral-950 flex items-center justify-center",children:z.jsxs("div",{className:"text-center",children:[z.jsx("div",{className:"w-12 h-12 border-4 border-lime-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),z.jsx("p",{className:"text-neutral-400 text-sm",children:"Loading Farmwork Tycoon..."})]})})}function VA({message:n}){return z.jsx("div",{className:"h-screen w-screen bg-neutral-950 flex items-center justify-center p-6",children:z.jsxs("div",{className:"text-center max-w-md",children:[z.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:z.jsx("svg",{className:"w-8 h-8 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),z.jsx("h2",{className:"text-white text-lg font-semibold mb-2",children:"Connection Error"}),z.jsx("p",{className:"text-neutral-400 text-sm",children:n})]})})}function HA(){const[n,e]=ue.useState(!0),[t,s]=ue.useState(null),[o,a]=ue.useState({width:400,height:400}),[c,u]=ue.useState(!1),d=ue.useRef(null),f=on,p=ue.useCallback(_=>{const b=f.getState(),w={security:{score:_.audit_scores.security.score,openItems:_.audit_scores.security.open_items,lastUpdated:_.audit_scores.security.last_updated??null,status:_.audit_scores.security.status??null},tests:{score:_.audit_scores.tests.score,openItems:_.audit_scores.tests.open_items,lastUpdated:_.audit_scores.tests.last_updated??null,status:_.audit_scores.tests.status??null},performance:{score:_.audit_scores.performance.score,openItems:_.audit_scores.performance.open_items,lastUpdated:_.audit_scores.performance.last_updated??null,status:_.audit_scores.performance.status??null},accessibility:{score:_.audit_scores.accessibility.score,openItems:_.audit_scores.accessibility.open_items,lastUpdated:_.audit_scores.accessibility.last_updated??null,status:_.audit_scores.accessibility.status??null},codeQuality:{score:_.audit_scores.code_quality.score,openItems:_.audit_scores.code_quality.open_items,lastUpdated:_.audit_scores.code_quality.last_updated??null,status:_.audit_scores.code_quality.status??null},farmhouse:{score:_.audit_scores.farmhouse.score,openItems:_.audit_scores.farmhouse.open_items,lastUpdated:_.audit_scores.farmhouse.last_updated??null,status:_.audit_scores.farmhouse.status??null}},k=_.garden_stats?{activeIdeas:_.garden_stats.active_ideas,ideas:[],planted:_.garden_stats.planted,growing:_.garden_stats.growing,picked:_.garden_stats.picked}:void 0,A=_.compost_stats?{rejectedIdeas:_.compost_stats.rejected_ideas,ideas:[]}:void 0;f.setState({auditScores:w}),k&&f.setState({gardenStats:k}),A&&f.setState({compostStats:A}),_.beads_stats&&f.setState({beadsStats:_.beads_stats}),f.setState({buildings:b.buildings.map(P=>{let C=0;switch(P.type){case"security":C=_.audit_scores.security.score;break;case"tests":C=_.audit_scores.tests.score;break;case"performance":C=_.audit_scores.performance.score;break;case"accessibility":C=_.audit_scores.accessibility.score;break;case"codeQuality":C=_.audit_scores.code_quality.score;break;case"farmhouse":C=_.audit_scores.farmhouse.score;break;case"garden":C=_.garden_stats?.active_ideas??0;break;case"compost":C=_.compost_stats?.rejected_ideas??0;break;default:C=P.score}return{...P,score:C}})})},[f]);ue.useEffect(()=>{const _=$A();if(!_){s("Missing connection parameters. Please open from the mobile app."),e(!1);return}_l.configure(_),(async()=>{try{const k=await _l.fetchStats();p(k),f.setState({isInitialized:!0}),e(!1)}catch(k){console.error("Failed to fetch stats:",k),s("Failed to connect to desktop. Make sure Wynter Code is running."),e(!1)}})();const w=setInterval(async()=>{try{const k=await _l.fetchStats();p(k)}catch(k){console.error("Poll failed:",k)}},5e3);try{const k=_l.connectWebSocket(()=>{});return()=>{clearInterval(w),k.close()}}catch{return()=>clearInterval(w)}},[p,f]),ue.useEffect(()=>{const _=()=>{const b=window.innerWidth,w=window.innerHeight,A=b-(c?280:0),C=Math.min(A,w);a({width:C,height:C})};return _(),window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[c]),ue.useEffect(()=>{const _=()=>{document.visibilityState==="visible"?(f.getState().resume(),a(k=>({...k}))):f.getState().pause()},b=()=>{f.getState().resume()},w=()=>{};return document.addEventListener("visibilitychange",_),window.addEventListener("focus",b),window.addEventListener("blur",w),window.addEventListener("pageshow",b),f.getState().resume(),()=>{document.removeEventListener("visibilitychange",_),window.removeEventListener("focus",b),window.removeEventListener("blur",w),window.removeEventListener("pageshow",b)}},[f]);const g=ue.useCallback((_,b)=>{window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({type:_,data:b}))},[]),x=ue.useCallback(_=>{g("building_click",{buildingId:_}),u(!0)},[g]),v=ue.useCallback(_=>{const w={security:"_AUDIT/SECURITY.md",tests:"_AUDIT/TESTS.md",performance:"_AUDIT/PERFORMANCE.md",accessibility:"_AUDIT/ACCESSIBILITY.md",codeQuality:"_AUDIT/CODE_QUALITY.md",farmhouse:"_AUDIT/FARMHOUSE.md",garden:"_AUDIT/GARDEN.md",compost:"_AUDIT/COMPOST.md"}[_];w&&g("open_doc",{filePath:w})},[g]);return n?z.jsx(WA,{}):t?z.jsx(VA,{message:t}):z.jsxs("div",{ref:d,className:"h-screen w-screen bg-neutral-950 overflow-hidden flex",children:[z.jsxs("div",{className:"flex-1 flex items-center justify-center relative",style:{minWidth:0},children:[z.jsx(CC,{containerWidth:o.width,containerHeight:o.height,autoScale:!0,isMiniPlayer:!1,onBuildingClick:x,onOpenAuditFile:v}),z.jsx("button",{onClick:()=>u(!c),className:"absolute top-4 right-4 z-50 bg-neutral-800 hover:bg-neutral-700 text-white p-2 rounded-lg shadow-lg",children:z.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c?z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),c&&z.jsxs("div",{className:"w-72 flex-shrink-0 bg-neutral-900 border-l border-neutral-800 flex flex-col overflow-hidden",children:[z.jsxs("div",{className:"p-3 border-b border-neutral-800 flex items-center justify-between",children:[z.jsx("span",{className:"text-sm font-medium text-white",children:"Stats"}),z.jsx("button",{onClick:()=>u(!1),className:"text-neutral-400 hover:text-white",children:z.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),z.jsx(UA,{className:"flex-1 min-h-0",options:{scrollbars:{autoHide:"scroll"}},children:z.jsx(RC,{})})]})]})}window.FARMWORK_STANDALONE_MODE=!0;const rv=document.getElementById("root");if(!rv)throw new Error("Root element not found");const YA=o_.createRoot(rv);YA.render(z.jsx(HA,{}));export{xi as $,v0 as A,Xt as B,Et as C,qe as D,we as E,h0 as F,Ci as G,Dn as H,_i as I,Ym as J,sr as K,Sw as L,Re as M,Fw as N,Ho as O,Bt as P,dt as Q,Fo as R,Iw as S,ll as T,Oh as U,tt as V,Kw as W,qm as X,Zu as Y,Qm as Z,tw as _,Gn as a,yt as a0,J_ as a1,Dy as a2,_0 as a3,Pe as a4,je as a5,nS as a6,AS as a7,vS as a8,VS as a9,YS as aa,ZS as ab,eb as ac,tb as ad,N0 as ae,hg as af,cg as ag,Og as ah,nr as ai,nk as aj,Je as ak,cn as al,S_ as am,Kr as an,Yg as ao,z0 as ap,gS as b,Oo as c,kl as d,Mt as e,ug as f,fS as g,gd as h,g0 as i,qy as j,Un as k,l0 as l,Do as m,WS as n,HS as o,QS as p,JS as q,B_ as r,$l as s,Ne as t,w_ as u,Ul as v,et as w,nb as x,wn as y,By as z};
